(self.webpackChunkztm_clips=self.webpackChunkztm_clips||[]).push([[179],{2011:(lt,ke,B)=>{"use strict";B.d(ke,{Dh:()=>Ee,GT:()=>oe,cc:()=>Oe,hO:()=>Ke,on:()=>K,pX:()=>te,xv:()=>be});var d=B(4650),ae=B(9260),U=B(2122);lt=B.hmd(lt);const de=["ngOnDestroy"],te=(Se,De,$e,je={})=>new Proxy(Se,{get:(Ce,Ye)=>$e.runOutsideAngular(()=>{var st;if(Se[Ye])return!(null===(st=je?.spy)||void 0===st)&&st.get&&je.spy.get(Ye,Se[Ye]),Se[Ye];if(de.indexOf(Ye)>-1)return()=>{};const Ze=De.toPromise().then(R=>{const V=R&&R[Ye];return"function"==typeof V?V.bind(R):V&&V.then?V.then(he=>$e.run(()=>he)):$e.run(()=>V)});return new Proxy(()=>{},{get:(R,V)=>Ze[V],apply:(R,V,he)=>Ze.then(Le=>{var He;const We=Le&&Le(...he);return!(null===(He=je?.spy)||void 0===He)&&He.apply&&je.spy.apply(Ye,he,We),We})})})}),oe=(Se,De)=>{De.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(je=>{Object.defineProperty(Se.prototype,je,Object.getOwnPropertyDescriptor($e.prototype||$e,je))})})};class we{constructor(De){return De}}const Ee=new d.OlP("angularfire2.app.options"),be=new d.OlP("angularfire2.app.name");function K(Se,De,$e){const Ce="object"==typeof $e&&$e||{};Ce.name=Ce.name||"string"==typeof $e&&$e||"[DEFAULT]";const st=ae.Z.apps.filter(Ze=>Ze&&Ze.name===Ce.name)[0]||De.runOutsideAngular(()=>ae.Z.initializeApp(Se,Ce));try{JSON.stringify(Se)!==JSON.stringify(st.options)&&ne("error",`${st.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new we(st)}const ne=(Se,...De)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Se](...De)},Y={provide:we,useFactory:K,deps:[Ee,d.R0b,[new d.FiY,be]]};let Ke=(()=>{class Se{constructor($e){ae.Z.registerVersion("angularfire",U.q4.full,"core"),ae.Z.registerVersion("angularfire",U.q4.full,"app-compat"),ae.Z.registerVersion("angular",d.q4F.full,$e.toString())}static initializeApp($e,je){return{ngModule:Se,providers:[{provide:Ee,useValue:$e},{provide:be,useValue:je}]}}}return Se.\u0275fac=function($e){return new($e||Se)(d.LFG(d.Lbi))},Se.\u0275mod=d.oAB({type:Se}),Se.\u0275inj=d.cJS({providers:[Y]}),Se})();function Oe(Se,De,$e,je,Ce){const[,Ye,st]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===Se)||[];if(Ye)return function ct(Se,De){try{return Se.toString()===De.toString()}catch{return Se===De}}(Ce,st)||(Ue("error",`${De} was already initialized on the ${$e} Firebase App with different settings.${yt?" You may need to reload as Firebase is not HMR aware.":""}`),Ue("warn",{is:Ce,was:st})),Ye;{const Ze=je();return globalThis.\u0275AngularfireInstanceCache.push([Se,Ze,Ce]),Ze}}const yt=!!lt.hot,Ue=(Se,...De)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Se](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(lt,ke,B)=>{"use strict";B.d(ke,{q4:()=>Us,iC:()=>Su,fc:()=>bd,HU:()=>Ts,vb:()=>Wn,JM:()=>qa});var d=B(4650),ae=B(259),U=B(5861),de=B(9681),te=B(2090),oe=B(4859),we=B(1877),Ee=B(8766);const be="@firebase/installations",K="0.6.4",ne=1e4,Y=`w:${K}`,Ke="FIS_v2",Oe="https://firebaseinstallations.googleapis.com/v1",ct=36e5,De=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(k){return k instanceof te.ZR&&k.code.includes("request-failed")}function je({projectId:k}){return`${Oe}/projects/${k}/installations`}function Ce(k){return{token:k.token,requestStatus:2,expiresIn:Le(k.expiresIn),creationTime:Date.now()}}function Ye(k,M){return st.apply(this,arguments)}function st(){return(st=(0,U.Z)(function*(k,M){const le=(yield M.json()).error;return De.create("request-failed",{requestName:k,serverCode:le.code,serverMessage:le.message,serverStatus:le.status})})).apply(this,arguments)}function Ze({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function V(k){return he.apply(this,arguments)}function he(){return(he=(0,U.Z)(function*(k){const M=yield k();return M.status>=500&&M.status<600?k():M})).apply(this,arguments)}function Le(k){return Number(k.replace("s","000"))}function ge(){return(ge=(0,U.Z)(function*({appConfig:k,heartbeatServiceProvider:M},{fid:H}){const le=je(k),Re=Ze(k),Xe=M.getImmediate({optional:!0});if(Xe){const Yt=yield Xe.getHeartbeatsHeader();Yt&&Re.append("x-firebase-client",Yt)}const Ut={method:"POST",headers:Re,body:JSON.stringify({fid:H,authVersion:Ke,appId:k.appId,sdkVersion:Y})},$t=yield V(()=>fetch(le,Ut));if($t.ok){const Yt=yield $t.json();return{fid:Yt.fid||H,registrationStatus:2,refreshToken:Yt.refreshToken,authToken:Ce(Yt.authToken)}}throw yield Ye("Create Installation",$t)})).apply(this,arguments)}function X(k){return new Promise(M=>{setTimeout(M,k)})}const re=/^[cdef][\w-]{21}$/,ve="";function _e(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const H=function Ge(k){return function Z(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return re.test(H)?H:ve}catch{return ve}}function Be(k){return`${k.appName}!${k.appId}`}const _t=new Map;function et(k,M){const H=Be(k);Ot(H,M),function on(k,M){const H=function Un(){return!yn&&"BroadcastChannel"in self&&(yn=new BroadcastChannel("[Firebase] FID Change"),yn.onmessage=k=>{Ot(k.data.key,k.data.fid)}),yn}();H&&H.postMessage({key:k,fid:M}),function Gn(){0===_t.size&&yn&&(yn.close(),yn=null)}()}(H,M)}function Ot(k,M){const H=_t.get(k);if(H)for(const le of H)le(M)}let yn=null;const ci="firebase-installations-database",Sn=1,Yn="firebase-installations-store";let hr=null;function qn(){return hr||(hr=(0,Ee.X3)(ci,Sn,{upgrade:(k,M)=>{0===M&&k.createObjectStore(Yn)}})),hr}function Xn(k,M){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,U.Z)(function*(k,M){const H=Be(k),Re=(yield qn()).transaction(Yn,"readwrite"),Xe=Re.objectStore(Yn),ht=yield Xe.get(H);return yield Xe.put(M,H),yield Re.done,(!ht||ht.fid!==M.fid)&&et(k,M.fid),M})).apply(this,arguments)}function Ht(k){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,U.Z)(function*(k){const M=Be(k),le=(yield qn()).transaction(Yn,"readwrite");yield le.objectStore(Yn).delete(M),yield le.done})).apply(this,arguments)}function Bn(k,M){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,U.Z)(function*(k,M){const H=Be(k),Re=(yield qn()).transaction(Yn,"readwrite"),Xe=Re.objectStore(Yn),ht=yield Xe.get(H),Ut=M(ht);return void 0===Ut?yield Xe.delete(H):yield Xe.put(Ut,H),yield Re.done,Ut&&(!ht||ht.fid!==Ut.fid)&&et(k,Ut.fid),Ut})).apply(this,arguments)}function nr(k){return Kr.apply(this,arguments)}function Kr(){return Kr=(0,U.Z)(function*(k){let M;const H=yield Bn(k.appConfig,le=>{const Re=function dn(k){return di(k||{fid:_e(),registrationStatus:0})}(le),Xe=function Wt(k,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(De.create("app-offline"))};const H={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},le=function nn(k,M){return vo.apply(this,arguments)}(k,H);return{installationEntry:H,registrationPromise:le}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:sr(k)}:{installationEntry:M}}(k,Re);return M=Xe.registrationPromise,Xe.installationEntry});return H.fid===ve?{installationEntry:yield M}:{installationEntry:H,registrationPromise:M}}),Kr.apply(this,arguments)}function vo(){return vo=(0,U.Z)(function*(k,M){try{const H=yield function We(k,M){return ge.apply(this,arguments)}(k,M);return Xn(k.appConfig,H)}catch(H){throw $e(H)&&409===H.customData.serverCode?yield Ht(k.appConfig):yield Xn(k.appConfig,{fid:M.fid,registrationStatus:0}),H}}),vo.apply(this,arguments)}function sr(k){return yr.apply(this,arguments)}function yr(){return(yr=(0,U.Z)(function*(k){let M=yield Fr(k.appConfig);for(;1===M.registrationStatus;)yield X(100),M=yield Fr(k.appConfig);if(0===M.registrationStatus){const{installationEntry:H,registrationPromise:le}=yield nr(k);return le||H}return M})).apply(this,arguments)}function Fr(k){return Bn(k,M=>{if(!M)throw De.create("installation-not-found");return di(M)})}function di(k){return function es(k){return 1===k.registrationStatus&&k.registrationTime+ne<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function Di(){return(Di=(0,U.Z)(function*({appConfig:k,heartbeatServiceProvider:M},H){const le=function On(k,{fid:M}){return`${je(k)}/${M}/authTokens:generate`}(k,H),Re=function R(k,{refreshToken:M}){const H=Ze(k);return H.append("Authorization",function He(k){return`${Ke} ${k}`}(M)),H}(k,H),Xe=M.getImmediate({optional:!0});if(Xe){const Yt=yield Xe.getHeartbeatsHeader();Yt&&Re.append("x-firebase-client",Yt)}const Ut={method:"POST",headers:Re,body:JSON.stringify({installation:{sdkVersion:Y,appId:k.appId}})},$t=yield V(()=>fetch(le,Ut));if($t.ok)return Ce(yield $t.json());throw yield Ye("Generate Auth Token",$t)})).apply(this,arguments)}function Zr(k){return Vi.apply(this,arguments)}function Vi(){return Vi=(0,U.Z)(function*(k,M=!1){let H;const le=yield Bn(k.appConfig,Xe=>{if(!pn(Xe))throw De.create("not-registered");const ht=Xe.authToken;if(!M&&function Yr(k){return 2===k.requestStatus&&!function me(k){const M=Date.now();return M<k.creationTime||k.creationTime+k.expiresIn<M+ct}(k)}(ht))return Xe;if(1===ht.requestStatus)return H=function xt(k,M){return gt.apply(this,arguments)}(k,M),Xe;{if(!navigator.onLine)throw De.create("app-offline");const Ut=function ce(k){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:M})}(Xe);return H=function Jt(k,M){return an.apply(this,arguments)}(k,Ut),Ut}});return H?yield H:le.authToken}),Vi.apply(this,arguments)}function gt(){return(gt=(0,U.Z)(function*(k,M){let H=yield jt(k.appConfig);for(;1===H.authToken.requestStatus;)yield X(100),H=yield jt(k.appConfig);const le=H.authToken;return 0===le.requestStatus?Zr(k,M):le})).apply(this,arguments)}function jt(k){return Bn(k,M=>{if(!pn(M))throw De.create("not-registered");return function Ae(k){return 1===k.requestStatus&&k.requestTime+ne<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function an(){return an=(0,U.Z)(function*(k,M){try{const H=yield function $n(k,M){return Di.apply(this,arguments)}(k,M),le=Object.assign(Object.assign({},M),{authToken:H});return yield Xn(k.appConfig,le),H}catch(H){if(!$e(H)||401!==H.customData.serverCode&&404!==H.customData.serverCode){const le=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield Xn(k.appConfig,le)}else yield Ht(k.appConfig);throw H}}),an.apply(this,arguments)}function pn(k){return void 0!==k&&2===k.registrationStatus}function ze(){return(ze=(0,U.Z)(function*(k){const M=k,{installationEntry:H,registrationPromise:le}=yield nr(M);return le?le.catch(console.error):Zr(M).catch(console.error),H.fid})).apply(this,arguments)}function Mt(){return Mt=(0,U.Z)(function*(k,M=!1){const H=k;return yield function rr(k){return $.apply(this,arguments)}(H),(yield Zr(H,M)).token}),Mt.apply(this,arguments)}function $(){return($=(0,U.Z)(function*(k){const{registrationPromise:M}=yield nr(k);M&&(yield M)})).apply(this,arguments)}function hi(k){return De.create("missing-app-config-values",{valueName:k})}const Hi="installations",Qn=k=>{const M=k.getProvider("app").getImmediate(),H=function $i(k){if(!k||!k.options)throw hi("App Configuration");if(!k.name)throw hi("App Name");const M=["projectId","apiKey","appId"];for(const H of M)if(!k.options[H])throw hi(H);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(M);return{app:M,appConfig:H,heartbeatServiceProvider:(0,de._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},Ps=k=>{const M=k.getProvider("app").getImmediate(),H=(0,de._getProvider)(M,Hi).getImmediate();return{getId:()=>function ot(k){return ze.apply(this,arguments)}(H),getToken:Re=>function Pt(k){return Mt.apply(this,arguments)}(H,Re)}};(function Gi(){(0,de._registerComponent)(new oe.wA(Hi,Qn,"PUBLIC")),(0,de._registerComponent)(new oe.wA("installations-internal",Ps,"PRIVATE"))})(),(0,de.registerVersion)(be,K),(0,de.registerVersion)(be,K,"esm2017");const En="@firebase/remote-config",lr=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Tl{constructor(M,H,le,Re){this.client=M,this.storage=H,this.storageCache=le,this.logger=Re}isCachedDataFresh(M,H){if(!H)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const le=Date.now()-H,Re=le<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${le}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${Re}.`),Re}fetch(M){var H=this;return(0,U.Z)(function*(){const[le,Re]=yield Promise.all([H.storage.getLastSuccessfulFetchTimestampMillis(),H.storage.getLastSuccessfulFetchResponse()]);if(Re&&H.isCachedDataFresh(M.cacheMaxAgeMillis,le))return Re;M.eTag=Re&&Re.eTag;const Xe=yield H.client.fetch(M),ht=[H.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Xe.status&&ht.push(H.storage.setLastSuccessfulFetchResponse(Xe)),yield Promise.all(ht),Xe})()}}function Xc(k=navigator){return k.languages&&k.languages[0]||k.language}class Jn{constructor(M,H,le,Re,Xe,ht){this.firebaseInstallations=M,this.sdkVersion=H,this.namespace=le,this.projectId=Re,this.apiKey=Xe,this.appId=ht}fetch(M){var H=this;return(0,U.Z)(function*(){const[le,Re]=yield Promise.all([H.firebaseInstallations.getId(),H.firebaseInstallations.getToken()]),ht=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${H.projectId}/namespaces/${H.namespace}:fetch?key=${H.apiKey}`,Ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},$t={sdk_version:H.sdkVersion,app_instance_id:le,app_instance_id_token:Re,app_id:H.appId,language_code:Xc()},Yt={method:"POST",headers:Ut,body:JSON.stringify($t)},kn=fetch(ht,Yt),rn=new Promise((bi,Ki)=>{M.signal.addEventListener(()=>{const Bs=new Error("The operation was aborted.");Bs.name="AbortError",Ki(Bs)})});let Wi;try{yield Promise.race([kn,rn]),Wi=yield kn}catch(bi){let Ki="fetch-client-network";throw"AbortError"===bi?.name&&(Ki="fetch-timeout"),lr.create(Ki,{originalErrorMessage:bi?.message})}let Br=Wi.status;const Mo=Wi.headers.get("ETag")||void 0;let Cu,Wa;if(200===Wi.status){let bi;try{bi=yield Wi.json()}catch(Ki){throw lr.create("fetch-client-parse",{originalErrorMessage:Ki?.message})}Cu=bi.entries,Wa=bi.state}if("INSTANCE_STATE_UNSPECIFIED"===Wa?Br=500:"NO_CHANGE"===Wa?Br=304:("NO_TEMPLATE"===Wa||"EMPTY_CONFIG"===Wa)&&(Cu={}),304!==Br&&200!==Br)throw lr.create("fetch-status",{httpStatus:Br});return{status:Br,eTag:Mo,config:Cu}})()}}class ys{constructor(M,H){this.client=M,this.storage=H}fetch(M){var H=this;return(0,U.Z)(function*(){const le=(yield H.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return H.attemptFetch(M,le)})()}attemptFetch(M,{throttleEndTimeMillis:H,backoffCount:le}){var Re=this;return(0,U.Z)(function*(){yield function Ma(k,M){return new Promise((H,le)=>{const Re=Math.max(M-Date.now(),0),Xe=setTimeout(H,Re);k.addEventListener(()=>{clearTimeout(Xe),le(lr.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,H);try{const Xe=yield Re.client.fetch(M);return yield Re.storage.deleteThrottleMetadata(),Xe}catch(Xe){if(!function qu(k){if(!(k instanceof te.ZR&&k.customData))return!1;const M=Number(k.customData.httpStatus);return 429===M||500===M||503===M||504===M}(Xe))throw Xe;const ht={throttleEndTimeMillis:Date.now()+(0,te.$s)(le),backoffCount:le+1};return yield Re.storage.setThrottleMetadata(ht),Re.attemptFetch(M,ht)}})()}}class Xo{constructor(M,H,le,Re,Xe){this.app=M,this._client=H,this._storageCache=le,this._storage=Re,this._logger=Xe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qr(k,M){const H=k.target.error||void 0;return lr.create(M,{originalErrorMessage:H&&H?.message})}const eo="app_namespace_store";class ou{constructor(M,H,le,Re=function Jc(){return new Promise((k,M)=>{try{const H=indexedDB.open("firebase_remote_config",1);H.onerror=le=>{M(Qr(le,"storage-open"))},H.onsuccess=le=>{k(le.target.result)},H.onupgradeneeded=le=>{0===le.oldVersion&&le.target.result.createObjectStore(eo,{keyPath:"compositeKey"})}}catch(H){M(lr.create("storage-open",{originalErrorMessage:H?.message}))}})}()){this.appId=M,this.appName=H,this.namespace=le,this.openDbPromise=Re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var H=this;return(0,U.Z)(function*(){const le=yield H.openDbPromise;return new Promise((Re,Xe)=>{const Ut=le.transaction([eo],"readonly").objectStore(eo),$t=H.createCompositeKey(M);try{const Yt=Ut.get($t);Yt.onerror=kn=>{Xe(Qr(kn,"storage-get"))},Yt.onsuccess=kn=>{const rn=kn.target.result;Re(rn?rn.value:void 0)}}catch(Yt){Xe(lr.create("storage-get",{originalErrorMessage:Yt?.message}))}})})()}set(M,H){var le=this;return(0,U.Z)(function*(){const Re=yield le.openDbPromise;return new Promise((Xe,ht)=>{const $t=Re.transaction([eo],"readwrite").objectStore(eo),Yt=le.createCompositeKey(M);try{const kn=$t.put({compositeKey:Yt,value:H});kn.onerror=rn=>{ht(Qr(rn,"storage-set"))},kn.onsuccess=()=>{Xe()}}catch(kn){ht(lr.create("storage-set",{originalErrorMessage:kn?.message}))}})})()}delete(M){var H=this;return(0,U.Z)(function*(){const le=yield H.openDbPromise;return new Promise((Re,Xe)=>{const Ut=le.transaction([eo],"readwrite").objectStore(eo),$t=H.createCompositeKey(M);try{const Yt=Ut.delete($t);Yt.onerror=kn=>{Xe(Qr(kn,"storage-delete"))},Yt.onsuccess=()=>{Re()}}catch(Yt){Xe(lr.create("storage-delete",{originalErrorMessage:Yt?.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class El{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,U.Z)(function*(){const H=M.storage.getLastFetchStatus(),le=M.storage.getLastSuccessfulFetchTimestampMillis(),Re=M.storage.getActiveConfig(),Xe=yield H;Xe&&(M.lastFetchStatus=Xe);const ht=yield le;ht&&(M.lastSuccessfulFetchTimestampMillis=ht);const Ut=yield Re;Ut&&(M.activeConfig=Ut)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function lu(){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,U.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}!function gi(){(0,de._registerComponent)(new oe.wA("remote-config",function k(M,{instanceIdentifier:H}){const le=M.getProvider("app").getImmediate(),Re=M.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw lr.create("registration-window");if(!(0,te.hl)())throw lr.create("indexed-db-unavailable");const{projectId:Xe,apiKey:ht,appId:Ut}=le.options;if(!Xe)throw lr.create("registration-project-id");if(!ht)throw lr.create("registration-api-key");if(!Ut)throw lr.create("registration-app-id");const $t=new ou(Ut,le.name,H=H||"firebase"),Yt=new El($t),kn=new we.Yd(En);kn.logLevel=we.in.ERROR;const rn=new Jn(Re,de.SDK_VERSION,H,Xe,ht,Ut),Wi=new ys(rn,$t),Br=new Tl(Wi,$t,Yt,kn),Mo=new Xo(le,Br,Yt,$t,kn);return function iu(k){const M=(0,te.m9)(k);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Mo),Mo},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(En,"0.4.4"),(0,de.registerVersion)(En,"0.4.4","esm2017")}();const zh="/firebase-messaging-sw.js",Eo="/firebase-cloud-messaging-push-scope",wl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uu="https://fcmregistrations.googleapis.com/v1",ed="google.c.a.c_id",zp="google.c.a.c_l",qh="google.c.a.ts",Ty="google.c.a.e";var Oa=(()=>{return(k=Oa||(Oa={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",Oa;var k})();function to(k){const M=new Uint8Array(k);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ey(k){const H=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),le=atob(H),Re=new Uint8Array(le.length);for(let Xe=0;Xe<le.length;++Xe)Re[Xe]=le.charCodeAt(Xe);return Re}const Jo="fcm_token_details_db",cu=5,vs="fcm_token_object_Store";function Wh(){return Wh=(0,U.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Xe=>Xe.name).includes(Jo))return null;let M=null;return(yield(0,Ee.X3)(Jo,cu,{upgrade:(le=(0,U.Z)(function*(Re,Xe,ht,Ut){var $t;if(Xe<2||!Re.objectStoreNames.contains(vs))return;const Yt=Ut.objectStore(vs),kn=yield Yt.index("fcmSenderId").get(k);if(yield Yt.clear(),kn)if(2===Xe){const rn=kn;if(!rn.auth||!rn.p256dh||!rn.endpoint)return;M={token:rn.fcmToken,createTime:null!==($t=rn.createTime)&&void 0!==$t?$t:Date.now(),subscriptionOptions:{auth:rn.auth,p256dh:rn.p256dh,endpoint:rn.endpoint,swScope:rn.swScope,vapidKey:"string"==typeof rn.vapidKey?rn.vapidKey:to(rn.vapidKey)}}}else if(3===Xe){const rn=kn;M={token:rn.fcmToken,createTime:rn.createTime,subscriptionOptions:{auth:to(rn.auth),p256dh:to(rn.p256dh),endpoint:rn.endpoint,swScope:rn.swScope,vapidKey:to(rn.vapidKey)}}}else if(4===Xe){const rn=kn;M={token:rn.fcmToken,createTime:rn.createTime,subscriptionOptions:{auth:to(rn.auth),p256dh:to(rn.p256dh),endpoint:rn.endpoint,swScope:rn.swScope,vapidKey:to(rn.vapidKey)}}}}),function(Xe,ht,Ut,$t){return le.apply(this,arguments)})})).close(),yield(0,Ee.Lj)(Jo),yield(0,Ee.Lj)("fcm_vapid_details_db"),yield(0,Ee.Lj)("undefined"),function ea(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:M}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}(M)?M:null;var le}),Wh.apply(this,arguments)}const du="firebase-messaging-database",td=1,ta="firebase-messaging-store";let Kh=null;function hu(){return Kh||(Kh=(0,Ee.X3)(du,td,{upgrade:(k,M)=>{0===M&&k.createObjectStore(ta)}})),Kh}function fu(k){return Ra.apply(this,arguments)}function Ra(){return Ra=(0,U.Z)(function*(k){const M=Pa(k),le=yield(yield hu()).transaction(ta).objectStore(ta).get(M);if(le)return le;{const Re=yield function qp(k){return Wh.apply(this,arguments)}(k.appConfig.senderId);if(Re)return yield Cl(k,Re),Re}}),Ra.apply(this,arguments)}function Cl(k,M){return xl.apply(this,arguments)}function xl(){return(xl=(0,U.Z)(function*(k,M){const H=Pa(k),Re=(yield hu()).transaction(ta,"readwrite");return yield Re.objectStore(ta).put(M,H),yield Re.done,M})).apply(this,arguments)}function ki(){return(ki=(0,U.Z)(function*(k){const M=Pa(k),le=(yield hu()).transaction(ta,"readwrite");yield le.objectStore(ta).delete(M),yield le.done})).apply(this,arguments)}function Pa({appConfig:k}){return k.appId}const Pn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rd(k,M){return Na.apply(this,arguments)}function Na(){return(Na=(0,U.Z)(function*(k,M){const H=yield Yh(k),le=pu(M),Re={method:"POST",headers:H,body:JSON.stringify(le)};let Xe;try{Xe=yield(yield fetch(mi(k.appConfig),Re)).json()}catch(ht){throw Pn.create("token-subscribe-failed",{errorInfo:ht?.toString()})}if(Xe.error)throw Pn.create("token-subscribe-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw Pn.create("token-subscribe-no-token");return Xe.token})).apply(this,arguments)}function Ku(){return(Ku=(0,U.Z)(function*(k,M){const H=yield Yh(k),le=pu(M.subscriptionOptions),Re={method:"PATCH",headers:H,body:JSON.stringify(le)};let Xe;try{Xe=yield(yield fetch(`${mi(k.appConfig)}/${M.token}`,Re)).json()}catch(ht){throw Pn.create("token-update-failed",{errorInfo:ht?.toString()})}if(Xe.error)throw Pn.create("token-update-failed",{errorInfo:Xe.error.message});if(!Xe.token)throw Pn.create("token-update-no-token");return Xe.token})).apply(this,arguments)}function na(k,M){return ra.apply(this,arguments)}function ra(){return(ra=(0,U.Z)(function*(k,M){const le={method:"DELETE",headers:yield Yh(k)};try{const Xe=yield(yield fetch(`${mi(k.appConfig)}/${M}`,le)).json();if(Xe.error)throw Pn.create("token-unsubscribe-failed",{errorInfo:Xe.error.message})}catch(Re){throw Pn.create("token-unsubscribe-failed",{errorInfo:Re?.toString()})}})).apply(this,arguments)}function mi({projectId:k}){return`${uu}/projects/${k}/registrations`}function Yh(k){return ia.apply(this,arguments)}function ia(){return(ia=(0,U.Z)(function*({appConfig:k,installations:M}){const H=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${H}`})})).apply(this,arguments)}function pu({p256dh:k,auth:M,endpoint:H,vapidKey:le}){const Re={web:{endpoint:H,auth:M,p256dh:k}};return le!==wl&&(Re.web.applicationPubKey=le),Re}const no=6048e5;function Zu(){return Zu=(0,U.Z)(function*(k){const M=yield function Xu(k,M){return od.apply(this,arguments)}(k.swRegistration,k.vapidKey),H={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:M.endpoint,auth:to(M.getKey("auth")),p256dh:to(M.getKey("p256dh"))},le=yield fu(k.firebaseDependencies);if(le){if(function ad(k,M){return M.vapidKey===k.vapidKey&&M.endpoint===k.endpoint&&M.auth===k.auth&&M.p256dh===k.p256dh}(le.subscriptionOptions,H))return Date.now()>=le.createTime+no?function Qh(k,M){return id.apply(this,arguments)}(k,{token:le.token,createTime:Date.now(),subscriptionOptions:H}):le.token;try{yield na(k.firebaseDependencies,le.token)}catch(Re){console.warn(Re)}return sd(k.firebaseDependencies,H)}return sd(k.firebaseDependencies,H)}),Zu.apply(this,arguments)}function Yu(){return Yu=(0,U.Z)(function*(k){const M=yield fu(k.firebaseDependencies);M&&(yield na(k.firebaseDependencies,M.token),yield function Zh(k){return ki.apply(this,arguments)}(k.firebaseDependencies));const H=yield k.swRegistration.pushManager.getSubscription();return!H||H.unsubscribe()}),Yu.apply(this,arguments)}function id(){return id=(0,U.Z)(function*(k,M){try{const H=yield function Xr(k,M){return Ku.apply(this,arguments)}(k.firebaseDependencies,M),le=Object.assign(Object.assign({},M),{token:H,createTime:Date.now()});return yield Cl(k.firebaseDependencies,le),H}catch(H){throw yield function hn(k){return Yu.apply(this,arguments)}(k),H}}),id.apply(this,arguments)}function sd(k,M){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,U.Z)(function*(k,M){const le={token:yield rd(k,M),createTime:Date.now(),subscriptionOptions:M};return yield Cl(k,le),le.token})).apply(this,arguments)}function od(){return(od=(0,U.Z)(function*(k,M){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ey(M)})})).apply(this,arguments)}function mt(k){const M={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function Nn(k,M){if(!M.notification)return;k.notification={};const H=M.notification.title;H&&(k.notification.title=H);const le=M.notification.body;le&&(k.notification.body=le);const Re=M.notification.image;Re&&(k.notification.image=Re);const Xe=M.notification.icon;Xe&&(k.notification.icon=Xe)}(M,k),function vr(k,M){M.data&&(k.data=M.data)}(M,k),function Wp(k,M){var H,le,Re,Xe,ht;if(!(M.fcmOptions||null!==(H=M.notification)&&void 0!==H&&H.click_action))return;k.fcmOptions={};const Ut=null!==(Re=null===(le=M.fcmOptions)||void 0===le?void 0:le.link)&&void 0!==Re?Re:null===(Xe=M.notification)||void 0===Xe?void 0:Xe.click_action;Ut&&(k.fcmOptions.link=Ut);const $t=null===(ht=M.fcmOptions)||void 0===ht?void 0:ht.analytics_label;$t&&(k.fcmOptions.analyticsLabel=$t)}(M,k),M}function Xh(k,M){const H=[];for(let le=0;le<k.length;le++)H.push(k.charAt(le)),le<M.length&&H.push(M.charAt(le));return H.join("")}function is(k){return Pn.create("missing-app-config-values",{valueName:k})}Xh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Jh{constructor(M,H,le){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Re=function Ju(k){if(!k||!k.options)throw is("App Configuration Object");if(!k.name)throw is("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:H}=k;for(const le of M)if(!H[le])throw is(le);return{appName:k.name,projectId:H.projectId,apiKey:H.apiKey,appId:H.appId,senderId:H.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:Re,installations:H,analyticsProvider:le}}_delete(){return Promise.resolve()}}function Il(k){return ef.apply(this,arguments)}function ef(){return(ef=(0,U.Z)(function*(k){try{k.swRegistration=yield navigator.serviceWorker.register(zh,{scope:Eo}),k.swRegistration.update().catch(()=>{})}catch(M){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:M?.message})}})).apply(this,arguments)}function ld(){return(ld=(0,U.Z)(function*(k,M){if(!M&&!k.swRegistration&&(yield Il(k)),M||!k.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");k.swRegistration=M}})).apply(this,arguments)}function Fs(){return(Fs=(0,U.Z)(function*(k,M){M?k.vapidKey=M:k.vapidKey||(k.vapidKey=wl)})).apply(this,arguments)}function ro(){return ro=(0,U.Z)(function*(k,M){if(!navigator)throw Pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pn.create("permission-blocked");return yield function ei(k,M){return Fs.apply(this,arguments)}(k,M?.vapidKey),yield function Kp(k,M){return ld.apply(this,arguments)}(k,M?.serviceWorkerRegistration),function gu(k){return Zu.apply(this,arguments)}(k)}),ro.apply(this,arguments)}function tf(){return(tf=(0,U.Z)(function*(k,M,H){const le=function ud(k){switch(k){case Oa.NOTIFICATION_CLICKED:return"notification_open";case Oa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(M);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(le,{message_id:H[ed],message_name:H[zp],message_time:H[qh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ec(){return ec=(0,U.Z)(function*(k,M){const H=M.data;if(!H.isFirebaseMessaging)return;k.onMessageHandler&&H.messageType===Oa.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(mt(H)):k.onMessageHandler.next(mt(H)));const le=H.data;(function Jr(k){return"object"==typeof k&&!!k&&ed in k})(le)&&"1"===le[Ty]&&(yield function Mi(k,M,H){return tf.apply(this,arguments)}(k,H.messageType,le))}),ec.apply(this,arguments)}const tc="@firebase/messaging",rf=k=>{const M=new Jh(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",H=>function nf(k,M){return ec.apply(this,arguments)}(M,H)),M},wo=k=>{const M=k.getProvider("messaging").getImmediate();return{getToken:le=>function mu(k,M){return ro.apply(this,arguments)}(M,le)}};function sf(){return nc.apply(this,arguments)}function nc(){return(nc=(0,U.Z)(function*(){try{yield(0,te.eu)()}catch{return!1}return typeof window<"u"&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Zp(){(0,de._registerComponent)(new oe.wA("messaging",rf,"PUBLIC")),(0,de._registerComponent)(new oe.wA("messaging-internal",wo,"PRIVATE")),(0,de.registerVersion)(tc,"0.12.4"),(0,de.registerVersion)(tc,"0.12.4","esm2017")}();const sa="analytics",_r="firebase_id",Jp="origin",lf=6e4,La="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dd="https://www.googletagmanager.com/gtag/js",_i=new we.Yd("@firebase/analytics");function eg(k){return Promise.all(k.map(M=>M.catch(H=>H)))}function Dl(){return(Dl=(0,U.Z)(function*(k,M,H,le,Re,Xe){const ht=le[Re];try{if(ht)yield M[ht];else{const $t=(yield eg(H)).find(Yt=>Yt.measurementId===Re);$t&&(yield M[$t.appId])}}catch(Ut){_i.error(Ut)}k("config",Re,Xe)})).apply(this,arguments)}function Al(){return(Al=(0,U.Z)(function*(k,M,H,le,Re){try{let Xe=[];if(Re&&Re.send_to){let ht=Re.send_to;Array.isArray(ht)||(ht=[ht]);const Ut=yield eg(H);for(const $t of ht){const Yt=Ut.find(rn=>rn.measurementId===$t),kn=Yt&&M[Yt.appId];if(!kn){Xe=[];break}Xe.push(kn)}}0===Xe.length&&(Xe=Object.values(M)),yield Promise.all(Xe),k("event",le,Re||{})}catch(Xe){_i.error(Xe)}})).apply(this,arguments)}const zi=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),rc=30,rg=new class oa{constructor(M={},H=1e3){this.throttleMetadata=M,this.intervalMillis=H}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,H){this.throttleMetadata[M]=H}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Sy(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function Fa(){return(Fa=(0,U.Z)(function*(k){var M;const{appId:H,apiKey:le}=k,Re={method:"GET",headers:Sy(le)},Xe=La.replace("{app-id}",H),ht=yield fetch(Xe,Re);if(200!==ht.status&&304!==ht.status){let Ut="";try{const $t=yield ht.json();null!==(M=$t.error)&&void 0!==M&&M.message&&(Ut=$t.error.message)}catch{}throw zi.create("config-fetch-failed",{httpStatus:ht.status,responseMessage:Ut})}return ht.json()})).apply(this,arguments)}function aa(){return(aa=(0,U.Z)(function*(k,M=rg,H){const{appId:le,apiKey:Re,measurementId:Xe}=k.options;if(!le)throw zi.create("no-app-id");if(!Re){if(Xe)return{measurementId:Xe,appId:le};throw zi.create("no-api-key")}const ht=M.getThrottleMetadata(le)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ut=new _u;return setTimeout((0,U.Z)(function*(){Ut.abort()}),void 0!==H?H:lf),xo({appId:le,apiKey:Re,measurementId:Xe},ht,Ut,M)})).apply(this,arguments)}function xo(k,M,H){return kl.apply(this,arguments)}function kl(){return kl=(0,U.Z)(function*(k,{throttleEndTimeMillis:M,backoffCount:H},le,Re=rg){var Xe;const{appId:ht,measurementId:Ut}=k;try{yield function la(k,M){return new Promise((H,le)=>{const Re=Math.max(M-Date.now(),0),Xe=setTimeout(H,Re);k.addEventListener(()=>{clearTimeout(Xe),le(zi.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(le,M)}catch($t){if(Ut)return _i.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ut} provided in the "measurementId" field in the local Firebase config. [${$t?.message}]`),{appId:ht,measurementId:Ut};throw $t}try{const $t=yield function io(k){return Fa.apply(this,arguments)}(k);return Re.deleteThrottleMetadata(ht),$t}catch($t){const Yt=$t;if(!function uf(k){if(!(k instanceof te.ZR&&k.customData))return!1;const M=Number(k.customData.httpStatus);return 429===M||500===M||503===M||504===M}(Yt)){if(Re.deleteThrottleMetadata(ht),Ut)return _i.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ut} provided in the "measurementId" field in the local Firebase config. [${Yt?.message}]`),{appId:ht,measurementId:Ut};throw $t}const kn=503===Number(null===(Xe=Yt?.customData)||void 0===Xe?void 0:Xe.httpStatus)?(0,te.$s)(H,Re.intervalMillis,rc):(0,te.$s)(H,Re.intervalMillis),rn={throttleEndTimeMillis:Date.now()+kn,backoffCount:H+1};return Re.setThrottleMetadata(ht,rn),_i.debug(`Calling attemptFetch again in ${kn} millis`),xo(k,rn,le,Re)}}),kl.apply(this,arguments)}class _u{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}let Ml,ca;function bu(){return(bu=(0,U.Z)(function*(k,M,H,le,Re){if(Re&&Re.global)k("event",H,le);else{const Xe=yield M;k("event",H,Object.assign(Object.assign({},le),{send_to:Xe}))}})).apply(this,arguments)}function cc(){return(cc=(0,U.Z)(function*(){if(!(0,te.hl)())return _i.warn(zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(k){return _i.warn(zi.create("indexeddb-unavailable",{errorInfo:k?.toString()}).message),!1}return!0})).apply(this,arguments)}function Tu(){return Tu=(0,U.Z)(function*(k,M,H,le,Re,Xe,ht){var Ut;const $t=function Sr(k){return aa.apply(this,arguments)}(k);$t.then(Br=>{H[Br.measurementId]=Br.appId,k.options.measurementId&&Br.measurementId!==k.options.measurementId&&_i.warn(`The measurement ID in the local Firebase config (${k.options.measurementId}) does not match the measurement ID fetched from the server (${Br.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Br=>_i.error(Br)),M.push($t);const Yt=function uc(){return cc.apply(this,arguments)}().then(Br=>{if(Br)return le.getId()}),[kn,rn]=yield Promise.all([$t,Yt]);(function ng(k){const M=window.document.getElementsByTagName("script");for(const H of Object.values(M))if(H.src&&H.src.includes(dd)&&H.src.includes(k))return H;return null})(Xe)||function hd(k,M){const H=document.createElement("script");H.src=`${dd}?l=${k}&id=${M}`,H.async=!0,document.head.appendChild(H)}(Xe,kn.measurementId),ca&&(Re("consent","default",ca),function Ol(k){ca=k}(void 0)),Re("js",new Date);const Wi=null!==(Ut=ht?.config)&&void 0!==Ut?Ut:{};return Wi[Jp]="firebase",Wi.update=!0,null!=rn&&(Wi[_r]=rn),Re("config",kn.measurementId,Wi),Ml&&(Re("set",Ml),function cf(k){Ml=k}(void 0)),kn.measurementId}),Tu.apply(this,arguments)}class ig{constructor(M){this.app=M}_delete(){return delete _s[this.app.options.appId],Promise.resolve()}}let _s={},so=[];const dc={};let da,ha,Eu="dataLayer",gd="gtag",Ba=!1;function md(k,M,H){!function sg(){const k=[];if((0,te.ru)()&&k.push("This is a browser extension environment."),(0,te.zI)()||k.push("Cookies are not available."),k.length>0){const M=k.map((le,Re)=>`(${Re+1}) ${le}`).join(" "),H=zi.create("invalid-analytics-context",{errorInfo:M});_i.warn(H.message)}}();const le=k.options.appId;if(!le)throw zi.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw zi.create("no-api-key");_i.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=_s[le])throw zi.create("already-exists",{id:le});if(!Ba){!function fd(k){let M=[];Array.isArray(window[k])?M=window[k]:window[k]=M}(Eu);const{wrappedGtag:Xe,gtagCore:ht}=function Co(k,M,H,le,Re){let Xe=function(...ht){window[le].push(arguments)};return window[Re]&&"function"==typeof window[Re]&&(Xe=window[Re]),window[Re]=function So(k,M,H,le){function Xe(){return Xe=(0,U.Z)(function*(ht,Ut,$t){try{"event"===ht?yield function tg(k,M,H,le,Re){return Al.apply(this,arguments)}(k,M,H,Ut,$t):"config"===ht?yield function vu(k,M,H,le,Re,Xe){return Dl.apply(this,arguments)}(k,M,H,le,Ut,$t):"consent"===ht?k("consent","update",$t):k("set",Ut)}catch(Yt){_i.error(Yt)}}),Xe.apply(this,arguments)}return function Re(ht,Ut,$t){return Xe.apply(this,arguments)}}(Xe,k,M,H),{gtagCore:Xe,wrappedGtag:window[Re]}}(_s,so,dc,Eu,gd);ha=Xe,da=ht,Ba=!0}return _s[le]=function Ua(k,M,H,le,Re,Xe,ht){return Tu.apply(this,arguments)}(k,so,dc,M,da,Eu,H),new ig(k)}function $a(){return Do.apply(this,arguments)}function Do(){return(Do=(0,U.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch{return!1}})).apply(this,arguments)}const fa="@firebase/analytics";!function xy(){(0,de._registerComponent)(new oe.wA(sa,(M,{options:H})=>md(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),H),"PUBLIC")),(0,de._registerComponent)(new oe.wA("analytics-internal",function k(M){try{const H=M.getProvider(sa).getImmediate();return{logEvent:(le,Re,Xe)=>function ir(k,M,H,le){k=(0,te.m9)(k),function ic(k,M,H,le,Re){return bu.apply(this,arguments)}(ha,_s[k.app.options.appId],M,H,le).catch(Re=>_i.error(Re))}(H,le,Re,Xe)}}catch(H){throw zi.create("interop-component-reg-failed",{reason:H})}},"PRIVATE")),(0,de.registerVersion)(fa,"0.9.4"),(0,de.registerVersion)(fa,"0.9.4","esm2017")}();var fc=B(4408),ug=B(7565);const cg=new class Ha extends ug.v{}(class lg extends fc.o{constructor(M,H){super(M,H),this.scheduler=M,this.work=H}schedule(M,H=0){return H>0?super.schedule(M,H):(this.delay=H,this.state=M,this.scheduler.flush(this),this)}execute(M,H){return H>0||this.closed?super.execute(M,H):this._execute(M,H)}requestAsyncId(M,H,le=0){return null!=le&&le>0||null==le&&this.delay>0?super.requestAsyncId(M,H,le):(M.flush(this),0)}});var Or=B(4986),Pl=B(8505),js=B(5363),ff=B(9468);const Us=new d.GfV("7.5.0"),Ao="__angularfire_symbol__analyticsIsSupportedValue",vd="__angularfire_symbol__analyticsIsSupported",Ga="__angularfire_symbol__remoteConfigIsSupportedValue",za="__angularfire_symbol__remoteConfigIsSupported",pf="__angularfire_symbol__messagingIsSupportedValue",dg="__angularfire_symbol__messagingIsSupported";function qa(k,M,H){if(M){if(1===M.length)return M[0];const Xe=M.filter(ht=>ht.app===H);if(1===Xe.length)return Xe[0]}return H.container.getProvider(k).getImmediate({optional:!0})}globalThis[vd]||(globalThis[vd]=$a().then(k=>globalThis[Ao]=k).catch(()=>globalThis[Ao]=!1)),globalThis[dg]||(globalThis[dg]=sf().then(k=>globalThis[pf]=k).catch(()=>globalThis[pf]=!1)),globalThis[za]||(globalThis[za]=lu().then(k=>globalThis[Ga]=k).catch(()=>globalThis[Ga]=!1));const Wn=(k,M)=>{const H=M?[M]:(0,ae.C6)(),le=[];return H.forEach(Re=>{Re.container.getProvider(k).instances.forEach(ht=>{le.includes(ht)||le.push(ht)})}),le};function bs(){}class Vt{constructor(M,H=cg){this.zone=M,this.delegate=H}now(){return this.delegate.now()}schedule(M,H,le){const Re=this.zone;return this.delegate.schedule(function(ht){Re.runGuarded(()=>{M.apply(this,[ht])})},H,le)}}class pa{constructor(M){this.zone=M,this.task=null}call(M,H){const le=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs)),H.pipe((0,Pl.b)({next:le,complete:le,error:le})).subscribe(M).add(le)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ts=(()=>{class k{constructor(H){this.ngZone=H,this.outsideAngular=H.runOutsideAngular(()=>new Vt(Zone.current)),this.insideAngular=H.run(()=>new Vt(Zone.current,Or.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(H){return new(H||k)(d.LFG(d.R0b))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function ko(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function bd(k){return k.pipe((0,js.Q)(ko().outsideAngular))}function Su(k){return ko(),function Ll(k){return function(H){return(H=H.lift(new pa(k.ngZone))).pipe((0,ff.R)(k.outsideAngular),(0,js.Q)(k.insideAngular))}}(ko())(k)}},3327:(lt,ke,B)=>{"use strict";B.r(ke),B.d(ke,{defaultOptions:()=>U,fetchFile:()=>K,getCreateFFmpegCore:()=>Ee});const U={corePath:`https://unpkg.com/@ffmpeg/core@${B(3681).devDependencies["@ffmpeg/core"].substring(1)}/dist/ffmpeg-core.js`};var de=B(5861),te=B(6945),oe=B(3630);const we=function(){var ne=(0,de.Z)(function*(Y,Ke){(0,te.log)("info",`fetch ${Y}`);const Oe=yield(yield fetch(Y)).arrayBuffer();(0,te.log)("info",`${Y} file size = ${Oe.byteLength} bytes`);const ct=new Blob([Oe],{type:Ke}),yt=URL.createObjectURL(ct);return(0,te.log)("info",`${Y} blob URL = ${yt}`),yt});return function(Ke,Oe){return ne.apply(this,arguments)}}(),Ee=function(){var ne=(0,de.Z)(function*({corePath:Y,workerPath:Ke,wasmPath:Oe}){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){if("string"!=typeof Y)throw Error("corePath should be a string!");const De=new URL(Y,"file:///D:/udemy-learning/ztm-clips/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,$e=yield we(De,"application/javascript"),je=yield we(void 0!==Oe?Oe:De.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),Ce=yield we(void 0!==Ke?Ke:De.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(Ye=>{if(globalThis.importScripts($e),typeof createFFmpegCore>"u")throw Error((0,oe.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(De));(0,te.log)("info","ffmpeg-core.js script loaded"),Ye({createFFmpegCore,corePath:$e,wasmPath:je,workerPath:Ce})}):((0,te.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:$e,wasmPath:je,workerPath:Ce}))}if("string"!=typeof Y)throw Error("corePath should be a string!");const ct=new URL(Y,"file:///D:/udemy-learning/ztm-clips/node_modules/@ffmpeg/ffmpeg/src/browser/getCreateFFmpegCore.js").href,yt=yield we(ct,"application/javascript"),Ue=yield we(void 0!==Oe?Oe:ct.replace("ffmpeg-core.js","ffmpeg-core.wasm"),"application/wasm"),Se=yield we(void 0!==Ke?Ke:ct.replace("ffmpeg-core.js","ffmpeg-core.worker.js"),"application/javascript");return typeof createFFmpegCore>"u"?new Promise(De=>{const $e=document.createElement("script"),je=()=>{if($e.removeEventListener("load",je),typeof createFFmpegCore>"u")throw Error((0,oe.CREATE_FFMPEG_CORE_IS_NOT_DEFINED)(ct));(0,te.log)("info","ffmpeg-core.js script loaded"),De({createFFmpegCore,corePath:yt,wasmPath:Ue,workerPath:Se})};$e.src=yt,$e.type="text/javascript",$e.addEventListener("load",je),document.getElementsByTagName("head")[0].appendChild($e)}):((0,te.log)("info","ffmpeg-core.js script is loaded already"),Promise.resolve({createFFmpegCore,corePath:yt,wasmPath:Ue,workerPath:Se}))});return function(Ke){return ne.apply(this,arguments)}}(),K=function(){var ne=(0,de.Z)(function*(Y){let Ke=Y;return typeof Y>"u"?new Uint8Array:("string"==typeof Y?Ke=/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(Y)?atob(Y.split(",")[1]).split("").map(Oe=>Oe.charCodeAt(0)):yield(yield fetch(new URL(Y,"file:///D:/udemy-learning/ztm-clips/node_modules/@ffmpeg/ffmpeg/src/browser/fetchFile.js").href)).arrayBuffer():(Y instanceof File||Y instanceof Blob)&&(Ke=yield(ne=>new Promise((Y,Ke)=>{const Oe=new FileReader;Oe.onload=()=>{Y(Oe.result)},Oe.onerror=({target:{error:{code:ct}}})=>{Ke(Error(`File could not be read! Code=${ct}`))},Oe.readAsArrayBuffer(ne)}))(Y)),new Uint8Array(Ke))});return function(Ke){return ne.apply(this,arguments)}}()},6151:lt=>{lt.exports={defaultArgs:["./ffmpeg","-nostdin","-y"],baseOptions:{log:!1,logger:()=>{},progress:()=>{},corePath:""}}},9639:(lt,ke,B)=>{var d=B(7156).default;const{defaultArgs:ae,baseOptions:U}=B(6151),de=B(8333),{defaultOptions:te,getCreateFFmpegCore:oe}=B(3327),{version:we}=B(3681),Ee=Error("ffmpeg.wasm is not ready, make sure you have completed load().");lt.exports=(be={})=>{const{log:K,logger:ne,progress:Y,...Ke}={...U,...te,...be};let Oe=null,ct=null,yt=null,Ue=null,Se=!1,De=()=>{},$e=K,je=Y,Ce=0,Ye=0,st=!1,Ze=0;const V=(Be,_t)=>{De({type:Be,message:_t}),$e&&console.log(`[${Be}] ${_t}`)},he=Be=>{const[_t,et,ft]=Be.split(":");return 60*parseFloat(_t)*60+60*parseFloat(et)+parseFloat(ft)},He=({type:Be,message:_t})=>{V(Be,_t),((Be,_t)=>{if("string"==typeof Be)if(Be.startsWith("  Duration")){const et=Be.split(", ")[0].split(": ")[1],ft=he(et);_t({duration:ft,ratio:Ze}),(0===Ce||Ce>ft)&&(Ce=ft,st=!0)}else if(st&&Be.startsWith("    Stream")){const et=Be.match(/([\d.]+) fps/);if(et){const ft=parseFloat(et[1]);Ye=Ce*ft}else Ye=0;st=!1}else if(Be.startsWith("frame")||Be.startsWith("size")){const et=Be.split("time=")[1].split(" ")[0],ft=he(et),wt=Be.match(/frame=\s*(\d+)/);if(Ye&&wt){const Ot=parseFloat(wt[1]);Ze=Math.min(Ot/Ye,1)}else Ze=ft/Ce;_t({ratio:Ze,time:ft})}else Be.startsWith("video:")&&(_t({ratio:1}),Ce=0)})(_t,je),(Be=>{"FFMPEG_END"===Be&&null!==yt&&(yt(),yt=null,Ue=null,Se=!1)})(_t)},We=function(){var Be=d(function*(){if(V("info","load ffmpeg-core"),null!==Oe)throw Error("ffmpeg.wasm was loaded, you should not load it again, use ffmpeg.isLoaded() to check next time.");{V("info","loading ffmpeg-core");const{createFFmpegCore:_t,corePath:et,workerPath:ft,wasmPath:wt}=yield oe(Ke);Oe=yield _t({mainScriptUrlOrBlob:et,printErr:Ot=>He({type:"fferr",message:Ot}),print:Ot=>He({type:"ffout",message:Ot}),locateFile:(Ot,on)=>{if(typeof window<"u"||typeof WorkerGlobalScope<"u"){if(typeof wt<"u"&&Ot.endsWith("ffmpeg-core.wasm"))return wt;if(typeof ft<"u"&&Ot.endsWith("ffmpeg-core.worker.js"))return ft}return on+Ot}}),ct=Oe.cwrap(Ke.mainName||"proxy_main","number",["number","number"]),V("info","ffmpeg-core loaded")}});return function(){return Be.apply(this,arguments)}}();return V("info",`use ffmpeg.wasm v${we}`),{setProgress:Be=>{je=Be},setLogger:Be=>{De=Be},setLogging:Be=>{$e=Be},load:We,isLoaded:()=>null!==Oe,run:(...Be)=>{if(V("info",`run ffmpeg command: ${Be.join(" ")}`),null===Oe)throw Ee;if(Se)throw Error("ffmpeg.wasm can only run one command at a time");return Se=!0,new Promise((_t,et)=>{const ft=[...ae,...Be].filter(wt=>0!==wt.length);yt=_t,Ue=et,ct(...de(Oe,ft))})},exit:()=>{if(null===Oe)throw Ee;Ue&&Ue("ffmpeg has exited"),Se=!1;try{Oe.exit(1)}catch(Be){V(Be.message),Ue&&Ue(Be)}finally{Oe=null,ct=null,yt=null,Ue=null}},FS:(Be,..._t)=>{if(V("info",`run FS.${Be} ${_t.map(et=>"string"==typeof et?et:`<${et.length} bytes binary file>`).join(" ")}`),null===Oe)throw Ee;{let et=null;try{et=Oe.FS[Be](..._t)}catch{throw Error("readdir"===Be?`ffmpeg.FS('readdir', '${_t[0]}') error. Check if the path exists, ex: ffmpeg.FS('readdir', '/')`:"readFile"===Be?`ffmpeg.FS('readFile', '${_t[0]}') error. Check if the path exists`:"Oops, something went wrong in FS operation.")}return et}}}}},260:(lt,ke,B)=>{B(7854);const d=B(9639),{fetchFile:ae}=B(3327);lt.exports={createFFmpeg:d,fetchFile:ae}},3630:lt=>{lt.exports={CREATE_FFMPEG_CORE_IS_NOT_DEFINED:B=>`\ncreateFFmpegCore is not defined. ffmpeg.wasm is unable to find createFFmpegCore after loading ffmpeg-core.js from ${B}. Use another URL when calling createFFmpeg():\n\nconst ffmpeg = createFFmpeg({\n  corePath: 'http://localhost:3000/ffmpeg-core.js',\n});\n`}},6945:lt=>{let ke=!1,B=()=>{};lt.exports={logging:ke,setLogging:de=>{ke=de},setCustomLogger:de=>{B=de},log:(de,te)=>{B({type:de,message:te}),ke&&console.log(`[${de}] ${te}`)}}},8333:lt=>{lt.exports=(ke,B)=>{const d=ke._malloc(B.length*Uint32Array.BYTES_PER_ELEMENT);return B.forEach((ae,U)=>{const de=ke.lengthBytesUTF8(ae)+1,te=ke._malloc(de);ke.stringToUTF8(ae,te,de),ke.setValue(d+Uint32Array.BYTES_PER_ELEMENT*U,te,"i32")}),[B.length,d]}},2090:(lt,ke,B)=>{"use strict";B.d(ke,{$s:()=>Jt,BH:()=>Ye,G6:()=>re,L:()=>be,LL:()=>et,Pz:()=>Ce,Sg:()=>st,UG:()=>V,US:()=>oe,ZB:()=>Y,ZR:()=>_t,aH:()=>je,b$:()=>He,eu:()=>_e,hl:()=>ve,jU:()=>he,m9:()=>Yr,ne:()=>dn,pd:()=>nr,r3:()=>Yn,ru:()=>Le,tV:()=>K,uI:()=>R,vZ:()=>Wr,w1:()=>ge,xO:()=>Bn,xb:()=>qn,z$:()=>Ze,zI:()=>Ge,zd:()=>Mn});const de=function(me){const ce=[];let Ae=0;for(let ot=0;ot<me.length;ot++){let ze=me.charCodeAt(ot);ze<128?ce[Ae++]=ze:ze<2048?(ce[Ae++]=ze>>6|192,ce[Ae++]=63&ze|128):55296==(64512&ze)&&ot+1<me.length&&56320==(64512&me.charCodeAt(ot+1))?(ze=65536+((1023&ze)<<10)+(1023&me.charCodeAt(++ot)),ce[Ae++]=ze>>18|240,ce[Ae++]=ze>>12&63|128,ce[Ae++]=ze>>6&63|128,ce[Ae++]=63&ze|128):(ce[Ae++]=ze>>12|224,ce[Ae++]=ze>>6&63|128,ce[Ae++]=63&ze|128)}return ce},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,ce){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ae=ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,ot=[];for(let ze=0;ze<me.length;ze+=3){const Pt=me[ze],Mt=ze+1<me.length,rr=Mt?me[ze+1]:0,$=ze+2<me.length,q=$?me[ze+2]:0;let Et=(15&rr)<<2|q>>6,Kt=63&q;$||(Kt=64,Mt||(Et=64)),ot.push(Ae[Pt>>2],Ae[(3&Pt)<<4|rr>>4],Ae[Et],Ae[Kt])}return ot.join("")},encodeString(me,ce){return this.HAS_NATIVE_SUPPORT&&!ce?btoa(me):this.encodeByteArray(de(me),ce)},decodeString(me,ce){return this.HAS_NATIVE_SUPPORT&&!ce?atob(me):function(me){const ce=[];let Ae=0,ot=0;for(;Ae<me.length;){const ze=me[Ae++];if(ze<128)ce[ot++]=String.fromCharCode(ze);else if(ze>191&&ze<224){const Pt=me[Ae++];ce[ot++]=String.fromCharCode((31&ze)<<6|63&Pt)}else if(ze>239&&ze<365){const $=((7&ze)<<18|(63&me[Ae++])<<12|(63&me[Ae++])<<6|63&me[Ae++])-65536;ce[ot++]=String.fromCharCode(55296+($>>10)),ce[ot++]=String.fromCharCode(56320+(1023&$))}else{const Pt=me[Ae++],Mt=me[Ae++];ce[ot++]=String.fromCharCode((15&ze)<<12|(63&Pt)<<6|63&Mt)}}return ce.join("")}(this.decodeStringToByteArray(me,ce))},decodeStringToByteArray(me,ce){this.init_();const Ae=ce?this.charToByteMapWebSafe_:this.charToByteMap_,ot=[];for(let ze=0;ze<me.length;){const Pt=Ae[me.charAt(ze++)],rr=ze<me.length?Ae[me.charAt(ze)]:0;++ze;const q=ze<me.length?Ae[me.charAt(ze)]:64;++ze;const Pe=ze<me.length?Ae[me.charAt(ze)]:64;if(++ze,null==Pt||null==rr||null==q||null==Pe)throw new we;ot.push(Pt<<2|rr>>4),64!==q&&(ot.push(rr<<4&240|q>>2),64!==Pe&&ot.push(q<<6&192|Pe))}return ot},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}};class we extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const be=function(me){return function(me){const ce=de(me);return oe.encodeByteArray(ce,!0)}(me).replace(/\./g,"")},K=function(me){try{return oe.decodeString(me,!0)}catch(ce){console.error("base64Decode failed: ",ce)}return null};function Y(me,ce){if(!(ce instanceof Object))return ce;switch(ce.constructor){case Date:return new Date(ce.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return ce}for(const Ae in ce)!ce.hasOwnProperty(Ae)||!Ke(Ae)||(me[Ae]=Y(me[Ae],ce[Ae]));return me}function Ke(me){return"__proto__"!==me}const Se=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const me=process.env.__FIREBASE_DEFAULTS__;return me?JSON.parse(me):void 0})()||(()=>{if(typeof document>"u")return;let me;try{me=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ce=me&&K(me[1]);return ce&&JSON.parse(ce)})()}catch(me){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${me}`)}},je=()=>{var me;return null===(me=Se())||void 0===me?void 0:me.config},Ce=me=>{var ce;return null===(ce=Se())||void 0===ce?void 0:ce[`_${me}`]};class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ce,Ae)=>{this.resolve=ce,this.reject=Ae})}wrapCallback(ce){return(Ae,ot)=>{Ae?this.reject(Ae):this.resolve(ot),"function"==typeof ce&&(this.promise.catch(()=>{}),1===ce.length?ce(Ae):ce(Ae,ot))}}}function st(me,ce){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ot=ce||"demo-project",ze=me.iat||0,Pt=me.sub||me.user_id;if(!Pt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Mt=Object.assign({iss:`https://securetoken.google.com/${ot}`,aud:ot,iat:ze,exp:ze+3600,auth_time:ze,sub:Pt,user_id:Pt,firebase:{sign_in_provider:"custom",identities:{}}},me);return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(Mt)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function R(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function V(){var me;const ce=null===(me=Se())||void 0===me?void 0:me.forceEnvironment;if("node"===ce)return!0;if("browser"===ce)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function he(){return"object"==typeof self&&self.self===self}function Le(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function He(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ge(){const me=Ze();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function re(){return!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ve(){try{return"object"==typeof indexedDB}catch{return!1}}function _e(){return new Promise((me,ce)=>{try{let Ae=!0;const ot="validate-browser-context-for-indexeddb-analytics-module",ze=self.indexedDB.open(ot);ze.onsuccess=()=>{ze.result.close(),Ae||self.indexedDB.deleteDatabase(ot),me(!0)},ze.onupgradeneeded=()=>{Ae=!1},ze.onerror=()=>{var Pt;ce((null===(Pt=ze.error)||void 0===Pt?void 0:Pt.message)||"")}}catch(Ae){ce(Ae)}})}function Ge(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class _t extends Error{constructor(ce,Ae,ot){super(Ae),this.code=ce,this.customData=ot,this.name="FirebaseError",Object.setPrototypeOf(this,_t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,et.prototype.create)}}class et{constructor(ce,Ae,ot){this.service=ce,this.serviceName=Ae,this.errors=ot}create(ce,...Ae){const ot=Ae[0]||{},ze=`${this.service}/${ce}`,Pt=this.errors[ce],Mt=Pt?function ft(me,ce){return me.replace(wt,(Ae,ot)=>{const ze=ce[ot];return null!=ze?String(ze):`<${ot}?>`})}(Pt,ot):"Error";return new _t(ze,`${this.serviceName}: ${Mt} (${ze}).`,ot)}}const wt=/\{\$([^}]+)}/g;function Yn(me,ce){return Object.prototype.hasOwnProperty.call(me,ce)}function qn(me){for(const ce in me)if(Object.prototype.hasOwnProperty.call(me,ce))return!1;return!0}function Wr(me,ce){if(me===ce)return!0;const Ae=Object.keys(me),ot=Object.keys(ce);for(const ze of Ae){if(!ot.includes(ze))return!1;const Pt=me[ze],Mt=ce[ze];if(Ht(Pt)&&Ht(Mt)){if(!Wr(Pt,Mt))return!1}else if(Pt!==Mt)return!1}for(const ze of ot)if(!Ae.includes(ze))return!1;return!0}function Ht(me){return null!==me&&"object"==typeof me}function Bn(me){const ce=[];for(const[Ae,ot]of Object.entries(me))Array.isArray(ot)?ot.forEach(ze=>{ce.push(encodeURIComponent(Ae)+"="+encodeURIComponent(ze))}):ce.push(encodeURIComponent(Ae)+"="+encodeURIComponent(ot));return ce.length?"&"+ce.join("&"):""}function Mn(me){const ce={};return me.replace(/^\?/,"").split("&").forEach(ot=>{if(ot){const[ze,Pt]=ot.split("=");ce[decodeURIComponent(ze)]=decodeURIComponent(Pt)}}),ce}function nr(me){const ce=me.indexOf("?");if(!ce)return"";const Ae=me.indexOf("#",ce);return me.substring(ce,Ae>0?Ae:void 0)}function dn(me,ce){const Ae=new Wt(me,ce);return Ae.subscribe.bind(Ae)}class Wt{constructor(ce,Ae){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ae,this.task.then(()=>{ce(this)}).catch(ot=>{this.error(ot)})}next(ce){this.forEachObserver(Ae=>{Ae.next(ce)})}error(ce){this.forEachObserver(Ae=>{Ae.error(ce)}),this.close(ce)}complete(){this.forEachObserver(ce=>{ce.complete()}),this.close()}subscribe(ce,Ae,ot){let ze;if(void 0===ce&&void 0===Ae&&void 0===ot)throw new Error("Missing Observer.");ze=function vo(me,ce){if("object"!=typeof me||null===me)return!1;for(const Ae of ce)if(Ae in me&&"function"==typeof me[Ae])return!0;return!1}(ce,["next","error","complete"])?ce:{next:ce,error:Ae,complete:ot},void 0===ze.next&&(ze.next=sr),void 0===ze.error&&(ze.error=sr),void 0===ze.complete&&(ze.complete=sr);const Pt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ze.error(this.finalError):ze.complete()}catch{}}),this.observers.push(ze),Pt}unsubscribeOne(ce){void 0===this.observers||void 0===this.observers[ce]||(delete this.observers[ce],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ce){if(!this.finalized)for(let Ae=0;Ae<this.observers.length;Ae++)this.sendOne(Ae,ce)}sendOne(ce,Ae){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ce])try{Ae(this.observers[ce])}catch(ot){typeof console<"u"&&console.error&&console.error(ot)}})}close(ce){this.finalized||(this.finalized=!0,void 0!==ce&&(this.finalError=ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sr(){}const Vi=1e3,xt=2,gt=144e5,jt=.5;function Jt(me,ce=Vi,Ae=xt){const ot=ce*Math.pow(Ae,me),ze=Math.round(jt*ot*(Math.random()-.5)*2);return Math.min(gt,ot+ze)}function Yr(me){return me&&me._delegate?me._delegate:me}},4146:(lt,ke,B)=>{"use strict";var d=B(4650);let ae=null;function U(){return ae}class te{}const oe=new d.OlP("DocumentToken");let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ee(){return(0,d.LFG)(K)}()},providedIn:"platform"}),n})();const be=new d.OlP("Location Initialized");let K=(()=>{class n extends we{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Y(){return new K((0,d.LFG)(oe))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function Ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ct(n){return n&&"?"!==n[0]?"?"+n:n}let yt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Se)},providedIn:"root"}),n})();const Ue=new d.OlP("appBaseHref");let Se=(()=>{class n extends yt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ct(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+ct(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+ct(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(we),d.LFG(Ue,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),De=(()=>{class n extends yt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+ct(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+ct(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(we),d.LFG(Ue,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function st(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Oe(Ye(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ct(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ye(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ct(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ct(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ct,n.joinWithSlash=Ke,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(d.LFG(yt))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function je(){return new $e((0,d.LFG)(yt))}()},providedIn:"root"}),n})();function Ye(n){return n.replace(/\/index.html$/,"")}var R=(()=>((R=R||{})[R.Decimal=0]="Decimal",R[R.Percent=1]="Percent",R[R.Currency=2]="Currency",R[R.Scientific=3]="Scientific",R))(),he=(()=>((he=he||{})[he.Format=0]="Format",he[he.Standalone=1]="Standalone",he))(),Le=(()=>((Le=Le||{})[Le.Narrow=0]="Narrow",Le[Le.Abbreviated=1]="Abbreviated",Le[Le.Wide=2]="Wide",Le[Le.Short=3]="Short",Le))(),He=(()=>((He=He||{})[He.Short=0]="Short",He[He.Medium=1]="Medium",He[He.Long=2]="Long",He[He.Full=3]="Full",He))(),We=(()=>((We=We||{})[We.Decimal=0]="Decimal",We[We.Group=1]="Group",We[We.List=2]="List",We[We.PercentSign=3]="PercentSign",We[We.PlusSign=4]="PlusSign",We[We.MinusSign=5]="MinusSign",We[We.Exponential=6]="Exponential",We[We.SuperscriptingExponent=7]="SuperscriptingExponent",We[We.PerMille=8]="PerMille",We[We.Infinity=9]="Infinity",We[We.NaN=10]="NaN",We[We.TimeSeparator=11]="TimeSeparator",We[We.CurrencyDecimal=12]="CurrencyDecimal",We[We.CurrencyGroup=13]="CurrencyGroup",We))();function _t(n,e){return Xn((0,d.cg1)(n)[d.wAp.DateFormat],e)}function et(n,e){return Xn((0,d.cg1)(n)[d.wAp.TimeFormat],e)}function ft(n,e){return Xn((0,d.cg1)(n)[d.wAp.DateTimeFormat],e)}function wt(n,e){const t=(0,d.cg1)(n),r=t[d.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===We.CurrencyDecimal)return t[d.wAp.NumberSymbols][We.Decimal];if(e===We.CurrencyGroup)return t[d.wAp.NumberSymbols][We.Group]}return r}function Sn(n){if(!n[d.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[d.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Xn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Wr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Mn=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,nr={},Kr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dn=(()=>((dn=dn||{})[dn.Short=0]="Short",dn[dn.ShortGMT=1]="ShortGMT",dn[dn.Long=2]="Long",dn[dn.Extended=3]="Extended",dn))(),Wt=(()=>((Wt=Wt||{})[Wt.FullYear=0]="FullYear",Wt[Wt.Month=1]="Month",Wt[Wt.Date=2]="Date",Wt[Wt.Hours=3]="Hours",Wt[Wt.Minutes=4]="Minutes",Wt[Wt.Seconds=5]="Seconds",Wt[Wt.FractionalSeconds=6]="FractionalSeconds",Wt[Wt.Day=7]="Day",Wt))(),nn=(()=>((nn=nn||{})[nn.DayPeriods=0]="DayPeriods",nn[nn.Days=1]="Days",nn[nn.Months=2]="Months",nn[nn.Eras=3]="Eras",nn))();function vo(n,e,t,r){let i=function ze(n){if(Mt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,l=1]=n.split("-").map(c=>+c);return sr(i,s-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Mn))return function Pt(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,c=Number(n[5]||0)-r,f=Number(n[6]||0),v=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,l,c,f,v),e}(r)}const e=new Date(n);if(!Mt(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=yr(t,e)||e;let c,l=[];for(;e;){if(c=Kr.exec(e),!c){l.push(e);break}{l=l.concat(c.slice(1));const T=l.pop();if(!T)break;e=T}}let f=i.getTimezoneOffset();r&&(f=ce(r,f),i=function ot(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Ae(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(ce(e,i)-i))}(i,r,!0));let v="";return l.forEach(T=>{const A=function me(n){if(Yr[n])return Yr[n];let e;switch(n){case"G":case"GG":case"GGG":e=On(nn.Eras,Le.Abbreviated);break;case"GGGG":e=On(nn.Eras,Le.Wide);break;case"GGGGG":e=On(nn.Eras,Le.Narrow);break;case"y":e=$n(Wt.FullYear,1,0,!1,!0);break;case"yy":e=$n(Wt.FullYear,2,0,!0,!0);break;case"yyy":e=$n(Wt.FullYear,3,0,!1,!0);break;case"yyyy":e=$n(Wt.FullYear,4,0,!1,!0);break;case"Y":e=pn(1);break;case"YY":e=pn(2,!0);break;case"YYY":e=pn(3);break;case"YYYY":e=pn(4);break;case"M":case"L":e=$n(Wt.Month,1,1);break;case"MM":case"LL":e=$n(Wt.Month,2,1);break;case"MMM":e=On(nn.Months,Le.Abbreviated);break;case"MMMM":e=On(nn.Months,Le.Wide);break;case"MMMMM":e=On(nn.Months,Le.Narrow);break;case"LLL":e=On(nn.Months,Le.Abbreviated,he.Standalone);break;case"LLLL":e=On(nn.Months,Le.Wide,he.Standalone);break;case"LLLLL":e=On(nn.Months,Le.Narrow,he.Standalone);break;case"w":e=an(1);break;case"ww":e=an(2);break;case"W":e=an(1,!0);break;case"d":e=$n(Wt.Date,1);break;case"dd":e=$n(Wt.Date,2);break;case"c":case"cc":e=$n(Wt.Day,1);break;case"ccc":e=On(nn.Days,Le.Abbreviated,he.Standalone);break;case"cccc":e=On(nn.Days,Le.Wide,he.Standalone);break;case"ccccc":e=On(nn.Days,Le.Narrow,he.Standalone);break;case"cccccc":e=On(nn.Days,Le.Short,he.Standalone);break;case"E":case"EE":case"EEE":e=On(nn.Days,Le.Abbreviated);break;case"EEEE":e=On(nn.Days,Le.Wide);break;case"EEEEE":e=On(nn.Days,Le.Narrow);break;case"EEEEEE":e=On(nn.Days,Le.Short);break;case"a":case"aa":case"aaa":e=On(nn.DayPeriods,Le.Abbreviated);break;case"aaaa":e=On(nn.DayPeriods,Le.Wide);break;case"aaaaa":e=On(nn.DayPeriods,Le.Narrow);break;case"b":case"bb":case"bbb":e=On(nn.DayPeriods,Le.Abbreviated,he.Standalone,!0);break;case"bbbb":e=On(nn.DayPeriods,Le.Wide,he.Standalone,!0);break;case"bbbbb":e=On(nn.DayPeriods,Le.Narrow,he.Standalone,!0);break;case"B":case"BB":case"BBB":e=On(nn.DayPeriods,Le.Abbreviated,he.Format,!0);break;case"BBBB":e=On(nn.DayPeriods,Le.Wide,he.Format,!0);break;case"BBBBB":e=On(nn.DayPeriods,Le.Narrow,he.Format,!0);break;case"h":e=$n(Wt.Hours,1,-12);break;case"hh":e=$n(Wt.Hours,2,-12);break;case"H":e=$n(Wt.Hours,1);break;case"HH":e=$n(Wt.Hours,2);break;case"m":e=$n(Wt.Minutes,1);break;case"mm":e=$n(Wt.Minutes,2);break;case"s":e=$n(Wt.Seconds,1);break;case"ss":e=$n(Wt.Seconds,2);break;case"S":e=$n(Wt.FractionalSeconds,1);break;case"SS":e=$n(Wt.FractionalSeconds,2);break;case"SSS":e=$n(Wt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Vi(dn.Short);break;case"ZZZZZ":e=Vi(dn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Vi(dn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Vi(dn.Long);break;default:return null}return Yr[n]=e,e}(T);v+=A?A(i,t,f):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),v}function sr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function yr(n,e){const t=function X(n){return(0,d.cg1)(n)[d.wAp.LocaleId]}(n);if(nr[t]=nr[t]||{},nr[t][e])return nr[t][e];let r="";switch(e){case"shortDate":r=_t(n,He.Short);break;case"mediumDate":r=_t(n,He.Medium);break;case"longDate":r=_t(n,He.Long);break;case"fullDate":r=_t(n,He.Full);break;case"shortTime":r=et(n,He.Short);break;case"mediumTime":r=et(n,He.Medium);break;case"longTime":r=et(n,He.Long);break;case"fullTime":r=et(n,He.Full);break;case"short":const i=yr(n,"shortTime"),s=yr(n,"shortDate");r=Fr(ft(n,He.Short),[i,s]);break;case"medium":const l=yr(n,"mediumTime"),c=yr(n,"mediumDate");r=Fr(ft(n,He.Medium),[l,c]);break;case"long":const f=yr(n,"longTime"),v=yr(n,"longDate");r=Fr(ft(n,He.Long),[f,v]);break;case"full":const T=yr(n,"fullTime"),A=yr(n,"fullDate");r=Fr(ft(n,He.Full),[T,A])}return r&&(nr[t][e]=r),r}function Fr(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function di(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),s+l}function $n(n,e,t=0,r=!1,i=!1){return function(s,l){let c=function Di(n,e){switch(n){case Wt.FullYear:return e.getFullYear();case Wt.Month:return e.getMonth();case Wt.Date:return e.getDate();case Wt.Hours:return e.getHours();case Wt.Minutes:return e.getMinutes();case Wt.Seconds:return e.getSeconds();case Wt.FractionalSeconds:return e.getMilliseconds();case Wt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||c>-t)&&(c+=t),n===Wt.Hours)0===c&&-12===t&&(c=12);else if(n===Wt.FractionalSeconds)return function es(n,e){return di(n,3).substring(0,e)}(c,e);const f=wt(l,We.MinusSign);return di(c,e,f,r,i)}}function On(n,e,t=he.Format,r=!1){return function(i,s){return function Zr(n,e,t,r,i,s){switch(t){case nn.Months:return function ve(n,e,t){const r=(0,d.cg1)(n),s=Xn([r[d.wAp.MonthsFormat],r[d.wAp.MonthsStandalone]],e);return Xn(s,t)}(e,i,r)[n.getMonth()];case nn.Days:return function re(n,e,t){const r=(0,d.cg1)(n),s=Xn([r[d.wAp.DaysFormat],r[d.wAp.DaysStandalone]],e);return Xn(s,t)}(e,i,r)[n.getDay()];case nn.DayPeriods:const l=n.getHours(),c=n.getMinutes();if(s){const v=function Yn(n){const e=(0,d.cg1)(n);return Sn(e),(e[d.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Wr(r):[Wr(r[0]),Wr(r[1])])}(e),T=function hr(n,e,t){const r=(0,d.cg1)(n);Sn(r);const s=Xn([r[d.wAp.ExtraData][0],r[d.wAp.ExtraData][1]],e)||[];return Xn(s,t)||[]}(e,i,r),A=v.findIndex(j=>{if(Array.isArray(j)){const[P,W]=j,J=l>=P.hours&&c>=P.minutes,se=l<W.hours||l===W.hours&&c<W.minutes;if(P.hours<W.hours){if(J&&se)return!0}else if(J||se)return!0}else if(j.hours===l&&j.minutes===c)return!0;return!1});if(-1!==A)return T[A]}return function Z(n,e,t){const r=(0,d.cg1)(n),s=Xn([r[d.wAp.DayPeriodsFormat],r[d.wAp.DayPeriodsStandalone]],e);return Xn(s,t)}(e,i,r)[l<12?0:1];case nn.Eras:return function _e(n,e){return Xn((0,d.cg1)(n)[d.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Vi(n){return function(e,t,r){const i=-1*r,s=wt(t,We.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case dn.Short:return(i>=0?"+":"")+di(l,2,s)+di(Math.abs(i%60),2,s);case dn.ShortGMT:return"GMT"+(i>=0?"+":"")+di(l,1,s);case dn.Long:return"GMT"+(i>=0?"+":"")+di(l,2,s)+":"+di(Math.abs(i%60),2,s);case dn.Extended:return 0===r?"Z":(i>=0?"+":"")+di(l,2,s)+":"+di(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const xt=0,gt=4;function Jt(n){return sr(n.getFullYear(),n.getMonth(),n.getDate()+(gt-n.getDay()))}function an(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+s)/7)}else{const s=Jt(t),l=function jt(n){const e=sr(n,xt,1).getDay();return sr(n,0,1+(e<=gt?gt:gt+7)-e)}(s.getFullYear()),c=s.getTime()-l.getTime();i=1+Math.round(c/6048e5)}return di(i,n,wt(r,We.MinusSign))}}function pn(n,e=!1){return function(t,r){return di(Jt(t).getFullYear(),n,wt(r,We.MinusSign),e)}}const Yr={};function ce(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Mt(n){return n instanceof Date&&!isNaN(n.valueOf())}const rr=/^(\d+)?\.((\d+)(-(\d+))?)?$/,$=22,q=".",fe="0",Pe=";",Et=",",Kt="#";function or(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}const gn=/\s+/,ur=[];let fi=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=ur,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(gn):ur}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(gn):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(gn).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class cr{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gs=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new cr(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===s?void 0:s);else if(null!==s){const c=r.get(s);r.move(c,l),iu(c,i)}});for(let i=0,s=r.length;i<s;i++){const c=r.get(i).context;c.index=i,c.count=s,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{iu(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function iu(n,e){n.context.$implicit=e.item}let ms=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new bl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Hh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Hh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class bl{constructor(){this.$implicit=null,this.ngIf=null}}function Hh(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}function ys(n,e){return new d.vHH(2100,!1)}class ts{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Wu{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Xo=new Wu,Qr=new ts;let eo=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,d.QGY)(t))return Xo;if((0,d.F4k)(t))return Qr;throw ys()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const gi=new d.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),by=new d.OlP("DATE_PIPE_DEFAULT_OPTIONS");let au=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return vo(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(l){throw ys()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16),d.Y36(gi,24),d.Y36(by,24))},n.\u0275pipe=d.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),Eo=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=d.Yjl({name:"json",type:n,pure:!1,standalone:!0}),n})(),qh=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Sl(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Hi(n,e,t){return function $i(n,e,t,r,i,s,l=!1){let c="",f=!1;if(isFinite(n)){let v=function Gi(n){let r,i,s,l,c,e=Math.abs(n)+"",t=0;for((i=e.indexOf(q))>-1&&(e=e.replace(q,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===fe;s++);if(s===(c=e.length))r=[0],i=1;else{for(c--;e.charAt(c)===fe;)c--;for(i-=s,r=[],l=0;s<=c;s++,l++)r[l]=Number(e.charAt(s))}return i>$&&(r=r.splice(0,$-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(v=function Ps(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(v));let T=e.minInt,A=e.minFrac,j=e.maxFrac;if(s){const Qe=s.match(rr);if(null===Qe)throw new Error(`${s} is not a valid digit info`);const qe=Qe[1],Ie=Qe[3],pe=Qe[5];null!=qe&&(T=or(qe)),null!=Ie&&(A=or(Ie)),null!=pe?j=or(pe):null!=Ie&&A>j&&(j=A)}!function En(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let l=s+n.integerLen,c=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let A=l;A<r.length;A++)r[A]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=s+1),r[0]=0;for(let A=1;A<l;A++)r[A]=0}if(c>=5)if(l-1<0){for(let A=0;A>l;A--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,s);i++)r.push(0);let f=0!==s;const v=e+n.integerLen,T=r.reduceRight(function(A,j,P,W){return W[P]=(j+=A)<10?j:j-10,f&&(0===W[P]&&P>=v?W.pop():f=!1),j>=10?1:0},0);T&&(r.unshift(T),n.integerLen++)}(v,A,j);let P=v.digits,W=v.integerLen;const J=v.exponent;let se=[];for(f=P.every(Qe=>!Qe);W<T;W++)P.unshift(0);for(;W<0;W++)P.unshift(0);W>0?se=P.splice(W,P.length):(se=P,P=[0]);const Ne=[];for(P.length>=e.lgSize&&Ne.unshift(P.splice(-e.lgSize,P.length).join(""));P.length>e.gSize;)Ne.unshift(P.splice(-e.gSize,P.length).join(""));P.length&&Ne.unshift(P.join("")),c=Ne.join(wt(t,r)),se.length&&(c+=wt(t,i)+se.join("")),J&&(c+=wt(t,We.Exponential)+"+"+J)}else c=wt(t,We.Infinity);return c=n<0&&!f?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf,c}(n,function Qn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(Pe),i=r[0],s=r[1],l=-1!==i.indexOf(q)?i.split(q):[i.substring(0,i.lastIndexOf(fe)+1),i.substring(i.lastIndexOf(fe)+1)],c=l[0],f=l[1]||"";t.posPre=c.substring(0,c.indexOf(Kt));for(let T=0;T<f.length;T++){const A=f.charAt(T);A===fe?t.minFrac=t.maxFrac=T+1:A===Kt?t.maxFrac=T+1:t.posSuf+=A}const v=c.split(Et);if(t.gSize=v[1]?v[1].length:0,t.lgSize=v[2]||v[1]?(v[2]||v[1]).length:0,s){const T=i.length-t.posPre.length-t.posSuf.length,A=s.indexOf(Kt);t.negPre=s.substring(0,A).replace(/'/g,""),t.negSuf=s.slice(A+T).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Ot(n,e){return(0,d.cg1)(n)[d.wAp.NumberFormats][e]}(e,R.Percent),wt(e,We.MinusSign)),e,We.Group,We.Decimal,t,!0).replace(new RegExp("%","g"),wt(e,We.PercentSign))}(function Oa(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw ys()}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.soG,16))},n.\u0275pipe=d.Yjl({name:"percent",type:n,pure:!0,standalone:!0}),n})();let Jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const vs="server";function du(n){return n===vs}let hu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new fu((0,d.LFG)(oe),window)}),n})();class fu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Cl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ra(this.window.history)||Ra(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ra(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Al extends te{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class So extends Al{static makeCurrent(){!function de(n){ae||(ae=n)}(new So)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ng(){return Co=Co||document.querySelector("base"),Co?Co.getAttribute("href"):null}();return null==t?null:function zi(n){pd=pd||document.createElement("a"),pd.setAttribute("href",n);const e=pd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Co=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ft(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let pd,Co=null;const rc=new d.OlP("TRANSITION_ID"),oa=[{provide:d.ip1,useFactory:function wy(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=U(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[rc,oe,d.zs3],multi:!0}];let Sy=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const io=new d.OlP("EventManagerPlugins");let Fa=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(io),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Sr{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=U().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let aa=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),xo=(()=>{class n extends aa{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const kl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},la=/%COMP%/g,sc=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function os(n,e){return e.flat(100).map(t=>t.replace(la,n))}function ac(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Io=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new ja(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof cc?i.applyToHost(t):i instanceof uc&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const l=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestory;switch(r.encapsulation){case d.ifc.Emulated:s=new cc(l,c,r,this.appId,f);break;case d.ifc.ShadowDom:return new cf(l,c,t,r);default:s=new uc(l,c,r,f)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fa),d.LFG(xo),d.LFG(d.AFp),d.LFG(sc))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ja{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(kl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ol(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ol(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=kl[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=kl[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ac(r)):this.eventManager.addEventListener(e,t,ac(r))}}function Ol(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class cf extends ja{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=os(i.id,i.styles);for(const l of s){const c=document.createElement("style");c.textContent=l,this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class uc extends ja{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=os(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class cc extends uc{constructor(e,t,r,i,s){const l=i+"-"+r.id;super(e,t,r,s,l),this.contentAttr=function ua(n){return"_ngcontent-%COMP%".replace(la,n)}(l),this.hostAttr=function oc(n){return"_nghost-%COMP%".replace(la,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ua=(()=>{class n extends Sr{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Tu=["alt","control","meta","shift"],ig={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_s={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let so=(()=>{class n extends Sr{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),l="code."),Tu.forEach(v=>{const T=r.indexOf(v);T>-1&&(r.splice(T,1),l+=v+".")}),l+=s,0!=r.length||0===s.length)return null;const f={};return f.domEventName=i,f.fullKey=l,f}static matchEventFullKeyCode(t,r){let i=ig[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Tu.forEach(l=>{l!==i&&(0,_s[l])(t)&&(s+=l+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const hc=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Ba(){So.makeCurrent()},multi:!0},{provide:oe,useFactory:function sg(){return(0,d.RDi)(document),document},deps:[]}]),Va=new d.OlP(""),$a=[{provide:d.rWj,useClass:class rg{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const c=function(f){l=l||f,s--,0==s&&r(l)};i.forEach(function(f){f.whenStable(c)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Do=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function df(){return new d.qLn},deps:[]},{provide:io,useClass:Ua,multi:!0,deps:[oe,d.R0b,d.Lbi]},{provide:io,useClass:so,multi:!0,deps:[oe]},{provide:Io,useClass:Io,deps:[Fa,xo,d.AFp,sc]},{provide:d.FYo,useExisting:Io},{provide:aa,useExisting:xo},{provide:xo,useClass:xo,deps:[oe]},{provide:Fa,useClass:Fa,deps:[io,d.R0b]},{provide:class Zh{},useClass:Sy,deps:[]},[]];let og=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:rc,useExisting:d.AFp},oa]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Va,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Do,...$a],imports:[Jo,d.hGG]}),n})(),ir=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Cy(){return new ir((0,d.LFG)(oe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Iy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(_d),r},providedIn:"root"}),n})(),_d=(()=>{class n extends Iy{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${d.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${d.JZr})`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function qi(n){return new _d(n.get(oe))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var Wn=B(8996),bs=B(3269);function Vt(...n){const e=(0,bs.yG)(n);return(0,Wn.D)(n,e)}var pa=B(7579);class Ts extends pa.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Nl=(0,B(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ur=B(9751);const{isArray:bd}=Array,{getPrototypeOf:wu,prototype:Su,keys:Ll}=Object;function Td(n){if(1===n.length){const e=n[0];if(bd(e))return{args:e,keys:null};if(function gc(n){return n&&"object"==typeof n&&wu(n)===Su}(e)){const t=Ll(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var k=B(4671),M=B(4004);const{isArray:H}=Array;function Re(n){return(0,M.U)(e=>function le(n,e){return H(e)?n(...e):n(e)}(n,e))}function Xe(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var ht=B(5403),Ut=B(9672);function $t(...n){const e=(0,bs.yG)(n),t=(0,bs.jO)(n),{args:r,keys:i}=Td(n);if(0===r.length)return(0,Wn.D)([],e);const s=new Ur.y(function Yt(n,e,t=k.y){return r=>{kn(e,()=>{const{length:i}=n,s=new Array(i);let l=i,c=i;for(let f=0;f<i;f++)kn(e,()=>{const v=(0,Wn.D)(n[f],e);let T=!1;v.subscribe((0,ht.x)(r,A=>{s[f]=A,T||(T=!0,c--),c||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Xe(i,l):k.y));return t?s.pipe(Re(t)):s}function kn(n,e,t){n?(0,Ut.f)(t,n,e):e()}var rn=B(8189);function Br(...n){return function Wi(){return(0,rn.J)(1)}()((0,Wn.D)(n,(0,bs.yG)(n)))}var Mo=B(8421);function Cu(n){return new Ur.y(e=>{(0,Mo.Xf)(n()).subscribe(e)})}var Wa=B(9635),bi=B(576);function Ki(n,e){const t=(0,bi.m)(n)?n:()=>n,r=i=>i.error(t());return new Ur.y(e?i=>e.schedule(r,0,i):r)}var Bs=B(515),hg=B(727),Zi=B(4482);function gf(){return(0,Zi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ht.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class fg extends Ur.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Zi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new hg.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ht.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=hg.w0.EMPTY)}return e}refCount(){return gf()(this)}}function Cr(n,e){return(0,Zi.e)((t,r)=>{let i=null,s=0,l=!1;const c=()=>l&&!i&&r.complete();t.subscribe((0,ht.x)(r,f=>{i?.unsubscribe();let v=0;const T=s++;(0,Mo.Xf)(n(f,T)).subscribe(i=(0,ht.x)(r,A=>r.next(e?e(f,A,T,v++):A),()=>{i=null,c()}))},()=>{l=!0,c()}))})}function Fl(n){return n<=0?()=>Bs.E:(0,Zi.e)((e,t)=>{let r=0;e.subscribe((0,ht.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function xu(...n){const e=(0,bs.yG)(n);return(0,Zi.e)((t,r)=>{(e?Br(n,t,e):Br(n,t)).subscribe(r)})}function Oo(n,e){return(0,Zi.e)((t,r)=>{let i=0;t.subscribe((0,ht.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Ti=B(5577);function mc(n){return(0,Zi.e)((e,t)=>{let r=!1;e.subscribe((0,ht.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function p0(n=kw){return(0,Zi.e)((e,t)=>{let r=!1;e.subscribe((0,ht.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function kw(){return new Nl}function jl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Oo((i,s)=>n(i,s,r)):k.y,Fl(1),t?mc(e):p0(()=>new Nl))}function yc(n,e){return(0,bi.m)(e)?(0,Ti.z)(n,e,1):(0,Ti.z)(n,1)}var as=B(8505);function Ul(n){return(0,Zi.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,ht.x)(t,void 0,void 0,l=>{s=(0,Mo.Xf)(n(l,Ul(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Ka(n,e){return(0,Zi.e)(function Dy(n,e,t,r,i){return(s,l)=>{let c=t,f=e,v=0;s.subscribe((0,ht.x)(l,T=>{const A=v++;f=c?n(f,T,A):(c=!0,T),r&&l.next(f)},i&&(()=>{c&&l.next(f),l.complete()})))}}(n,e,arguments.length>=2,!0))}function mf(n){return n<=0?()=>Bs.E:(0,Zi.e)((e,t)=>{let r=[];e.subscribe((0,ht.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pg(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Oo((i,s)=>n(i,s,r)):k.y,mf(1),t?mc(e):p0(()=>new Nl))}function Ro(n){return(0,M.U)(()=>n)}function gg(n){return(0,Zi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const _n="primary",Ed=Symbol("RouteTitle");class ky{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bl(n){return new ky(n)}function g0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],c=n[s];if(l.startsWith(":"))i[l.substring(1)]=c;else if(l!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ga(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!wd(n[i],e[i]))return!1;return!0}function wd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function My(n){return Array.prototype.concat.apply([],n)}function yg(n){return n.length>0?n[n.length-1]:null}function Vr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Za(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Wn.D)(Promise.resolve(n)):Vt(n)}const Iu=!1,Oi={exact:function Ry(n,e,t){if(!Ya(n.segments,e.segments)||!Tg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ry(n.children[r],e.children[r],t))return!1;return!0},subset:_g},vc={exact:function Oy(n,e){return ga(n,e)},subset:function Py(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wd(n[t],e[t]))},ignored:()=>!0};function vg(n,e,t){return Oi[t.paths](n.root,e.root,t.matrixParams)&&vc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function _g(n,e,t){return bg(n,e,e.segments,t)}function bg(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ya(i,t)||e.hasChildren()||!Tg(i,t,r))}if(n.segments.length===t.length){if(!Ya(n.segments,t)||!Tg(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!_g(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ya(n.segments,i)&&Tg(n.segments,i,r)&&n.children[_n])&&bg(n.children[_n],e,s,r)}}function Tg(n,e,t){return e.every((r,i)=>vc[t](n[i].parameters,r.parameters))}class ls{constructor(e=new Ln([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bl(this.queryParams)),this._queryParamMap}toString(){return Sg.serialize(this)}}class Ln{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _c(this)}}class Sd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Bl(this.parameters)),this._parameterMap}toString(){return xg(this)}}function Ya(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Qa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new wg},providedIn:"root"}),n})();class wg{parse(e){const t=new kg(e);return new ls(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Du(e.root,!0)}`,r=function m0(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Xa(t)}=${Xa(i)}`).join("&"):`${Xa(t)}=${Xa(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Cg(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Sg=new wg;function _c(n){return n.segments.map(e=>xg(e)).join("/")}function Du(n,e){if(!n.hasChildren())return _c(n);if(e){const t=n.children[_n]?Du(n.children[_n],!1):"",r=[];return Vr(n.children,(i,s)=>{s!==_n&&r.push(`${s}:${Du(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Eg(n,e){let t=[];return Vr(n.children,(r,i)=>{i===_n&&(t=t.concat(e(r,i)))}),Vr(n.children,(r,i)=>{i!==_n&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===_n?[Du(n.children[_n],!1)]:[`${i}:${Du(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[_n]?`${_c(n)}/${t[0]}`:`${_c(n)}/(${t.join("//")})`}}function xd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xa(n){return xd(n).replace(/%3B/gi,";")}function yf(n){return xd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vf(n){return decodeURIComponent(n)}function _f(n){return vf(n.replace(/\+/g,"%20"))}function xg(n){return`${yf(n.path)}${function Ig(n){return Object.keys(n).map(e=>`;${yf(e)}=${yf(n[e])}`).join("")}(n.parameters)}`}const y0=/^[^\/()?;=#]+/;function bc(n){const e=n.match(y0);return e?e[0]:""}const Dg=/^[^=?&#]+/,Ag=/^[^&#]+/;class kg{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ln([],{}):new Ln([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[_n]=new Ln(e,t)),r}parseSegment(){const e=bc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,Iu);return this.capture(e),new Sd(vf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=bc(this.remaining);i&&(r=i,this.capture(r))}e[vf(t)]=vf(r)}parseQueryParam(e){const t=function Ny(n){const e=n.match(Dg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Id(n){const e=n.match(Ag);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=_f(t),s=_f(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,Iu);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=_n);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[_n]:new Ln([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,Iu)}}function Mg(n){return n.segments.length>0?new Ln([],{[_n]:n}):n}function bf(n){const e={};for(const r of Object.keys(n.children)){const s=bf(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Og(n){if(1===n.numberOfChildren&&n.children[_n]){const e=n.children[_n];return new Ln(n.segments.concat(e.segments),e.children)}return n}(new Ln(n.segments,e))}function Vl(n){return n instanceof ls}const Ja=!1;function Mw(n,e,t,r,i){if(0===t.length)return Au(e.root,e.root,e.root,r,i);const s=function Ad(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ng(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const c={};return Vr(s.outlets,(f,v)=>{c[v]="string"==typeof f?f.split("/"):f}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((c,f)=>{0==f&&"."===c||(0==f&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,s]},[]);return new Ng(t,e,r)}(t);return s.toRoot()?Au(e.root,e.root,new Ln([],{}),r,i):function l(f){const v=function kd(n,e,t,r){if(n.isAbsolute)return new tl(e.root,!0,0);if(-1===r)return new tl(t,t===e.root,0);return function Lg(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new d.vHH(4005,Ja&&"Invalid number of '../'");i=r.segments.length}return new tl(r,!1,i-s)}(t,r+(el(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,f),T=v.processChildren?ti(v.segmentGroup,v.index,s.commands):Od(v.segmentGroup,v.index,s.commands);return Au(e.root,v.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function el(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Dd(n){return"object"==typeof n&&null!=n&&n.outlets}function Au(n,e,t,r,i){let l,s={};r&&Vr(r,(f,v)=>{s[v]=Array.isArray(f)?f.map(T=>`${T}`):`${f}`}),l=n===e?t:Pg(n,e,t);const c=Mg(bf(l));return new ls(c,s,i)}function Pg(n,e,t){const r={};return Vr(n.children,(i,s)=>{r[s]=i===e?t:Pg(i,e,t)}),new Ln(n.segments,r)}class Ng{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&el(r[0]))throw new d.vHH(4003,Ja&&"Root segment cannot have matrix parameters");const i=r.find(Dd);if(i&&i!==yg(r))throw new d.vHH(4004,Ja&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Od(n,e,t){if(n||(n=new Ln([],{})),0===n.segments.length&&n.hasChildren())return ti(n,e,t);const r=function nl(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],c=t[r];if(Dd(c))break;const f=`${c}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===f)break;if(f&&v&&"object"==typeof v&&void 0===v.outlets){if(!wf(f,v,l))return s;r+=2}else{if(!wf(f,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Ln(n.segments.slice(0,r.pathIndex),{});return s.children[_n]=new Ln(n.segments.slice(r.pathIndex),n.children),ti(s,0,i)}return r.match&&0===i.length?new Ln(n.segments,{}):r.match&&!n.hasChildren()?Tf(n,e,t):r.match?ti(n,0,i):Tf(n,e,t)}function ti(n,e,t){if(0===t.length)return new Ln(n.segments,{});{const r=function Md(n){return Dd(n[0])?n[0].outlets:{[_n]:n}}(t),i={};return!r[_n]&&n.children[_n]&&1===n.numberOfChildren&&0===n.children[_n].segments.length?ti(n.children[_n],e,t):(Vr(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=Od(n.children[l],e,s))}),Vr(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new Ln(n.segments,i))}}function Tf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Dd(s)){const f=Ly(s.outlets);return new Ln(r,f)}if(0===i&&el(t[0])){r.push(new Sd(n.segments[e].path,Ef(t[0]))),i++;continue}const l=Dd(s)?s.outlets[_n]:`${s}`,c=i<t.length-1?t[i+1]:null;l&&c&&el(c)?(r.push(new Sd(l,Ef(c))),i+=2):(r.push(new Sd(l,{})),i++)}return new Ln(r,{})}function Ly(n){const e={};return Vr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Tf(new Ln([],{}),0,t))}),e}function Ef(n){const e={};return Vr(n,(t,r)=>e[r]=`${t}`),e}function wf(n,e,t){return n==t.path&&ga(e,t.parameters)}const Rd="imperative";class oo{constructor(e,t){this.id=e,this.url=t}}class Sf extends oo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ei extends oo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ku extends oo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rl extends oo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Fg extends oo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _0 extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class b0 extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Es extends oo{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pd extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jg extends oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fy{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ao{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Mu{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ug{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bg{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jy{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ma{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let w0=(()=>{class n{createUrlTree(t,r,i,s,l,c){return Mw(t||r.root,i,s,l,c)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),b=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return w0.\u0275fac(e)},providedIn:"root"}),n})();class g{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=m(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=m(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=w(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return w(e,this._root).map(t=>t.value)}}function m(n,e){if(n===e.value)return e;for(const t of e.children){const r=m(n,t);if(r)return r}return null}function w(n,e){if(n===e.value)return[e];for(const t of e.children){const r=w(n,t);if(r.length)return r.unshift(e),r}return[]}class L{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function z(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Me extends g{constructor(e,t){super(e),this.snapshot=t,il(this,e)}toString(){return this.snapshot.toString()}}function it(n,e){const t=function It(n,e){const l=new Rr([],{},{},"",{},_n,e,null,n.root,-1,{});return new lo("",new L(l,[]))}(n,e),r=new Ts([new Sd("",{})]),i=new Ts({}),s=new Ts({}),l=new Ts({}),c=new Ts(""),f=new Rt(r,i,l,c,s,_n,e,t.root);return f.snapshot=t.root,new Me(new L(f,[]),t)}class Rt{constructor(e,t,r,i,s,l,c,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=c,this.title=this.data?.pipe((0,M.U)(v=>v[Ed]))??Vt(void 0),this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,M.U)(e=>Bl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,M.U)(e=>Bl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ln(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function en(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Rr{get title(){return this.data?.[Ed]}constructor(e,t,r,i,s,l,c,f,v,T,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=c,this.routeConfig=f,this._urlSegment=v,this._lastPathIndex=T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lo extends g{constructor(e,t){super(t),this.url=e,il(this,t)}toString(){return Po(this._root)}}function il(n,e){e.value._routerState=n,e.children.forEach(t=>il(n,t))}function Po(n){const e=n.children.length>0?` { ${n.children.map(Po).join(", ")} } `:"";return`${n.value}${e}`}function sl(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ga(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ga(e.params,t.params)||n.params.next(t.params),function mg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ga(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ga(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Nd(n,e){const t=ga(n.params,e.params)&&function Cd(n,e){return Ya(n,e)&&n.every((t,r)=>ga(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Nd(n.parent,e.parent))}function $l(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function C0(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $l(n,r,i);return $l(n,r)})}(n,e,t);return new L(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(c=>$l(n,c)),l}}const r=function x0(n){return new Rt(new Ts(n.url),new Ts(n.params),new Ts(n.queryParams),new Ts(n.fragment),new Ts(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>$l(n,s));return new L(r,i)}}const Cf="ngNavigationCancelingError";function Ld(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Vl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xf(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function xf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Cf]=!0,r.cancellationCode=e,t&&(r.url=t),r}function $g(n){return I0(n)&&Vl(n.url)}function I0(n){return n&&n[Cf]}class Ow{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Hg,this.attachRef=null}}let Hg=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Ow,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Uy=!1;let D0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=_n,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Hg),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Uy);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Uy);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Uy);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Uy);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,f=new TA(t,c,i.injector);if(r&&function Rw(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,f)}else this.activated=i.createComponent(l,{index:i.length,injector:f,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class TA{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rt?this.route:e===Hg?this.childContexts:this.parent.get(e,t)}}let If=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[D0],encapsulation:2}),n})();function A0(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function O0(n){const e=n.children&&n.children.map(O0),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_n&&(t.component=If),t}function ya(n){return n.outlet||_n}function Lw(n,e){const t=n.filter(r=>ya(r)===e);return t.push(...n.filter(r=>ya(r)!==e)),t}function Df(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class BN{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sl(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=z(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),Vr(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=z(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=z(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=z(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new jy(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Ug(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(sl(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(c.contexts),l.attachRef=c.componentRef,l.route=c.route.value,l.outlet&&l.outlet.attach(c.componentRef,c.route.value),sl(c.route.value),this.activateChildRoutes(e,null,l.children)}else{const c=Df(i.snapshot),f=c?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=f,l.injector=c,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Af{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class kf{constructor(e,t){this.component=e,this.route=t}}function Fw(n,e,t){const r=n._root;return By(r,e?e._root:null,t,[r.value])}function Fd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function By(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=z(e);return n.children.forEach(l=>{(function wA(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const f=function Uw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ya(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ya(n.url,e.url)||!ga(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Nd(n,e)||!ga(n.queryParams,e.queryParams);default:return!Nd(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);f?i.canActivateChecks.push(new Af(r)):(s.data=l.data,s._resolvedData=l._resolvedData),By(n,e,s.component?c?c.children:null:t,r,i),f&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new kf(c.outlet.component,l))}else l&&Mf(e,c,i),i.canActivateChecks.push(new Af(r)),By(n,null,s.component?c?c.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),Vr(s,(l,c)=>Mf(l,t.getContext(c),i)),i}function Mf(n,e,t){const r=z(n),i=n.value;Vr(r,(s,l)=>{Mf(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new kf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function jd(n){return"function"==typeof n}function Gg(n){return n instanceof Nl||"EmptyError"===n?.name}const Ud=Symbol("INITIAL_VALUE");function Rf(){return Cr(n=>$t(n.map(e=>e.pipe(Fl(1),xu(Ud)))).pipe((0,M.U)(e=>{for(const t of e)if(!0!==t){if(t===Ud)return Ud;if(!1===t||t instanceof ls)return t}return!0}),Oo(e=>e!==Ud),Fl(1)))}function Gw(n){return(0,Wa.z)((0,as.b)(e=>{if(Vl(e))throw Ld(0,e)}),(0,M.U)(e=>!0===e))}const F0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $y(n,e,t,r,i){const s=j0(n,e,t);return s.matched?function DA(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Vt(i.map(l=>{const c=Fd(l,n);return Za(function Vw(n){return n&&jd(n.canMatch)}(c)?c.canMatch(e,t):n.runInContext(()=>c(e,t)))})).pipe(Rf(),Gw()):Vt(!0)}(r=A0(e,r),e,t).pipe((0,M.U)(l=>!0===l?s:{...F0})):Vt(s)}function j0(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...F0}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||g0)(t,n,e);if(!i)return{...F0};const s={};Vr(i.posParams,(c,f)=>{s[f]=c.path});const l=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function zg(n,e,t,r){if(t.length>0&&function $N(n,e,t){return t.some(r=>wc(n,e,r)&&ya(r)!==_n)}(n,t,r)){const s=new Ln(e,function zw(n,e,t,r){const i={};i[_n]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ya(s)!==_n){const l=new Ln([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[ya(s)]=l}return i}(n,e,r,new Ln(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function kA(n,e,t){return t.some(r=>wc(n,e,r))}(n,t,r)){const s=new Ln(n.segments,function AA(n,e,t,r,i){const s={};for(const l of r)if(wc(n,t,l)&&!i[ya(l)]){const c=new Ln([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[ya(l)]=c}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new Ln(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function wc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qw(n,e,t,r){return!!(ya(n)===r||r!==_n&&wc(e,t,n))&&("**"===n.path||j0(e,n,t).matched)}function Vd(n,e,t){return 0===e.length&&!n.children[t]}const Sc=!1;class Hy{constructor(e){this.segmentGroup=e||null}}class U0{constructor(e){this.urlTree=e}}function qg(n){return Ki(new Hy(n))}function Ww(n){return Ki(new U0(n))}class B0{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=zg(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ln(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,_n).pipe((0,M.U)(s=>this.createUrlTree(bf(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ul(s=>{if(s instanceof U0)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Hy?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,_n).pipe((0,M.U)(i=>this.createUrlTree(bf(i),e.queryParams,e.fragment))).pipe(Ul(i=>{throw i instanceof Hy?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Sc)}createUrlTree(e,t,r){const i=Mg(e);return new ls(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,M.U)(s=>new Ln([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Wn.D)(i).pipe(yc(s=>{const l=r.children[s],c=Lw(t,s);return this.expandSegmentGroup(e,c,l,s).pipe((0,M.U)(f=>({segment:f,outlet:s})))}),Ka((s,l)=>(s[l.outlet]=l.segment,s),{}),pg())}expandSegment(e,t,r,i,s,l){return(0,Wn.D)(r).pipe(yc(c=>this.expandSegmentAgainstRoute(e,t,r,c,i,s,l).pipe(Ul(v=>{if(v instanceof Hy)return Vt(null);throw v}))),jl(c=>!!c),Ul((c,f)=>{if(Gg(c))return Vd(t,i,s)?Vt(new Ln([],{})):qg(t);throw c}))}expandSegmentAgainstRoute(e,t,r,i,s,l,c){return qw(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):qg(t):qg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ww(s):this.lineralizeSegments(r,s).pipe((0,Ti.z)(l=>{const c=new Ln(l,{});return this.expandSegment(e,c,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:c,consumedSegments:f,remainingSegments:v,positionalParamSegments:T}=j0(t,i,s);if(!c)return qg(t);const A=this.applyRedirectCommands(f,i.redirectTo,T);return i.redirectTo.startsWith("/")?Ww(A):this.lineralizeSegments(i,A).pipe((0,Ti.z)(j=>this.expandSegment(e,t,r,j.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=A0(r,e),r.loadChildren?(r._loadedRoutes?Vt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,M.U)(c=>(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,new Ln(i,{})))):Vt(new Ln(i,{}))):$y(t,r,i,e).pipe(Cr(({matched:l,consumedSegments:c,remainingSegments:f})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ti.z)(T=>{const A=T.injector??e,j=T.routes,{segmentGroup:P,slicedSegments:W}=zg(t,c,f,j),J=new Ln(P.segments,P.children);if(0===W.length&&J.hasChildren())return this.expandChildren(A,j,J).pipe((0,M.U)(qe=>new Ln(c,qe)));if(0===j.length&&0===W.length)return Vt(new Ln(c,{}));const se=ya(r)===s;return this.expandSegment(A,J,j,W,se?_n:s,!0).pipe((0,M.U)(Qe=>new Ln(c.concat(Qe.segments),Qe.children)))})):qg(t)))}getChildConfig(e,t,r){return t.children?Vt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Vt({routes:t._loadedRoutes,injector:t._loadedInjector}):function Pf(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Vt(!0):Vt(i.map(l=>{const c=Fd(l,n);return Za(function R0(n){return n&&jd(n.canLoad)}(c)?c.canLoad(e,t):n.runInContext(()=>c(e,t)))})).pipe(Rf(),Gw())}(e,t,r).pipe((0,Ti.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,as.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Kw(n){return Ki(xf(Sc,3))}())):Vt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Vt(r);if(i.numberOfChildren>1||!i.children[_n])return e.redirectTo,Ki(new d.vHH(4e3,Sc));i=i.children[_n]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new ls(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Vr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[s]=t[c]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return Vr(t.children,(c,f)=>{l[f]=this.createSegmentGroup(e,c,r,i)}),new Ln(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Sc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class $0{}class RA{constructor(e,t,r,i,s,l,c){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=l,this.urlSerializer=c}recognize(){const e=zg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,_n).pipe((0,M.U)(t=>{if(null===t)return null;const r=new Rr([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_n,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new L(r,t),s=new lo(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=ln(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Wn.D)(Object.keys(r.children)).pipe(yc(i=>{const s=r.children[i],l=Lw(t,i);return this.processSegmentGroup(e,l,s,i)}),Ka((i,s)=>i&&s?(i.push(...s),i):null),function Ay(n,e=!1){return(0,Zi.e)((t,r)=>{let i=0;t.subscribe((0,ht.x)(r,s=>{const l=n(s,i++);(l||e)&&r.next(s),!l&&r.complete()}))})}(i=>null!==i),mc(null),pg(),(0,M.U)(i=>{if(null===i)return null;const s=Qw(i);return function PA(n){n.sort((e,t)=>e.value.outlet===_n?-1:t.value.outlet===_n?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,Wn.D)(t).pipe(yc(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,s)),jl(l=>!!l),Ul(l=>{if(Gg(l))return Vd(r,i,s)?Vt([]):Vt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!qw(t,r,i,s))return Vt(null);let l;if("**"===t.path){const c=i.length>0?yg(i).parameters:{},f=Hl(r)+i.length;l=Vt({snapshot:new Rr(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xw(t),ya(t),t.component??t._loadedComponent??null,t,$d(r),f,jA(t)),consumedSegments:[],remainingSegments:[]})}else l=$y(r,t,i,e).pipe((0,M.U)(({matched:c,consumedSegments:f,remainingSegments:v,parameters:T})=>{if(!c)return null;const A=Hl(r)+f.length;return{snapshot:new Rr(f,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xw(t),ya(t),t.component??t._loadedComponent??null,t,$d(r),A,jA(t)),consumedSegments:f,remainingSegments:v}}));return l.pipe(Cr(c=>{if(null===c)return Vt(null);const{snapshot:f,consumedSegments:v,remainingSegments:T}=c;e=t._injector??e;const A=t._loadedInjector??e,j=function NA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:P,slicedSegments:W}=zg(r,v,T,j.filter(se=>void 0===se.redirectTo));if(0===W.length&&P.hasChildren())return this.processChildren(A,j,P).pipe((0,M.U)(se=>null===se?null:[new L(f,se)]));if(0===j.length&&0===W.length)return Vt([new L(f,[])]);const J=ya(t)===s;return this.processSegment(A,j,P,W,J?_n:s).pipe((0,M.U)(se=>null===se?null:[new L(f,se)]))}))}}function LA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Qw(n){const e=[],t=new Set;for(const r of n){if(!LA(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Qw(r.children);e.push(new L(r.value,i))}return e.filter(r=>!t.has(r))}function $d(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Hl(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Xw(n){return n.data||{}}function jA(n){return n.resolve||{}}function H0(n){return"string"==typeof n.title||null===n.title}function G0(n){return Cr(e=>{const t=n(e);return t?(0,Wn.D)(t).pipe((0,M.U)(()=>e)):Vt(e)})}const Nf=new d.OlP("ROUTES");let Gy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Vt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Za(t.loadComponent()).pipe((0,M.U)(nS),(0,as.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),gg(()=>{this.componentLoaders.delete(t)})),i=new fg(r,()=>new pa.x).pipe(gf());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Vt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,M.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,v,T=!1;Array.isArray(c)?v=c:(f=c.create(t).injector,v=My(f.get(Nf,[],d.XFs.Self|d.XFs.Optional)));return{routes:v.map(O0),injector:f}}),gg(()=>{this.childrenLoaders.delete(r)})),l=new fg(s,()=>new pa.x).pipe(gf());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Za(t()).pipe((0,M.U)(nS),(0,Ti.z)(i=>i instanceof d.YKP||Array.isArray(i)?Vt(i):(0,Wn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nS(n){return function VA(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let qy=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new pa.x,this.configLoader=(0,d.f3M)(Gy),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(Qa),this.rootContexts=(0,d.f3M)(Hg),this.navigationId=0,this.afterPreactivation=()=>Vt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new ao(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Fy(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ts({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Rd,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Oo(r=>0!==r.id),(0,M.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Cr(r=>{let i=!1,s=!1;return Vt(r).pipe((0,as.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Cr(l=>{const c=t.browserUrlTree.toString(),f=!t.navigated||l.extractedUrl.toString()!==c||c!==t.currentUrlTree.toString();if(!f&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const T="";return this.events.next(new rl(l.id,t.serializeUrl(r.rawUrl),T,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Bs.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return z0(l.source)&&(t.browserUrlTree=l.extractedUrl),Vt(l).pipe(Cr(T=>{const A=this.transitions?.getValue();return this.events.next(new Sf(T.id,this.urlSerializer.serialize(T.extractedUrl),T.source,T.restoredState)),A!==this.transitions?.getValue()?Bs.E:Promise.resolve(T)}),function V0(n,e,t,r){return Cr(i=>function Zw(n,e,t,r,i){return new B0(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,M.U)(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,as.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},r.urlAfterRedirects=T.urlAfterRedirects}),function GN(n,e,t,r,i){return(0,Ti.z)(s=>function OA(n,e,t,r,i,s,l="emptyOnly"){return new RA(n,e,t,r,i,l,s).recognize().pipe(Cr(c=>null===c?function Wg(n){return new Ur.y(e=>e.error(n))}(new $0):Vt(c)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe((0,M.U)(l=>({...s,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,as.b)(T=>{if(r.targetSnapshot=T.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!T.extras.skipLocationChange){const j=t.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);t.setBrowserUrl(j,T)}t.browserUrlTree=T.urlAfterRedirects}const A=new _0(T.id,this.urlSerializer.serialize(T.extractedUrl),this.urlSerializer.serialize(T.urlAfterRedirects),T.targetSnapshot);this.events.next(A)}));if(f&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:T,extractedUrl:A,source:j,restoredState:P,extras:W}=l,J=new Sf(T,this.urlSerializer.serialize(A),j,P);this.events.next(J);const se=it(A,this.rootComponentType).snapshot;return Vt(r={...l,targetSnapshot:se,urlAfterRedirects:A,extras:{...W,skipLocationChange:!1,replaceUrl:!1}})}{const T="";return this.events.next(new rl(l.id,t.serializeUrl(r.extractedUrl),T,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Bs.E}}),(0,as.b)(l=>{const c=new b0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),(0,M.U)(l=>r={...l,guards:Fw(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function N0(n,e){return(0,Ti.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?Vt({...t,guardsResult:!0}):function Vy(n,e,t,r){return(0,Wn.D)(n).pipe((0,Ti.z)(i=>function Hw(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Vt(s.map(c=>{const f=Df(e)??i,v=Fd(c,f);return Za(function Bw(n){return n&&jd(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):f.runInContext(()=>v(n,e,t,r))).pipe(jl())})).pipe(Rf()):Vt(!0)}(i.component,i.route,t,e,r)),jl(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Ti.z)(c=>c&&function VN(n){return"boolean"==typeof n}(c)?function Bd(n,e,t,r){return(0,Wn.D)(e).pipe(yc(i=>Br(function L0(n,e){return null!==n&&e&&e(new Mu(n)),Vt(!0)}(i.route.parent,r),function $w(n,e){return null!==n&&e&&e(new Bg(n)),Vt(!0)}(i.route,r),function IA(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function jw(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Cu(()=>Vt(l.guards.map(f=>{const v=Df(l.node)??t,T=Fd(f,v);return Za(function P0(n){return n&&jd(n.canActivateChild)}(T)?T.canActivateChild(r,n):v.runInContext(()=>T(r,n))).pipe(jl())})).pipe(Rf())));return Vt(s).pipe(Rf())}(n,i.path,t),function xA(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Vt(!0);const i=r.map(s=>Cu(()=>{const l=Df(e)??t,c=Fd(s,l);return Za(function SA(n){return n&&jd(n.canActivate)}(c)?c.canActivate(e,n):l.runInContext(()=>c(e,n))).pipe(jl())}));return Vt(i).pipe(Rf())}(n,i.route,t))),jl(i=>!0!==i,!0))}(r,s,n,e):Vt(c)),(0,M.U)(c=>({...t,guardsResult:c})))})}(this.environmentInjector,l=>this.events.next(l)),(0,as.b)(l=>{if(r.guardsResult=l.guardsResult,Vl(l.guardsResult))throw Ld(0,l.guardsResult);const c=new Es(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),Oo(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),G0(l=>{if(l.guards.canActivateChecks.length)return Vt(l).pipe((0,as.b)(c=>{const f=new Pd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}),Cr(c=>{let f=!1;return Vt(c).pipe(function Jw(n,e){return(0,Ti.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Vt(t);let s=0;return(0,Wn.D)(i).pipe(yc(l=>function zN(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!H0(i)&&(s[Ed]=i.title),function eS(n,e,t,r){const i=function tS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Vt({});const s={};return(0,Wn.D)(i).pipe((0,Ti.z)(l=>function UA(n,e,t,r){const i=Df(e)??r,s=Fd(n,i);return Za(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[l],e,t,r).pipe(jl(),(0,as.b)(c=>{s[l]=c}))),mf(1),Ro(s),Ul(l=>Gg(l)?Bs.E:Ki(l)))}(s,n,e,r).pipe((0,M.U)(l=>(n._resolvedData=l,n.data=ln(n,t).resolve,i&&H0(i)&&(n.data[Ed]=i.title),null)))}(l.route,r,n,e)),(0,as.b)(()=>s++),mf(1),(0,Ti.z)(l=>s===i.length?Vt(t):Bs.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,as.b)({next:()=>f=!0,complete:()=>{f||(t.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),(0,as.b)(c=>{const f=new jg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(f)}))}),G0(l=>{const c=f=>{const v=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(f.routeConfig).pipe((0,as.b)(T=>{f.component=T}),(0,M.U)(()=>{})));for(const T of f.children)v.push(...c(T));return v};return $t(c(l.targetSnapshot.root)).pipe(mc(),Fl(1))}),G0(()=>this.afterPreactivation()),(0,M.U)(l=>{const c=function Vg(n,e,t){const r=$l(n,e._root,t?t._root:void 0);return new Me(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:c}}),(0,as.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,M.U)(r=>(new BN(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,as.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ei(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),gg(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ul(l=>{if(s=!0,I0(l)){$g(l)||(t.navigated=!0,t.restoreHistory(r,!0));const c=new ku(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(c),$g(l)){const f=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||z0(r.source)};t.scheduleNavigation(f,Rd,null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const c=new Fg(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(c);try{r.resolve(t.errorHandler(l))}catch(f){r.reject(f)}}return Bs.E}))}))}cancelNavigationTransition(t,r,i){const s=new ku(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z0(n){return n!==Rd}let rS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===_n);return r}getResolvedTitleForRoute(t){return t.data[Ed]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)($A)},providedIn:"root"}),n})(),$A=(()=>{class n extends rS{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ir))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(iS)},providedIn:"root"}),n})();class Cn{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let iS=(()=>{class n extends Cn{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kg=new d.OlP("",{providedIn:"root",factory:()=>({})});let GA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(zA)},providedIn:"root"}),n})(),zA=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qA(n){throw n}function oS(n,e,t){return e.parse("/")}const WA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let us=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(Kg,{optional:!0})||{},this.errorHandler=this.options.errorHandler||qA,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||oS,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(GA),this.routeReuseStrategy=(0,d.f3M)(HA),this.urlCreationStrategy=(0,d.f3M)(b),this.titleStrategy=(0,d.f3M)(rS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=My((0,d.f3M)(Nf,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(qy),this.urlSerializer=(0,d.f3M)(Qa),this.location=(0,d.f3M)($e),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ls,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=it(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Rd,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const f={...i};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(s.state=f)}const c=this.parseUrl(t);this.scheduleNavigation(c,r,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(O0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:c,preserveFragment:f}=r,v=f?this.currentUrlTree.fragment:l;let T=null;switch(c){case"merge":T={...this.currentUrlTree.queryParams,...s};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,T,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Vl(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Rd,null,r)}navigate(t,r={skipLocationChange:!1}){return function aS(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...WA}:!1===r?{...KA}:r,Vl(t))return vg(this.currentUrlTree,t,i);const s=this.parseUrl(t);return vg(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let c,f,v,T;return l?(c=l.resolve,f=l.reject,v=l.promise):v=new Promise((A,j)=>{c=A,f=j}),T="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:c,reject:f,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(A=>Promise.reject(A))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hd=(()=>{class n{constructor(t,r,i,s,l,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=l,this.locationStrategy=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new pa.x;const f=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===f||"area"===f,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof Ei&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(us),d.Y36(Rt),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(yt))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&d.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&d.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})(),Cc=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,l){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new d.vpe,this.routerEventsSubscription=t.events.subscribe(c=>{c instanceof Ei&&this.update()})}ngAfterContentInit(){Vt(this.links.changes,Vt(null)).pipe((0,rn.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Wn.D)(t).pipe((0,rn.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function ZA(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(us),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(Hd,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,Hd,5),2&t){let s;d.iGM(s=d.CRH())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[d.TTD]}),n})();class Ky{}let WN=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Oo(t=>t instanceof Ei),yc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,d.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,c=s._loadedInjector??l;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(l,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(c,s.children??s._loadedRoutes))}return(0,Wn.D)(i).pipe((0,rn.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Vt(null);const s=i.pipe((0,Ti.z)(l=>null===l?Vt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Wn.D)([s,l]).pipe((0,rn.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(us),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Ky),d.LFG(Gy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uS=new d.OlP("");let YA=(()=>{class n{constructor(t,r,i,s,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Sf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ei&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ma&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ma(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();var No=(()=>((No=No||{})[No.COMPLETE=0]="COMPLETE",No[No.FAILED=1]="FAILED",No[No.REDIRECTING=2]="REDIRECTING",No))();const Zg=!1;function xc(n,e){return{\u0275kind:n,\u0275providers:e}}const Zy=new d.OlP("",{providedIn:"root",factory:()=>!1});function dS(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(us),i=n.get(hS);1===n.get(q0)&&r.initialNavigation(),n.get(pS,null,d.XFs.Optional)?.setUpPreloading(),n.get(uS,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const hS=new d.OlP(Zg?"bootstrap done indicator":"",{factory:()=>new pa.x}),q0=new d.OlP(Zg?"initial navigation":"",{providedIn:"root",factory:()=>1});function fS(){let n=[];return n=Zg?[{provide:d.Xts,multi:!0,useFactory:()=>{const e=(0,d.f3M)(us);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function T0(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],xc(1,n)}const pS=new d.OlP(Zg?"router preloader":"");function gS(n){return xc(0,[{provide:pS,useExisting:WN},{provide:Ky,useExisting:n}])}const zd=!1,t1=new d.OlP(zd?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Lf=[$e,{provide:Qa,useClass:wg},us,Hg,{provide:Rt,useFactory:function Gd(n){return n.routerState.root},deps:[us]},Gy,zd?{provide:Zy,useValue:!0}:[]];function yS(){return new d.PXZ("Router",us)}let Qy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Lf,zd&&r?.enableTracing?fS().\u0275providers:[],{provide:Nf,multi:!0,useValue:t},{provide:t1,useFactory:Xy,deps:[[us,new d.FiY,new d.tp0]]},{provide:Kg,useValue:r||{}},r?.useHash?{provide:yt,useClass:De}:{provide:yt,useClass:Se},{provide:uS,useFactory:()=>{const n=(0,d.f3M)(hu),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(Kg),r=(0,d.f3M)(qy),i=(0,d.f3M)(Qa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new YA(i,r,n,e,t)}},r?.preloadingStrategy?gS(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:yS},r?.initialNavigation?Ff(r):[],[{provide:Jy,useFactory:dS},{provide:d.tb,multi:!0,useExisting:Jy}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Nf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(t1,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[If]}),n})();function Xy(n){if(zd&&n)throw new d.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Ff(n){return["disabled"===n.initialNavigation?xc(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(us);return()=>{e.setUpLocationChangeListener()}}},{provide:q0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?xc(2,[{provide:q0,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(be,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(us),s=e.get(hS);(function cS(n,e){n.events.pipe(Oo(t=>t instanceof Ei||t instanceof ku||t instanceof Fg||t instanceof rl),(0,M.U)(t=>t instanceof Ei||t instanceof rl?No.COMPLETE:t instanceof ku&&(0===t.code||1===t.code)?No.REDIRECTING:No.FAILED),Oo(t=>t!==No.REDIRECTING),Fl(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(qy).afterPreactivation=()=>(r(!0),s.closed?Vt(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const Jy=new d.OlP(zd?"Router Initializer":"");let ev=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-about"]],decls:2,vars:0,consts:[[1,"container","mx-auto","mt-4"]],template:function(t,r){1&t&&(d.TgZ(0,"p",0),d._uU(1," This is a basic about page to demonstrate basic routing capabilities. "),d.qZA())}}),n})();var bS=B(9226),ye=B.n(bS),W0=B(1421),At=B.n(W0),TS=B(1234),bn=B.n(TS),i1=B(8099),s1=B.n(i1),ES=B(745),wS=B.n(ES),SS=B(3629),K0=B.n(SS),o1=B(3871),tv=B.n(o1),uo="http://example.com";function qd(){return qd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qd.apply(this,arguments)}var Qg=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(r,i){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(i)},e.off=function(r,i){if(!this.listeners[r])return!1;var s=this.listeners[r].indexOf(i);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(s,1),s>-1},e.trigger=function(r){var i=this.listeners[r];if(i)if(2===arguments.length)for(var s=i.length,l=0;l<s;++l)i[l].call(this,arguments[1]);else for(var c=Array.prototype.slice.call(arguments,1),f=i.length,v=0;v<f;++v)i[v].apply(this,c)},e.dispose=function(){this.listeners={}},e.pipe=function(r){this.on("data",function(i){r.push(i)})},n}(),xS=function(e){return ye().atob?ye().atob(e):Buffer.from(e,"base64").toString("binary")};function l1(n){for(var e=xS(n),t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}class u1 extends Qg{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const c1=String.fromCharCode(9),nv=function(n){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(n||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},ol=function(n){const e={};if(!n)return e;const t=n.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let i,r=t.length;for(;r--;)""!==t[r]&&(i=/([^=]*)=(.*)/.exec(t[r]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),e[i[0]]=i[1]);return e};class Z0 extends Qg{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,r;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((s,l)=>{const c=l(e);return c===e?s:s.concat([c])},[e]).forEach(s=>{for(let l=0;l<this.customParsers.length;l++)if(this.customParsers[l].call(this,s))return;if(0===s.indexOf("#EXT"))if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t)return r={type:"tag",tagType:"inf"},t[1]&&(r.duration=parseFloat(t[1])),t[2]&&(r.title=t[2]),void this.trigger("data",r);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"targetduration"},t[1]&&(r.duration=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"version"},t[1]&&(r.version=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"media-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t)return r={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(r.number=parseInt(t[1],10)),void this.trigger("data",r);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t)return r={type:"tag",tagType:"playlist-type"},t[1]&&(r.playlistType=t[1]),void this.trigger("data",r);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t)return r=qd(nv(t[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",r);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t)return r={type:"tag",tagType:"allow-cache"},t[1]&&(r.allowed=!/NO/.test(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(r={type:"tag",tagType:"map"},t[1]){const l=ol(t[1]);l.URI&&(r.uri=l.URI),l.BYTERANGE&&(r.byterange=nv(l.BYTERANGE))}this.trigger("data",r)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){if(r={type:"tag",tagType:"stream-inf"},t[1]){if(r.attributes=ol(t[1]),r.attributes.RESOLUTION){const l=r.attributes.RESOLUTION.split("x"),c={};l[0]&&(c.width=parseInt(l[0],10)),l[1]&&(c.height=parseInt(l[1],10)),r.attributes.RESOLUTION=c}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t)return r={type:"tag",tagType:"media"},t[1]&&(r.attributes=ol(t[1])),void this.trigger("data",r);if(t=/^#EXT-X-ENDLIST/.exec(s),t)this.trigger("data",{type:"tag",tagType:"endlist"});else{if(t=/^#EXT-X-DISCONTINUITY/.exec(s),!t)return t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t?(r={type:"tag",tagType:"program-date-time"},t[1]&&(r.dateTimeString=t[1],r.dateTimeObject=new Date(t[1])),void this.trigger("data",r)):(t=/^#EXT-X-KEY:(.*)$/.exec(s),t?(r={type:"tag",tagType:"key"},t[1]&&(r.attributes=ol(t[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r)):(t=/^#EXT-X-START:(.*)$/.exec(s),t?(r={type:"tag",tagType:"start"},t[1]&&(r.attributes=ol(t[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void this.trigger("data",r)):(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t?(r={type:"tag",tagType:"cue-out-cont"},r.data=t[1]?t[1]:"",void this.trigger("data",r)):(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t?(r={type:"tag",tagType:"cue-out"},r.data=t[1]?t[1]:"",void this.trigger("data",r)):(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(s),t?(r={type:"tag",tagType:"cue-in"},r.data=t[1]?t[1]:"",void this.trigger("data",r)):(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"skip"},r.attributes=ol(t[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(c1)),void this.trigger("data",r)):(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"part"},r.attributes=ol(t[1]),["DURATION"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseFloat(r.attributes[l]))}),["INDEPENDENT","GAP"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=/YES/.test(r.attributes[l]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=nv(r.attributes.BYTERANGE)),void this.trigger("data",r)):(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"server-control"},r.attributes=ol(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseFloat(r.attributes[l]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=/YES/.test(r.attributes[l]))}),void this.trigger("data",r)):(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"part-inf"},r.attributes=ol(t[1]),["PART-TARGET"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseFloat(r.attributes[l]))}),void this.trigger("data",r)):(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"preload-hint"},r.attributes=ol(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(l){if(r.attributes.hasOwnProperty(l)){r.attributes[l]=parseInt(r.attributes[l],10);const c="BYTERANGE-LENGTH"===l?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[c]=r.attributes[l],delete r.attributes[l]}}),void this.trigger("data",r)):(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1]?(r={type:"tag",tagType:"rendition-report"},r.attributes=ol(t[1]),["LAST-MSN","LAST-PART"].forEach(function(l){r.attributes.hasOwnProperty(l)&&(r.attributes[l]=parseInt(r.attributes[l],10))}),void this.trigger("data",r)):void this.trigger("data",{type:"tag",data:s.slice(4)}))))))))))));this.trigger("data",{type:"tag",tagType:"discontinuity"})}}}else this.trigger("data",{type:"comment",text:s.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))}addParser({expression:e,customType:t,dataParser:r,segment:i}){"function"!=typeof r&&(r=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:r(s),customType:t,segment:i}),!0})}addTagMapper({expression:e,map:t}){this.tagMappers.push(i=>e.test(i)?t(i):i)}}const jf=function(n){const e={};return Object.keys(n).forEach(function(t){e[(n=>n.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()))(t)]=n[t]}),e},Y0=function(n){const{serverControl:e,targetDuration:t,partTargetDuration:r}=n;if(!e)return;const i="#EXT-X-SERVER-CONTROL",s="holdBack",l="partHoldBack",c=t&&3*t,f=r&&2*r;t&&!e.hasOwnProperty(s)&&(e[s]=c,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${c}).`})),c&&e[s]<c&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${c})`}),e[s]=c),r&&!e.hasOwnProperty(l)&&(e[l]=3*r,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[l]}).`})),r&&e[l]<f&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[l]}) to partTargetDuration * 2 (${f}).`}),e[l]=f)};class f1 extends Qg{constructor(){super(),this.lineStream=new u1,this.parseStream=new Z0,this.lineStream.pipe(this.parseStream);const e=this,t=[];let i,s,r={},l=!1;const c=function(){},f={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let T=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let A=0,j=0;this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&i&&(r.map=i),!r.key&&s&&(r.key=s),!r.timeline&&"number"==typeof T&&(r.timeline=T),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(P){let W,J;({tag(){({version(){P.version&&(this.manifest.version=P.version)},"allow-cache"(){this.manifest.allowCache=P.allowed,"allowed"in P||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const se={};"length"in P&&(r.byterange=se,se.length=P.length,"offset"in P||(P.offset=A)),"offset"in P&&(r.byterange=se,se.offset=P.offset),A=se.offset+se.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),P.duration>0&&(r.duration=P.duration),0===P.duration&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(P.attributes)if("NONE"!==P.attributes.METHOD){if(P.attributes.URI)return"com.apple.streamingkeydelivery"===P.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:P.attributes})):"com.microsoft.playready"===P.attributes.KEYFORMAT?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:P.attributes.URI})):"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===P.attributes.KEYFORMAT?-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(P.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===P.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==P.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):P.attributes.KEYID&&"0x"===P.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:P.attributes.KEYFORMAT,keyId:P.attributes.KEYID.substring(2)},pssh:l1(P.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"})):(P.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:P.attributes.METHOD||"AES-128",uri:P.attributes.URI},void(typeof P.attributes.IV<"u"&&(s.iv=P.attributes.IV)));this.trigger("warn",{message:"ignoring key declaration without URI"})}else s=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(P.number)?this.manifest.mediaSequence=P.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+P.number})},"discontinuity-sequence"(){isFinite(P.number)?(this.manifest.discontinuitySequence=P.number,T=P.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+P.number})},"playlist-type"(){/VOD|EVENT/.test(P.playlistType)?this.manifest.playlistType=P.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+P.playlist})},map(){i={},P.uri&&(i.uri=P.uri),P.byterange&&(i.byterange=P.byterange),s&&(i.key=s)},"stream-inf"(){this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||f,P.attributes?(r.attributes||(r.attributes={}),qd(r.attributes,P.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||f,!(P.attributes&&P.attributes.TYPE&&P.attributes["GROUP-ID"]&&P.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const se=this.manifest.mediaGroups[P.attributes.TYPE];se[P.attributes["GROUP-ID"]]=se[P.attributes["GROUP-ID"]]||{},W=se[P.attributes["GROUP-ID"]],J={default:/yes/i.test(P.attributes.DEFAULT)},J.autoselect=!!J.default||/yes/i.test(P.attributes.AUTOSELECT),P.attributes.LANGUAGE&&(J.language=P.attributes.LANGUAGE),P.attributes.URI&&(J.uri=P.attributes.URI),P.attributes["INSTREAM-ID"]&&(J.instreamId=P.attributes["INSTREAM-ID"]),P.attributes.CHARACTERISTICS&&(J.characteristics=P.attributes.CHARACTERISTICS),P.attributes.FORCED&&(J.forced=/yes/i.test(P.attributes.FORCED)),W[P.attributes.NAME]=J},discontinuity(){T+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=P.dateTimeString,this.manifest.dateTimeObject=P.dateTimeObject),r.dateTimeString=P.dateTimeString,r.dateTimeObject=P.dateTimeObject},targetduration(){!isFinite(P.duration)||P.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+P.duration}):(this.manifest.targetDuration=P.duration,Y0.call(this,this.manifest))},start(){P.attributes&&!isNaN(P.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:P.attributes["TIME-OFFSET"],precise:P.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){r.cueOut=P.data},"cue-out-cont"(){r.cueOutCont=P.data},"cue-in"(){r.cueIn=P.data},skip(){this.manifest.skip=jf(P.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",P.attributes,["SKIPPED-SEGMENTS"])},part(){l=!0;const se=this.manifest.segments.length,Ne=jf(P.attributes);r.parts=r.parts||[],r.parts.push(Ne),Ne.byterange&&(Ne.byterange.hasOwnProperty("offset")||(Ne.byterange.offset=j),j=Ne.byterange.offset+Ne.byterange.length),this.warnOnMissingAttributes_(`#EXT-X-PART #${r.parts.length-1} for segment #${se}`,P.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((qe,Ie)=>{qe.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${Ie} lacks required attribute(s): LAST-PART`})})},"server-control"(){const se=this.manifest.serverControl=jf(P.attributes);se.hasOwnProperty("canBlockReload")||(se.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Y0.call(this,this.manifest),se.canSkipDateranges&&!se.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const se=this.manifest.segments.length,Ne=jf(P.attributes),Qe=Ne.type&&"PART"===Ne.type;r.preloadHints=r.preloadHints||[],r.preloadHints.push(Ne),Ne.byterange&&(Ne.byterange.hasOwnProperty("offset")||(Ne.byterange.offset=Qe?j:0,Qe&&(j=Ne.byterange.offset+Ne.byterange.length)));const qe=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${qe} for segment #${se}`,P.attributes,["TYPE","URI"]),Ne.type)for(let Ie=0;Ie<r.preloadHints.length-1;Ie++){const pe=r.preloadHints[Ie];pe.type&&pe.type===Ne.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${qe} for segment #${se} has the same TYPE ${Ne.type} as preload hint #${Ie}`})}},"rendition-report"(){const se=jf(P.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(se);const Ne=this.manifest.renditionReports.length-1,Qe=["LAST-MSN","URI"];l&&Qe.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${Ne}`,P.attributes,Qe)},"part-inf"(){this.manifest.partInf=jf(P.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",P.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Y0.call(this,this.manifest)}}[P.tagType]||c).call(e)},uri(){r.uri=P.uri,t.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),s&&(r.key=s),r.timeline=T,i&&(r.map=i),j=0,r={}},comment(){},custom(){P.segment?(r.custom=r.custom||{},r.custom[P.customType]=P.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[P.customType]=P.data)}})[P.type].call(e)})}warnOnMissingAttributes_(e,t,r){const i=[];r.forEach(function(s){t.hasOwnProperty(s)||i.push(s)}),i.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${i.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push("\n"),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var n,Ic={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Gl=["video","audio","text"],rv=["Video","Audio","Text"],Q0=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,r,i){return"avc1."+("00"+Number(r).toString(16)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})},zl=function(e){void 0===e&&(e="");var t=e.split(","),r=[];return t.forEach(function(i){var s;i=i.trim(),Gl.forEach(function(l){var c=Ic[l].exec(i.toLowerCase());if(c&&!(c.length<=1)){s=l;var f=i.substring(0,c[1].length),v=i.replace(f,"");r.push({type:f,details:v,mediaType:l})}}),s||r.push({type:i,details:"",mediaType:"unknown"})}),r},iv=function(e){return void 0===e&&(e=""),Ic.audio.test(e.trim().toLowerCase())},Xg=function(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(s){return Q0(s.trim())}),r="video";1===t.length&&iv(t[0])?r="audio":1===t.length&&function(e){return void 0===e&&(e=""),Ic.text.test(e.trim().toLowerCase())}(t[0])&&(r="application");var i="mp4";return t.every(function(s){return Ic.mp4.test(s)})?i="mp4":t.every(function(s){return Ic.webm.test(s)})?i="webm":t.every(function(s){return Ic.ogg.test(s)})&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},Wd=function(e){return void 0===e&&(e=""),ye().MediaSource&&ye().MediaSource.isTypeSupported&&ye().MediaSource.isTypeSupported(Xg(e))||!1},Jg=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var r=0;r<rv.length;r++)if(Ic["muxer"+rv[r]].test(t))return!0;return!1})},em="mp4a.40.2",X0=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,JN=/^application\/dash\+xml/i,J0=function(e){return X0.test(e)?"hls":JN.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},ql=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Zt=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!function(e){return ql(e)}(e)&&!(e instanceof ArrayBuffer)&&(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Yi=ye().BigInt||Number,lv=[Yi("0x1"),Yi("0x100"),Yi("0x10000"),Yi("0x1000000"),Yi("0x100000000"),Yi("0x10000000000"),Yi("0x1000000000000"),Yi("0x100000000000000"),Yi("0x10000000000000000")],v1=(n=new Uint16Array([65484]),new Uint8Array(n.buffer,n.byteOffset,n.byteLength),function(e,t){var r=void 0===t?{}:t,i=r.signed,s=void 0!==i&&i,l=r.le,c=void 0!==l&&l;e=Zt(e);var f=c?"reduce":"reduceRight",T=(e[f]?e[f]:Array.prototype[f]).call(e,function(j,P,W){var J=c?W:Math.abs(W+1-e.length);return j+Yi(P)*lv[J]},Yi(0));if(s){var A=lv[e.length]/Yi(2)-Yi(1);(T=Yi(T))>A&&(T-=A,T-=A,T-=Yi(2))}return Number(T)}),MS=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r},Pr=function(e,t,r){var i=void 0===r?{}:r,s=i.offset,l=void 0===s?0:s,c=i.mask,f=void 0===c?[]:c;return e=Zt(e),(t=Zt(t)).length&&e.length-l>=t.length&&(t.every?t.every:Array.prototype.every).call(t,function(T,A){return T===(f[A]?f[A]&e[l+A]:e[l+A])})},OS="http://example.com";const tm=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=ye().location&&ye().location.href||"");var r="function"==typeof ye().URL,i=/^\/\//.test(e),s=!ye().location&&!/\/\//i.test(e);if(r?e=new(ye().URL)(e,ye().location||OS):/\/\//i.test(e)||(e=tv().buildAbsoluteURL(ye().location&&ye().location.href||"",e)),r){var l=new URL(t,e);return s?l.href.slice(OS.length):i?l.href.slice(l.protocol.length):l.href}return tv().buildAbsoluteURL(e,t)};var w1=B(978);const PS=n=>!!n&&"object"==typeof n,ws=(...n)=>n.reduce((e,t)=>("object"!=typeof t||Object.keys(t).forEach(r=>{e[r]=Array.isArray(e[r])&&Array.isArray(t[r])?e[r].concat(t[r]):PS(e[r])&&PS(t[r])?ws(e[r],t[r]):t[r]}),e),{}),NS=n=>Object.keys(n).map(e=>n[e]),Kd=n=>n.reduce((e,t)=>e.concat(t),[]),tb=n=>{if(!n.length)return[];const e=[];for(let t=0;t<n.length;t++)e.push(n[t]);return e};const cv=({baseUrl:n="",source:e="",range:t="",indexRange:r=""})=>{const i={uri:e,resolvedUri:tm(n||"",e)};if(t||r){const l=(t||r).split("-");let v,c=ye().BigInt?ye().BigInt(l[0]):parseInt(l[0],10),f=ye().BigInt?ye().BigInt(l[1]):parseInt(l[1],10);c<Number.MAX_SAFE_INTEGER&&"bigint"==typeof c&&(c=Number(c)),f<Number.MAX_SAFE_INTEGER&&"bigint"==typeof f&&(f=Number(f)),v="bigint"==typeof f||"bigint"==typeof c?ye().BigInt(f)-ye().BigInt(c)+ye().BigInt(1):f-c+1,"bigint"==typeof v&&v<Number.MAX_SAFE_INTEGER&&(v=Number(v)),i.byterange={length:v,offset:c}}return i},LS=n=>(n&&"number"!=typeof n&&(n=parseInt(n,10)),isNaN(n)?null:n),x1={static(n){const{duration:e,timescale:t=1,sourceDuration:r,periodDuration:i}=n,s=LS(n.endNumber),l=e/t;return"number"==typeof s?{start:0,end:s}:"number"==typeof i?{start:0,end:i/l}:{start:0,end:r/l}},dynamic(n){const{NOW:e,clientOffset:t,availabilityStartTime:r,timescale:i=1,duration:s,periodStart:l=0,minimumUpdatePeriod:c=0,timeShiftBufferDepth:f=1/0}=n,v=LS(n.endNumber),T=(e+t)/1e3,A=r+l,W=Math.ceil((T+c-A)*i/s),J=Math.floor((T-A-f)*i/s),se=Math.floor((T-A)*i/s);return{start:Math.max(0,J),end:"number"==typeof v?v:Math.min(W,se)}}},rb=n=>{const{type:e,duration:t,timescale:r=1,periodDuration:i,sourceDuration:s}=n,{start:l,end:c}=x1[e](n),f=((n,e)=>{const t=[];for(let r=n;r<e;r++)t.push(r);return t})(l,c).map((n=>e=>{const{duration:t,timescale:r=1,periodStart:i,startNumber:s=1}=n;return{number:s+e,duration:t/r,timeline:i,time:e*t}})(n));if("static"===e){const v=f.length-1;f[v].duration=("number"==typeof i?i:s)-t/r*v}return f},al=n=>{const{baseUrl:e,initialization:t={},sourceDuration:r,indexRange:i="",periodStart:s,presentationTime:l,number:c=0,duration:f}=n;if(!e)throw new Error("NO_BASE_URL");const v=cv({baseUrl:e,source:t.sourceURL,range:t.range}),T=cv({baseUrl:e,source:e,indexRange:i});if(T.map=v,f){const A=rb(n);A.length&&(T.duration=A[0].duration,T.timeline=A[0].timeline)}else r&&(T.duration=r,T.timeline=s);return T.presentationTime=l||s,T.number=c,[T]},Yd=(n,e,t)=>{const r=n.sidx.map?n.sidx.map:null,i=n.sidx.duration,s=n.timeline||0,l=n.sidx.byterange,c=l.offset+l.length,f=e.timescale,v=e.references.filter(se=>1!==se.referenceType),T=[],A=n.endList?"static":"dynamic",j=n.sidx.timeline;let J,P=j,W=n.mediaSequence||0;J="bigint"==typeof e.firstOffset?ye().BigInt(c)+e.firstOffset:c+e.firstOffset;for(let se=0;se<v.length;se++){const Ne=e.references[se],Qe=Ne.referencedSize,qe=Ne.subsegmentDuration;let Ie;Ie="bigint"==typeof J?J+ye().BigInt(Qe)-ye().BigInt(1):J+Qe-1;const Dt=al({baseUrl:t,timescale:f,timeline:s,periodStart:j,presentationTime:P,number:W,duration:qe,sourceDuration:i,indexRange:`${J}-${Ie}`,type:A})[0];r&&(Dt.map=r),T.push(Dt),J+="bigint"==typeof J?ye().BigInt(Qe):Qe,P+=qe/f,W++}return n.segments=T,n},Ss=["AUDIO","SUBTITLES"],nm=n=>((n,e)=>NS(n.reduce((t,r)=>(r.forEach(i=>{t[(({timeline:e})=>e)(i)]=i}),t),{})))(n).sort((e,t)=>e.timeline>t.timeline?1:-1),hv=n=>{let e=[];return function(e,t,r){t.forEach(function(i){for(var s in e.mediaGroups[i])for(var l in e.mediaGroups[i][s])r(e.mediaGroups[i][s][l])})}(n,Ss,(t,r,i,s)=>{e=e.concat(t.playlists||[])}),e},Xd=({playlist:n,mediaSequence:e})=>{n.mediaSequence=e,n.segments.forEach((t,r)=>{t.number=n.mediaSequence+r})},Ou=n=>n&&n.uri+"-"+(n=>{let e;return e="bigint"==typeof n.offset||"bigint"==typeof n.length?ye().BigInt(n.offset)+ye().BigInt(n.length)-ye().BigInt(1):n.offset+n.length-1,`${n.offset}-${e}`})(n.byterange),Dc=n=>NS(n.reduce((t,r)=>{const i=r.attributes.id+(r.attributes.lang||"");return t[i]?(r.segments&&(r.segments[0]&&(r.segments[0].discontinuity=!0),t[i].segments.push(...r.segments)),r.attributes.contentProtection&&(t[i].attributes.contentProtection=r.attributes.contentProtection)):(t[i]=r,t[i].attributes.timelineStarts=[]),t[i].attributes.timelineStarts.push({start:r.attributes.periodStart,timeline:r.attributes.periodStart}),t},{})).map(t=>(t.discontinuityStarts=((n,e)=>n.reduce((t,r,i)=>(r.discontinuity&&t.push(i),t),[]))(t.segments||[]),t)),Ac=(n,e)=>{const t=Ou(n.sidx),r=t&&e[t]&&e[t].sidx;return r&&Yd(n,r,n.sidx.resolvedUri),n},Vf=(n,e={})=>{if(!Object.keys(e).length)return n;for(const t in n)n[t]=Ac(n[t],e);return n},BS=({attributes:n,segments:e,sidx:t,discontinuityStarts:r})=>{const i={attributes:{NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:r,timelineStarts:n.timelineStarts,segments:e};return n.frameRate&&(i.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(i.contentProtection=n.contentProtection),t&&(i.sidx=t),i},VS=({attributes:n})=>"video/mp4"===n.mimeType||"video/webm"===n.mimeType||"video"===n.contentType,$S=({attributes:n})=>"audio/mp4"===n.mimeType||"audio/webm"===n.mimeType||"audio"===n.contentType,HS=({attributes:n})=>"text/vtt"===n.mimeType||"text"===n.contentType,ib=n=>n?Object.keys(n).reduce((e,t)=>e.concat(n[t].playlists),[]):[],I1=({dashPlaylists:n,locations:e,sidxMapping:t={},previousManifest:r,eventStream:i})=>{if(!n.length)return{};const{sourceDuration:s,type:l,suggestedPresentationDelay:c,minimumUpdatePeriod:f}=n[0].attributes,v=Dc(n.filter(VS)).map(BS),T=Dc(n.filter($S)),A=Dc(n.filter(HS)),j=n.map(qe=>qe.attributes.captionServices).filter(Boolean),P={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:s,playlists:Vf(v,t)};f>=0&&(P.minimumUpdatePeriod=1e3*f),e&&(P.locations=e),"dynamic"===l&&(P.suggestedPresentationDelay=c),i&&i.length>0&&(P.eventStream=i);const J=T.length?((n,e={},t=!1)=>{let r;const i=n.reduce((s,l)=>{const c=l.attributes.role&&l.attributes.role.value||"",f=l.attributes.lang||"";let v=l.attributes.label||"main";f&&!l.attributes.label&&(v=`${l.attributes.lang}${c?` (${c})`:""}`),s[v]||(s[v]={language:f,autoselect:!0,default:"main"===c,playlists:[],uri:""});const T=Ac((({attributes:n,segments:e,sidx:t,mediaSequence:r,discontinuitySequence:i,discontinuityStarts:s},l)=>{const c={attributes:{NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuitySequence:i,discontinuityStarts:s,timelineStarts:n.timelineStarts,mediaSequence:r,segments:e};return n.contentProtection&&(c.contentProtection=n.contentProtection),t&&(c.sidx=t),l&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c})(l,t),e);return s[v].playlists.push(T),typeof r>"u"&&"main"===c&&(r=l,r.default=!0),s},{});return r||(i[Object.keys(i)[0]].default=!0),i})(T,t,0===P.playlists.length):null,se=A.length?((n,e={})=>n.reduce((t,r)=>{const i=r.attributes.label||r.attributes.lang||"text";return t[i]||(t[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),t[i].playlists.push(Ac((({attributes:n,segments:e,mediaSequence:t,discontinuityStarts:r,discontinuitySequence:i})=>{typeof e>"u"&&(e=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);const s={NAME:n.id,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1};return n.codecs&&(s.CODECS=n.codecs),{attributes:s,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:r,discontinuitySequence:i,mediaSequence:t,segments:e}})(r),e)),t},{}))(A,t):null,Ne=v.concat(ib(J),ib(se)),Qe=Ne.map(({timelineStarts:qe})=>qe);return P.timelineStarts=nm(Qe),((n,e)=>{n.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:r}){return r===t.timeline}),t.segments&&t.segments.forEach((r,i)=>{r.number=i})})})(Ne,P.timelineStarts),J&&(P.mediaGroups.AUDIO.audio=J),se&&(P.mediaGroups.SUBTITLES.subs=se),j.length&&(P.mediaGroups["CLOSED-CAPTIONS"].cc=(n=>n.reduce((e,t)=>(t&&t.forEach(r=>{const{channel:i,language:s}=r;e[s]={autoselect:!1,default:!1,instreamId:i,language:s},r.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(e[s].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(e[s]["3D"]=r["3D"])}),e),{}))(j)),r?(({oldManifest:n,newManifest:e})=>{const t=n.playlists.concat(hv(n)),r=e.playlists.concat(hv(e));return e.timelineStarts=nm([n.timelineStarts,e.timelineStarts]),(({oldPlaylists:n,newPlaylists:e,timelineStarts:t})=>{e.forEach(r=>{r.discontinuitySequence=t.findIndex(function({timeline:f}){return f===r.timeline});const i=((n,e)=>{for(let t=0;t<n.length;t++)if(n[t].attributes.NAME===e)return n[t];return null})(n,r.attributes.NAME);if(!i||r.sidx)return;const s=r.segments[0],l=i.segments.findIndex(function(f){return Math.abs(f.presentationTime-s.presentationTime)<.016666666666666666});if(-1===l)return Xd({playlist:r,mediaSequence:i.mediaSequence+i.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),void((!i.segments.length&&r.timeline>i.timeline||i.segments.length&&r.timeline>i.segments[i.segments.length-1].timeline)&&r.discontinuitySequence--);i.segments[l].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),Xd({playlist:r,mediaSequence:i.segments[l].number})})})({oldPlaylists:t,newPlaylists:r,timelineStarts:e.timelineStarts}),e})({oldManifest:r,newManifest:P}):P},D1=(n,e,t)=>{const{NOW:r,clientOffset:i,availabilityStartTime:s,timescale:l=1,periodStart:c=0,minimumUpdatePeriod:f=0}=n;return Math.ceil((((r+i)/1e3+f-(s+c))*l-e)/t)},sb=(n,e)=>{const{type:t,minimumUpdatePeriod:r=0,media:i="",sourceDuration:s,timescale:l=1,startNumber:c=1,periodStart:f}=n,v=[];let T=-1;for(let A=0;A<e.length;A++){const j=e[A],P=j.d,W=j.r||0,J=j.t||0;let se;if(T<0&&(T=J),J&&J>T&&(T=J),W<0){const qe=A+1;se=qe===e.length?"dynamic"===t&&r>0&&i.indexOf("$Number$")>0?D1(n,T,P):(s*l-T)/P:(e[qe].t-T)/P}else se=W+1;const Ne=c+v.length+se;let Qe=c+v.length;for(;Qe<Ne;)v.push({number:Qe,duration:P/l,time:T,timeline:f}),T+=P,Qe++}return v},A1=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,fv=(n,e)=>n.replace(A1,(n=>(e,t,r,i)=>{if("$$"===e)return"$";if(typeof n[t]>"u")return e;const s=""+n[t];return"RepresentationID"===t||(i=r?parseInt(i,10):1,s.length>=i)?s:`${new Array(i-s.length+1).join("0")}${s}`})(e)),k1=(n,e)=>{const t={RepresentationID:n.id,Bandwidth:n.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=n,i=cv({baseUrl:n.baseUrl,source:fv(r.sourceURL,t),range:r.range});return((n,e)=>n.duration||e?n.duration?rb(n):sb(n,e):[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodStart}])(n,e).map(l=>{t.Number=l.number,t.Time=l.time;const c=fv(n.media||"",t),T=n.periodStart+(l.time-(n.presentationTimeOffset||0))/(n.timescale||1);return{uri:c,timeline:l.timeline,duration:l.duration,resolvedUri:tm(n.baseUrl||"",c),map:i,number:l.number,presentationTime:T}})},gv=(n,e)=>{const{duration:t,segmentUrls:r=[],periodStart:i}=n;if(!t&&!e||t&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");const s=r.map(f=>((n,e)=>{const{baseUrl:t,initialization:r={}}=n,i=cv({baseUrl:t,source:r.sourceURL,range:r.range}),s=cv({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=i,s})(n,f));let l;return t&&(l=rb(n)),e&&(l=sb(n,e)),l.map((f,v)=>{if(s[v]){const T=s[v],A=n.timescale||1,j=n.presentationTimeOffset||0;return T.timeline=f.timeline,T.duration=f.duration,T.number=f.number,T.presentationTime=i+(f.time-j)/A,T}}).filter(f=>f)},ab=({attributes:n,segmentInfo:e})=>{let t,r;e.template?(r=k1,t=ws(n,e.template)):e.base?(r=al,t=ws(n,e.base)):e.list&&(r=gv,t=ws(n,e.list));const i={attributes:n};if(!r)return i;const s=r(t,e.segmentTimeline);if(t.duration){const{duration:l,timescale:c=1}=t;t.duration=l/c}else t.duration=s.length?s.reduce((l,c)=>Math.max(l,Math.ceil(c.duration)),0):0;return i.attributes=t,i.segments=s,e.base&&t.indexRange&&(i.sidx=s[0],i.segments=[]),i},br=(n,e)=>tb(n.childNodes).filter(({tagName:t})=>t===e),Jd=n=>n.textContent.trim(),eh=n=>{const c=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!c)return 0;const[f,v,T,A,j,P]=c.slice(1);return 31536e3*parseFloat(f||0)+2592e3*parseFloat(v||0)+86400*parseFloat(T||0)+3600*parseFloat(A||0)+60*parseFloat(j||0)+parseFloat(P||0)},ub={mediaPresentationDuration:n=>eh(n),availabilityStartTime:n=>(n=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),Date.parse(n)))(n)/1e3,minimumUpdatePeriod:n=>eh(n),suggestedPresentationDelay:n=>eh(n),type:n=>n,timeShiftBufferDepth:n=>eh(n),start:n=>eh(n),width:n=>parseInt(n,10),height:n=>parseInt(n,10),bandwidth:n=>parseInt(n,10),frameRate:n=>(n=>parseFloat(n.split("/").reduce((e,t)=>e/t)))(n),startNumber:n=>parseInt(n,10),timescale:n=>parseInt(n,10),presentationTimeOffset:n=>parseInt(n,10),duration(n){const e=parseInt(n,10);return isNaN(e)?eh(n):e},d:n=>parseInt(n,10),t:n=>parseInt(n,10),r:n=>parseInt(n,10),presentationTime:n=>parseInt(n,10),DEFAULT:n=>n},Ri=n=>n&&n.attributes?tb(n.attributes).reduce((e,t)=>(e[t.name]=(ub[t.name]||ub.DEFAULT)(t.value),e),{}):{},cb={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},rm=(n,e)=>e.length?Kd(n.map(function(t){return e.map(function(r){return tm(t,Jd(r))})})):n,db=n=>{const e=br(n,"SegmentTemplate")[0],t=br(n,"SegmentList")[0],r=t&&br(t,"SegmentURL").map(A=>ws({tag:"SegmentURL"},Ri(A))),i=br(n,"SegmentBase")[0],s=t||e,l=s&&br(s,"SegmentTimeline")[0],c=t||i||e,f=c&&br(c,"Initialization")[0],v=e&&Ri(e);v&&f?v.initialization=f&&Ri(f):v&&v.initialization&&(v.initialization={sourceURL:v.initialization});const T={template:v,segmentTimeline:l&&br(l,"S").map(A=>Ri(A)),list:t&&ws(Ri(t),{segmentUrls:r,initialization:Ri(f)}),base:i&&ws(Ri(i),{initialization:Ri(f)})};return Object.keys(T).forEach(A=>{T[A]||delete T[A]}),T},KS=n=>n.reduce((e,t)=>{const r=Ri(t);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());const i=cb[r.schemeIdUri];if(i){e[i]={attributes:r};const s=br(t,"cenc:pssh")[0];if(s){const l=Jd(s);e[i].pssh=l&&function E1(n){for(var e=function(e){return ye().atob?ye().atob(e):Buffer.from(e,"base64").toString("binary")}(n),t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(l)}}return e},{}),YS=n=>Kd(br(n.node,"EventStream").map(e=>{const t=Ri(e),r=t.schemeIdUri;return br(e,"Event").map(i=>{const s=Ri(i),c=t.timescale||1,v=(s.presentationTime||0)/c+n.attributes.start;return{schemeIdUri:r,value:t.value,id:s.id,start:v,end:v+(s.duration||0)/c,messageData:Jd(i)||s.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),QS=(n,e)=>(t,r)=>{const i=rm(e,br(t.node,"BaseURL")),s=ws(n,{periodStart:t.attributes.start});"number"==typeof t.attributes.duration&&(s.periodDuration=t.attributes.duration);const l=br(t.node,"AdaptationSet"),c=db(t.node);return Kd(l.map(((n,e,t)=>r=>{const i=Ri(r),s=rm(e,br(r,"BaseURL")),l=br(r,"Role")[0],c={role:Ri(l)};let f=ws(n,i,c);const v=br(r,"Accessibility")[0],T=(n=>"urn:scte:dash:cc:cea-608:2015"===n.schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map(t=>{let r,i;return i=t,/^CC\d=/.test(t)?[r,i]=t.split("="):/^CC\d$/.test(t)&&(r=t),{channel:r,language:i}}):"urn:scte:dash:cc:cea-708:2015"===n.schemeIdUri?("string"!=typeof n.value?[]:n.value.split(";")).map(t=>{const r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[i,s=""]=t.split("=");r.channel=i,r.language=t,s.split(",").forEach(l=>{const[c,f]=l.split(":");"lang"===c?r.language=f:"er"===c?r.easyReader=Number(f):"war"===c?r.aspectRatio=Number(f):"3D"===c&&(r["3D"]=Number(f))})}else r.language=t;return r.channel&&(r.channel="SERVICE"+r.channel),r}):void 0)(Ri(v));T&&(f=ws(f,{captionServices:T}));const A=br(r,"Label")[0];if(A&&A.childNodes.length){const se=A.childNodes[0].nodeValue.trim();f=ws(f,{label:se})}const j=KS(br(r,"ContentProtection"));Object.keys(j).length&&(f=ws(f,{contentProtection:j}));const P=db(r),W=br(r,"Representation"),J=ws(t,P);return Kd(W.map(((n,e,t)=>r=>{const i=br(r,"BaseURL"),s=rm(e,i),l=ws(n,Ri(r)),c=db(r);return s.map(f=>({segmentInfo:ws(t,c),attributes:ws(l,{baseUrl:f})}))})(f,s,J)))})(s,i,c)))},mv=n=>{if(""===n)throw new Error("DASH_EMPTY_MANIFEST");const e=new w1.DOMParser;let t,r;try{t=e.parseFromString(n,"application/xml"),r=t&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return r};var uC,rC=B(7459),iC=B.n(rC),sC=Zt([73,68,51]),kc=function n(e,t){return void 0===t&&(t=0),(e=Zt(e)).length-t<10||!Pr(e,sC,{offset:t})?t:(t+=function(e,t){void 0===t&&(t=0);var i=(e=Zt(e))[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10}(e,t),n(e,t))},hb=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?MS(e):e}),cC=function(e){e=Zt(e);for(var t=[],r=0;e.length>r;){var i=e[r],s=0,l=0,c=e[++l];for(l++;128&c;)s=(127&c)<<7,c=e[l],l++;s+=127&c;for(var f=0;f<uC.length;f++){var v=uC[f];if(i===v.id){t.push((0,v.parser)(e.subarray(l,l+s)));break}}r+=s+l}return t};uC=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var r=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Zt(e));try{return decodeURIComponent(escape(t))}catch{}return t}(e.subarray(t.size+1,t.size+1+r)),t.size+=r}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=cC(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:cC(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var co=function n(e,t,r){void 0===r&&(r=!1),t=function(e){return Array.isArray(e)?e.map(function(t){return hb(t)}):[hb(e)]}(t),e=Zt(e);var i=[];if(!t.length)return i;for(var s=0;s<e.length;){var l=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,c=e.subarray(s+4,s+8);if(0===l)break;var f=s+l;if(f>e.length){if(r)break;f=e.length}var v=e.subarray(s+8,f);Pr(c,t[0])&&(1===t.length?i.push(v):i.push.apply(i,n(v,t.slice(1),r))),s=f}return i},xr={EBML:Zt([26,69,223,163]),DocType:Zt([66,130]),Segment:Zt([24,83,128,103]),SegmentInfo:Zt([21,73,169,102]),Tracks:Zt([22,84,174,107]),Track:Zt([174]),TrackNumber:Zt([215]),DefaultDuration:Zt([35,227,131]),TrackEntry:Zt([174]),TrackType:Zt([131]),FlagDefault:Zt([136]),CodecID:Zt([134]),CodecPrivate:Zt([99,162]),VideoTrack:Zt([224]),AudioTrack:Zt([225]),Cluster:Zt([31,67,182,117]),Timestamp:Zt([231]),TimestampScale:Zt([42,215,177]),BlockGroup:Zt([160]),BlockDuration:Zt([155]),Block:Zt([161]),SimpleBlock:Zt([163])},yv=[128,64,32,16,8,4,2,1],Mc=function(e,t,r,i){void 0===r&&(r=!0),void 0===i&&(i=!1);var s=function(e){for(var t=1,r=0;r<yv.length&&!(e&yv[r]);r++)t++;return t}(e[t]),l=e.subarray(t,t+s);return r&&((l=Array.prototype.slice.call(e,t,t+s))[0]^=yv[s-1]),{length:s,value:v1(l,{signed:i}),bytes:l}},pb=function n(e){return"string"==typeof e?e.match(/.{1,2}/g).map(function(t){return n(t)}):"number"==typeof e?function(e,t){var i=(void 0===t?{}:t).le,s=void 0!==i&&i;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var l=function(e){return Math.ceil(function(e){return e.toString(2).length}(e)/8)}(e=Yi(e)),c=new Uint8Array(new ArrayBuffer(l)),f=0;f<l;f++){var v=s?f:Math.abs(f+1-c.length);c[v]=Number(e/lv[f]&Yi(255)),e<0&&(c[v]=Math.abs(~c[v]),c[v]-=0===f?1:2)}return c}(e):e},F1=function n(e,t,r){if(r>=t.length)return t.length;var i=Mc(t,r,!1);if(Pr(e.bytes,i.bytes))return r;var s=Mc(t,r+i.length);return n(e,t,r+s.length+s.value+i.length)},$r=function n(e,t){t=function(e){return Array.isArray(e)?e.map(function(t){return pb(t)}):[pb(e)]}(t),e=Zt(e);var r=[];if(!t.length)return r;for(var i=0;i<e.length;){var s=Mc(e,i,!1),l=Mc(e,i+s.length),c=i+s.length+l.length;127===l.value&&(l.value=F1(s,e,c),l.value!==e.length&&(l.value-=c));var v=e.subarray(c,c+l.value>e.length?e.length:c+l.value);Pr(t[0],s.bytes)&&(1===t.length?r.push(v):r=r.concat(n(v,t.slice(1)))),i+=s.length+l.length+v.length}return r},fC=Zt([0,0,0,1]),gb=Zt([0,0,1]),Wl=Zt([0,0,3]),U1=function(e){for(var t=[],r=1;r<e.length-2;)Pr(e.subarray(r,r+3),Wl)&&(t.push(r+2),r++),r++;if(0===t.length)return e;var i=e.length-t.length,s=new Uint8Array(i),l=0;for(r=0;r<i;l++,r++)l===t[0]&&(l++,t.shift()),s[r]=e[l];return s},pC=function(e,t,r,i){void 0===i&&(i=1/0),e=Zt(e),r=[].concat(r);for(var l,s=0,c=0;s<e.length&&(c<i||l);){var f=void 0;if(Pr(e.subarray(s),fC)?f=4:Pr(e.subarray(s),gb)&&(f=3),f){if(c++,l)return U1(e.subarray(l,s));var v=void 0;"h264"===t?v=31&e[s+f]:"h265"===t&&(v=e[s+f]>>1&63),-1!==r.indexOf(v)&&(l=s+f),s+=f+("h264"===t?1:2)}else s++}return e.subarray(0,0)},Ir={webm:Zt([119,101,98,109]),matroska:Zt([109,97,116,114,111,115,107,97]),flac:Zt([102,76,97,67]),ogg:Zt([79,103,103,83]),ac3:Zt([11,119]),riff:Zt([82,73,70,70]),avi:Zt([65,86,73]),wav:Zt([87,65,86,69]),"3gp":Zt([102,116,121,112,51,103]),mp4:Zt([102,116,121,112]),fmp4:Zt([115,116,121,112]),mov:Zt([102,116,121,112,113,116]),moov:Zt([109,111,111,118]),moof:Zt([109,111,111,102])},nh={aac:function(e){var t=kc(e);return Pr(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=kc(e);return Pr(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=$r(e,[xr.EBML,xr.DocType])[0];return Pr(t,Ir.webm)},mkv:function(e){var t=$r(e,[xr.EBML,xr.DocType])[0];return Pr(t,Ir.matroska)},mp4:function(e){return!nh["3gp"](e)&&!nh.mov(e)&&(!!(Pr(e,Ir.mp4,{offset:4})||Pr(e,Ir.fmp4,{offset:4})||Pr(e,Ir.moof,{offset:4})||Pr(e,Ir.moov,{offset:4}))||void 0)},mov:function(e){return Pr(e,Ir.mov,{offset:4})},"3gp":function(e){return Pr(e,Ir["3gp"],{offset:4})},ac3:function(e){var t=kc(e);return Pr(e,Ir.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=kc(e);return Pr(e,Ir.flac,{offset:t})},ogg:function(e){return Pr(e,Ir.ogg)},avi:function(e){return Pr(e,Ir.riff)&&Pr(e,Ir.avi,{offset:8})},wav:function(e){return Pr(e,Ir.riff)&&Pr(e,Ir.wav,{offset:8})},h264:function(e){return function(e,t,r){return pC(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,r){return pC(e,"h265",[32,33],3)}(e).length}},vv=Object.keys(nh).filter(function(n){return"ts"!==n&&"h264"!==n&&"h265"!==n}).concat(["ts","h264","h265"]);vv.forEach(function(n){var e=nh[n];nh[n]=function(t){return e(Zt(t))}});var B1=nh,mb=function(e){e=Zt(e);for(var t=0;t<vv.length;t++){var r=vv[t];if(B1[r](e))return r}return""},_v=B(6277);const Lo={},Oc=function(n,e){return Lo[n]=Lo[n]||[],e&&(Lo[n]=Lo[n].concat(e)),Lo[n]},mC=function(n,e){const t=Oc(n).indexOf(e);return!(t<=-1||(Lo[n]=Lo[n].slice(),Lo[n].splice(t,1),0))},im={prefixed:!0},rh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],vC=rh[0];let Kf;for(let n=0;n<rh.length;n++)if(rh[n][1]in At()){Kf=rh[n];break}if(Kf){for(let n=0;n<Kf.length;n++)im[vC[n]]=Kf[n];im.prefixed=Kf[0]!==vC[0]}let $s=[];const Hn=function sm(n){let t,e="info";const r=function(...i){t("log",e,i)};return t=((n,e)=>(t,r,i)=>{const s=e.levels[r],l=new RegExp(`^(${s})$`);if("log"!==t&&i.unshift(t.toUpperCase()+":"),i.unshift(n+":"),$s){$s.push([].concat(i));const f=$s.length-1e3;$s.splice(0,f>0?f:0)}if(!ye().console)return;let c=ye().console[t];!c&&"debug"===t&&(c=ye().console.info||ye().console.log),c&&s&&l.test(t)&&c[Array.isArray(i)?"apply":"call"](ye().console,i)})(n,r),r.createLogger=i=>sm(n+": "+i),r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},r.level=i=>{if("string"==typeof i){if(!r.levels.hasOwnProperty(i))throw new Error(`"${i}" in not a valid log level`);e=i}return e},(r.history=()=>$s?[].concat($s):[]).filter=i=>($s||[]).filter(s=>new RegExp(`.*${i}.*`).test(s[0])),r.history.clear=()=>{$s&&($s.length=0)},r.history.disable=()=>{null!==$s&&($s.length=0,$s=null)},r.history.enable=()=>{null===$s&&($s=[])},r.error=(...i)=>t("error",e,i),r.warn=(...i)=>t("warn",e,i),r.debug=(...i)=>t("debug",e,i),r}("VIDEOJS"),vb=Hn.createLogger,_C=Object.prototype.toString,_b=function(n){return ul(n)?Object.keys(n):[]};function ih(n,e){_b(n).forEach(t=>e(n[t],t))}function bb(n,e,t=0){return _b(n).reduce((r,i)=>e(r,n[i],i),t)}function ul(n){return!!n&&"object"==typeof n}function sh(n){return ul(n)&&"[object Object]"===_C.call(n)&&n.constructor===Object}function Tr(...n){const e={};return n.forEach(t=>{t&&ih(t,(r,i)=>{sh(r)?(sh(e[i])||(e[i]={}),e[i]=Tr(e[i],r)):e[i]=r})}),e}function Tv(n,e,t,r=!0){const i=l=>Object.defineProperty(n,e,{value:l,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const l=t();return i(l),l}};return r&&(s.set=i),Object.defineProperty(n,e,s)}var $1=Object.freeze({__proto__:null,each:ih,reduce:bb,isObject:ul,isPlain:sh,merge:Tr,defineLazyProperty:Tv});let TC,Tb=!1,bC=null,Zl=!1,EC=!1,Zf=!1,Yf=!1,Yl=!1,Eb=null,Ev=null,wC=null,wv=!1,Sv=!1,Cv=!1,xv=!1;const Qf=Boolean(ah()&&("ontouchstart"in ye()||ye().navigator.maxTouchPoints||ye().DocumentTouch&&ye().document instanceof ye().DocumentTouch)),oh=ye().navigator&&ye().navigator.userAgentData;if(oh&&(Zl="Android"===oh.platform,Zf=Boolean(oh.brands.find(n=>"Microsoft Edge"===n.brand)),Yf=Boolean(oh.brands.find(n=>"Chromium"===n.brand)),Yl=!Zf&&Yf,Eb=Ev=(oh.brands.find(n=>"Chromium"===n.brand)||{}).version||null,Sv="Windows"===oh.platform),!Yf){const n=ye().navigator&&ye().navigator.userAgent||"";Tb=/iPod/i.test(n),bC=function(){const e=n.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Zl=/Android/i.test(n),TC=function(){const e=n.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return t&&r?parseFloat(e[1]+"."+e[2]):t||null}(),EC=/Firefox/i.test(n),Zf=/Edg/i.test(n),Yf=/Chrome/i.test(n)||/CriOS/i.test(n),Yl=!Zf&&Yf,Eb=Ev=function(){const e=n.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),wC=function(){const e=/MSIE\s(\d+)\.\d/.exec(n);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(n)&&/rv:11.0/.test(n)&&(t=11),t}(),wv=/Safari/i.test(n)&&!Yl&&!Zl&&!Zf,Sv=/Windows/i.test(n),Cv=/iPad/i.test(n)||wv&&Qf&&!/iPhone/i.test(n),xv=/iPhone/i.test(n)&&!Cv}const Cs=xv||Cv||Tb,om=(wv||Cs)&&!Yl;var SC=Object.freeze({__proto__:null,get IS_IPOD(){return Tb},get IOS_VERSION(){return bC},get IS_ANDROID(){return Zl},get ANDROID_VERSION(){return TC},get IS_FIREFOX(){return EC},get IS_EDGE(){return Zf},get IS_CHROMIUM(){return Yf},get IS_CHROME(){return Yl},get CHROMIUM_VERSION(){return Eb},get CHROME_VERSION(){return Ev},get IE_VERSION(){return wC},get IS_SAFARI(){return wv},get IS_WINDOWS(){return Sv},get IS_IPAD(){return Cv},get IS_IPHONE(){return xv},TOUCH_ENABLED:Qf,IS_IOS:Cs,IS_ANY_SAFARI:om});function wb(n){return"string"==typeof n&&Boolean(n.trim())}function ah(){return At()===ye().document}function lh(n){return ul(n)&&1===n.nodeType}function Sb(){try{return ye().parent!==ye().self}catch{return!0}}function Cb(n){return function(e,t){if(!wb(e))return At()[n](null);wb(t)&&(t=At().querySelector(t));const r=lh(t)?t:At();return r[n]&&r[n](e)}}function xn(n="div",e={},t={},r){const i=At().createElement(n);return Object.getOwnPropertyNames(e).forEach(function(s){const l=e[s];"textContent"===s?Rc(i,l):(i[s]!==l||"tabIndex"===s)&&(i[s]=l)}),Object.getOwnPropertyNames(t).forEach(function(s){i.setAttribute(s,t[s])}),r&&Dv(i,r),i}function Rc(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function xb(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function Ql(n,e){return function CC(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}(e),n.classList.contains(e)}function Xf(n,...e){return n.classList.add(...e.reduce((t,r)=>t.concat(r.split(/\s+/)),[])),n}function Jf(n,...e){return n?(n.classList.remove(...e.reduce((t,r)=>t.concat(r.split(/\s+/)),[])),n):(Hn.warn("removeClass was called with an element that doesn't exist"),null)}function H1(n,e,t){return"function"==typeof t&&(t=t(n,e)),"boolean"!=typeof t&&(t=void 0),e.split(/\s+/).forEach(r=>n.classList.toggle(r,t)),n}function Ib(n,e){Object.getOwnPropertyNames(e).forEach(function(t){const r=e[t];null===r||typeof r>"u"||!1===r?n.removeAttribute(t):n.setAttribute(t,!0===r?"":r)})}function Ru(n){const e={};if(n&&n.attributes&&n.attributes.length>0){const r=n.attributes;for(let i=r.length-1;i>=0;i--){const s=r[i].name;let l=r[i].value;("boolean"==typeof n[s]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+s+","))&&(l=null!==l),e[s]=l}}return e}function G1(n,e){return n.getAttribute(e)}function tn(n,e,t){n.setAttribute(e,t)}function Iv(n,e){n.removeAttribute(e)}function xC(){At().body.focus(),At().onselectstart=function(){return!1}}function IC(){At().onselectstart=function(){return!0}}function cl(n){if(n&&n.getBoundingClientRect&&n.parentNode){const e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(r=>{void 0!==e[r]&&(t[r]=e[r])}),t.height||(t.height=parseFloat(ch(n,"height"))),t.width||(t.width=parseFloat(ch(n,"width"))),t}}function am(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};const e=n.offsetWidth,t=n.offsetHeight;let r=0,i=0;for(;n.offsetParent&&n!==At()[im.fullscreenElement];)r+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;return{left:r,top:i,width:e,height:t}}function uh(n,e){const t={x:0,y:0};if(Cs){let T=n;for(;T&&"html"!==T.nodeName.toLowerCase();){const A=ch(T,"transform");if(/^matrix/.test(A)){const j=A.slice(7,-1).split(/,\s/).map(Number);t.x+=j[4],t.y+=j[5]}else if(/^matrix3d/.test(A)){const j=A.slice(9,-1).split(/,\s/).map(Number);t.x+=j[12],t.y+=j[13]}T=T.parentNode}}const r={},i=am(e.target),s=am(n),l=s.width;let f=e.offsetY-(s.top-i.top),v=e.offsetX-(s.left-i.left);return e.changedTouches&&(v=e.changedTouches[0].pageX-s.left,f=e.changedTouches[0].pageY+s.top,Cs&&(v-=t.x,f-=t.y)),r.y=1-Math.max(0,Math.min(1,f/s.height)),r.x=Math.max(0,Math.min(1,v/l)),r}function lm(n){return ul(n)&&3===n.nodeType}function Dr(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function z1(n){return"function"==typeof n&&(n=n()),(Array.isArray(n)?n:[n]).map(e=>("function"==typeof e&&(e=e()),lh(e)||lm(e)?e:"string"==typeof e&&/\S/.test(e)?At().createTextNode(e):void 0)).filter(e=>e)}function Dv(n,e){return z1(e).forEach(t=>n.appendChild(t)),n}function Db(n,e){return Dv(Dr(n),e)}function um(n){return void 0===n.button&&void 0===n.buttons||0===n.button&&void 0===n.buttons||"mouseup"===n.type&&0===n.button&&0===n.buttons||!(0!==n.button||1!==n.buttons)}const Pu=Cb("querySelector"),Ab=Cb("querySelectorAll");function ch(n,e){if(!n||!e)return"";if("function"==typeof ye().getComputedStyle){let t;try{t=ye().getComputedStyle(n)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var kb=Object.freeze({__proto__:null,isReal:ah,isEl:lh,isInFrame:Sb,createEl:xn,textContent:Rc,prependTo:xb,hasClass:Ql,addClass:Xf,removeClass:Jf,toggleClass:H1,setAttributes:Ib,getAttributes:Ru,getAttribute:G1,setAttribute:tn,removeAttribute:Iv,blockTextSelection:xC,unblockTextSelection:IC,getBoundingClientRect:cl,findPosition:am,getPointerPosition:uh,isTextNode:lm,emptyEl:Dr,normalizeContent:z1,appendContent:Dv,insertContent:Db,isSingleLeftClick:um,$:Pu,$$:Ab,computedStyle:ch});let Mb,DC=!1;const q1=function(){if(!1===Mb.options.autoSetup)return;const n=Array.prototype.slice.call(At().getElementsByTagName("video")),e=Array.prototype.slice.call(At().getElementsByTagName("audio")),t=Array.prototype.slice.call(At().getElementsByTagName("video-js")),r=n.concat(e,t);if(r&&r.length>0)for(let i=0,s=r.length;i<s;i++){const l=r[i];if(!l||!l.getAttribute){dh(1);break}void 0===l.player&&null!==l.getAttribute("data-setup")&&Mb(l)}else DC||dh(1)};function dh(n,e){ah()&&(e&&(Mb=e),ye().setTimeout(q1,n))}function Ob(){DC=!0,ye().removeEventListener("load",Ob)}ah()&&("complete"===At().readyState?Ob():ye().addEventListener("load",Ob));const AC=function(n){const e=At().createElement("style");return e.className=n,e},kC=function(n,e){n.styleSheet?n.styleSheet.cssText=e:n.textContent=e};var Qi=new WeakMap;let Av,MC=3;function dl(){return MC++}function OC(n,e){if(!Qi.has(n))return;const t=Qi.get(n);0===t.handlers[e].length&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),0===Object.getOwnPropertyNames(t).length&&Qi.delete(n)}function hh(n,e,t,r){t.forEach(function(i){n(e,i,r)})}function Pc(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){const r=n||ye().event;n={};for(const i in r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&"path"!==i&&("returnValue"===i&&r.preventDefault||(n[i]=r[i]));if(n.target||(n.target=n.srcElement||At()),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){r.preventDefault&&r.preventDefault(),n.returnValue=!1,r.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),n.cancelBubble=!0,r.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,null!=n.clientX){const i=At().documentElement,s=At().body;n.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),n.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)}n.which=n.charCode||n.keyCode,null!=n.button&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n.fixed_=!0,n}const K1=function(){if("boolean"!=typeof Av){Av=!1;try{const n=Object.defineProperty({},"passive",{get(){Av=!0}});ye().addEventListener("test",null,n),ye().removeEventListener("test",null,n)}catch{}}return Av},Z1=["touchstart","touchmove"];function ho(n,e,t){if(Array.isArray(e))return hh(ho,n,e,t);Qi.has(n)||Qi.set(n,{});const r=Qi.get(n);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),t.guid||(t.guid=dl()),r.handlers[e].push(t),r.dispatcher||(r.disabled=!1,r.dispatcher=function(i,s){if(r.disabled)return;i=Pc(i);const l=r.handlers[i.type];if(l){const c=l.slice(0);for(let f=0,v=c.length;f<v&&!i.isImmediatePropagationStopped();f++)try{c[f].call(n,i,s)}catch(T){Hn.error(T)}}}),1===r.handlers[e].length)if(n.addEventListener){let i=!1;K1()&&Z1.indexOf(e)>-1&&(i={passive:!0}),n.addEventListener(e,r.dispatcher,i)}else n.attachEvent&&n.attachEvent("on"+e,r.dispatcher)}function cs(n,e,t){if(!Qi.has(n))return;const r=Qi.get(n);if(!r.handlers)return;if(Array.isArray(e))return hh(cs,n,e,t);const i=function(l,c){r.handlers[c]=[],OC(l,c)};if(void 0===e){for(const l in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},l)&&i(n,l);return}const s=r.handlers[e];if(s){if(!t)return void i(n,e);if(t.guid)for(let l=0;l<s.length;l++)s[l].guid===t.guid&&s.splice(l--,1);OC(n,e)}}function fh(n,e,t){const r=Qi.has(n)?Qi.get(n):{},i=n.parentNode||n.ownerDocument;if("string"==typeof e?e={type:e,target:n}:e.target||(e.target=n),e=Pc(e),r.dispatcher&&r.dispatcher.call(n,e,t),i&&!e.isPropagationStopped()&&!0===e.bubbles)fh.call(null,i,e,t);else if(!i&&!e.defaultPrevented&&e.target&&e.target[e.type]){Qi.has(e.target)||Qi.set(e.target,{});const s=Qi.get(e.target);e.target[e.type]&&(s.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function kv(n,e,t){if(Array.isArray(e))return hh(kv,n,e,t);const r=function(){cs(n,e,r),t.apply(this,arguments)};r.guid=t.guid=t.guid||dl(),ho(n,e,r)}function Mv(n,e,t){const r=function(){cs(n,e,r),t.apply(this,arguments)};r.guid=t.guid=t.guid||dl(),ho(n,e,r)}var Y1=Object.freeze({__proto__:null,fixEvent:Pc,on:ho,off:cs,trigger:fh,one:kv,any:Mv});const Ar=function(n,e,t){e.guid||(e.guid=dl());const r=e.bind(n);return r.guid=t?t+"_"+e.guid:e.guid,r},Nu=function(n,e){let t=ye().performance.now();return function(...i){const s=ye().performance.now();s-t>=e&&(n(...i),t=s)}},Q1=function(n,e,t,r=ye()){let i;const l=function(){const c=this,f=arguments;let v=function(){i=null,v=null,t||n.apply(c,f)};!i&&t&&n.apply(c,f),r.clearTimeout(i),i=r.setTimeout(v,e)};return l.cancel=()=>{r.clearTimeout(i),i=null},l};var cL=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:30,bind_:Ar,throttle:Nu,debounce:Q1});let ep;class Hs{on(e,t){const r=this.addEventListener;this.addEventListener=()=>{},ho(this,e,t),this.addEventListener=r}off(e,t){cs(this,e,t)}one(e,t){const r=this.addEventListener;this.addEventListener=()=>{},kv(this,e,t),this.addEventListener=r}any(e,t){const r=this.addEventListener;this.addEventListener=()=>{},Mv(this,e,t),this.addEventListener=r}trigger(e){const t=e.type||e;"string"==typeof e&&(e={type:t}),e=Pc(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),fh(this,e)}queueTrigger(e){ep||(ep=new Map);const t=e.type||e;let r=ep.get(this);r||(r=new Map,ep.set(this,r));const i=r.get(t);r.delete(t),ye().clearTimeout(i);const s=ye().setTimeout(()=>{r.delete(t),0===r.size&&(r=null,ep.delete(this)),this.trigger(e)},0);r.set(t,s)}}Hs.prototype.allowedEvents_={},Hs.prototype.addEventListener=Hs.prototype.on,Hs.prototype.removeEventListener=Hs.prototype.off,Hs.prototype.dispatchEvent=Hs.prototype.trigger;const Ov=n=>"function"==typeof n.name?n.name():"string"==typeof n.name?n.name:n.name_?n.name_:n.constructor&&n.constructor.name?n.constructor.name:typeof n,Lu=n=>n instanceof Hs||!!n.eventBusEl_&&["on","one","off","trigger"].every(e=>"function"==typeof n[e]),ph=n=>"string"==typeof n&&/\S/.test(n)||Array.isArray(n)&&!!n.length,Rv=(n,e,t)=>{if(!n||!n.nodeName&&!Lu(n))throw new Error(`Invalid target for ${Ov(e)}#${t}; must be a DOM node or evented object.`)},PC=(n,e,t)=>{if(!ph(n))throw new Error(`Invalid event type for ${Ov(e)}#${t}; must be a non-empty string or array.`)},NC=(n,e,t)=>{if("function"!=typeof n)throw new Error(`Invalid listener for ${Ov(e)}#${t}; must be a function.`)},Rb=(n,e,t)=>{const r=e.length<3||e[0]===n||e[0]===n.eventBusEl_;let i,s,l;return r?(i=n.eventBusEl_,e.length>=3&&e.shift(),[s,l]=e):[i,s,l]=e,Rv(i,n,t),PC(s,n,t),NC(l,n,t),l=Ar(n,l),{isTargetingSelf:r,target:i,type:s,listener:l}},tp=(n,e,t,r)=>{Rv(n,n,e),n.nodeName?Y1[e](n,t,r):n[e](t,r)},X1={on(...n){const{isTargetingSelf:e,target:t,type:r,listener:i}=Rb(this,n,"on");if(tp(t,"on",r,i),!e){const s=()=>this.off(t,r,i);s.guid=i.guid;const l=()=>this.off("dispose",s);l.guid=i.guid,tp(this,"on","dispose",s),tp(t,"on","dispose",l)}},one(...n){const{isTargetingSelf:e,target:t,type:r,listener:i}=Rb(this,n,"one");if(e)tp(t,"one",r,i);else{const s=(...l)=>{this.off(t,r,s),i.apply(null,l)};s.guid=i.guid,tp(t,"one",r,s)}},any(...n){const{isTargetingSelf:e,target:t,type:r,listener:i}=Rb(this,n,"any");if(e)tp(t,"any",r,i);else{const s=(...l)=>{this.off(t,r,s),i.apply(null,l)};s.guid=i.guid,tp(t,"any",r,s)}},off(n,e,t){if(!n||ph(n))cs(this.eventBusEl_,n,e);else{const r=n,i=e;Rv(r,this,"off"),PC(i,this,"off"),NC(t,this,"off"),t=Ar(this,t),this.off("dispose",t),r.nodeName?(cs(r,i,t),cs(r,"dispose",t)):Lu(r)&&(r.off(i,t),r.off("dispose",t))}},trigger(n,e){if(Rv(this.eventBusEl_,this,"trigger"),!ph(n&&"string"!=typeof n?n.type:n))throw new Error(`Invalid event type for ${Ov(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return fh(this.eventBusEl_,n,e)}};function Pv(n,e={}){const{eventBusKey:t}=e;if(t){if(!n[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);n.eventBusEl_=n[t]}else n.eventBusEl_=xn("span",{className:"vjs-event-bus"});return Object.assign(n,X1),n.eventedCallbacks&&n.eventedCallbacks.forEach(r=>{r()}),n.on("dispose",()=>{n.off(),[n,n.el_,n.eventBusEl_].forEach(function(r){r&&Qi.has(r)&&Qi.delete(r)}),ye().setTimeout(()=>{n.eventBusEl_=null},0)}),n}const J1={state:{},setState(n){let e;return"function"==typeof n&&(n=n()),ih(n,(t,r)=>{this.state[r]!==t&&(e=e||{},e[r]={from:this.state[r],to:t}),this.state[r]=t}),e&&Lu(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function LC(n,e){return Object.assign(n,J1),n.state=Object.assign({},n.state,e),"function"==typeof n.handleStateChanged&&Lu(n)&&n.on("statechanged",n.handleStateChanged),n}const Fu=function(n){return"string"!=typeof n?n:n.replace(/./,e=>e.toLowerCase())},ni=function(n){return"string"!=typeof n?n:n.replace(/./,e=>e.toUpperCase())},Pb=function(n,e){return ni(n)===ni(e)};var ek=Object.freeze({__proto__:null,toLowerCase:Fu,toTitleCase:ni,titleCaseEquals:Pb});class pt{constructor(e,t,r){if(this.player_=!e&&this.play?e=this:e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Tr({},this.options_),t=this.options_=Tr(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const i=e&&e.id&&e.id()||"no_player";this.id_=`${i}_component_${dl()}`}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(i=>this.addClass(i)),!1!==t.evented&&(Pv(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),LC(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(r),!1!==t.reportTouchActivity&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=Tr(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,r){return xn(e,t,r)}localize(e,t,r=e){const i=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),l=s&&s[i],c=i&&i.split("-")[0],f=s&&s[c];let v=r;return l&&l[e]?v=l[e]:f&&f[e]&&(v=f[e]),t&&(v=v.replace(/\{(\d+)\}/g,function(T,A){const j=t[A-1];let P=j;return typeof j>"u"&&(P=T),P})),v}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((r,i)=>r.concat(i),[]);let t=this;for(let r=0;r<e.length;r++)if(t=t.getChild(e[r]),!t||!t.getChild)return;return t}addChild(e,t={},r=this.children_.length){let i,s;if("string"==typeof e){s=ni(e);const l=t.componentClass||s;t.name=s;const c=pt.getComponent(l);if(!c)throw new Error(`Component ${l} does not exist`);if("function"!=typeof c)return null;i=new c(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(r,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),s=s||i.name&&ni(i.name()),s&&(this.childNameIndex_[s]=i,this.childNameIndex_[Fu(s)]=i),"function"==typeof i.el&&i.el()){let l=null;this.children_[r+1]&&(this.children_[r+1].el_?l=this.children_[r+1].el_:lh(this.children_[r+1])&&(l=this.children_[r+1])),this.contentEl().insertBefore(i.el(),l)}return i}removeChild(e){if("string"==typeof e&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let i=this.children_.length-1;i>=0;i--)if(this.children_[i]===e){t=!0,this.children_.splice(i,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ni(e.name())]=null,this.childNameIndex_[Fu(e.name())]=null;const r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,r=l=>{const c=l.name;let f=l.opts;if(void 0!==t[c]&&(f=t[c]),!1===f)return;!0===f&&(f={}),f.playerOptions=this.options_.playerOptions;const v=this.addChild(c,f);v&&(this[c]=v)};let i;const s=pt.getComponent("Tech");i=Array.isArray(e)?e:Object.keys(e),i.concat(Object.keys(this.options_).filter(function(l){return!i.some(function(c){return"string"==typeof c?l===c:l===c.name})})).map(l=>{let c,f;return"string"==typeof l?(c=l,f=e[c]||this.options_[c]||{}):(c=l.name,f=l),{name:c,opts:f}}).filter(l=>{const c=pt.getComponent(l.opts.componentClass||ni(l.name));return c&&!s.isTech(c)}).forEach(r)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_)return this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e);t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return Pu(e,t||this.contentEl())}$$(e,t){return Ab(e,t||this.contentEl())}hasClass(e){return Ql(this.el_,e)}addClass(...e){Xf(this.el_,...e)}removeClass(...e){Jf(this.el_,...e)}toggleClass(e,t){H1(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return G1(this.el_,e)}setAttribute(e,t){tn(this.el_,e,t)}removeAttribute(e){Iv(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,r){if(void 0!==t)return(null===t||t!=t)&&(t=0),this.el_.style[e]=-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?t:"auto"===t?"":t+"px",void(r||this.trigger("componentresize"));if(!this.el_)return 0;const i=this.el_.style[e],s=i.indexOf("px");return parseInt(-1!==s?i.slice(0,s):this.el_["offset"+ni(e)],10)}currentDimension(e){let t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=ch(this.el_,e),t=parseFloat(t),0===t||isNaN(t)){const r=`offset${ni(e)}`;t=this.el_[r]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(bn().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let s,e=0,t=null;this.on("touchstart",function(c){1===c.touches.length&&(t={pageX:c.touches[0].pageX,pageY:c.touches[0].pageY},e=ye().performance.now(),s=!0)}),this.on("touchmove",function(c){if(c.touches.length>1)s=!1;else if(t){const f=c.touches[0].pageX-t.pageX,v=c.touches[0].pageY-t.pageY;Math.sqrt(f*f+v*v)>10&&(s=!1)}});const l=function(){s=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(c){t=null,!0===s&&ye().performance.now()-e<200&&(c.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=Ar(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const r=function(i){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(e,t){var r;return e=Ar(this,e),this.clearTimersOnDispose_(),r=ye().setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),e()},t),this.setTimeoutIds_.add(r),r}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),ye().clearTimeout(e)),e}setInterval(e,t){e=Ar(this,e),this.clearTimersOnDispose_();const r=ye().setInterval(e,t);return this.setIntervalIds_.add(r),r}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),ye().clearInterval(e)),e}requestAnimationFrame(e){var t;return this.clearTimersOnDispose_(),e=Ar(this,e),t=ye().requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=Ar(this,t);const r=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,r),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),ye().cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((r,i)=>this[t](i))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,t){if("string"!=typeof e||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const r=pt.getComponent("Tech"),i=r&&r.isTech(t),s=pt===t||pt.prototype.isPrototypeOf(t.prototype);if(i||!s){let c;throw c=i?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${e}"; ${c}.`)}e=ni(e),pt.components_||(pt.components_={});const l=pt.getComponent("Player");if("Player"===e&&l&&l.players){const c=l.players,f=Object.keys(c);if(c&&f.length>0&&f.map(v=>c[v]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return pt.components_[e]=t,pt.components_[Fu(e)]=t,t}static getComponent(e){if(e&&pt.components_)return pt.components_[e]}}function Nb(n,e,t,r){return function tk(n,e,t){if("number"!=typeof e||e<0||e>t)throw new Error(`Failed to execute '${n}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}(n,r,t.length-1),t[r][e]}function Lb(n){let e;return e=void 0===n||0===n.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:n.length,start:Nb.bind(null,"start",0,n),end:Nb.bind(null,"end",1,n)},ye().Symbol&&ye().Symbol.iterator&&(e[ye().Symbol.iterator]=()=>(n||[]).values()),e}function Ta(n,e){return Array.isArray(n)?Lb(n):void 0===n||void 0===e?Lb():Lb([[n,e]])}pt.registerComponent("Component",pt);const FC=function(n,e){n=n<0?0:n;let t=Math.floor(n%60),r=Math.floor(n/60%60),i=Math.floor(n/3600);const s=Math.floor(e/60%60),l=Math.floor(e/3600);return(isNaN(n)||n===1/0)&&(i=r=t="-"),i=i>0||l>0?i+":":"",r=((i||s>=10)&&r<10?"0"+r:r)+":",t=t<10?"0"+t:t,i+r+t};let Nv=FC;function Fb(n){Nv=n}function jC(){Nv=FC}function gh(n,e=n){return Nv(n,e)}var nk=Object.freeze({__proto__:null,createTimeRanges:Ta,createTimeRange:Ta,setFormatTime:Fb,resetFormatTime:jC,formatTime:gh});function Lv(n,e){let r,i,t=0;if(!e)return 0;(!n||!n.length)&&(n=Ta(0,0));for(let s=0;s<n.length;s++)r=n.start(s),i=n.end(s),i>e&&(i=e),t+=i-r;return t/e}function Gs(n){if(n instanceof Gs)return n;"number"==typeof n?this.code=n:"string"==typeof n?this.message=n:ul(n)&&("number"==typeof n.code&&(this.code=n.code),Object.assign(this,n)),this.message||(this.message=Gs.defaultMessages[this.code]||"")}Gs.prototype.code=0,Gs.prototype.message="",Gs.prototype.status=null,Gs.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Gs.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let n=0;n<Gs.errorTypes.length;n++)Gs[Gs.errorTypes[n]]=n,Gs.prototype[Gs.errorTypes[n]]=n;function np(n){return null!=n&&"function"==typeof n.then}function Xl(n){np(n)&&n.then(null,e=>{})}const jb=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,r,i)=>(n[r]&&(t[r]=n[r]),t),{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})};const Ub="vjs-modal-dialog";class rp extends pt{constructor(e,t){super(e,t),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=xn("div",{className:`${Ub}-content`},{role:"document"}),this.descEl_=xn("p",{className:`${Ub}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Rc(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Ub} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if("boolean"==typeof e){const t=this.closeable_=!!e;let r=this.getChild("closeButton");if(t&&!r){const i=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(r,"close",this.close_)}!t&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),r=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(t),this.empty(),Db(t,e),this.trigger("modalfill"),i?r.insertBefore(t,i):r.appendChild(t);const s=this.getChild("closeButton");s&&r.appendChild(s.el_)}empty(){this.trigger("beforemodalempty"),Dr(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=At().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),bn().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(!bn().isEventKey(e,"Tab"))return;const t=this.focusableEls_(),r=this.el_.querySelector(":focus");let i;for(let s=0;s<t.length;s++)if(r===t[s]){i=s;break}At().activeElement===this.el_&&(i=0),e.shiftKey&&0===i?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&i===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof ye().HTMLAnchorElement||t instanceof ye().HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof ye().HTMLInputElement||t instanceof ye().HTMLSelectElement||t instanceof ye().HTMLTextAreaElement||t instanceof ye().HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof ye().HTMLIFrameElement||t instanceof ye().HTMLObjectElement||t instanceof ye().HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable"))}}rp.prototype.options_={pauseOnOpen:!0,temporary:!0},pt.registerComponent("ModalDialog",rp);class ip extends Hs{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Lu(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let r=0,i=this.length;r<i;r++)if(this[r]===e){t=this[r],t.off&&t.off(),this.tracks_.splice(r,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let r=0,i=this.length;r<i;r++){const s=this[r];if(s.id===e){t=s;break}}return t}}ip.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const n in ip.prototype.allowedEvents_)ip.prototype["on"+n]=null;const Fv=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].enabled=!1)},Bb=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].selected=!1)};class Vb extends ip{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class jv{constructor(e){jv.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let r=0;const i=e.length;this.cues_=e,this.length_=e.length;const s=function(l){""+l in this||Object.defineProperty(this,""+l,{get(){return this.cues_[l]}})};if(t<i)for(r=t;r<i;r++)s.call(this,r)}getCueById(e){let t=null;for(let r=0,i=this.length;r<i;r++){const s=this[r];if(s.id===e){t=s;break}}return t}}const sk={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},$b={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Hb={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Gb={disabled:"disabled",hidden:"hidden",showing:"showing"};class cm extends Hs{constructor(e={}){super();const t={id:e.id||"vjs_track_"+dl(),kind:e.kind||"",language:e.language||""};let r=e.label||"";for(const i in t)Object.defineProperty(this,i,{get:()=>t[i],set(){}});Object.defineProperty(this,"label",{get:()=>r,set(i){i!==r&&(r=i,this.trigger("labelchange"))}})}}const zb=function(n){const e=["protocol","hostname","port","pathname","search","hash","host"],t=At().createElement("a");t.href=n;const r={};for(let i=0;i<e.length;i++)r[e[i]]=t[e[i]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=ye().location.protocol),r.host||(r.host=ye().location.host),r},VC=function(n){if(!n.match(/^https?:\/\//)){const e=At().createElement("a");e.href=n,n=e.href}return n},dm=function(n){if("string"==typeof n){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n);if(t)return t.pop().toLowerCase()}return""},Uv=function(n,e=ye().location){const t=zb(n);return(":"===t.protocol?e.protocol:t.protocol)+t.host!==e.protocol+e.host};var $C=Object.freeze({__proto__:null,parseUrl:zb,getAbsoluteURL:VC,getFileExtension:dm,isCrossOrigin:Uv});const mh=function(n,e){const t=new(ye().WebVTT.Parser)(ye(),ye().vttjs,ye().WebVTT.StringDecoder()),r=[];t.oncue=function(i){e.addCue(i)},t.onparsingerror=function(i){r.push(i)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(n),r.length>0&&(ye().console&&ye().console.groupCollapsed&&ye().console.groupCollapsed(`Text Track parsing errors for ${e.src}`),r.forEach(i=>Hn.error(i)),ye().console&&ye().console.groupEnd&&ye().console.groupEnd()),t.flush()},qb=function(n,e){const t={uri:n},r=Uv(n);r&&(t.cors=r);const i="use-credentials"===e.tech_.crossOrigin();i&&(t.withCredentials=i),wS()(t,Ar(this,function(s,l,c){if(s)return Hn.error(s,l);e.loaded_=!0,"function"!=typeof ye().WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],f=>{if("vttjserror"!==f.type)return mh(c,e);Hn.error(`vttjs failed to load, stopping trying to process ${e.src}`)}):mh(c,e)}))};class hm extends cm{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=Tr(e,{kind:Hb[e.kind]||"subtitles",language:e.language||e.srclang||""});let r=Gb[t.mode]||"disabled";const i=t.default;("metadata"===t.kind||"chapters"===t.kind)&&(r="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const s=new jv(this.cues_),l=new jv(this.activeCues_);let c=!1;this.timeupdateHandler=Ar(this,function(v={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_)return void("timeupdate"!==v.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)));this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),"timeupdate"!==v.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}}),this.tech_.one("dispose",()=>{this.stopTracking()}),"disabled"!==r&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>i,set(){}},mode:{get:()=>r,set(v){Gb[v]&&r!==v&&(r=v,!this.preload_&&"disabled"!==r&&0===this.cues.length&&qb(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return l;const v=this.tech_.currentTime(),T=[];for(let A=0,j=this.cues.length;A<j;A++){const P=this.cues[A];P.startTime<=v&&P.endTime>=v&&T.push(P)}if(c=!1,T.length!==this.activeCues_.length)c=!0;else for(let A=0;A<T.length;A++)-1===this.activeCues_.indexOf(T[A])&&(c=!0);return this.activeCues_=T,l.setCues_(this.activeCues_),l},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&qb(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(ye().vttjs&&!(e instanceof ye().vttjs.VTTCue)){t=new(ye().vttjs.VTTCue)(e.startTime,e.endTime,e.text);for(const i in e)i in t||(t[i]=e[i]);t.id=e.id,t.originalCue_=e}const r=this.tech_.textTracks();for(let i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const r=this.cues_[t];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}hm.prototype.allowedEvents_={cuechange:"cuechange"};class ok extends cm{constructor(e={}){const t=Tr(e,{kind:$b[e.kind]||""});super(t);let r=!1;Object.defineProperty(this,"enabled",{get:()=>r,set(i){"boolean"!=typeof i||i===r||(r=i,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class Wb extends cm{constructor(e={}){const t=Tr(e,{kind:sk[e.kind]||""});super(t);let r=!1;Object.defineProperty(this,"selected",{get:()=>r,set(i){"boolean"!=typeof i||i===r||(r=i,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class hl extends Hs{constructor(e={}){let t;super();const r=new hm(e);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get:()=>t},track:{get:()=>r}}),t=hl.NONE,r.addEventListener("loadeddata",()=>{t=hl.LOADED,this.trigger({type:"load",target:this})})}}hl.prototype.allowedEvents_={load:"load"},hl.NONE=0,hl.LOADING=1,hl.LOADED=2,hl.ERROR=3;const Ea={audio:{ListClass:class BC extends ip{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){Fv(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&Fv(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,Fv(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}},TrackClass:ok,capitalName:"Audio"},video:{ListClass:class rk extends ip{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Bb(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&Bb(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Bb(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},TrackClass:Wb,capitalName:"Video"},text:{ListClass:Vb,TrackClass:hm,capitalName:"Text"}};Object.keys(Ea).forEach(function(n){Ea[n].getterName=`${n}Tracks`,Ea[n].privateName=`${n}Tracks_`});const Nc={remoteText:{ListClass:Vb,TrackClass:hm,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:class ik{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,r=e.length;t<r;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let r=0,i=this.trackElements_.length;r<i;r++)if(e===this.trackElements_[r].track){t=this.trackElements_[r];break}return t}removeTrackElement_(e){for(let t=0,r=this.trackElements_.length;t<r;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},TrackClass:hl,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},zs=Object.assign({},Ea,Nc);Nc.names=Object.keys(Nc),Ea.names=Object.keys(Ea),zs.names=[].concat(Nc.names).concat(Ea.names);class wn extends pt{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),zs.names.forEach(r=>{const i=zs[r];e&&e[i.getterName]&&(this[i.privateName]=e[i.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{!1===e[`native${r}Tracks`]&&(this[`featuresNative${r}Tracks`]=!1)}),!1===e.nativeCaptions||!1===e.nativeTextTracks?this.featuresNativeTextTracks=!1:(!0===e.nativeCaptions||!0===e.nativeTextTracks)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==e.preloadTextTracks,this.autoRemoteTextTracks_=new zs.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ar(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Ta(0,0)}bufferedPercent(){return Lv(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Ea.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){(e=[].concat(e)).forEach(t=>{const r=this[`${t}Tracks`]()||[];let i=r.length;for(;i--;){const s=r[i];"text"===t&&this.removeRemoteTextTrack(s),r.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;)this.removeRemoteTextTrack(e[t])}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return void 0!==e&&(this.error_=new Gs(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Ta(0,0):Ta()}play(){}setScrubbing(){}scrubbing(){}setCurrentTime(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Ea.names.forEach(e=>{const r=()=>{this.trigger(`${e}trackchange`)},i=this[Ea[e].getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),this.on("dispose",()=>{i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!ye().WebVTT)if(At().body.contains(this.el())){if(!this.options_["vtt.js"]&&sh(K0())&&Object.keys(K0()).length>0)return void this.trigger("vttjsloaded");const e=At().createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),ye().WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),r=c=>e.addTrack(c.track),i=c=>e.removeTrack(c.track);t.on("addtrack",r),t.on("removetrack",i),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),l=()=>{s();for(let c=0;c<e.length;c++){const f=e[c];f.removeEventListener("cuechange",s),"showing"===f.mode&&f.addEventListener("cuechange",s)}};l(),e.addEventListener("change",l),e.addEventListener("addtrack",l),e.addEventListener("removetrack",l),this.on("dispose",function(){t.off("addtrack",r),t.off("removetrack",i),e.removeEventListener("change",l),e.removeEventListener("addtrack",l),e.removeEventListener("removetrack",l);for(let c=0;c<e.length;c++)e[c].removeEventListener("cuechange",s)})}addTextTrack(e,t,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return function HC(n,e,t,r,i={}){const s=n.textTracks();i.kind=e,t&&(i.label=t),r&&(i.language=r),i.tech=n;const l=new zs.text.TrackClass(i);return s.addTrack(l),l}(this,e,t,r)}createRemoteTextTrack(e){const t=Tr(e,{tech:this});return new Nc.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const r=this.createRemoteTextTrack(e);return"boolean"!=typeof t&&(t=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!1===t&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=dl();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(){}overrideNativeVideoTracks(){}canPlayType(){return""}static canPlayType(){return""}static canPlaySource(e,t){return wn.canPlayType(e.type)}static isTech(e){return e.prototype instanceof wn||e instanceof wn||e===wn}static registerTech(e,t){if(wn.techs_||(wn.techs_={}),!wn.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!wn.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!wn.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ni(e),wn.techs_[e]=t,wn.techs_[Fu(e)]=t,"Tech"!==e&&wn.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(wn.techs_&&wn.techs_[e])return wn.techs_[e];if(e=ni(e),ye()&&ye().videojs&&ye().videojs[e])return Hn.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),ye().videojs[e]}}}zs.names.forEach(function(n){const e=zs[n];wn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),wn.prototype.featuresVolumeControl=!0,wn.prototype.featuresMuteControl=!0,wn.prototype.featuresFullscreenResize=!1,wn.prototype.featuresPlaybackRate=!1,wn.prototype.featuresProgressEvents=!1,wn.prototype.featuresSourceset=!1,wn.prototype.featuresTimeupdateEvents=!1,wn.prototype.featuresNativeTextTracks=!1,wn.prototype.featuresVideoFrameCallback=!1,wn.withSourceHandlers=function(n){n.registerSourceHandler=function(t,r){let i=n.sourceHandlers;i||(i=n.sourceHandlers=[]),void 0===r&&(r=i.length),i.splice(r,0,t)},n.canPlayType=function(t){const r=n.sourceHandlers||[];let i;for(let s=0;s<r.length;s++)if(i=r[s].canPlayType(t),i)return i;return""},n.selectSourceHandler=function(t,r){const i=n.sourceHandlers||[];let s;for(let l=0;l<i.length;l++)if(s=i[l].canHandleSource(t,r),s)return i[l];return null},n.canPlaySource=function(t,r){const i=n.selectSourceHandler(t,r);return i?i.canHandleSource(t,r):""},["seekable","seeking","duration"].forEach(function(t){const r=this[t];"function"==typeof r&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){let r=n.selectSourceHandler(t,this.options_);r||(n.nativeSourceHandler?r=n.nativeSourceHandler:Hn.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=r.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},pt.registerComponent("Tech",wn),wn.registerTech("Tech",wn),wn.defaultTechOrder_=[];const Lc={},Bv={},fm={};function ak(n,e,t){n.setTimeout(()=>Fc(e,Lc[e.type],t,n),1)}function Kb(n,e,t,r=null){const i="call"+ni(t),s=n.reduce(Zb(i),r),l=s===fm,c=l?null:e[t](s);return function pL(n,e,t,r){for(let i=n.length-1;i>=0;i--){const s=n[i];s[e]&&s[e](r,t)}}(n,t,c,l),c}const fL={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},zC={setCurrentTime:1,setMuted:1,setVolume:1},qC={play:1,pause:1};function Zb(n){return(e,t)=>e===fm?fm:t[n]?t[n](e):e}function Fc(n={},e=[],t,r,i=[],s=!1){const[l,...c]=e;if("string"==typeof l)Fc(n,Lc[l],t,r,i,s);else if(l){const f=function hk(n,e){const t=Bv[n.id()];let r=null;if(null==t)return r=e(n),Bv[n.id()]=[[e,r]],r;for(let i=0;i<t.length;i++){const[s,l]=t[i];s===e&&(r=l)}return null===r&&(r=e(n),t.push([e,r])),r}(r,l);if(!f.setSource)return i.push(f),Fc(n,c,t,r,i,s);f.setSource(Object.assign({},n),function(v,T){if(v)return Fc(n,c,t,r,i,s);i.push(f),Fc(T,n.type===T.type?c:Lc[T.type],t,r,i,s)})}else c.length?Fc(n,c,t,r,i,s):s?t(n,i):Fc(n,Lc["*"],t,r,i,!0)}const WC={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},pm=function(n=""){const e=dm(n);return WC[e.toLowerCase()]||""},KC=function(n){if(Array.isArray(n)){let e=[];n.forEach(function(t){t=KC(t),Array.isArray(t)?e=e.concat(t):ul(t)&&e.push(t)}),n=e}else n="string"==typeof n&&n.trim()?[ZC({src:n})]:ul(n)&&"string"==typeof n.src&&n.src&&n.src.trim()?[ZC(n)]:[];return n};function ZC(n){if(!n.type){const e=pm(n.src);e&&(n.type=e)}return n}pt.registerComponent("MediaLoader",class pk extends pt{constructor(e,t,r){if(super(e,Tr({createEl:!1},t),r),t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(let s=0,l=t.playerOptions.techOrder;s<l.length;s++){const c=ni(l[s]);let f=wn.getTech(c);if(c||(f=pt.getComponent(c)),f&&f.isSupported()){e.loadTech_(c);break}}}});class Vv extends pt{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(e="div",t={},r={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&Hn.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=t.tabIndex;const i=xn(e,t,r);return i.appendChild(xn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=xn("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(void 0===e)return this.controlText_||"Need Text";const r=this.localize(e);this.controlText_=e,Rc(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){bn().isEventKey(e,"Space")||bn().isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}pt.registerComponent("ClickableComponent",Vv);class Yb extends Vv{constructor(e,t){super(e,t),this.update(),this.update_=r=>this.update(r),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return xn("picture",{className:"vjs-poster",tabIndex:-1},{},xn("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))}crossOrigin(e){if(typeof e>"u")return this.el_?this.el_.querySelector("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.el_.querySelector("img").crossOrigin=e:this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){this.el_.querySelector("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Xl(this.player_.play()):this.player_.pause())}}Yb.prototype.crossorigin=Yb.prototype.crossOrigin,pt.registerComponent("PosterImage",Yb);const wa="#222",YC={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function $v(n,e){let t;if(4===n.length)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else{if(7!==n.length)throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");t=n.slice(1)}return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function Hv(n,e,t){try{n.style[e]=t}catch{return}}pt.registerComponent("TextTrackDisplay",class QC extends pt{constructor(e,t,r){super(e,t,r);const i=s=>this.updateDisplay(s);e.on("loadstart",s=>this.toggleDisplay(s)),e.on("texttrackchange",i),e.on("loadedmetadata",s=>this.preselectTrack(s)),e.ready(Ar(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)return void this.hide();e.on("fullscreenchange",i),e.on("playerresize",i);const s=ye().screen.orientation||ye(),l=ye().screen.orientation?"change":"orientationchange";s.addEventListener(l,i),e.on("dispose",()=>s.removeEventListener(l,i));const c=this.options_.playerOptions.tracks||[];for(let f=0;f<c.length;f++)this.player_.addRemoteTextTrack(c[f],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage;let i,s,l;for(let c=0;c<t.length;c++){const f=t[c];r&&r.enabled&&r.language&&r.language===f.language&&f.kind in e?f.kind===r.kind?l=f:l||(l=f):r&&!r.enabled?(l=null,i=null,s=null):f.default&&("descriptions"!==f.kind||i?f.kind in e&&!s&&(s=f):i=f)}l?l.mode="showing":s?s.mode="showing":i&&(i.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof ye().WebVTT&&ye().WebVTT.processCues(ye(),[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const l=[];for(let c=0;c<e.length;++c){const f=e[c];"showing"===f.mode&&l.push(f)}return void this.updateForTrack(l)}let r=null,i=null,s=e.length;for(;s--;){const l=e[s];"showing"===l.mode&&("descriptions"===l.kind?r=l:i=l)}i?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(i)):r&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),r=e.activeCues;let i=r.length;for(;i--;){const s=r[i];if(!s)continue;const l=s.displayState;if(t.color&&(l.firstChild.style.color=t.color),t.textOpacity&&Hv(l.firstChild,"color",$v(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(l.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Hv(l.firstChild,"backgroundColor",$v(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Hv(l,"backgroundColor",$v(t.windowColor,t.windowOpacity)):l.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?l.firstChild.style.textShadow=`2px 2px 3px ${wa}, 2px 2px 4px ${wa}, 2px 2px 5px ${wa}`:"raised"===t.edgeStyle?l.firstChild.style.textShadow=`1px 1px ${wa}, 2px 2px ${wa}, 3px 3px ${wa}`:"depressed"===t.edgeStyle?l.firstChild.style.textShadow=`1px 1px #ccc, 0 1px #ccc, -1px -1px ${wa}, 0 -1px ${wa}`:"uniform"===t.edgeStyle&&(l.firstChild.style.textShadow=`0 0 4px ${wa}, 0 0 4px ${wa}, 0 0 4px ${wa}, 0 0 4px ${wa}`)),t.fontPercent&&1!==t.fontPercent){const c=ye().parseFloat(l.style.fontSize);l.style.fontSize=c*t.fontPercent+"px",l.style.height="auto",l.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=YC[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),"function"!=typeof ye().WebVTT||e.every(r=>!r.activeCues))return;const t=[];for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.activeCues.length;++s)t.push(i.activeCues[s])}ye().WebVTT.processCues(ye(),t,this.el_);for(let r=0;r<e.length;++r){const i=e[r];for(let s=0;s<i.activeCues.length;++s){const l=i.activeCues[s].displayState;Xf(l,"vjs-text-track-cue","vjs-text-track-cue-"+(i.language?i.language:r)),i.language&&tn(l,"lang",i.language)}this.player_.textTrackSettings&&this.updateDisplayState(i)}}}),pt.registerComponent("LoadingSpinner",class XC extends pt{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),r=xn("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),i=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i}});class Sa extends Vv{createEl(e,t={},r={}){const i=xn("button",t=Object.assign({className:this.buildCSSClass()},t),r=Object.assign({type:"button"},r));return i.appendChild(xn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}addChild(e,t={}){return Hn.warn(`Adding an actionable (user controllable) child to a Button (${this.constructor.name}) is not supported; use a ClickableComponent instead.`),pt.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){bn().isEventKey(e,"Space")||bn().isEventKey(e,"Enter")?e.stopPropagation():super.handleKeyDown(e)}}pt.registerComponent("Button",Sa);class JC extends Sa{constructor(e,t){super(e,t),this.mouseused_=!1,this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return Xl(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const r=this.player_.getChild("controlBar"),i=r&&r.getChild("playToggle");if(!i)return void this.player_.tech(!0).focus();const s=()=>i.focus();np(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}JC.prototype.controlText_="Play Video",pt.registerComponent("BigPlayButton",JC),pt.registerComponent("CloseButton",class gL extends Sa{constructor(e,t){super(e,t),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){bn().isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}});class Qb extends Sa{constructor(e,t={}){super(e,t),t.replay=void 0===t.replay||t.replay,this.on(e,"play",r=>this.handlePlay(r)),this.on(e,"pause",r=>this.handlePause(r)),t.replay&&this.on(e,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Xl(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}Qb.prototype.controlText_="Play",pt.registerComponent("PlayToggle",Qb);class op extends pt{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended"],r=>this.updateContent(r)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),r=xn("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xa0`},{role:"presentation"});return t.appendChild(r),this.contentEl_=xn("span",{className:`${e}-display`},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=gh(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,Hn.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=At().createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}op.prototype.labelText_="Time",op.prototype.controlText_="Time",pt.registerComponent("TimeDisplay",op);class Xb extends op{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}Xb.prototype.labelText_="Current Time",Xb.prototype.controlText_="Current Time",pt.registerComponent("CurrentTimeDisplay",Xb);class Jb extends op{constructor(e,t){super(e,t);const r=i=>this.updateContent(i);this.on(e,"durationchange",r),this.on(e,"loadstart",r),this.on(e,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}Jb.prototype.labelText_="Duration",Jb.prototype.controlText_="Duration",pt.registerComponent("DurationDisplay",Jb),pt.registerComponent("TimeDivider",class gk extends pt{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return t.appendChild(r),e.appendChild(t),e}});class yh extends op{constructor(e,t){super(e,t),this.on(e,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return!1!==this.options_.displayNegative&&e.insertBefore(xn("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if("number"!=typeof this.player_.duration())return;let t;t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t)}}yh.prototype.labelText_="Remaining Time",yh.prototype.controlText_="Remaining Time",pt.registerComponent("RemainingTimeDisplay",yh),pt.registerComponent("LiveDisplay",class mk extends pt{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=xn("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(xn("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xa0`})),this.contentEl_.appendChild(At().createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}});class Gv extends Sa{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=xn("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}function fo(n,e,t){return n=Number(n),Math.min(t,Math.max(e,isNaN(n)?e:n))}Gv.prototype.controlText_="Seek to live, currently playing live",pt.registerComponent("SeekToLive",Gv);var yk=Object.freeze({__proto__:null,clamp:fo});class gm extends pt{constructor(e,t){super(e,t),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},r={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(e,t,r)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"===e.type&&!Yl&&e.preventDefault(),xC(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(){const e=this.bar.el_.ownerDocument;IC(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(100*e).toFixed(2)+"%"})),e}getProgress(){return Number(fo(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=uh(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){bn().isEventKey(e,"Left")||bn().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):bn().isEventKey(e,"Right")||bn().isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")}}pt.registerComponent("Slider",gm);const vh=(n,e)=>fo(n/e*100,0,100).toFixed(2)+"%";pt.registerComponent("LoadProgressBar",class vk extends pt{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",r=>this.update(r))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=xn("span",{className:"vjs-control-text"}),r=xn("span",{textContent:this.localize("Loaded")}),i=At().createTextNode(": ");return this.percentageEl_=xn("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(r),t.appendChild(i),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,r=this.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),l=this.partEls_,c=vh(s,i);this.percent_!==c&&(this.el_.style.width=c,Rc(this.percentageEl_,c),this.percent_=c);for(let f=0;f<r.length;f++){const v=r.start(f),T=r.end(f);let A=l[f];A||(A=this.el_.appendChild(xn()),l[f]=A),(A.dataset.start!==v||A.dataset.end!==T)&&(A.dataset.start=v,A.dataset.end=T,A.style.left=vh(v,s),A.style.width=vh(T-v,s))}for(let f=l.length;f>r.length;f--)this.el_.removeChild(l[f-1]);l.length=r.length})}}),pt.registerComponent("TimeTooltip",class _k extends pt{constructor(e,t){super(e,t),this.update=Nu(Ar(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,r){const i=am(this.el_),s=cl(this.player_.el()),l=e.width*t;if(!s||!i)return;const c=e.left-s.left+l,f=e.width-l+(s.right-e.right);let v=i.width/2;c<v?v+=v-c:f<v&&(v=f),v<0?v=0:v>i.width&&(v=i.width),v=Math.round(v),this.el_.style.right=`-${v}px`,this.write(r)}write(e){Rc(this.el_,e)}updateTime(e,t,r,i){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const l=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const c=this.player_.liveTracker.liveWindow(),f=c-t*c;s=(f<1?"":"-")+gh(f,c)}else s=gh(r,l);this.update(e,t,s),i&&i()})}});class eT extends pt{constructor(e,t){super(e,t),this.update=Nu(Ar(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const r=this.getChild("timeTooltip");if(!r)return;const i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,t,i)}}eT.prototype.options_={children:[]},!Cs&&!Zl&&eT.prototype.options_.children.push("timeTooltip"),pt.registerComponent("PlayProgressBar",eT);class mm extends pt{constructor(e,t){super(e,t),this.update=Nu(Ar(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const r=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,r,()=>{this.el_.style.left=e.width*t+"px"})}}mm.prototype.options_={children:["timeTooltip"]},pt.registerComponent("MouseTimeDisplay",mm);class tT extends gm{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=Ar(this,this.update),this.update=Nu(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in At()&&"visibilityState"in At()&&this.on(At(),"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){"hidden"===At().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if("hidden"===At().visibilityState)return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),i=this.player_.liveTracker;let s=this.player_.duration();i&&i.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.percent_=t),(this.currentTime_!==r||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[gh(r,s),gh(s,s)],"{1} of {2}")),this.currentTime_=r,this.duration_=s),this.bar&&this.bar.update(cl(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){const e=this.getCurrentTime_();let t;const r=this.player_.liveTracker;return r&&r.isLive()?(t=(e-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){um(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!um(e))return;let r;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);const i=this.calculateDistance(e),s=this.player_.liveTracker;if(s&&s.isLive()){if(i>=.99)return void s.seekToLiveEdge();const l=s.seekableStart(),c=s.liveCurrentTime();if(r=l+i*s.liveWindow(),r>=c&&(r=c),r<=l&&(r=l+.1),r===1/0)return}else r=i*this.player_.duration(),r===this.player_.duration()&&(r-=.1);this.userSeek_(r)}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Xl(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+5)}stepBack(){this.userSeek_(this.player_.currentTime()-5)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(bn().isEventKey(e,"Space")||bn().isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(bn().isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(bn().isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(bn()(e))){e.preventDefault(),e.stopPropagation();const r=10*(bn().codes[bn()(e)]-bn().codes[0])/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else bn().isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):bn().isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in At()&&"visibilityState"in At()&&this.off(At(),"visibilitychange",this.toggleVisibility_),super.dispose()}}tT.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!Cs&&!Zl&&tT.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),pt.registerComponent("SeekBar",tT);class nT extends pt{constructor(e,t){super(e,t),this.handleMouseMove=Nu(Ar(this,this.handleMouseMove),30),this.throttledHandleMouseSeek=Nu(Ar(this,this.handleMouseSeek),30),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const r=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!r&&!i)return;const s=t.el(),l=am(s);let c=uh(s,e).x;c=fo(c,0,1),i&&i.update(l,c),r&&r.update(l,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Xl(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}nT.prototype.options_={children:["seekBar"]},pt.registerComponent("ProgressControl",nT);class rT extends Sa{constructor(e,t){super(e,t),this.on(e,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>{"audio"===e.currentType().substring(0,5)||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),this.hide()):this.show()}),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){At().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}}rT.prototype.controlText_="Picture-in-Picture",pt.registerComponent("PictureInPictureToggle",rT);class zv extends Sa{constructor(e,t){super(e,t),this.on(e,"fullscreenchange",r=>this.handleFullscreenChange(r)),!1===At()[e.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}zv.prototype.controlText_="Fullscreen",pt.registerComponent("FullscreenToggle",zv),pt.registerComponent("VolumeLevel",class iT extends pt{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}),pt.registerComponent("VolumeLevelTooltip",class sT extends pt{constructor(e,t){super(e,t),this.update=Nu(Ar(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,r,i){if(!r){const s=cl(this.el_),l=cl(this.player_.el()),c=e.width*t;if(!l||!s)return;const f=e.left-l.left+c,v=e.width-c+(l.right-e.right);let T=s.width/2;f<T?T+=T-f:v<T&&(T=v),T<0?T=0:T>s.width&&(T=s.width),this.el_.style.right=`-${T}px`}this.write(`${i}%`)}write(e){Rc(this.el_,e)}updateVolume(e,t,r,i,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,r,i.toFixed(0)),s&&s()})}});class oT extends pt{constructor(e,t){super(e,t),this.update=Nu(Ar(this,this.update),30)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,r){const i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,r,i,()=>{r?this.el_.style.bottom=e.height*t+"px":this.el_.style.left=e.width*t+"px"})}}oT.prototype.options_={children:["volumeLevelTooltip"]},pt.registerComponent("MouseVolumeLevelDisplay",oT);class ap extends gm{constructor(e,t){super(e,t),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(e,"volumechange",r=>this.updateARIAAttributes(r)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){um(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const r=this.el(),i=cl(r),s=this.vertical();let l=uh(r,e);l=s?l.y:l.x,l=fo(l,0,1),t.update(i,l,s)}um(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(e)})}}ap.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!Cs&&!Zl&&ap.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),ap.prototype.playerEvent="volumechange",pt.registerComponent("VolumeBar",ap);class qv extends pt{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||sh(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),function(n,e){e.tech_&&!e.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})}(this,e),this.throttledHandleMouseMove=Nu(Ar(this,this.handleMouseMove),30),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}qv.prototype.options_={children:["volumeBar"]},pt.registerComponent("VolumeControl",qv);class nx extends Sa{constructor(e,t){super(e,t),function(n,e){e.tech_&&!e.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})}(this,e),this.on(e,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),r=this.player_.lastVolume_();0===t?(this.player_.volume(r<.1?.1:r),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;Cs&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2),Jf(this.el_,[0,1,2,3].reduce((r,i)=>r+`${i?" ":""}vjs-vol-${i}`,"")),Xf(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}nx.prototype.controlText_="Mute",pt.registerComponent("MuteToggle",nx);class rx extends pt{constructor(e,t={}){t.inline=!(typeof t.inline<"u")||t.inline,(typeof t.volumeControl>"u"||sh(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(e,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){bn().isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),ho(At(),"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),cs(At(),"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){bn().isEventKey(e,"Esc")&&this.handleMouseOut()}}rx.prototype.options_={children:["muteToggle","volumeControl"]},pt.registerComponent("VolumePanel",rx);class ix extends pt{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(e){e instanceof pt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof pt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){this.contentEl_=xn(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ho(t,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||At().activeElement;if(!this.children().some(r=>r.el()===t)){const r=this.menuButton_;r&&r.buttonPressed_&&t!==r.el().firstChild&&r.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const r=t.filter(i=>i.el()===e.target)[0];if(!r)return;"CaptionSettingsMenuItem"!==r.name()&&this.menuButton_.focus()}}handleKeyDown(e){bn().isEventKey(e,"Left")||bn().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(bn().isEventKey(e,"Right")||bn().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}pt.registerComponent("Menu",ix);class Wv extends pt{constructor(e,t={}){super(e,t),this.menuButton_=new Sa(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const r=Sa.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const i=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",i),this.on(this.menuButton_,"click",i),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),ho(At(),"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new ix(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=xn("li",{className:"vjs-menu-title",textContent:ni(this.options_.title),tabIndex:-1}),r=new pt(this.player_,{el:t});e.addItem(r)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${e} ${Sa.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return e+=!0===this.options_.inline?"-inline":"-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),cs(At(),"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){bn().isEventKey(e,"Esc")||bn().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),bn().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(bn().isEventKey(e,"Up")||bn().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(bn().isEventKey(e,"Esc")||bn().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(bn().isEventKey(e,"Esc")||bn().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),bn().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Cs&&Sb())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}pt.registerComponent("MenuButton",Wv);class ym extends Wv{constructor(e,t){const r=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!r)return;const i=Ar(this,this.update);r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),r.addEventListener("labelchange",i),this.player_.on("ready",i),this.player_.on("dispose",function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i),r.removeEventListener("labelchange",i)})}}pt.registerComponent("TrackButton",ym);const sx=["Tab","Esc","Up","Down","Right","Left"];class lp extends Vv{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.el_.setAttribute("role",this.selectable?this.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem")}createEl(e,t,r){this.nonIconControl=!0;const i=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),r);return i.replaceChild(xn("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i}handleKeyDown(e){sx.some(t=>bn().isEventKey(e,t))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}pt.registerComponent("MenuItem",lp);class up extends lp{constructor(e,t){const r=t.track,i=e.textTracks();t.label=r.label||r.language||"Unknown",t.selected="showing"===r.mode,super(e,t),this.track=r,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...c)=>{this.handleTracksChange.apply(this,c)},l=(...c)=>{this.handleSelectedLanguageChange.apply(this,c)};if(e.on(["loadstart","texttrackchange"],s),i.addEventListener("change",s),i.addEventListener("selectedlanguagechange",l),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),i.removeEventListener("change",s),i.removeEventListener("selectedlanguagechange",l)}),void 0===i.onchange){let c;this.on(["tap","click"],function(){if("object"!=typeof ye().Event)try{c=new(ye().Event)("change")}catch{}c||(c=At().createEvent("Event"),c.initEvent("change",!0,!0)),i.dispatchEvent(c)})}this.handleTracksChange()}handleClick(e){const t=this.track,r=this.player_.textTracks();if(super.handleClick(e),r)for(let i=0;i<r.length;i++){const s=r[i];-1!==this.kinds.indexOf(s.kind)&&(s===t?"showing"!==s.mode&&(s.mode="showing"):"disabled"!==s.mode&&(s.mode="disabled"))}}handleTracksChange(e){const t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if("showing"===this.track.mode){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}pt.registerComponent("TextTrackMenuItem",up);class aT extends up{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.track.label=t.label?t.label:t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let r=!0;for(let i=0,s=t.length;i<s;i++){const l=t[i];if(this.options_.kinds.indexOf(l.kind)>-1&&"showing"===l.mode){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let r=!0;for(let i=0,s=t.length;i<s;i++){const l=t[i];if(["captions","descriptions","subtitles"].indexOf(l.kind)>-1&&"showing"===l.mode){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}}pt.registerComponent("OffTextTrackMenuItem",aT);class cp extends ym{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=up){let r;this.label_&&(r=`${this.label_} off`),e.push(new aT(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;const i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<i.length;s++){const l=i[s];if(this.kinds_.indexOf(l.kind)>-1){const c=new t(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass(`vjs-${l.kind}-menu-item`),e.push(c)}}return e}}pt.registerComponent("TextTrackButton",cp);class lT extends lp{constructor(e,t){const r=t.track,i=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=i.text,t.selected=i.startTime<=s&&s<i.endTime,super(e,t),this.track=r,this.cue=i}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}pt.registerComponent("ChaptersTrackMenuItem",lT);class Kv extends cp{constructor(e,t,r){super(e,t,r),this.selectCurrentItem_=()=>{this.items.forEach(i=>{i.selected(this.track_.activeCues[0]===i.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&"chapters"!==e.track.kind)return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const r=e[t];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(ni(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let r=0,i=t.length;r<i;r++){const l=new lT(this.player_,{track:this.track_,cue:t[r]});e.push(l)}return e}}Kv.prototype.kind_="chapters",Kv.prototype.controlText_="Chapters",pt.registerComponent("ChaptersButton",Kv);class uT extends cp{constructor(e,t,r){super(e,t,r);const i=e.textTracks(),s=Ar(this,this.handleTracksChange);i.addEventListener("change",s),this.on("dispose",function(){i.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let r=!1;for(let i=0,s=t.length;i<s;i++){const l=t[i];if(l.kind!==this.kind_&&"showing"===l.mode){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}uT.prototype.kind_="descriptions",uT.prototype.controlText_="Descriptions",pt.registerComponent("DescriptionsButton",uT);class Zv extends cp{constructor(e,t,r){super(e,t,r)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}Zv.prototype.kind_="subtitles",Zv.prototype.controlText_="Subtitles",pt.registerComponent("SubtitlesButton",Zv);class Yv extends up{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}}pt.registerComponent("CaptionSettingsMenuItem",Yv);class ds extends cp{constructor(e,t,r){super(e,t,r)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Yv(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}ds.prototype.kind_="captions",ds.prototype.controlText_="Captions",pt.registerComponent("CaptionsButton",ds);class bh extends up{createEl(e,t,r){const i=super.createEl(e,t,r),s=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(s.appendChild(xn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(xn("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),i}}pt.registerComponent("SubsCapsMenuItem",bh);class cT extends cp{constructor(e,t={}){super(e,t),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(ni(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Yv(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,bh),e}}cT.prototype.kinds_=["captions","subtitles"],cT.prototype.controlText_="Subtitles",pt.registerComponent("SubsCapsButton",cT);class ox extends lp{constructor(e,t){const r=t.track,i=e.audioTracks();t.label=r.label||r.language||"Unknown",t.selected=r.enabled,super(e,t),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);const s=(...l)=>{this.handleTracksChange.apply(this,l)};i.addEventListener("change",s),this.on("dispose",()=>{i.removeEventListener("change",s)})}createEl(e,t,r){const i=super.createEl(e,t,r),s=i.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(s.appendChild(xn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(xn("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let r=0;r<t.length;r++){const i=t[r];i!==this.track&&(i.enabled=i===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}pt.registerComponent("AudioTrackMenuItem",ox);class Tk extends ym{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let r=0;r<t.length;r++)e.push(new ox(this.player_,{track:t[r],selectable:!0,multiSelectable:!1}));return e}}Tk.prototype.controlText_="Audio Track",pt.registerComponent("AudioTrackButton",Tk);class ax extends lp{constructor(e,t){const r=t.rate,i=parseFloat(r,10);t.label=r,t.selected=i===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=r,this.rate=i,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}ax.prototype.contentElType="button",pt.registerComponent("PlaybackRateMenuItem",ax);class dT extends Wv{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",r=>this.updateVisibility(r)),this.on(e,"ratechange",r=>this.updateLabel(r)),this.on(e,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=xn("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let r=e.length-1;r>=0;r--)t.push(new ax(this.player(),{rate:e[r]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}dT.prototype.controlText_="Playback Rate",pt.registerComponent("PlaybackRateMenuButton",dT);class Qv extends pt{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},r={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,r)}}pt.registerComponent("Spacer",Qv),pt.registerComponent("CustomControlSpacer",class vm extends Qv{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xa0"})}});class Xv extends pt{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}Xv.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in At()&&Xv.prototype.options_.children.splice(Xv.prototype.options_.children.length-1,0,"pictureInPictureToggle"),pt.registerComponent("ControlBar",Xv);class Jv extends rp{constructor(e,t){super(e,t),this.on(e,"error",r=>this.open(r))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}Jv.prototype.options_=Object.assign({},rp.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),pt.registerComponent("ErrorDisplay",Jv);const hT="vjs-text-track-settings",fT=["#000","Black"],lx=["#00F","Blue"],ux=["#0FF","Cyan"],cx=["#0F0","Green"],e_=["#F0F","Magenta"],pT=["#F00","Red"],gT=["#FFF","White"],_m=["#FF0","Yellow"],bm=["1","Opaque"],dx=["0.5","Semi-Transparent"],mT=["0","Transparent"],Th={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[fT,gT,pT,cx,lx,_m,e_,ux]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[bm,dx,mT]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[gT,fT,pT,cx,lx,_m,e_,ux]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:n=>"1.00"===n?null:Number(n)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[bm,dx]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[mT,dx,bm]}};function yT(n,e){if(e&&(n=e(n)),n&&"none"!==n)return n}Th.windowColor.options=Th.backgroundColor.options,pt.registerComponent("TextTrackSettings",class hx extends rp{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=xn("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===t.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),ih(Th,r=>{this.on(this.$(r.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",r="label"){const i=Th[e],s=i.id.replace("%s",this.id_),l=[t,s].join(" ").trim();return[`<${r} id="${s}" class="${"label"===r?"vjs-label":""}">`,this.localize(i.label),`</${r}>`,`<select aria-labelledby="${l}">`].concat(i.options.map(c=>{const f=s+"-"+c[1].replace(/\W+/g,"");return[`<option id="${f}" value="${c[0]}" `,`aria-labelledby="${l} ${f}">`,this.localize(c[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){const e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){const e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){const e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return xn("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return xn("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){const e=this.localize("restore all settings to the default values");return xn("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return bb(Th,(e,t,r)=>{const i=function dp(n,e){return yT(n.options[n.options.selectedIndex].value,e)}(this.$(t.selector),t.parser);return void 0!==i&&(e[r]=i),e},{})}setValues(e){ih(Th,(t,r)=>{!function Ek(n,e,t){if(e)for(let r=0;r<n.options.length;r++)if(yT(n.options[r].value,t)===e){n.selectedIndex=r;break}}(this.$(t.selector),e[r],t.parser)})}setDefaults(){ih(Th,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(ye().localStorage.getItem(hT))}catch(t){Hn.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?ye().localStorage.setItem(hT,JSON.stringify(e)):ye().localStorage.removeItem(hT)}catch(t){Hn.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;const e=this.player_.controlBar,t=e&&e.subsCapsButton,r=e&&e.captionsButton;t?t.focus():r&&r.focus()}}),pt.registerComponent("ResizeManager",class vT extends pt{constructor(e,t){let r=t.ResizeObserver||ye().ResizeObserver;null===t.ResizeObserver&&(r=!1),super(e,Tr({createEl:!r,reportTouchActivity:!1},t)),this.ResizeObserver=t.ResizeObserver||ye().ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=Q1(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let l=this.unloadListener_=function(){cs(this,"resize",s),cs(this,"unload",l),l=null};ho(this.el_.contentWindow,"unload",l),ho(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}});const mL={trackingThreshold:20,liveTolerance:15};pt.registerComponent("LiveTracker",class wk extends pt{constructor(e,t){super(e,Tr(mL,t,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=i=>this.handlePlay(i),this.handleFirstTimeupdate_=i=>this.handleFirstTimeupdate(i),this.handleSeeked_=i=>this.handleSeeked(i),this.seekToLiveEdge_=i=>this.seekToLiveEdge(i),this.reset_(),this.on(this.player_,"durationchange",i=>this.handleDurationchange(i)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(ye().performance.now().toFixed(4)),r=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+r;const i=this.liveCurrentTime(),s=this.player_.currentTime();let l=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||i===1/0)&&(l=!1),l!==this.behindLiveEdge_&&(this.behindLiveEdge_=l,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let r=e?e.length:0;for(;r--;)t.push(e.end(r));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let r=e?e.length:0;for(;r--;)t.push(e.start(r));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}),pt.registerComponent("TitleBar",class yL extends pt{constructor(e,t){super(e,t),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:xn("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${dl()}`}),description:xn("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${dl()}`})},xn("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const s=this.state[i],l=this.els[i],c=r[i];Dr(l),s&&Rc(l,s),t&&(t.removeAttribute(c),s&&t.setAttribute(c,l.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}});const _T=n=>{const e=n.el();if(e.hasAttribute("src"))return n.triggerSourceset(e.src),!0;const t=n.$$("source"),r=[];let i="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const l=t[s].src;l&&-1===r.indexOf(l)&&r.push(l)}return!!r.length&&(1===r.length&&(i=r[0]),n.triggerSourceset(i),!0)},Sk=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(n){const e=At().createElement(this.nodeName.toLowerCase());e.innerHTML=n;const t=At().createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",ye().Element.prototype.appendChild.call(this,t),this.innerHTML}}),fx=(n,e)=>{let t={};for(let r=0;r<n.length&&(t=Object.getOwnPropertyDescriptor(n[r],e),!(t&&t.set&&t.get));r++);return t.enumerable=!0,t.configurable=!0,t},bT=function(n){const e=n.el();if(e.resetSourceWatch_)return;const t={},r=(n=>fx([n.el(),ye().HTMLMediaElement.prototype,ye().Element.prototype,Sk],"innerHTML"))(n),i=s=>(...l)=>{const c=s.apply(e,l);return _T(n),c};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(t[s]=e[s],e[s]=i(t[s]))}),Object.defineProperty(e,"innerHTML",Tr(r,{set:i(r.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",r)},n.one("sourceset",e.resetSourceWatch_)},Ck=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?VC(ye().Element.prototype.getAttribute.call(this,"src")):""},set(n){return ye().Element.prototype.setAttribute.call(this,"src",n),n}});class Bt extends wn{constructor(e,t){super(e,t);const r=e.source;let i=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,r&&(this.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?this.setSource(r):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let l=s.length;const c=[];for(;l--;){const f=s[l];"track"===f.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(f),this.remoteTextTracks().addTrack(f.track),this.textTracks().addTrack(f.track),!i&&!this.el_.hasAttribute("crossorigin")&&Uv(f.src)&&(i=!0)):c.push(f))}for(let f=0;f<c.length;f++)this.el_.removeChild(c[f])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&i&&Hn.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(Qf||xv)&&!0===e.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Bt.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){!function(n){if(!n.featuresSourceset)return;const e=n.el();if(e.resetSourceset_)return;const t=(n=>fx([n.el(),ye().HTMLMediaElement.prototype,Ck],"src"))(n),r=e.setAttribute,i=e.load;Object.defineProperty(e,"src",Tr(t,{set:s=>{const l=t.set.call(e,s);return n.triggerSourceset(e.src),l}})),e.setAttribute=(s,l)=>{const c=r.call(e,s,l);return/src/i.test(s)&&n.triggerSourceset(e.src),c},e.load=()=>{const s=i.call(e);return _T(n)||(n.triggerSourceset(""),bT(n)),s},e.currentSrc?n.triggerSourceset(e.currentSrc):_T(n)||bT(n),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=i,e.setAttribute=r,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}}(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const r=()=>{t=[];for(let s=0;s<e.length;s++){const l=e[s];"metadata"===l.kind&&t.push({track:l,storedMode:l.mode})}};r(),e.addEventListener("change",r),this.on("dispose",()=>e.removeEventListener("change",r));const i=()=>{for(let s=0;s<t.length;s++){const l=t[s];"disabled"===l.track.mode&&l.track.mode!==l.storedMode&&(l.track.mode=l.storedMode)}e.removeEventListener("change",i)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",r),e.removeEventListener("change",i),e.addEventListener("change",i)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",i)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const r=e.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(i=>{this.el()[`${r}Tracks`].removeEventListener(i,this[`${r}TracksListeners_`][i])}),this[`featuresNative${e}Tracks`]=!t,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Ea[e],r=this.el()[t.getterName],i=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!r||!r.addEventListener)return;const s={change:c=>{const f={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(f),"text"===e&&this[Nc.remoteText.getterName]().trigger(f)},addtrack(c){i.addTrack(c.track)},removetrack(c){i.removeTrack(c.track)}},l=function(){const c=[];for(let f=0;f<i.length;f++){let v=!1;for(let T=0;T<r.length;T++)if(r[T]===i[f]){v=!0;break}v||c.push(i[f])}for(;c.length;)i.removeTrack(c.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(c=>{const f=s[c];r.addEventListener(c,f),this.on("dispose",v=>r.removeEventListener(c,f))}),this.on("loadstart",l),this.on("dispose",c=>this.off("loadstart",l))}proxyNativeTracks_(){Ea.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){const r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),Bt.disposeMediaElement(e),e=r}else{e=At().createElement("video");const i=Tr({},this.options_.tag&&Ru(this.options_.tag));(!Qf||!0!==this.options_.nativeControlsForTouch)&&delete i.controls,Ib(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&tn(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let r=0;r<t.length;r++){const i=t[r],s=this.options_[i];typeof s<"u"&&(s?tn(e,i,i):Iv(e,i),e[i]=s)}return e}handleLateInit_(e){if(0===e.networkState||3===e.networkState)return;if(0===e.readyState){let r=!1;const i=function(){r=!0};this.on("loadstart",i);const s=function(){r||this.trigger("loadstart")};return this.on("loadedmetadata",s),void this.ready(function(){this.off("loadstart",i),this.off("loadedmetadata",s),r||this.trigger("loadstart")})}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(r){this.trigger(r)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&om?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){Hn(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Zl&&Yl&&0===this.el_.currentTime){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Xl(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(void 0===e)return this.el_.src;this.setSrc(e)}reset(){Bt.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,r):super.addTextTrack(e,t,r)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=At().createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const r=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let r=t.length;for(;r--;)(e===t[r]||e===t[r].track)&&this.el().removeChild(t[r])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),ye().performance&&(e.creationTime=ye().performance.now()),e}}Tv(Bt,"TEST_VID",function(){if(!ah())return;const n=At().createElement("video"),e=At().createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n}),Bt.isSupported=function(){try{Bt.TEST_VID.volume=.5}catch{return!1}return!(!Bt.TEST_VID||!Bt.TEST_VID.canPlayType)},Bt.canPlayType=function(n){return Bt.TEST_VID.canPlayType(n)},Bt.canPlaySource=function(n,e){return Bt.canPlayType(n.type)},Bt.canControlVolume=function(){try{const n=Bt.TEST_VID.volume;Bt.TEST_VID.volume=n/2+.1;const e=n!==Bt.TEST_VID.volume;return e&&Cs?(ye().setTimeout(()=>{Bt&&Bt.prototype&&(Bt.prototype.featuresVolumeControl=n!==Bt.TEST_VID.volume)}),!1):e}catch{return!1}},Bt.canMuteVolume=function(){try{const n=Bt.TEST_VID.muted;return Bt.TEST_VID.muted=!n,Bt.TEST_VID.muted?tn(Bt.TEST_VID,"muted","muted"):Iv(Bt.TEST_VID,"muted"),n!==Bt.TEST_VID.muted}catch{return!1}},Bt.canControlPlaybackRate=function(){if(Zl&&Yl&&Ev<58)return!1;try{const n=Bt.TEST_VID.playbackRate;return Bt.TEST_VID.playbackRate=n/2+.1,n!==Bt.TEST_VID.playbackRate}catch{return!1}},Bt.canOverrideAttributes=function(){try{const n=()=>{};Object.defineProperty(At().createElement("video"),"src",{get:n,set:n}),Object.defineProperty(At().createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(At().createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(At().createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0},Bt.supportsNativeTextTracks=function(){return om||Cs&&Yl},Bt.supportsNativeVideoTracks=function(){return!(!Bt.TEST_VID||!Bt.TEST_VID.videoTracks)},Bt.supportsNativeAudioTracks=function(){return!(!Bt.TEST_VID||!Bt.TEST_VID.audioTracks)},Bt.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([n,e]){Tv(Bt.prototype,n,()=>Bt[e](),!0)}),Bt.prototype.featuresVolumeControl=Bt.canControlVolume(),Bt.prototype.movingMediaElementInDOM=!Cs,Bt.prototype.featuresFullscreenResize=!0,Bt.prototype.featuresProgressEvents=!0,Bt.prototype.featuresTimeupdateEvents=!0,Bt.prototype.featuresVideoFrameCallback=!(!Bt.TEST_VID||!Bt.TEST_VID.requestVideoFrameCallback),Bt.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),"function"==typeof n.load&&function(){try{n.load()}catch{}}()}},Bt.resetMediaElement=function(n){if(!n)return;const e=n.querySelectorAll("source");let t=e.length;for(;t--;)n.removeChild(e[t]);n.removeAttribute("src"),"function"==typeof n.load&&function(){try{n.load()}catch{}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){Bt.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){Bt.prototype["set"+ni(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){Bt.prototype[n]=function(){return this.el_[n]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){Bt.prototype["set"+ni(n)]=function(e){this.el_[n]=e}}),["pause","load","play"].forEach(function(n){Bt.prototype[n]=function(){return this.el_[n]()}}),wn.withSourceHandlers(Bt),Bt.nativeSourceHandler={},Bt.nativeSourceHandler.canPlayType=function(n){try{return Bt.TEST_VID.canPlayType(n)}catch{return""}},Bt.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return Bt.nativeSourceHandler.canPlayType(n.type);if(n.src){const t=dm(n.src);return Bt.nativeSourceHandler.canPlayType(`video/${t}`)}return""},Bt.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)},Bt.nativeSourceHandler.dispose=function(){},Bt.registerSourceHandler(Bt.nativeSourceHandler),wn.registerTech("Html5",Bt);const yx=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],t_={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},TT=["tiny","xsmall","small","medium","large","xlarge","huge"],Tm={};TT.forEach(n=>{const e="x"===n.charAt(0)?`x-${n.substring(1)}`:n;Tm[n]=`vjs-layout-${e}`});const vx={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class fr extends pt{constructor(e,t,r){if(e.id=e.id||t.id||`vjs_video_${dl()}`,(t=Object.assign(fr.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const l=e.closest("[lang]");l&&(t.language=l.getAttribute("lang"))}if(super(null,t,r),this.boundDocumentFullscreenChange_=l=>this.documentFullscreenChange_(l),this.boundFullWindowOnEscKey_=l=>this.fullWindowOnEscKey(l),this.boundUpdateStyleEl_=l=>this.updateStyleEl_(l),this.boundApplyInitTime_=l=>this.applyInitTime_(l),this.boundUpdateCurrentBreakpoint_=l=>this.updateCurrentBreakpoint_(l),this.boundHandleTechClick_=l=>this.handleTechClick_(l),this.boundHandleTechDoubleClick_=l=>this.handleTechDoubleClick_(l),this.boundHandleTechTouchStart_=l=>this.handleTechTouchStart_(l),this.boundHandleTechTouchMove_=l=>this.handleTechTouchMove_(l),this.boundHandleTechTouchEnd_=l=>this.handleTechTouchEnd_(l),this.boundHandleTechTap_=l=>this.handleTechTap_(l),this.isFullscreen_=!1,this.log=vb(this.id_),this.fsApi_=im,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Ru(e),this.language(this.options_.language),t.languages){const l={};Object.getOwnPropertyNames(t.languages).forEach(function(c){l[c.toLowerCase()]=t.languages[c]}),this.languages_=l}else this.languages_=fr.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(l=>{if("function"!=typeof this[l])throw new Error(`plugin "${l}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Pv(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(ho(At(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const i=Tr(this.options_);t.plugins&&Object.keys(t.plugins).forEach(l=>{this[l](t.plugins[l])}),t.debug&&this.debug(!0),this.options_.playerOptions=i,this.middleware_=[],this.playbackRates(t.playbackRates),this.initChildren(),this.isAudio("audio"===e.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),Qf&&this.addClass("vjs-touch-enabled"),Cs||this.addClass("vjs-workinghover"),fr.players[this.id_]=this;const s="8.0.4".split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",l=>this.listenForUserActivity_(l)),this.on("keydown",l=>this.handleKeyDown(l)),this.on("languagechange",l=>this.handleLanguagechange(l)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),cs(At(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),cs(At(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),fr.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function dk(n){Bv[n.id()]=null}(this),zs.names.forEach(e=>{const r=this[zs[e].getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t,e=this.tag,r=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const i="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=e.parentNode:i||(t=this.el_=super.createEl("div"));const s=Ru(e);if(i){for(t=this.el_=e,e=this.tag=At().createElement("video");t.children.length;)e.appendChild(t.firstChild);Ql(t,"video-js")||Xf(t,"video-js"),t.appendChild(e),r=this.playerElIngest_=t,Object.keys(t).forEach(c=>{try{e[c]=t[c]}catch{}})}if(e.setAttribute("tabindex","-1"),s.tabindex="-1",Yl&&Sv&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(c){i&&"class"===c||t.setAttribute(c,s[c]),i&&e.setAttribute(c,s[c])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),!0!==ye().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=AC("vjs-styles-dimensions");const c=Pu(".vjs-styles-defaults"),f=Pu("head");f.insertBefore(this.styleEl_,c?c.nextSibling:f.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const l=e.getElementsByTagName("a");for(let c=0;c<l.length;c++){const f=l.item(c);Xf(f,"vjs-hidden"),f.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!r&&e.parentNode.insertBefore(t,e),xb(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):Hn.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const r=e+"_";if(void 0===t)return this[r]||0;if(""===t||"auto"===t)return this[r]=void 0,void this.updateStyleEl_();const i=parseFloat(t);isNaN(i)?Hn.error(`Improper value "${t}" supplied for for ${e}`):(this[r]=i,this.updateStyleEl_())}fluid(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Lu(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),((n,e)=>{Lu(n)?e():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(e))})(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===ye().VIDEOJS_NO_DYNAMIC_STYLE){const c="number"==typeof this.width_?this.width_:this.options_.width,f="number"==typeof this.height_?this.height_:this.options_.height,v=this.tech_&&this.tech_.el();return void(v&&(c>=0&&(v.width=c),f>=0&&(v.height=f)))}let e,t,r,i;r=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const s=r.split(":"),l=s[1]/s[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/l:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*l,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),kC(this.styleEl_,`\n      .${i} {\n        width: ${e}px;\n        height: ${t}px;\n      }\n\n      .${i}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*l}%;\n      }\n    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const r=ni(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(wn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let s=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(s=!1);const l={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${i}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};zs.names.forEach(f=>{const v=zs[f];l[v.getterName]=this[v.privateName]}),Object.assign(l,this.options_[r]),Object.assign(l,this.options_[i]),Object.assign(l,this.options_[e.toLowerCase()]),this.tag&&(l.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(l.startTime=this.cache_.currentTime);const c=wn.getTech(e);if(!c)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new c(l),this.tech_.ready(Ar(this,this.handleTechReady_),!0),function(n,e){n.forEach(function(t){const r=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(i=>r.addCue(i))}),e.textTracks()}(this.textTracksJson_||[],this.tech_),yx.forEach(f=>{this.on(this.tech_,f,v=>this[`handleTech${ni(f)}_`](v))}),Object.keys(t_).forEach(f=>{this.on(this.tech_,f,v=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${t_[f]}_`].bind(this),event:v}):this[`handleTech${t_[f]}_`](v)})}),this.on(this.tech_,"loadstart",f=>this.handleTechLoadStart_(f)),this.on(this.tech_,"sourceset",f=>this.handleTechSourceset_(f)),this.on(this.tech_,"waiting",f=>this.handleTechWaiting_(f)),this.on(this.tech_,"ended",f=>this.handleTechEnded_(f)),this.on(this.tech_,"seeking",f=>this.handleTechSeeking_(f)),this.on(this.tech_,"play",f=>this.handleTechPlay_(f)),this.on(this.tech_,"pause",f=>this.handleTechPause_(f)),this.on(this.tech_,"durationchange",f=>this.handleTechDurationChange_(f)),this.on(this.tech_,"fullscreenchange",(f,v)=>this.handleTechFullscreenChange_(f,v)),this.on(this.tech_,"fullscreenerror",(f,v)=>this.handleTechFullscreenError_(f,v)),this.on(this.tech_,"enterpictureinpicture",f=>this.handleTechEnterPictureInPicture_(f)),this.on(this.tech_,"leavepictureinpicture",f=>this.handleTechLeavePictureInPicture_(f)),this.on(this.tech_,"error",f=>this.handleTechError_(f)),this.on(this.tech_,"posterchange",f=>this.handleTechPosterChange_(f)),this.on(this.tech_,"textdata",f=>this.handleTechTextData_(f)),this.on(this.tech_,"ratechange",f=>this.handleTechRateChange_(f)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&("Html5"!==r||!this.tag)&&xb(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){zs.names.forEach(e=>{const t=zs[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=function(n){const e=n.$$("track"),t=Array.prototype.map.call(e,i=>i.track);return Array.prototype.map.call(e,function(i){const s=jb(i.track);return i.src&&(s.src=i.src),s}).concat(Array.prototype.filter.call(n.textTracks(),function(i){return-1===t.indexOf(i)}).map(jb))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return void 0===e&&Hn.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||"string"!=typeof e)return;const t=()=>{const i=this.muted();this.muted(!0);const s=()=>{this.muted(i)};this.playTerminatedQueue_.push(s);const l=this.play();if(np(l))return l.catch(c=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${c||""}`)})};let r;return"any"!==e||this.muted()?r="muted"!==e||this.muted()?this.play():t():(r=this.play(),np(r)&&(r=r.catch(t))),np(r)?r.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})}):void 0}updateSourceCaches_(e=""){let t=e,r="";"string"!=typeof t&&(t=e.src,r=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!r&&(r=((n,e)=>{if(!e)return"";if(n.cache_.source.src===e&&n.cache_.source.type)return n.cache_.source.type;const t=n.cache_.sources.filter(i=>i.src===e);if(t.length)return t[0].type;const r=n.$$("source");for(let i=0;i<r.length;i++){const s=r[i];if(s.type&&s.src&&s.src===e)return s.type}return pm(e)})(this,t)),this.cache_.source=Tr({},e,{src:t,type:r});const i=this.cache_.sources.filter(f=>f.src&&f.src===t),s=[],l=this.$$("source"),c=[];for(let f=0;f<l.length;f++){const v=Ru(l[f]);s.push(v),v.src&&v.src===t&&c.push(v.src)}c.length&&!i.length?this.cache_.sources=s:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const r=this.currentSource().src,i=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(t=()=>{}),t(i),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if("sourceset"===s.type)return;const l=this.techGet("currentSrc");this.lastSource_.tech=l,this.updateSourceCaches_(l)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.click||!1!==this.options_.userActions.click)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?Xl(this.play()):this.pause())}handleTechDoubleClick_(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(e.target))||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const r=this.el();let i=At()[this.fsApi_.fullscreenElement]===r;!i&&r.matches?i=r.matches(":"+this.fsApi_.fullscreen):!i&&r.msMatchesSelector&&(i=r.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in zC)return function ck(n,e,t,r){return e[t](n.reduce(Zb(t),r))}(this.middleware_,this.tech_,e,t);if(e in qC)return Kb(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(r){throw Hn(r),r}},!0)}techGet_(e){if(this.tech_&&this.tech_.isReady_){if(e in fL)return function uk(n,e,t){return n.reduceRight(Zb(t),e[t]())}(this.middleware_,this.tech_,e);if(e in qC)return Kb(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?(Hn(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):"TypeError"===t.name?(Hn(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(Hn(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Xl){this.playCallbacks_.push(e);const t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t)return this.waitToPlay_=i=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!t&&(om||Cs)&&this.load());const r=this.techGet_("play");null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(r){r(e)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||Ta(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){return typeof e<"u"?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Ta(0,0)),e}bufferedPercent(){return Lv(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let r=e.end(e.length-1);return r>t&&(r=t),r}volume(e){let t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)}muted(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)}defaultMuted(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1}lastVolume_(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(void 0!==e){const t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((r,i)=>{function s(){t.off("fullscreenerror",c),t.off("fullscreenchange",l)}function l(){s(),r()}function c(v,T){s(),i(T)}t.one("fullscreenchange",l),t.one("fullscreenerror",c);const f=t.requestFullscreenHelper_(e);f&&(f.then(s,s),f.then(r,i))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){const r=this.el_[this.fsApi_.requestFullscreen](t);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,r)=>{function i(){e.off("fullscreenerror",l),e.off("fullscreenchange",s)}function s(){i(),t()}function l(f,v){i(),r(v)}e.one("fullscreenchange",s),e.one("fullscreenerror",l);const c=e.exitFullscreenHelper_();c&&(c.then(i,i),c.then(t,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=At()[this.fsApi_.exitFullscreen]();return e&&Xl(e.then(()=>this.isFullscreen(!1))),e}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=At().documentElement.style.overflow,ho(At(),"keydown",this.boundFullWindowOnEscKey_),At().documentElement.style.overflow="hidden",Xf(At().body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){bn().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,cs(At(),"keydown",this.boundFullWindowOnEscKey_),At().documentElement.style.overflow=this.docOrigOverflow,Jf(At().body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if("pictureInPictureEnabled"in At()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")}exitPictureInPicture(){if("pictureInPictureEnabled"in At())return At().exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(i=>{const s=i.tagName.toLowerCase();return!!i.isContentEditable||("input"===s?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type):-1!==["textarea"].indexOf(s))})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=(l=>bn().isEventKey(l,"f")),muteKey:i=(l=>bn().isEventKey(l,"m")),playPauseKey:s=(l=>bn().isEventKey(l,"k")||bn().isEventKey(l,"Space"))}=t;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();const l=pt.getComponent("FullscreenToggle");!1!==At()[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else i.call(this,e)?(e.preventDefault(),e.stopPropagation(),pt.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),pt.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let r=0,i=this.options_.techOrder;r<i.length;r++){const s=i[r];let l=wn.getTech(s);if(l||(l=pt.getComponent(s)),l){if(l.isSupported()&&(t=l.canPlayType(e),t))return t}else Hn.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(e){const t=this.options_.techOrder.map(c=>[c,wn.getTech(c)]).filter(([c,f])=>f?f.isSupported():(Hn.error(`The "${c}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(c,f,v){let T;return c.some(A=>f.some(j=>{if(T=v(A,j),T)return!0})),T};let i;const l=([c,f],v)=>{if(f.canPlaySource(v,this.options_[c.toLowerCase()]))return{source:v,tech:c}};return i=this.options_.sourceOrder?r(e,t,(c=l,(f,v)=>c(v,f))):r(t,e,l),i||!1;var c}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const r=KC(e);if(r.length){if(this.changingSrc_=!0,t||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),ak(this,r[0],(i,s)=>{if(this.middleware_=s,t||(this.cache_.sources=r),this.updateSourceCaches_(i),this.src_(i))return r.length>1?this.handleSrc_(r.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());!function lk(n,e){n.forEach(t=>t.setTech&&t.setTech(e))}(s,this.tech_)}),r.length>1){const i=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},s=()=>{this.off("error",i)};this.one("error",i),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",i),this.off("playing",s)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return!t||(Pb(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}load(){this.techCall_("load")}reset(){this.paused()?this.doReset_():Xl(this.play().then(()=>this.doReset_()))}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Lu(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{durationDisplay:e,remainingTimeDisplay:t}=this.controlBar||{};e&&e.updateContent(),t&&t.updateContent()}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}autoplay(e){if(void 0===e)return this.options_.autoplay||!1;let t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")}loop(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")}poster(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(void 0===e)return this.error_||null;if(Oc("beforeerror").forEach(t=>{const r=t(this,e);ul(r)&&!Array.isArray(r)||"string"==typeof r||"number"==typeof r||null===r?e=r:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){const t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Gs(e),this.addClass("vjs-error"),Hn.error(`(CODE:${this.error_.code} ${Gs.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Oc("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,r;const i=Ar(this,this.reportUserActivity),c=function(T){i(),this.clearInterval(e)};this.on("mousedown",function(){i(),this.clearInterval(e),e=this.setInterval(i,250)}),this.on("mousemove",function(T){(T.screenX!==t||T.screenY!==r)&&(t=T.screenX,r=T.screenY,i())}),this.on("mouseup",c),this.on("mouseleave",c);const f=this.getChild("controlBar");let v;f&&!Cs&&!Zl&&(f.on("mouseenter",function(T){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),f.on("mouseleave",function(T){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i),this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(v);const T=this.options_.inactivityTimeout;T<=0||(v=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},T))},250)}playbackRate(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)}defaultPlaybackRate(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),r=t&&t.currentHeight();e.forEach(i=>{i!==t&&i.el_&&!i.hasClass("vjs-hidden")&&(i.hide(),this.audioOnlyCache_.hiddenChildren.push(i))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return"boolean"!=typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,r){if(this.tech_)return this.tech_.addTextTrack(e,t,r)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Lu(this)&&this.trigger("languagechange"))}languages(){return Tr(fr.prototype.options_.languages,this.languages_)}toJSON(){const e=Tr(this.options_),t=e.tracks;e.tracks=[];for(let r=0;r<t.length;r++){let i=t[r];i=Tr(i),i.player=void 0,e.tracks[r]=i}return e}createModal(e,t){(t=t||{}).content=e||"";const r=new rp(this,t);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let r=0;r<TT.length;r++){const i=TT[r];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Tm[e]),this.addClass(Tm[i]),this.breakpoint_=i;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=Object.assign({},vx,e),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Tm[this.breakpoint_]||""}loadMedia(e,t){if(!e||"object"!=typeof e)return;this.reset(),this.cache_.media=Tr(e);const{artist:r,artwork:i,description:s,poster:l,src:c,textTracks:f,title:v}=this.cache_.media;!i&&l&&(this.cache_.media.artwork=[{src:l,type:pm(l)}]),c&&this.src(c),l&&this.poster(l),Array.isArray(f)&&f.forEach(T=>this.addRemoteTextTrack(T,!1)),this.titleBar&&this.titleBar.update({title:v,description:s||r||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),i={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src}))};return e&&(i.poster=e,i.artwork=[{src:i.poster,type:pm(i.poster)}]),i}return Tr(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},r=Ru(e),i=r["data-setup"];if(Ql(e,"vjs-fill")&&(r.fill=!0),Ql(e,"vjs-fluid")&&(r.fluid=!0),null!==i){const[s,l]=s1()(i||"{}");s&&Hn.error(s),Object.assign(r,l)}if(Object.assign(t,r),e.hasChildNodes()){const s=e.childNodes;for(let l=0,c=s.length;l<c;l++){const f=s[l],v=f.nodeName.toLowerCase();"source"===v?t.sources.push(Ru(f)):"track"===v&&t.tracks.push(Ru(f))}}return t}debug(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>"number"==typeof t)&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}zs.names.forEach(function(n){const e=zs[n];fr.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),fr.prototype.crossorigin=fr.prototype.crossOrigin,fr.players={};const hp=ye().navigator;fr.prototype.options_={techOrder:wn.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:hp&&(hp.languages&&hp.languages[0]||hp.userLanguage||hp.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(n){fr.prototype[n]=function(){return this.techGet_(n)}}),yx.forEach(function(n){fr.prototype[`handleTech${ni(n)}_`]=function(){return this.trigger(n)}}),pt.registerComponent("Player",fr);const n_="plugin",fp="activePlugins_",Em={},wm=n=>Em.hasOwnProperty(n),ET=n=>wm(n)?Em[n]:void 0,xk=(n,e)=>{n[fp]=n[fp]||{},n[fp][e]=!0},wT=(n,e,t)=>{const r=(t?"before":"")+"pluginsetup";n.trigger(r,e),n.trigger(r+":"+e.name,e)},Ik=(n,e)=>(e.prototype.name=n,function(...t){wT(this,{name:n,plugin:e,instance:null},!0);const r=new e(this,...t);return this[n]=()=>r,wT(this,r.getEventHash()),r});let Eh=(()=>{class n{constructor(t){if(this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Pv(this),delete this.trigger,LC(this,this.constructor.defaultState),xk(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,r={}){return fh(this.eventBusEl_,t,this.getEventHash(r))}handleStateChanged(t){}dispose(){const{name:t,player:r}=this;this.trigger("dispose"),this.off(),r.off("dispose",this.dispose),r[fp][t]=!1,this.player=this.state=null,r[t]=Ik(t,Em[t])}static isBasic(t){const r="string"==typeof t?ET(t):t;return"function"==typeof r&&!n.prototype.isPrototypeOf(r.prototype)}static registerPlugin(t,r){if("string"!=typeof t)throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(wm(t))Hn.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(fr.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if("function"!=typeof r)throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof r}.`);return Em[t]=r,t!==n_&&(fr.prototype[t]=n.isBasic(r)?function(n,e){const t=function(){wT(this,{name:n,plugin:e,instance:null},!0);const r=e.apply(this,arguments);return xk(this,n),wT(this,{name:n,plugin:e,instance:r}),r};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}(t,r):Ik(t,r)),r}static deregisterPlugin(t){if(t===n_)throw new Error("Cannot de-register base plugin.");wm(t)&&(delete Em[t],delete fr.prototype[t])}static getPlugins(t=Object.keys(Em)){let r;return t.forEach(i=>{const s=ET(i);s&&(r=r||{},r[i]=s)}),r}static getPluginVersion(t){const r=ET(t);return r&&r.VERSION||""}}return n.getPlugin=ET,n.BASE_PLUGIN_NAME=n_,n})();function Jl(n,e,t,r){return function _L(n,e){let t=!1;return function(...r){return t||Hn.warn(n),t=!0,e.apply(this,r)}}(`${e} is deprecated and will be removed in ${n}.0; please use ${t} instead.`,r)}Eh.registerPlugin(n_,Eh),fr.prototype.usingPlugin=function(n){return!!this[fp]&&!0===this[fp][n]},fr.prototype.hasPlugin=function(n){return!!wm(n)};const Sm=n=>0===n.indexOf("#")?n.slice(1):n;function nt(n,e,t){let r=nt.getPlayer(n);if(r)return e&&Hn.warn(`Player "${n}" is already initialised. Options will not be applied.`),t&&r.ready(t),r;const i="string"==typeof n?Pu("#"+Sm(n)):n;if(!lh(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!i.ownerDocument.defaultView||!i.ownerDocument.body.contains(i))&&Hn.warn("The element supplied is not included in the DOM"),!0===(e=e||{}).restoreEl&&(e.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),Oc("beforesetup").forEach(l=>{const c=l(i,Tr(e));ul(c)&&!Array.isArray(c)?e=Tr(e,c):Hn.error("please return an object in beforesetup hooks")});const s=pt.getComponent("Player");return r=new s(i,e,t),Oc("setup").forEach(l=>l(r)),r}if(nt.hooks_=Lo,nt.hooks=Oc,nt.hook=function(n,e){Oc(n,e)},nt.hookOnce=function(n,e){Oc(n,[].concat(e).map(t=>{const r=(...i)=>(mC(n,r),t(...i));return r}))},nt.removeHook=mC,!0!==ye().VIDEOJS_NO_DYNAMIC_STYLE&&ah()){let n=Pu(".vjs-styles-defaults");if(!n){n=AC("vjs-styles-defaults");const e=Pu("head");e&&e.insertBefore(n,e.firstChild),kC(n,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}dh(1,nt),nt.VERSION="8.0.4",nt.options=fr.prototype.options_,nt.getPlayers=()=>fr.players,nt.getPlayer=n=>{const e=fr.players;let t;if("string"==typeof n){const r=Sm(n),i=e[r];if(i)return i;t=Pu("#"+r)}else t=n;if(lh(t)){const{player:r,playerId:i}=t;if(r||e[i])return r||e[i]}},nt.getAllPlayers=()=>Object.keys(fr.players).map(n=>fr.players[n]).filter(Boolean),nt.players=fr.players,nt.getComponent=pt.getComponent,nt.registerComponent=(n,e)=>{wn.isTech(e)&&Hn.warn(`The ${n} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),pt.registerComponent.call(pt,n,e)},nt.getTech=wn.getTech,nt.registerTech=wn.registerTech,nt.use=function GC(n,e){Lc[n]=Lc[n]||[],Lc[n].push(e)},Object.defineProperty(nt,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(nt.middleware,"TERMINATOR",{value:fm,writeable:!1,enumerable:!0}),nt.browser=SC,nt.obj=$1,nt.mergeOptions=Jl(9,"videojs.mergeOptions","videojs.obj.merge",Tr),nt.defineLazyProperty=Jl(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Tv),nt.bind=Jl(9,"videojs.bind","native Function.prototype.bind",Ar),nt.registerPlugin=Eh.registerPlugin,nt.deregisterPlugin=Eh.deregisterPlugin,nt.plugin=(n,e)=>(Hn.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Eh.registerPlugin(n,e)),nt.getPlugins=Eh.getPlugins,nt.getPlugin=Eh.getPlugin,nt.getPluginVersion=Eh.getPluginVersion,nt.addLanguage=function(n,e){return n=(""+n).toLowerCase(),nt.options.languages=Tr(nt.options.languages,{[n]:e}),nt.options.languages[n]},nt.log=Hn,nt.createLogger=vb,nt.time=nk,nt.createTimeRange=Jl(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Ta),nt.createTimeRanges=Jl(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Ta),nt.formatTime=Jl(9,"videojs.formatTime","videojs.time.formatTime",gh),nt.setFormatTime=Jl(9,"videojs.setFormatTime","videojs.time.setFormatTime",Fb),nt.resetFormatTime=Jl(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",jC),nt.parseUrl=Jl(9,"videojs.parseUrl","videojs.url.parseUrl",zb),nt.isCrossOrigin=Jl(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Uv),nt.EventTarget=Hs,nt.any=Mv,nt.on=ho,nt.one=kv,nt.off=cs,nt.trigger=fh,nt.xhr=wS(),nt.TextTrack=hm,nt.AudioTrack=ok,nt.VideoTrack=Wb,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(n=>{nt[n]=function(){return Hn.warn(`videojs.${n}() is deprecated; use videojs.dom.${n}() instead`),kb[n].apply(null,arguments)}}),nt.computedStyle=Jl(9,"videojs.computedStyle","videojs.dom.computedStyle",ch),nt.dom=kb,nt.fn=cL,nt.num=yk,nt.str=ek,nt.url=$C;class _x{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get:()=>t.enabled_(),set(r){t.enabled_(r)}}),t}}class wh extends nt.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:()=>e.selectedIndex_}),Object.defineProperty(e,"length",{get:()=>e.levels_.length}),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const r=this.levels_.length;return t=new _x(e),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let r=0,i=this.length;r<i;r++)if(this[r]===e){t=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,r=this.length;t<r;t++){const i=this[t];if(i.id===e)return i}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}wh.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const n in wh.prototype.allowedEvents_)wh.prototype["on"+n]=null;const r_=function(n){return function(n,e){const t=n.qualityLevels,r=new wh,i=function(){r.dispose(),n.qualityLevels=t,n.off("dispose",i)};return n.on("dispose",i),n.qualityLevels=()=>r,n.qualityLevels.VERSION="3.0.0",r}(this,nt.mergeOptions({},n))};(nt.registerPlugin||nt.plugin)("qualityLevels",r_),r_.VERSION="3.0.0";const Ca=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=ye().location&&ye().location.href||"");var r="function"==typeof ye().URL,i=/^\/\//.test(e),s=!ye().location&&!/\/\//i.test(e);if(r?e=new(ye().URL)(e,ye().location||uo):/\/\//i.test(e)||(e=tv().buildAbsoluteURL(ye().location&&ye().location.href||"",e)),r){var l=new URL(t,e);return s?l.href.slice(uo.length):i?l.href.slice(l.protocol.length):l.href}return tv().buildAbsoluteURL(e,t)},i_=(n,e)=>e&&e.responseURL&&n!==e.responseURL?e.responseURL:n,eu=n=>nt.log.debug?nt.log.debug.bind(nt,"VHS:",`${n} >`):function(){};function Er(...n){const e=nt.obj||nt;return(e.merge||e.mergeOptions).apply(e,n)}function xs(...n){const e=nt.time||nt;return(e.createTimeRanges||e.createTimeRanges).apply(e,n)}const jc=1/30,Fo=.1,Tx=function(n,e){const t=[];let r;if(n&&n.length)for(r=0;r<n.length;r++)e(n.start(r),n.end(r))&&t.push([n.start(r),n.end(r)]);return xs(t)},Cm=function(n,e){return Tx(n,function(t,r){return t-Fo<=e&&r+Fo>=e})},CT=function(n,e){return Tx(n,function(t){return t-jc>=e})},Ex=n=>{const e=[];if(!n||!n.length)return"";for(let t=0;t<n.length;t++)e.push(n.start(t)+" => "+n.end(t));return e.join(", ")},pp=n=>{const e=[];for(let t=0;t<n.length;t++)e.push({start:n.start(t),end:n.end(t)});return e},xT=function(n){if(n&&n.length&&n.end)return n.end(n.length-1)},s_=function(n,e){let t=0;if(!n||!n.length)return t;for(let r=0;r<n.length;r++){const i=n.start(r),s=n.end(r);if(!(e>s)){if(e>i&&e<=s){t+=s-e;continue}t+=s-i}}return t},wx=(n,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(r){t+=r.duration}),(e.preloadHints||[]).forEach(function(r){"PART"===r.type&&(t+=n.partTargetDuration)}),t},jo=n=>(n.segments||[]).reduce((e,t,r)=>(t.parts?t.parts.forEach(function(i,s){e.push({duration:i.duration,segmentIndex:r,partIndex:s,part:i,segment:t})}):e.push({duration:t.duration,segmentIndex:r,partIndex:null,segment:t,part:null}),e),[]),Sx=n=>{const e=n.segments&&n.segments.length&&n.segments[n.segments.length-1];return e&&e.parts||[]},o_=({preloadSegment:n})=>{if(!n)return;const{parts:e,preloadHints:t}=n;let r=(t||[]).reduce((i,s)=>i+("PART"===s.type?1:0),0);return r+=e&&e.length?e.length:0,r},Cx=(n,e)=>{if(e.endList)return 0;if(n&&n.suggestedPresentationDelay)return n.suggestedPresentationDelay;const t=Sx(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?3*e.partTargetDuration:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?3*e.targetDuration:0},xx=function(n,e,t){if(typeof e>"u"&&(e=n.mediaSequence+n.segments.length),e<n.mediaSequence)return 0;const r=function(n,e){let t=0,r=e-n.mediaSequence,i=n.segments[r];if(i){if(typeof i.start<"u")return{result:i.start,precise:!0};if(typeof i.end<"u")return{result:i.end-i.duration,precise:!0}}for(;r--;){if(i=n.segments[r],typeof i.end<"u")return{result:t+i.end,precise:!0};if(t+=wx(n,i),typeof i.start<"u")return{result:t+i.start,precise:!0}}return{result:t,precise:!1}}(n,e);if(r.precise)return r.result;const i=function(n,e){let r,t=0,i=e-n.mediaSequence;for(;i<n.segments.length;i++){if(r=n.segments[i],typeof r.start<"u")return{result:r.start-t,precise:!0};if(t+=wx(n,r),typeof r.end<"u")return{result:r.end-t,precise:!0}}return{result:-1,precise:!1}}(n,e);return i.precise?i.result:r.result+t},a_=function(n,e,t){if(!n)return 0;if("number"!=typeof t&&(t=0),typeof e>"u"){if(n.totalDuration)return n.totalDuration;if(!n.endList)return ye()[1/0]}return xx(n,e,t)},xm=function({defaultDuration:n,durationList:e,startIndex:t,endIndex:r}){let i=0;if(t>r&&([t,r]=[r,t]),t<0){for(let s=t;s<Math.min(0,r);s++)i+=n;t=0}for(let s=t;s<r;s++)i+=e[s].duration;return i},Ix=function(n,e,t,r){if(!n||!n.segments)return null;if(n.endList)return a_(n);if(null===e)return null;let i=xx(n,n.mediaSequence+n.segments.length,e=e||0);return t&&(i-=r="number"==typeof r?r:Cx(null,n)),Math.max(0,i)},DT=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},AT=function(n){return n.excludeUntil&&n.excludeUntil===1/0},Im=function(n){const e=DT(n);return!n.disabled&&!e},kT=function(n,e){return e.attributes&&e.attributes[n]},Dm=(n,e)=>{if(1===n.playlists.length)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===n.playlists.filter(r=>!!Im(r)&&(r.attributes.BANDWIDTH||0)<t).length},fl=(n,e)=>!(!n&&!e||!n&&e||n&&!e||!(n===e||n.id&&e.id&&n.id===e.id||n.resolvedUri&&e.resolvedUri&&n.resolvedUri===e.resolvedUri||n.uri&&e.uri&&n.uri===e.uri)),ju=function(n,e){const t=n&&n.mediaGroups&&n.mediaGroups.AUDIO||{};let r=!1;for(const i in t){for(const s in t[i])if(r=e(t[i][s]),r)break;if(r)break}return!!r},gp=n=>{if(!n||!n.playlists||!n.playlists.length)return ju(n,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<n.playlists.length;e++){const t=n.playlists[e],r=t.attributes&&t.attributes.CODECS;if(!(r&&r.split(",").every(s=>iv(s))||ju(n,s=>fl(t,s))))return!1}return!0};var Is={liveEdgeDelay:Cx,duration:a_,seekable:function(n,e,t){const i=e||0,s=Ix(n,e,!0,t);return null===s?xs():xs(i,s)},getMediaInfoForTime:function({playlist:n,currentTime:e,startingSegmentIndex:t,startingPartIndex:r,startTime:i,exactManifestTimings:s}){let l=e-i;const c=jo(n);let f=0;for(let v=0;v<c.length;v++){const T=c[v];if(t===T.segmentIndex&&("number"!=typeof r||"number"!=typeof T.partIndex||r===T.partIndex)){f=v;break}}if(l<0){if(f>0)for(let v=f-1;v>=0;v--){const T=c[v];if(l+=T.duration,s){if(l<0)continue}else if(l+jc<=0)continue;return{partIndex:T.partIndex,segmentIndex:T.segmentIndex,startTime:i-xm({defaultDuration:n.targetDuration,durationList:c,startIndex:f,endIndex:v})}}return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:e}}if(f<0){for(let v=f;v<0;v++)if(l-=n.targetDuration,l<0)return{partIndex:c[0]&&c[0].partIndex||null,segmentIndex:c[0]&&c[0].segmentIndex||0,startTime:e};f=0}for(let v=f;v<c.length;v++){const T=c[v];if(l-=T.duration,s){if(l>0)continue}else if(l-jc>=0)continue;return{partIndex:T.partIndex,segmentIndex:T.segmentIndex,startTime:i+xm({defaultDuration:n.targetDuration,durationList:c,startIndex:f,endIndex:v})}}return{segmentIndex:c[c.length-1].segmentIndex,partIndex:c[c.length-1].partIndex,startTime:e}},isEnabled:Im,isDisabled:function(n){return n.disabled},isExcluded:DT,isIncompatible:AT,playlistEnd:Ix,isAes:function(n){for(let e=0;e<n.segments.length;e++)if(n.segments[e].key)return!0;return!1},hasAttribute:kT,estimateSegmentRequestTime:function(n,e,t,r=0){return kT("BANDWIDTH",t)?(n*t.attributes.BANDWIDTH-8*r)/e:NaN},isLowestEnabledRendition:Dm,isAudioOnly:gp,playlistMatch:fl,segmentDurationWithParts:wx};const{log:MT}=nt,OT=(n,e)=>`${n}-${e}`,Am=(n,e)=>{n.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(n.mediaGroups[t])for(const r in n.mediaGroups[t])for(const i in n.mediaGroups[t][r])e(n.mediaGroups[t][r][i],t,r,i)})},kx=({playlist:n,uri:e,id:t})=>{n.id=t,n.playlistErrors_=0,e&&(n.uri=e),n.attributes=n.attributes||{}},Nk=(n,e)=>{n.uri=e;for(let r=0;r<n.playlists.length;r++)n.playlists[r].uri||(n.playlists[r].uri=`placeholder-uri-${r}`);const t=gp(n);Am(n,(r,i,s,l)=>{const c=`placeholder-uri-${i}-${s}-${l}`;if(!r.playlists||!r.playlists.length){if(t&&"AUDIO"===i&&!r.uri)for(let f=0;f<n.playlists.length;f++){const v=n.playlists[f];if(v.attributes&&v.attributes.AUDIO&&v.attributes.AUDIO===s)return}r.playlists=[qd({},r)]}r.playlists.forEach(function(f,v){const T=OT(v,c);f.uri?f.resolvedUri=f.resolvedUri||Ca(n.uri,f.uri):(f.uri=0===v?c:T,f.resolvedUri=f.uri),f.id=f.id||T,f.attributes=f.attributes||{},n.playlists[f.id]=f,n.playlists[f.uri]=f})}),(n=>{let e=n.playlists.length;for(;e--;){const t=n.playlists[e];kx({playlist:t,id:OT(e,t.uri)}),t.resolvedUri=Ca(n.uri,t.uri),n.playlists[t.id]=t,n.playlists[t.uri]=t,t.attributes.BANDWIDTH||MT.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}})(n),(n=>{Am(n,e=>{e.uri&&(e.resolvedUri=Ca(n.uri,e.uri))})})(n)},{EventTarget:Ox}=nt,Rx=(n,e)=>{if(!n)return e;const t=Er(n,e);if(n.preloadHints&&!e.preloadHints&&delete t.preloadHints,n.parts&&!e.parts)delete t.parts;else if(n.parts&&e.parts)for(let r=0;r<e.parts.length;r++)n.parts&&n.parts[r]&&(t.parts[r]=Er(n.parts[r],e.parts[r]));return!n.skipped&&e.skipped&&(t.skipped=!1),n.preload&&!e.preload&&(t.preload=!1),t},l_=(n,e)=>{!n.resolvedUri&&n.uri&&(n.resolvedUri=Ca(e,n.uri)),n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=Ca(e,n.key.uri)),n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=Ca(e,n.map.uri)),n.map&&n.map.key&&!n.map.key.resolvedUri&&(n.map.key.resolvedUri=Ca(e,n.map.key.uri)),n.parts&&n.parts.length&&n.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ca(e,t.uri))}),n.preloadHints&&n.preloadHints.length&&n.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=Ca(e,t.uri))})},RT=function(n){const e=n.segments||[],t=n.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints)for(let r=0;r<t.preloadHints.length;r++)if("MAP"===t.preloadHints[r].type)return e;t.duration=n.targetDuration,t.preload=!0,e.push(t)}return e},PT=(n,e)=>n===e||n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence&&n.preloadSegment===e.preloadSegment,u_=(n,e,t=PT)=>{const r=Er(n,{}),i=r.playlists[e.id];if(!i||t(i,e))return null;e.segments=RT(e);const s=Er(i,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,i.segments){if(e.skip){e.segments=e.segments||[];for(let l=0;l<e.skip.skippedSegments;l++)e.segments.unshift({skipped:!0})}s.segments=((n,e,t)=>{const r=n.slice(),i=e.slice();t=t||0;const s=[];let l;for(let c=0;c<i.length;c++){const f=r[c+t],v=i[c];f?(l=f.map||l,s.push(Rx(f,v))):(l&&!v.map&&(v.map=l),s.push(v))}return s})(i.segments,e.segments,e.mediaSequence-i.mediaSequence)}s.segments.forEach(l=>{l_(l,s.resolvedUri)});for(let l=0;l<r.playlists.length;l++)r.playlists[l].id===e.id&&(r.playlists[l]=s);return r.playlists[e.id]=s,r.playlists[e.uri]=s,Am(n,(l,c,f,v)=>{if(l.playlists)for(let T=0;T<l.playlists.length;T++)e.id===l.playlists[T].id&&(l.playlists[T]=s)}),r},c_=(n,e)=>{const t=n.segments||[],r=t[t.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],s=i&&i.duration||r&&r.duration;return e&&s?1e3*s:500*(n.partTargetDuration||n.targetDuration||10)};class Sh extends Ox{constructor(e,t,r={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=eu("PlaylistLoader");const{withCredentials:i=!1}=r;this.src=e,this.vhs_=t,this.withCredentials=i;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const e=this.media();let t=Ca(this.main.uri,e.uri);this.llhls&&(t=((n,e)=>{if(e.endList||!e.serverControl)return n;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:r}=e;let i=e.mediaSequence+e.segments.length;if(r){const s=r.parts||[],l=o_(e)-1;l>-1&&l!==s.length-1&&(t._HLS_part=l),(l>-1||s.length)&&i--}t._HLS_msn=i}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const r=new(ye().URL)(n);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){t.hasOwnProperty(i)&&r.searchParams.set(i,t[i])}),n=r.toString()}return n})(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},(r,i)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,r){const{uri:i,id:s}=t;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${i}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return(({onwarn:n,oninfo:e,manifestString:t,customTagParsers:r=[],customTagMappers:i=[],llhls:s})=>{const l=new f1;n&&l.on("warn",n),e&&l.on("info",e),r.forEach(v=>l.addParser(v)),i.forEach(v=>l.addTagMapper(v)),l.push(t),l.end();const c=l.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(v){c.hasOwnProperty(v)&&delete c[v]}),c.segments&&c.segments.forEach(function(v){["parts","preloadHints"].forEach(function(T){v.hasOwnProperty(T)&&delete v[T]})})),!c.targetDuration){let v=10;c.segments&&c.segments.length&&(v=c.segments.reduce((T,A)=>Math.max(T,A.duration),0)),n&&n(`manifest has no targetDuration defaulting to ${v}`),c.targetDuration=v}const f=Sx(c);if(f.length&&!c.partTargetDuration){const v=f.reduce((T,A)=>Math.max(T,A.duration),0);n&&(n(`manifest has no partTargetDuration defaulting to ${v}`),MT.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=v}return c})({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:r,id:i}){this.request=null,this.state="HAVE_METADATA";const s=t||this.parseManifest_({url:r,manifestString:e});s.lastRequest=Date.now(),kx({playlist:s,uri:r,id:i});const l=u_(this.main,s);this.targetDuration=s.partTargetDuration||s.targetDuration,this.pendingMedia_=null,l?(this.main=l,this.media_=this.main.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(c_(this.media(),!!l)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),ye().clearTimeout(this.mediaUpdateTimeout),ye().clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(ye().clearTimeout(this.finalRenditionTimeout),t){const l=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=ye().setTimeout(this.media.bind(this,e,!1),l))}const r=this.state,i=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("HAVE_MAIN_MANIFEST"===r?"loadedmetadata":"mediachange")));if(this.updateMediaUpdateTimeout_(c_(e,!0)),i){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(l,c)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=i_(e.resolvedUri,c),l)return this.playlistRequestError(this.request,e,r);this.haveMetadata({playlistString:c.responseText,url:e.uri,id:e.id}),this.trigger("HAVE_MAIN_MANIFEST"===r?"loadedmetadata":"mediachange")}})}}pause(){this.mediaUpdateTimeout&&(ye().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(ye().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const r=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=ye().setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r)}else this.started?this.trigger(t&&!t.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(ye().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=ye().setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=ye().location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.src=i_(this.src,t);const r=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(r)})}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists)return this.main=e,Nk(this.main,this.srcUri()),e.playlists.forEach(r=>{r.segments=RT(r),r.segments.forEach(i=>{l_(i,r.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const t=this.srcUri()||ye().location.href;this.main=((n,e)=>{const t=OT(0,e),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:ye().location.href,resolvedUri:ye().location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return r.playlists[t]=r.playlists[0],r.playlists[e]=r.playlists[0],r})(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}const{xhr:d_}=nt,mp=function(n,e,t,r){const i="arraybuffer"===n.responseType?n.response:n.responseText;!e&&i&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=i.byteLength||i.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3))),t.headers&&(n.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(n.timedout=!0),!e&&!n.aborted&&200!==t.statusCode&&206!==t.statusCode&&0!==t.statusCode&&(e=new Error("XHR Failed with a response of: "+(n&&(i||n.responseText)))),r(e,n)},NT=function(){const n=function e(t,r){t=Er({timeout:45e3},t);const i=e.beforeRequest||nt.Vhs.xhr.beforeRequest;if(i&&"function"==typeof i){const f=i(t);f&&(t=f)}const l=(!0===nt.Vhs.xhr.original?d_:nt.Vhs.xhr)(t,function(f,v){return mp(l,f,v,r)}),c=l.abort;return l.abort=function(){return l.aborted=!0,c.apply(l,arguments)},l.uri=t.uri,l.requestTime=Date.now(),l};return n.original=!0,n},LT=function(n){const e={};return n.byterange&&(e.Range=function(n){let e;const t=n.offset;return e="bigint"==typeof n.offset||"bigint"==typeof n.length?ye().BigInt(n.offset)+ye().BigInt(n.length)-ye().BigInt(1):n.offset+n.length-1,"bytes="+t+"-"+e}(n.byterange)),e},CL=function(n,e){return n.start(e)+"-"+n.end(e)},xL=function(n,e){const t=n.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},IL=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},FT=function(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];e[t]=ql(r)?{bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:r}),e},h_=function(n){const e=n.byterange||{length:1/0,offset:0};return[e.length,e.offset,n.resolvedUri].join(",")},Px=function(n){return n.resolvedUri},Nx=n=>{const e=Array.prototype.slice.call(n),t=16;let i,s,r="";for(let l=0;l<e.length/t;l++)i=e.slice(l*t,l*t+t).map(xL).join(""),s=e.slice(l*t,l*t+t).map(IL).join(""),r+=i+" "+s+"\n";return r};var DL=Object.freeze({__proto__:null,createTransferableMessage:FT,initSegmentId:h_,segmentKeyId:Px,hexDump:Nx,tagDump:({bytes:n})=>Nx(n),textRanges:n=>{let t,e="";for(t=0;t<n.length;t++)e+=CL(n,t)+" ";return e}});const jT=({programTime:n,playlist:e,retryCount:t=2,seekTo:r,pauseAfterSeek:i=!0,tech:s,callback:l})=>{if(!l)throw new Error("seekToProgramTime: callback must be provided");if(typeof n>"u"||!e||!r)return l({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return l({message:"player must be playing a live stream to start buffering"});if(!(n=>{if(!n.segments||0===n.segments.length)return!1;for(let e=0;e<n.segments.length;e++)if(!n.segments[e].dateTimeObject)return!1;return!0})(e))return l({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const c=((n,e)=>{let t;try{t=new Date(n)}catch{return null}if(!e||!e.segments||0===e.segments.length)return null;let r=e.segments[0];if(t<r.dateTimeObject)return null;for(let f=0;f<e.segments.length-1&&(r=e.segments[f],!(t<e.segments[f+1].dateTimeObject));f++);const i=e.segments[e.segments.length-1],s=i.dateTimeObject,l=i.videoTimingInfo?(n=>n.transmuxedPresentationEnd-n.transmuxedPresentationStart-n.transmuxerPrependedSeconds)(i.videoTimingInfo):i.duration+.25*i.duration;return t>new Date(s.getTime()+1e3*l)?null:(t>s&&(r=i),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Is.duration(e,e.mediaSequence+e.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})})(n,e);if(!c)return l({message:`${n} was not found in the stream`});const f=c.segment,v=((n,e)=>{let t,r;try{t=new Date(n),r=new Date(e)}catch{}const i=t.getTime();return(r.getTime()-i)/1e3})(f.dateTimeObject,n);if("estimate"===c.type)return 0===t?l({message:`${n} is not buffered yet. Try again`}):(r(c.estimatedStart+v),void s.one("seeked",()=>{jT({programTime:n,playlist:e,retryCount:t-1,seekTo:r,pauseAfterSeek:i,tech:s,callback:l})}));const T=f.start+v;s.one("seeked",()=>l(null,s.currentTime())),i&&s.pause(),r(T)},km=(n,e)=>{if(4===n.readyState)return e()},{EventTarget:$k}=nt,p_=function(n,e){if(!PT(n,e)||n.sidx&&e.sidx&&(n.sidx.offset!==e.sidx.offset||n.sidx.length!==e.sidx.length))return!1;if(!n.sidx&&e.sidx||n.sidx&&!e.sidx||n.segments&&!e.segments||!n.segments&&e.segments)return!1;if(!n.segments&&!e.segments)return!0;for(let t=0;t<n.segments.length;t++){const r=n.segments[t],i=e.segments[t];if(r.uri!==i.uri)return!1;if(!r.byterange&&!i.byterange)continue;const s=r.byterange,l=i.byterange;if(s&&!l||!s&&l||s.offset!==l.offset||s.length!==l.length)return!1}return!0},kL=(n,e)=>(Boolean(!n.map&&!e.map)||Boolean(n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length))&&n.uri===e.uri&&n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length,Hk=(n,e)=>{const t={};for(const r in n){const s=n[r].sidx;if(s){const l=Ou(s);if(!e[l])break;kL(e[l].sidxInfo,s)&&(t[l]=e[l])}}return t};class Fx extends $k{constructor(e,t,r={},i){super(),this.mainPlaylistLoader_=i||this,i||(this.isMain_=!0);const{withCredentials:s=!1}=r;if(this.vhs_=t,this.withCredentials=s,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=eu("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,r){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,r&&(this.state=r),this.trigger("error"),!0):void 0)}addSidxSegments_(e,t,r){const i=e.sidx&&Ou(e.sidx);if(!e.sidx||!i||this.mainPlaylistLoader_.sidxMapping_[i])return void(this.mediaRequest_=ye().setTimeout(()=>r(!1),0));const s=i_(e.sidx.resolvedUri),l=(c,f)=>{if(this.requestErrored_(c,f,t))return;const v=this.mainPlaylistLoader_.sidxMapping_;let T;try{T=iC()(Zt(f.response).subarray(8))}catch(A){return void this.requestErrored_(A,f,t)}return v[i]={sidxInfo:e.sidx,sidx:T},Yd(e,T,e.sidx.resolvedUri),r(!0)};this.request=((n,e,t)=>{let i,r=[],s=!1;const l=function(T,A,j,P){return A.abort(),s=!0,t(T,A,j,P)},c=function(T,A){if(s)return;if(T)return l(T,A,"",r);const j=A.responseText.substring(r&&r.byteLength||0,A.responseText.length);if(r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if((t=t.filter(function(c){return c&&(c.byteLength||c.length)&&"string"!=typeof c})).length<=1)return Zt(t[0]);var i=t.reduce(function(c,f,v){return c+(f.byteLength||f.length)},0),s=new Uint8Array(i),l=0;return t.forEach(function(c){c=Zt(c),s.set(c,l),l+=c.byteLength}),s}(r,MS(j,!0)),i=i||kc(r),r.length<10||i&&r.length<i+2)return km(A,()=>l(T,A,"",r));const P=mb(r);return"ts"===P&&r.length<188||!P&&r.length<376?km(A,()=>l(T,A,"",r)):l(null,A,P,r)},v=e({uri:n,beforeSend(T){T.overrideMimeType("text/plain; charset=x-user-defined"),T.addEventListener("progress",function({}){return mp(T,null,{statusCode:T.status},c)})}},function(T,A){return mp(v,T,A,c)});return v})(s,this.vhs_.xhr,(c,f,v,T)=>{if(c)return l(c,f);if(!v||"mp4"!==v)return l({status:f.status,message:`Unsupported ${v||"unknown"} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},f);const{offset:A,length:j}=e.sidx.byterange;if(T.length>=j+A)return l(c,{response:T.subarray(A,A+j),status:f.status,uri:f.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:LT({byterange:e.sidx.byterange})},l)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},ye().clearTimeout(this.minimumUpdatePeriodTimeout_),ye().clearTimeout(this.mediaRequest_),ye().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if("string"==typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,i=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),this.trigger("HAVE_MAIN_MANIFEST"===e?"loadedmetadata":"mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),ye().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(ye().clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(e){ye().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const r=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=ye().setTimeout(()=>this.load(),r)}else this.started?t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){this.started=!0,this.isMain_?this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])}):this.mediaRequest_=ye().setTimeout(()=>this.haveMain_(),0)}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(t,r)=>{if(this.requestErrored_(t,r))return void("HAVE_NOTHING"===this.state&&(this.started=!1));const i=r.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=r.responseText,this.mainLoaded_=r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):Date.now(),this.mainPlaylistLoader_.srcUrl=i_(this.mainPlaylistLoader_.srcUrl,r),i?(this.handleMain_(),void this.syncClientServerClock_(()=>e(r,i))):e(r,i)})}syncClientServerClock_(e){const t=(n=>(n=>{const e=br(n,"UTCTiming")[0];if(!e)return null;const t=Ri(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return t})(mv(n)))(this.mainPlaylistLoader_.mainXml_);return null===t?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===t.method?(this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Ca(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},(r,i)=>{if(!this.request)return;if(r)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let s;s="HEAD"===t.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):this.mainLoaded_:Date.parse(i.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main;let t=(({mainXml:n,srcUrl:e,clientOffset:t,sidxMapping:r,previousManifest:i})=>{const s=((n,e={})=>{const t=((n,e={})=>{const{manifestUri:t="",NOW:r=Date.now(),clientOffset:i=0}=e,s=br(n,"Period");if(!s.length)throw new Error("INVALID_NUMBER_OF_PERIOD");const l=br(n,"Location"),c=Ri(n),f=rm([t],br(n,"BaseURL"));c.type=c.type||"static",c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=r,c.clientOffset=i,l.length&&(c.locations=l.map(Jd));const v=[];return s.forEach((T,A)=>{const j=Ri(T),P=v[A-1];j.start=(({attributes:n,priorPeriodAttributes:e,mpdType:t})=>"number"==typeof n.start?n.start:e&&"number"==typeof e.start&&"number"==typeof e.duration?e.start+e.duration:e||"static"!==t?null:0)({attributes:j,priorPeriodAttributes:P?P.attributes:null,mpdType:c.type}),v.push({node:T,attributes:j})}),{locations:c.locations,representationInfo:Kd(v.map(QS(c,f))),eventStream:Kd(v.map(YS))}})(mv(n),e),r=(n=>n.map(ab))(t.representationInfo);return I1({dashPlaylists:r,locations:t.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})})(n,{manifestUri:e,clientOffset:t,sidxMapping:r,previousManifest:i});return Nk(s,e),s})({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=((n,e,t)=>{let r=!0,i=Er(n,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const l=e.playlists[s];if(l.sidx){const f=Ou(l.sidx);t&&t[f]&&t[f].sidx&&Yd(l,t[f].sidx,l.sidx.resolvedUri)}const c=u_(i,l,p_);c&&(i=c,r=!1)}return Am(e,(s,l,c,f)=>{if(s.playlists&&s.playlists.length){const v=s.playlists[0].id,T=u_(i,s.playlists[0],p_);T&&(i=T,i.mediaGroups[l][c][f].playlists[0]=i.playlists[v],r=!1)}}),e.minimumUpdatePeriod!==n.minimumUpdatePeriod&&(r=!1),r?null:i})(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(ye().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`):this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=ye().setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=((n,e)=>{let r=Hk(n.playlists,e);return Am(n,(i,s,l,c)=>{i.playlists&&i.playlists.length&&(r=Er(r,Hk(i.playlists,e)))}),r})(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==t[e];if(r?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=()=>{this.media().endList||(this.mediaUpdateTimeout=ye().setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},c_(this.media(),Boolean(r))))};i()}this.trigger("loadedplaylist")}}var Ni={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const jx=function(n){return n.on=n.addEventListener,n.off=n.removeEventListener,n},Ux=function(n){return function(){const e=function(n){try{return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(n),URL.createObjectURL(t.getBlob())}}(n),t=jx(new Worker(e));t.objURL=e;const r=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),r.call(this)},t}},VT=function(n){return`var browserWorkerPolyFill = ${jx.toString()};\nbrowserWorkerPolyFill(self);\n`+n},$T=function(n){return n.toString().replace(/^function.+?{/,"").slice(0,-1)},Bx=VT($T(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var _={};this.on=function(S,x){_[S]||(_[S]=[]),_[S]=_[S].concat(x)},this.off=function(S,x){var I;return!!_[S]&&(I=_[S].indexOf(x),_[S]=_[S].slice(),_[S].splice(I,1),I>-1)},this.trigger=function(S){var x,I,O,N;if(x=_[S])if(2===arguments.length)for(O=x.length,I=0;I<O;++I)x[I].call(this,arguments[1]);else{for(N=[],I=arguments.length,I=1;I<arguments.length;++I)N.push(arguments[I]);for(O=x.length,I=0;I<O;++I)x[I].apply(this,N)}},this.dispose=function(){_={}}}};e.prototype.pipe=function(_){return this.on("data",function(S){_.push(S)}),this.on("done",function(S){_.flush(S)}),this.on("partialdone",function(S){_.partialFlush(S)}),this.on("endedtimeline",function(S){_.endTimeline(S)}),this.on("reset",function(S){_.reset(S)}),_},e.prototype.push=function(_){this.trigger("data",_)},e.prototype.flush=function(_){this.trigger("done",_)},e.prototype.partialFlush=function(_){this.trigger("partialdone",_)},e.prototype.endTimeline=function(_){this.trigger("endedtimeline",_)},e.prototype.reset=function(_){this.trigger("reset",_)};var c,f,v,T,A,j,P,W,J,se,Ne,Qe,qe,Ie,pe,at,Dt,un,jn,dr,ai,li,cn,kr,Yc,Bh,Hp,cy,dy,hy,fy,py,KD,j$,U$,B$,_,S,t=e,r=Math.pow(2,32),s={getUint64:function(_){var x,S=new DataView(_.buffer,_.byteOffset,_.byteLength);return S.getBigUint64?(x=S.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(x):x:S.getUint32(0)*r+S.getUint32(4)},MAX_UINT32:r},l=s.MAX_UINT32;(function(){var _;if(cn={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(_ in cn)cn.hasOwnProperty(_)&&(cn[_]=[_.charCodeAt(0),_.charCodeAt(1),_.charCodeAt(2),_.charCodeAt(3)]);kr=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Bh=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Yc=new Uint8Array([0,0,0,1]),Hp=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),cy=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),dy={video:Hp,audio:cy},py=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),fy=new Uint8Array([0,0,0,0,0,0,0,0]),KD=new Uint8Array([0,0,0,0,0,0,0,0]),j$=KD,U$=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B$=KD,hy=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),c=function(_){var I,O,S=[],x=0;for(I=1;I<arguments.length;I++)S.push(arguments[I]);for(I=S.length;I--;)x+=S[I].byteLength;for(O=new Uint8Array(x+8),new DataView(O.buffer,O.byteOffset,O.byteLength).setUint32(0,O.byteLength),O.set(_,4),I=0,x=8;I<S.length;I++)O.set(S[I],x),x+=S[I].byteLength;return O},f=function(){return c(cn.dinf,c(cn.dref,py))},v=function(_){return c(cn.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,_.audioobjecttype<<3|_.samplingfrequencyindex>>>1,_.samplingfrequencyindex<<7|_.channelcount<<3,6,1,2]))},T=function(){return c(cn.ftyp,kr,Yc,kr,Bh)},at=function(_){return c(cn.hdlr,dy[_])},A=function(_){return c(cn.mdat,_)},pe=function(_){var S=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,_.duration>>>24&255,_.duration>>>16&255,_.duration>>>8&255,255&_.duration,85,196,0,0]);return _.samplerate&&(S[12]=_.samplerate>>>24&255,S[13]=_.samplerate>>>16&255,S[14]=_.samplerate>>>8&255,S[15]=255&_.samplerate),c(cn.mdhd,S)},Ie=function(_){return c(cn.mdia,pe(_),at(_.type),P(_))},j=function(_){return c(cn.mfhd,new Uint8Array([0,0,0,0,(4278190080&_)>>24,(16711680&_)>>16,(65280&_)>>8,255&_]))},P=function(_){return c(cn.minf,"video"===_.type?c(cn.vmhd,hy):c(cn.smhd,fy),f(),un(_))},W=function(_,S){for(var x=[],I=S.length;I--;)x[I]=dr(S[I]);return c.apply(null,[cn.moof,j(_)].concat(x))},J=function(_){for(var S=_.length,x=[];S--;)x[S]=Qe(_[S]);return c.apply(null,[cn.moov,Ne(4294967295)].concat(x).concat(se(_)))},se=function(_){for(var S=_.length,x=[];S--;)x[S]=ai(_[S]);return c.apply(null,[cn.mvex].concat(x))},Ne=function(_){var S=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&_)>>24,(16711680&_)>>16,(65280&_)>>8,255&_,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return c(cn.mvhd,S)},Dt=function(_){var I,O,S=_.samples||[],x=new Uint8Array(4+S.length);for(O=0;O<S.length;O++)x[O+4]=(I=S[O].flags).dependsOn<<4|I.isDependedOn<<2|I.hasRedundancy;return c(cn.sdtp,x)},un=function(_){return c(cn.stbl,jn(_),c(cn.stts,B$),c(cn.stsc,j$),c(cn.stsz,U$),c(cn.stco,KD))},jn=function(x){return c(cn.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===x.type?_(x):S(x))},_=function(x){var ie,ue,I=x.sps||[],O=x.pps||[],N=[],Q=[];for(ie=0;ie<I.length;ie++)N.push((65280&I[ie].byteLength)>>>8),N.push(255&I[ie].byteLength),N=N.concat(Array.prototype.slice.call(I[ie]));for(ie=0;ie<O.length;ie++)Q.push((65280&O[ie].byteLength)>>>8),Q.push(255&O[ie].byteLength),Q=Q.concat(Array.prototype.slice.call(O[ie]));if(ue=[cn.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&x.width)>>8,255&x.width,(65280&x.height)>>8,255&x.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c(cn.avcC,new Uint8Array([1,x.profileIdc,x.profileCompatibility,x.levelIdc,255].concat([I.length],N,[O.length],Q))),c(cn.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],x.sarRatio){var Te=x.sarRatio[0],Fe=x.sarRatio[1];ue.push(c(cn.pasp,new Uint8Array([(4278190080&Te)>>24,(16711680&Te)>>16,(65280&Te)>>8,255&Te,(4278190080&Fe)>>24,(16711680&Fe)>>16,(65280&Fe)>>8,255&Fe])))}return c.apply(null,ue)},S=function(x){return c(cn.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&x.channelcount)>>8,255&x.channelcount,(65280&x.samplesize)>>8,255&x.samplesize,0,0,0,0,(65280&x.samplerate)>>8,255&x.samplerate,0,0]),v(x))},qe=function(_){var S=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&_.id)>>24,(16711680&_.id)>>16,(65280&_.id)>>8,255&_.id,0,0,0,0,(4278190080&_.duration)>>24,(16711680&_.duration)>>16,(65280&_.duration)>>8,255&_.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&_.width)>>8,255&_.width,0,0,(65280&_.height)>>8,255&_.height,0,0]);return c(cn.tkhd,S)},dr=function(_){var S,x,I,O,Q,ie;return S=c(cn.tfhd,new Uint8Array([0,0,0,58,(4278190080&_.id)>>24,(16711680&_.id)>>16,(65280&_.id)>>8,255&_.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Q=Math.floor(_.baseMediaDecodeTime/l),ie=Math.floor(_.baseMediaDecodeTime%l),x=c(cn.tfdt,new Uint8Array([1,0,0,0,Q>>>24&255,Q>>>16&255,Q>>>8&255,255&Q,ie>>>24&255,ie>>>16&255,ie>>>8&255,255&ie])),"audio"===_.type?(I=li(_,92),c(cn.traf,S,x,I)):(O=Dt(_),I=li(_,O.length+92),c(cn.traf,S,x,I,O))},Qe=function(_){return _.duration=_.duration||4294967295,c(cn.trak,qe(_),Ie(_))},ai=function(_){var S=new Uint8Array([0,0,0,0,(4278190080&_.id)>>24,(16711680&_.id)>>16,(65280&_.id)>>8,255&_.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==_.type&&(S[S.length-1]=0),c(cn.trex,S)},function(){var _,S,x;x=function(I,O){var N=0,Q=0,ie=0,ue=0;return I.length&&(void 0!==I[0].duration&&(N=1),void 0!==I[0].size&&(Q=2),void 0!==I[0].flags&&(ie=4),void 0!==I[0].compositionTimeOffset&&(ue=8)),[0,0,N|Q|ie|ue,1,(4278190080&I.length)>>>24,(16711680&I.length)>>>16,(65280&I.length)>>>8,255&I.length,(4278190080&O)>>>24,(16711680&O)>>>16,(65280&O)>>>8,255&O]},S=function(I,O){var N,Q,ie,ue,Te,Fe;for(ie=x(ue=I.samples||[],O+=20+16*ue.length),(Q=new Uint8Array(ie.length+16*ue.length)).set(ie),N=ie.length,Fe=0;Fe<ue.length;Fe++)Q[N++]=(4278190080&(Te=ue[Fe]).duration)>>>24,Q[N++]=(16711680&Te.duration)>>>16,Q[N++]=(65280&Te.duration)>>>8,Q[N++]=255&Te.duration,Q[N++]=(4278190080&Te.size)>>>24,Q[N++]=(16711680&Te.size)>>>16,Q[N++]=(65280&Te.size)>>>8,Q[N++]=255&Te.size,Q[N++]=Te.flags.isLeading<<2|Te.flags.dependsOn,Q[N++]=Te.flags.isDependedOn<<6|Te.flags.hasRedundancy<<4|Te.flags.paddingValue<<1|Te.flags.isNonSyncSample,Q[N++]=61440&Te.flags.degradationPriority,Q[N++]=15&Te.flags.degradationPriority,Q[N++]=(4278190080&Te.compositionTimeOffset)>>>24,Q[N++]=(16711680&Te.compositionTimeOffset)>>>16,Q[N++]=(65280&Te.compositionTimeOffset)>>>8,Q[N++]=255&Te.compositionTimeOffset;return c(cn.trun,Q)},_=function(I,O){var N,Q,ie,ue,Te,Fe;for(ie=x(ue=I.samples||[],O+=20+8*ue.length),(N=new Uint8Array(ie.length+8*ue.length)).set(ie),Q=ie.length,Fe=0;Fe<ue.length;Fe++)N[Q++]=(4278190080&(Te=ue[Fe]).duration)>>>24,N[Q++]=(16711680&Te.duration)>>>16,N[Q++]=(65280&Te.duration)>>>8,N[Q++]=255&Te.duration,N[Q++]=(4278190080&Te.size)>>>24,N[Q++]=(16711680&Te.size)>>>16,N[Q++]=(65280&Te.size)>>>8,N[Q++]=255&Te.size;return c(cn.trun,N)},li=function(I,O){return"audio"===I.type?_(I,O):S(I,O)}}();var mN,vN,_N,ZD,bN,$$,H$,G$,E9={ftyp:T,mdat:A,moof:W,moov:J,initSegment:function(_){var I,S=T(),x=J(_);return(I=new Uint8Array(S.byteLength+x.byteLength)).set(S),I.set(x,S.byteLength),I}},V$=function(_,S){var x={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return x.dataOffset=S,x.compositionTimeOffset=_.pts-_.dts,x.duration=_.duration,x.size=4*_.length,x.size+=_.byteLength,_.keyFrame&&(x.flags.dependsOn=2,x.flags.isNonSyncSample=0),x},M9={groupNalsIntoFrames:function(_){var S,x,I=[],O=[];for(O.byteLength=0,O.nalCount=0,O.duration=0,I.byteLength=0,S=0;S<_.length;S++)"access_unit_delimiter_rbsp"===(x=_[S]).nalUnitType?(I.length&&(I.duration=x.dts-I.dts,O.byteLength+=I.byteLength,O.nalCount+=I.length,O.duration+=I.duration,O.push(I)),(I=[x]).byteLength=x.data.byteLength,I.pts=x.pts,I.dts=x.dts):("slice_layer_without_partitioning_rbsp_idr"===x.nalUnitType&&(I.keyFrame=!0),I.duration=x.dts-I.dts,I.byteLength+=x.data.byteLength,I.push(x));return O.length&&(!I.duration||I.duration<=0)&&(I.duration=O[O.length-1].duration),O.byteLength+=I.byteLength,O.nalCount+=I.length,O.duration+=I.duration,O.push(I),O},groupFramesIntoGops:function(_){var S,x,I=[],O=[];for(I.byteLength=0,I.nalCount=0,I.duration=0,I.pts=_[0].pts,I.dts=_[0].dts,O.byteLength=0,O.nalCount=0,O.duration=0,O.pts=_[0].pts,O.dts=_[0].dts,S=0;S<_.length;S++)(x=_[S]).keyFrame?(I.length&&(O.push(I),O.byteLength+=I.byteLength,O.nalCount+=I.nalCount,O.duration+=I.duration),(I=[x]).nalCount=x.length,I.byteLength=x.byteLength,I.pts=x.pts,I.dts=x.dts,I.duration=x.duration):(I.duration+=x.duration,I.nalCount+=x.length,I.byteLength+=x.byteLength,I.push(x));return O.length&&I.duration<=0&&(I.duration=O[O.length-1].duration),O.byteLength+=I.byteLength,O.nalCount+=I.nalCount,O.duration+=I.duration,O.push(I),O},extendFirstKeyFrame:function(_){var S;return!_[0][0].keyFrame&&_.length>1&&(S=_.shift(),_.byteLength-=S.byteLength,_.nalCount-=S.nalCount,_[0][0].dts=S.dts,_[0][0].pts=S.pts,_[0][0].duration+=S.duration),_},generateSampleTable:function(_,S){var x,I,O,N,ie=S||0,ue=[];for(x=0;x<_.length;x++)for(N=_[x],I=0;I<N.length;I++)ie+=(O=V$(N[I],ie)).size,ue.push(O);return ue},concatenateNalData:function(_){var S,x,I,O,N,Q,ie=0,ut=new Uint8Array(_.byteLength+4*_.nalCount),Gt=new DataView(ut.buffer);for(S=0;S<_.length;S++)for(O=_[S],x=0;x<O.length;x++)for(N=O[x],I=0;I<N.length;I++)Gt.setUint32(ie,(Q=N[I]).data.byteLength),ut.set(Q.data,ie+=4),ie+=Q.data.byteLength;return ut},generateSampleTableForFrame:function(_,S){var x,O=[];return x=V$(_,S||0),O.push(x),O},concatenateNalDataForFrame:function(_){var S,x,I=0,ie=new Uint8Array(_.byteLength+4*_.length),ue=new DataView(ie.buffer);for(S=0;S<_.length;S++)ue.setUint32(I,(x=_[S]).data.byteLength),ie.set(x.data,I+=4),I+=x.data.byteLength;return ie}},Gp=[33,16,5,32,164,27],gN=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],gr=function(_){for(var S=[];_--;)S.push(0);return S};vN=function(_){return 9e4*_},_N=function(_,S){return _*S},ZD=function(_){return _/9e4},bN=function(_,S){return _/S},$$=function(_,S){return vN(bN(_,S))},H$=function(_,S){return _N(ZD(_),S)},G$=function(_,S,x){return ZD(x?_:_-S)};var qr={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:vN,secondsToAudioTs:_N,videoTsToSeconds:ZD,audioTsToSeconds:bN,audioTsToVideoTs:$$,videoTsToAudioTs:H$,metadataTsToSeconds:G$},YD=qr,B9={prefixWithSilence:function(_,S,x,I){var O,Te,Fe,ut,N=0,Q=0,ie=0,ue=0;if(S.length&&(O=YD.audioTsToVideoTs(_.baseMediaDecodeTime,_.samplerate),N=Math.ceil(YD.ONE_SECOND_IN_TS/(_.samplerate/1024)),x&&I&&(Q=O-Math.max(x,I),ue=(ie=Math.floor(Q/N))*N),!(ie<1||ue>YD.ONE_SECOND_IN_TS/2))){for((Te=function(){if(!mN){var _={96e3:[Gp,[227,64],gr(154),[56]],88200:[Gp,[231],gr(170),[56]],64e3:[Gp,[248,192],gr(240),[56]],48e3:[Gp,[255,192],gr(268),[55,148,128],gr(54),[112]],44100:[Gp,[255,192],gr(268),[55,163,128],gr(84),[112]],32e3:[Gp,[255,192],gr(268),[55,234],gr(226),[112]],24e3:[Gp,[255,192],gr(268),[55,255,128],gr(268),[111,112],gr(126),[224]],16e3:[Gp,[255,192],gr(268),[55,255,128],gr(268),[111,255],gr(269),[223,108],gr(195),[1,192]],12e3:[gN,gr(268),[3,127,248],gr(268),[6,255,240],gr(268),[13,255,224],gr(268),[27,253,128],gr(259),[56]],11025:[gN,gr(268),[3,127,248],gr(268),[6,255,240],gr(268),[13,255,224],gr(268),[27,255,192],gr(268),[55,175,128],gr(108),[112]],8e3:[gN,gr(268),[3,121,16],gr(47),[7]]};mN=function(_){return Object.keys(_).reduce(function(S,x){return S[x]=new Uint8Array(_[x].reduce(function(I,O){return I.concat(O)},[])),S},{})}(_)}return mN}()[_.samplerate])||(Te=S[0].data),Fe=0;Fe<ie;Fe++)S.splice(0,0,{data:Te,dts:(ut=S[0]).dts-N,pts:ut.pts-N});return _.baseMediaDecodeTime-=Math.floor(YD.videoTsToAudioTs(ue,_.samplerate)),ue}},trimAdtsFramesByEarliestDts:function(_,S,x){return S.minSegmentDts>=x?_:(S.minSegmentDts=1/0,_.filter(function(I){return I.dts>=x&&(S.minSegmentDts=Math.min(S.minSegmentDts,I.dts),S.minSegmentPts=S.minSegmentDts,!0)}))},generateSampleTable:function(_){var S,I=[];for(S=0;S<_.length;S++)I.push({size:_[S].data.byteLength,duration:1024});return I},concatenateFrameData:function(_){var S,x,I=0,O=new Uint8Array(function(_){var S,I=0;for(S=0;S<_.length;S++)I+=_[S].data.byteLength;return I}(_));for(S=0;S<_.length;S++)O.set((x=_[S]).data,I),I+=x.data.byteLength;return O}},V9=qr.ONE_SECOND_IN_TS,z9={clearDtsInfo:function(_){delete _.minSegmentDts,delete _.maxSegmentDts,delete _.minSegmentPts,delete _.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(_,S){var x,O=_.minSegmentDts;return S||(O-=_.timelineStartInfo.dts),x=_.timelineStartInfo.baseMediaDecodeTime,x+=O,x=Math.max(0,x),"audio"===_.type&&(x*=_.samplerate/V9,x=Math.floor(x)),x},collectDtsInfo:function(_,S){"number"==typeof S.pts&&(void 0===_.timelineStartInfo.pts&&(_.timelineStartInfo.pts=S.pts),_.minSegmentPts=void 0===_.minSegmentPts?S.pts:Math.min(_.minSegmentPts,S.pts),_.maxSegmentPts=void 0===_.maxSegmentPts?S.pts:Math.max(_.maxSegmentPts,S.pts)),"number"==typeof S.dts&&(void 0===_.timelineStartInfo.dts&&(_.timelineStartInfo.dts=S.dts),_.minSegmentDts=void 0===_.minSegmentDts?S.dts:Math.min(_.minSegmentDts,S.dts),_.maxSegmentDts=void 0===_.maxSegmentDts?S.dts:Math.max(_.maxSegmentDts,S.dts))}},q$={parseSei:function(_){for(var S=0,x={payloadType:-1,payloadSize:0},I=0,O=0;S<_.byteLength&&128!==_[S];){for(;255===_[S];)I+=255,S++;for(I+=_[S++];255===_[S];)O+=255,S++;if(O+=_[S++],!x.payload&&4===I){if("GA94"===String.fromCharCode(_[S+3],_[S+4],_[S+5],_[S+6])){x.payloadType=I,x.payloadSize=O,x.payload=_.subarray(S,S+O);break}x.payload=void 0}S+=O,I=0,O=0}return x},parseUserData:function(_){return 181!==_.payload[0]||49!=(_.payload[1]<<8|_.payload[2])||"GA94"!==String.fromCharCode(_.payload[3],_.payload[4],_.payload[5],_.payload[6])||3!==_.payload[7]?null:_.payload.subarray(8,_.payload.length-1)},parseCaptionPackets:function(_,S){var I,O,N,Q,x=[];if(!(64&S[0]))return x;for(O=31&S[0],I=0;I<O;I++)Q={type:3&S[2+(N=3*I)],pts:_},4&S[N+2]&&(Q.ccData=S[N+3]<<8|S[N+4],x.push(Q));return x},discardEmulationPreventionBytes:function(_){for(var O,N,S=_.byteLength,x=[],I=1;I<S-2;)0===_[I]&&0===_[I+1]&&3===_[I+2]?(x.push(I+2),I+=2):I++;if(0===x.length)return _;O=S-x.length,N=new Uint8Array(O);var Q=0;for(I=0;I<O;Q++,I++)Q===x[0]&&(Q++,x.shift()),N[I]=_[Q];return N},USER_DATA_REGISTERED_ITU_T_T35:4},TN=t,QD=q$,ka=function(_){_=_||{},ka.prototype.init.call(this),this.parse708captions_="boolean"!=typeof _.parse708captions||_.parse708captions,this.captionPackets_=[],this.ccStreams_=[new ui(0,0),new ui(0,1),new ui(1,0),new ui(1,1)],this.parse708captions_&&(this.cc708Stream_=new Mr({captionServices:_.captionServices})),this.reset(),this.ccStreams_.forEach(function(S){S.on("data",this.trigger.bind(this,"data")),S.on("partialdone",this.trigger.bind(this,"partialdone")),S.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ka.prototype=new TN,ka.prototype.push=function(_){var S,x,I;if("sei_rbsp"===_.nalUnitType&&(S=QD.parseSei(_.escapedRBSP)).payload&&S.payloadType===QD.USER_DATA_REGISTERED_ITU_T_T35&&(x=QD.parseUserData(S))){if(_.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(_.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));I=QD.parseCaptionPackets(_.pts,x),this.captionPackets_=this.captionPackets_.concat(I),this.latestDts_!==_.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=_.dts}},ka.prototype.flushCCStreams=function(_){this.ccStreams_.forEach(function(S){return"flush"===_?S.flush():S.partialFlush()},this)},ka.prototype.flushStream=function(_){this.captionPackets_.length?(this.captionPackets_.forEach(function(S,x){S.presortIndex=x}),this.captionPackets_.sort(function(S,x){return S.pts===x.pts?S.presortIndex-x.presortIndex:S.pts-x.pts}),this.captionPackets_.forEach(function(S){S.type<2?this.dispatchCea608Packet(S):this.dispatchCea708Packet(S)},this),this.captionPackets_.length=0,this.flushCCStreams(_)):this.flushCCStreams(_)},ka.prototype.flush=function(){return this.flushStream("flush")},ka.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ka.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(_){_.reset()})},ka.prototype.dispatchCea608Packet=function(_){this.setsTextOrXDSActive(_)?this.activeCea608Channel_[_.type]=null:this.setsChannel1Active(_)?this.activeCea608Channel_[_.type]=0:this.setsChannel2Active(_)&&(this.activeCea608Channel_[_.type]=1),null!==this.activeCea608Channel_[_.type]&&this.ccStreams_[(_.type<<1)+this.activeCea608Channel_[_.type]].push(_)},ka.prototype.setsChannel1Active=function(_){return 4096==(30720&_.ccData)},ka.prototype.setsChannel2Active=function(_){return 6144==(30720&_.ccData)},ka.prototype.setsTextOrXDSActive=function(_){return 256==(28928&_.ccData)||4138==(30974&_.ccData)||6186==(30974&_.ccData)},ka.prototype.dispatchCea708Packet=function(_){this.parse708captions_&&this.cc708Stream_.push(_)};var Q9={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},XD=function(_){return 32<=_&&_<=127||160<=_&&_<=255},Vh=function(_){this.windowNum=_,this.reset()};Vh.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Vh.prototype.getText=function(){return this.rows.join("\n")},Vh.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Vh.prototype.newLine=function(_){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(_),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Vh.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Vh.prototype.addText=function(_){this.rows[this.rowIdx]+=_},Vh.prototype.backspace=function(){if(!this.isEmpty()){var _=this.rows[this.rowIdx];this.rows[this.rowIdx]=_.substr(0,_.length-1)}};var JD=function(_,S,x){this.serviceNum=_,this.text="",this.currentWindow=new Vh(-1),this.windows=[],this.stream=x,"string"==typeof S&&this.createTextDecoder(S)};JD.prototype.init=function(_,S){this.startPts=_;for(var x=0;x<8;x++)this.windows[x]=new Vh(x),"function"==typeof S&&(this.windows[x].beforeRowOverflow=S)},JD.prototype.setCurrentWindow=function(_){this.currentWindow=this.windows[_]},JD.prototype.createTextDecoder=function(_){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(_)}catch(S){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+_+" encoding. "+S})}};var Mr=function(_){_=_||{},Mr.prototype.init.call(this);var O,S=this,x=_.captionServices||{},I={};Object.keys(x).forEach(N=>{O=x[N],/^SERVICE/.test(N)&&(I[N]=O.encoding)}),this.serviceEncodings=I,this.current708Packet=null,this.services={},this.push=function(N){3===N.type?(S.new708Packet(),S.add708Bytes(N)):(null===S.current708Packet&&S.new708Packet(),S.add708Bytes(N))}};Mr.prototype=new TN,Mr.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Mr.prototype.add708Bytes=function(_){var S=_.ccData,x=S>>>8,I=255&S;this.current708Packet.ptsVals.push(_.pts),this.current708Packet.data.push(x),this.current708Packet.data.push(I)},Mr.prototype.push708Packet=function(){var _=this.current708Packet,S=_.data,x=null,I=null,O=0,N=S[O++];for(_.seq=N>>6,_.sizeCode=63&N;O<S.length;O++)I=31&(N=S[O++]),7==(x=N>>5)&&I>0&&(x=N=S[O++]),this.pushServiceBlock(x,O,I),I>0&&(O+=I-1)},Mr.prototype.pushServiceBlock=function(_,S,x){var I,O=S,N=this.current708Packet.data,Q=this.services[_];for(Q||(Q=this.initService(_,O));O<S+x&&O<N.length;O++)XD(I=N[O])?O=this.handleText(O,Q):24===I?O=this.multiByteCharacter(O,Q):16===I?O=this.extendedCommands(O,Q):128<=I&&I<=135?O=this.setCurrentWindow(O,Q):152<=I&&I<=159?O=this.defineWindow(O,Q):136===I?O=this.clearWindows(O,Q):140===I?O=this.deleteWindows(O,Q):137===I?O=this.displayWindows(O,Q):138===I?O=this.hideWindows(O,Q):139===I?O=this.toggleWindows(O,Q):151===I?O=this.setWindowAttributes(O,Q):144===I?O=this.setPenAttributes(O,Q):145===I?O=this.setPenColor(O,Q):146===I?O=this.setPenLocation(O,Q):143===I?Q=this.reset(O,Q):8===I?Q.currentWindow.backspace():12===I?Q.currentWindow.clearText():13===I?Q.currentWindow.pendingNewLine=!0:14===I?Q.currentWindow.clearText():141===I&&O++},Mr.prototype.extendedCommands=function(_,S){var I=this.current708Packet.data[++_];return XD(I)&&(_=this.handleText(_,S,{isExtended:!0})),_},Mr.prototype.getPts=function(_){return this.current708Packet.ptsVals[Math.floor(_/2)]},Mr.prototype.initService=function(_,S){var I,O,x=this;return(I="SERVICE"+_)in this.serviceEncodings&&(O=this.serviceEncodings[I]),this.services[_]=new JD(_,O,x),this.services[_].init(this.getPts(S),function(N){x.flushDisplayed(N,x.services[_])}),this.services[_]},Mr.prototype.handleText=function(_,S,x){var Fe,ut,I=x&&x.isExtended,N=this.current708Packet.data,Q=I?4096:0,ie=N[_],Te=S.currentWindow;return S.textDecoder_&&!I?(x&&x.isMultiByte?(ut=[ie,N[_+1]],_++):ut=[ie],Fe=S.textDecoder_.decode(new Uint8Array(ut))):Fe=function(_){var S=Q9[_]||_;return 4096&_&&_===S?"":String.fromCharCode(S)}(Q|ie),Te.pendingNewLine&&!Te.isEmpty()&&Te.newLine(this.getPts(_)),Te.pendingNewLine=!1,Te.addText(Fe),_},Mr.prototype.multiByteCharacter=function(_,S){var x=this.current708Packet.data,O=x[_+2];return XD(x[_+1])&&XD(O)&&(_=this.handleText(++_,S,{isMultiByte:!0})),_},Mr.prototype.setCurrentWindow=function(_,S){return S.setCurrentWindow(7&this.current708Packet.data[_]),_},Mr.prototype.defineWindow=function(_,S){var x=this.current708Packet.data,I=x[_];S.setCurrentWindow(7&I);var N=S.currentWindow;return I=x[++_],N.visible=(32&I)>>5,N.rowLock=(16&I)>>4,N.columnLock=(8&I)>>3,N.priority=7&I,I=x[++_],N.relativePositioning=(128&I)>>7,N.anchorVertical=127&I,I=x[++_],N.anchorHorizontal=I,I=x[++_],N.anchorPoint=(240&I)>>4,N.rowCount=15&I,I=x[++_],N.columnCount=63&I,I=x[++_],N.windowStyle=(56&I)>>3,N.penStyle=7&I,N.virtualRowCount=N.rowCount+1,_},Mr.prototype.setWindowAttributes=function(_,S){var x=this.current708Packet.data,I=x[_],O=S.currentWindow.winAttr;return I=x[++_],O.fillOpacity=(192&I)>>6,O.fillRed=(48&I)>>4,O.fillGreen=(12&I)>>2,O.fillBlue=3&I,I=x[++_],O.borderType=(192&I)>>6,O.borderRed=(48&I)>>4,O.borderGreen=(12&I)>>2,O.borderBlue=3&I,I=x[++_],O.borderType+=(128&I)>>5,O.wordWrap=(64&I)>>6,O.printDirection=(48&I)>>4,O.scrollDirection=(12&I)>>2,O.justify=3&I,I=x[++_],O.effectSpeed=(240&I)>>4,O.effectDirection=(12&I)>>2,O.displayEffect=3&I,_},Mr.prototype.flushDisplayed=function(_,S){for(var x=[],I=0;I<8;I++)S.windows[I].visible&&!S.windows[I].isEmpty()&&x.push(S.windows[I].getText());S.endPts=_,S.text=x.join("\n\n"),this.pushCaption(S),S.startPts=_},Mr.prototype.pushCaption=function(_){""!==_.text&&(this.trigger("data",{startPts:_.startPts,endPts:_.endPts,text:_.text,stream:"cc708_"+_.serviceNum}),_.text="",_.startPts=_.endPts)},Mr.prototype.displayWindows=function(_,S){var I=this.current708Packet.data[++_],O=this.getPts(_);this.flushDisplayed(O,S);for(var N=0;N<8;N++)I&1<<N&&(S.windows[N].visible=1);return _},Mr.prototype.hideWindows=function(_,S){var I=this.current708Packet.data[++_],O=this.getPts(_);this.flushDisplayed(O,S);for(var N=0;N<8;N++)I&1<<N&&(S.windows[N].visible=0);return _},Mr.prototype.toggleWindows=function(_,S){var I=this.current708Packet.data[++_],O=this.getPts(_);this.flushDisplayed(O,S);for(var N=0;N<8;N++)I&1<<N&&(S.windows[N].visible^=1);return _},Mr.prototype.clearWindows=function(_,S){var I=this.current708Packet.data[++_],O=this.getPts(_);this.flushDisplayed(O,S);for(var N=0;N<8;N++)I&1<<N&&S.windows[N].clearText();return _},Mr.prototype.deleteWindows=function(_,S){var I=this.current708Packet.data[++_],O=this.getPts(_);this.flushDisplayed(O,S);for(var N=0;N<8;N++)I&1<<N&&S.windows[N].reset();return _},Mr.prototype.setPenAttributes=function(_,S){var x=this.current708Packet.data,I=x[_],O=S.currentWindow.penAttr;return I=x[++_],O.textTag=(240&I)>>4,O.offset=(12&I)>>2,O.penSize=3&I,I=x[++_],O.italics=(128&I)>>7,O.underline=(64&I)>>6,O.edgeType=(56&I)>>3,O.fontStyle=7&I,_},Mr.prototype.setPenColor=function(_,S){var x=this.current708Packet.data,I=x[_],O=S.currentWindow.penColor;return I=x[++_],O.fgOpacity=(192&I)>>6,O.fgRed=(48&I)>>4,O.fgGreen=(12&I)>>2,O.fgBlue=3&I,I=x[++_],O.bgOpacity=(192&I)>>6,O.bgRed=(48&I)>>4,O.bgGreen=(12&I)>>2,O.bgBlue=3&I,I=x[++_],O.edgeRed=(48&I)>>4,O.edgeGreen=(12&I)>>2,O.edgeBlue=3&I,_},Mr.prototype.setPenLocation=function(_,S){var x=this.current708Packet.data,I=x[_],O=S.currentWindow.penLoc;return S.currentWindow.pendingNewLine=!0,I=x[++_],O.row=15&I,I=x[++_],O.column=63&I,_},Mr.prototype.reset=function(_,S){var x=this.getPts(_);return this.flushDisplayed(x,S),this.initService(S.serviceNum,_)};var J9={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},eA=function(_){return null===_?"":(_=J9[_]||_,String.fromCharCode(_))},eY=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],gy=function(){for(var _=[],S=15;S--;)_.push("");return _},ui=function(_,S){ui.prototype.init.call(this),this.field_=_||0,this.dataChannel_=S||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(x){var I,O,N,Q,ie;if((I=32639&x.ccData)!==this.lastControlCode_){if(4096==(61440&I)?this.lastControlCode_=I:I!==this.PADDING_&&(this.lastControlCode_=null),N=I>>>8,Q=255&I,I!==this.PADDING_)if(I===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(I===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(x.pts),this.flushDisplayed(x.pts),O=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=O,this.startPts_=x.pts;else if(I===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(x.pts);else if(I===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(x.pts);else if(I===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(x.pts);else if(I===this.CARRIAGE_RETURN_)this.clearFormatting(x.pts),this.flushDisplayed(x.pts),this.shiftRowsUp_(),this.startPts_=x.pts;else if(I===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(I===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(x.pts),this.displayed_=gy();else if(I===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=gy();else if(I===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(x.pts),this.displayed_=gy()),this.mode_="paintOn",this.startPts_=x.pts;else if(this.isSpecialCharacter(N,Q))ie=eA((N=(3&N)<<8)|Q),this[this.mode_](x.pts,ie),this.column_++;else if(this.isExtCharacter(N,Q))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),ie=eA((N=(3&N)<<8)|Q),this[this.mode_](x.pts,ie),this.column_++;else if(this.isMidRowCode(N,Q))this.clearFormatting(x.pts),this[this.mode_](x.pts," "),this.column_++,14==(14&Q)&&this.addFormatting(x.pts,["i"]),1==(1&Q)&&this.addFormatting(x.pts,["u"]);else if(this.isOffsetControlCode(N,Q))this.column_+=3&Q;else if(this.isPAC(N,Q)){var ue=eY.indexOf(7968&I);"rollUp"===this.mode_&&(ue-this.rollUpRows_+1<0&&(ue=this.rollUpRows_-1),this.setRollUp(x.pts,ue)),ue!==this.row_&&(this.clearFormatting(x.pts),this.row_=ue),1&Q&&-1===this.formatting_.indexOf("u")&&this.addFormatting(x.pts,["u"]),16==(16&I)&&(this.column_=4*((14&I)>>1)),this.isColorPAC(Q)&&14==(14&Q)&&this.addFormatting(x.pts,["i"])}else this.isNormalChar(N)&&(0===Q&&(Q=null),ie=eA(N),ie+=eA(Q),this[this.mode_](x.pts,ie),this.column_+=ie.length)}else this.lastControlCode_=null}};ui.prototype=new TN,ui.prototype.flushDisplayed=function(_){var S=this.displayed_.map(function(x,I){try{return x.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+I+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");S.length&&this.trigger("data",{startPts:this.startPts_,endPts:_,text:S,stream:this.name_})},ui.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=gy(),this.nonDisplayed_=gy(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ui.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ui.prototype.isSpecialCharacter=function(_,S){return _===this.EXT_&&S>=48&&S<=63},ui.prototype.isExtCharacter=function(_,S){return(_===this.EXT_+1||_===this.EXT_+2)&&S>=32&&S<=63},ui.prototype.isMidRowCode=function(_,S){return _===this.EXT_&&S>=32&&S<=47},ui.prototype.isOffsetControlCode=function(_,S){return _===this.OFFSET_&&S>=33&&S<=35},ui.prototype.isPAC=function(_,S){return _>=this.BASE_&&_<this.BASE_+8&&S>=64&&S<=127},ui.prototype.isColorPAC=function(_){return _>=64&&_<=79||_>=96&&_<=127},ui.prototype.isNormalChar=function(_){return _>=32&&_<=127},ui.prototype.setRollUp=function(_,S){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(_),this.nonDisplayed_=gy(),this.displayed_=gy()),void 0!==S&&S!==this.row_)for(var x=0;x<this.rollUpRows_;x++)this.displayed_[S-x]=this.displayed_[this.row_-x],this.displayed_[this.row_-x]="";void 0===S&&(S=this.row_),this.topRow_=S-this.rollUpRows_+1},ui.prototype.addFormatting=function(_,S){this.formatting_=this.formatting_.concat(S);var x=S.reduce(function(I,O){return I+"<"+O+">"},"");this[this.mode_](_,x)},ui.prototype.clearFormatting=function(_){if(this.formatting_.length){var S=this.formatting_.reverse().reduce(function(x,I){return x+"</"+I+">"},"");this.formatting_=[],this[this.mode_](_,S)}},ui.prototype.popOn=function(_,S){var x=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=x+=S},ui.prototype.rollUp=function(_,S){var x=this.displayed_[this.row_];this.displayed_[this.row_]=x+=S},ui.prototype.shiftRowsUp_=function(){var _;for(_=0;_<this.topRow_;_++)this.displayed_[_]="";for(_=this.row_+1;_<15;_++)this.displayed_[_]="";for(_=this.topRow_;_<this.row_;_++)this.displayed_[_]=this.displayed_[_+1];this.displayed_[this.row_]=""},ui.prototype.paintOn=function(_,S){var x=this.displayed_[this.row_];this.displayed_[this.row_]=x+=S};var W$={CaptionStream:ka,Cea608Stream:ui,Cea708Stream:Mr},nA={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},EN=function(_,S){var x=1;for(_>S&&(x=-1);Math.abs(S-_)>4294967296;)_+=8589934592*x;return _},wN=function(_){var S,x;wN.prototype.init.call(this),this.type_=_||"shared",this.push=function(I){"shared"!==this.type_&&I.type!==this.type_||(void 0===x&&(x=I.dts),I.dts=EN(I.dts,x),I.pts=EN(I.pts,x),S=I.dts,this.trigger("data",I))},this.flush=function(){x=S,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){x=void 0,S=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};wN.prototype=new t;var aA,Z$={TimestampRolloverStream:wN,handleRollover:EN},aY=nA,rA=(_,S,x)=>{if(!_)return-1;for(var I=x;I<_.length;I++)if(_[I]===S)return I;return-1},Y$=function(_,S,x){var I,O="";for(I=S;I<x;I++)O+="%"+("00"+_[I].toString(16)).slice(-2);return O},vw=function(_,S,x){return decodeURIComponent(Y$(_,S,x))},_w=function(_,S,x){return unescape(Y$(_,S,x))},sA=function(_){return _[0]<<21|_[1]<<14|_[2]<<7|_[3]},oA={APIC:function(_){var x,I,S=1;3===_.data[0]&&!((x=rA(_.data,0,S))<0)&&(_.mimeType=_w(_.data,S,x),_.pictureType=_.data[S=x+1],S++,!((I=rA(_.data,0,S))<0)&&(_.description=vw(_.data,S,I),S=I+1,"--\x3e"===_.mimeType?_.url=_w(_.data,S,_.data.length):_.pictureData=_.data.subarray(S,_.data.length)))},"T*":function(_){3===_.data[0]&&(_.value=vw(_.data,1,_.data.length).replace(/\0*$/,""),_.values=_.value.split("\0"))},TXXX:function(_){var S;3===_.data[0]&&-1!==(S=rA(_.data,0,1))&&(_.description=vw(_.data,1,S),_.value=vw(_.data,S+1,_.data.length).replace(/\0*$/,""),_.data=_.value)},"W*":function(_){_.url=_w(_.data,0,_.data.length).replace(/\0.*$/,"")},WXXX:function(_){var S;3===_.data[0]&&-1!==(S=rA(_.data,0,1))&&(_.description=vw(_.data,1,S),_.url=_w(_.data,S+1,_.data.length).replace(/\0.*$/,""))},PRIV:function(_){var S;for(S=0;S<_.data.length;S++)if(0===_.data[S]){_.owner=_w(_.data,0,S);break}_.privateData=_.data.subarray(S+1),_.data=_.privateData}};aA=function(_){var N,S={descriptor:_&&_.descriptor},x=0,I=[],O=0;if(aA.prototype.init.call(this),this.dispatchType=aY.METADATA_STREAM_TYPE.toString(16),S.descriptor)for(N=0;N<S.descriptor.length;N++)this.dispatchType+=("00"+S.descriptor[N].toString(16)).slice(-2);this.push=function(Q){var ie,ue,Te,Fe,ut;if("timed-metadata"===Q.type){if(Q.dataAlignmentIndicator&&(O=0,I.length=0),0===I.length&&(Q.data.length<10||Q.data[0]!=="I".charCodeAt(0)||Q.data[1]!=="D".charCodeAt(0)||Q.data[2]!=="3".charCodeAt(0)))return void this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});if(I.push(Q),O+=Q.data.byteLength,1===I.length&&(x=sA(Q.data.subarray(6,10)),x+=10),!(O<x)){for(ie={data:new Uint8Array(x),frames:[],pts:I[0].pts,dts:I[0].dts},ut=0;ut<x;)ie.data.set(I[0].data.subarray(0,x-ut),ut),ut+=I[0].data.byteLength,O-=I[0].data.byteLength,I.shift();ue=10,64&ie.data[5]&&(ue+=4,ue+=sA(ie.data.subarray(10,14)),x-=sA(ie.data.subarray(16,20)));do{if((Te=sA(ie.data.subarray(ue+4,ue+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((Fe={id:String.fromCharCode(ie.data[ue],ie.data[ue+1],ie.data[ue+2],ie.data[ue+3]),data:ie.data.subarray(ue+10,ue+Te+10)}).key=Fe.id,oA[Fe.id]?oA[Fe.id](Fe):"T"===Fe.id[0]?oA["T*"](Fe):"W"===Fe.id[0]&&oA["W*"](Fe),"com.apple.streaming.transportStreamTimestamp"===Fe.owner){var vt=Fe.data,mn=(1&vt[3])<<30|vt[4]<<22|vt[5]<<14|vt[6]<<6|vt[7]>>>2;mn*=4,Fe.timeStamp=mn+=3&vt[7],void 0===ie.pts&&void 0===ie.dts&&(ie.pts=Fe.timeStamp,ie.dts=Fe.timeStamp),this.trigger("timestamp",Fe)}ie.frames.push(Fe),ue+=10,ue+=Te}while(ue<x);this.trigger("data",ie)}}}},aA.prototype=new t;var lA,bw,uA,lY=aA,SN=t,CN=W$,Gu=nA,uY=Z$.TimestampRolloverStream;lA=function(){var _=new Uint8Array(188),S=0;lA.prototype.init.call(this),this.push=function(x){var N,I=0,O=188;for(S?((N=new Uint8Array(x.byteLength+S)).set(_.subarray(0,S)),N.set(x,S),S=0):N=x;O<N.byteLength;)71!==N[I]||71!==N[O]?(I++,O++):(this.trigger("data",N.subarray(I,O)),I+=188,O+=188);I<N.byteLength&&(_.set(N.subarray(I),0),S=N.byteLength-I)},this.flush=function(){188===S&&71===_[0]&&(this.trigger("data",_),S=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){S=0,this.trigger("reset")}},lA.prototype=new SN,bw=function(){var _,S,x,I;bw.prototype.init.call(this),I=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,_=function(O,N){var Q=0;N.payloadUnitStartIndicator&&(Q+=O[Q]+1),"pat"===N.type?S(O.subarray(Q),N):x(O.subarray(Q),N)},S=function(O,N){N.section_number=O[7],N.last_section_number=O[8],I.pmtPid=(31&O[10])<<8|O[11],N.pmtPid=I.pmtPid},x=function(O,N){var ie,Te;if(1&O[5]){for(I.programMapTable={video:null,audio:null,"timed-metadata":{}},ie=3+((15&O[1])<<8|O[2])-4,Te=12+((15&O[10])<<8|O[11]);Te<ie;){var Fe=O[Te],ut=(31&O[Te+1])<<8|O[Te+2];Fe===Gu.H264_STREAM_TYPE&&null===I.programMapTable.video?I.programMapTable.video=ut:Fe===Gu.ADTS_STREAM_TYPE&&null===I.programMapTable.audio?I.programMapTable.audio=ut:Fe===Gu.METADATA_STREAM_TYPE&&(I.programMapTable["timed-metadata"][ut]=Fe),Te+=5+((15&O[Te+3])<<8|O[Te+4])}N.programMapTable=I.programMapTable}},this.push=function(O){var N={},Q=4;if(N.payloadUnitStartIndicator=!!(64&O[1]),N.pid=31&O[1],N.pid<<=8,N.pid|=O[2],(48&O[3])>>>4>1&&(Q+=O[Q]+1),0===N.pid)N.type="pat",_(O.subarray(Q),N),this.trigger("data",N);else if(N.pid===this.pmtPid)for(N.type="pmt",_(O.subarray(Q),N),this.trigger("data",N);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([O,Q,N]):this.processPes_(O,Q,N)},this.processPes_=function(O,N,Q){Q.streamType=Q.pid===this.programMapTable.video?Gu.H264_STREAM_TYPE:Q.pid===this.programMapTable.audio?Gu.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][Q.pid],Q.type="pes",Q.data=O.subarray(N),this.trigger("data",Q)}},bw.prototype=new SN,bw.STREAM_TYPES={h264:27,adts:15},uA=function(){var N,_=this,S=!1,x={data:[],size:0},I={data:[],size:0},O={data:[],size:0},ie=function(ue,Te,Fe){var ps,ut=new Uint8Array(ue.size),Gt={type:Te},vt=0,mn=0,In=!1;if(ue.data.length&&!(ue.size<9)){for(Gt.trackId=ue.data[0].pid,vt=0;vt<ue.data.length;vt++)ut.set((ps=ue.data[vt]).data,mn),mn+=ps.data.byteLength;(function(ue,Te){var Fe;const ut=ue[0]<<16|ue[1]<<8|ue[2];Te.data=new Uint8Array,1===ut&&(Te.packetLength=6+(ue[4]<<8|ue[5]),Te.dataAlignmentIndicator=0!=(4&ue[6]),192&(Fe=ue[7])&&(Te.pts=(14&ue[9])<<27|(255&ue[10])<<20|(254&ue[11])<<12|(255&ue[12])<<5|(254&ue[13])>>>3,Te.pts*=4,Te.pts+=(6&ue[13])>>>1,Te.dts=Te.pts,64&Fe&&(Te.dts=(14&ue[14])<<27|(255&ue[15])<<20|(254&ue[16])<<12|(255&ue[17])<<5|(254&ue[18])>>>3,Te.dts*=4,Te.dts+=(6&ue[18])>>>1)),Te.data=ue.subarray(9+ue[8]))})(ut,Gt),In="video"===Te||Gt.packetLength<=ue.size,(Fe||In)&&(ue.size=0,ue.data.length=0),In&&_.trigger("data",Gt)}};uA.prototype.init.call(this),this.push=function(ue){({pat:function(){},pes:function(){var Te,Fe;switch(ue.streamType){case Gu.H264_STREAM_TYPE:Te=x,Fe="video";break;case Gu.ADTS_STREAM_TYPE:Te=I,Fe="audio";break;case Gu.METADATA_STREAM_TYPE:Te=O,Fe="timed-metadata";break;default:return}ue.payloadUnitStartIndicator&&ie(Te,Fe,!0),Te.data.push(ue),Te.size+=ue.data.byteLength},pmt:function(){var Te={type:"metadata",tracks:[]};null!==(N=ue.programMapTable).video&&Te.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.video,codec:"avc",type:"video"}),null!==N.audio&&Te.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.audio,codec:"adts",type:"audio"}),S=!0,_.trigger("data",Te)}})[ue.type]()},this.reset=function(){x.size=0,x.data.length=0,I.size=0,I.data.length=0,this.trigger("reset")},this.flushStreams_=function(){ie(x,"video"),ie(I,"audio"),ie(O,"timed-metadata")},this.flush=function(){if(!S&&N){var ue={type:"metadata",tracks:[]};null!==N.video&&ue.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.video,codec:"avc",type:"video"}),null!==N.audio&&ue.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+N.audio,codec:"adts",type:"audio"}),_.trigger("data",ue)}S=!1,this.flushStreams_(),this.trigger("done")}},uA.prototype=new SN;var Q$={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:lA,TransportParseStream:bw,ElementaryStream:uA,TimestampRolloverStream:uY,CaptionStream:CN.CaptionStream,Cea608Stream:CN.Cea608Stream,Cea708Stream:CN.Cea708Stream,MetadataStream:lY};for(var IN in Gu)Gu.hasOwnProperty(IN)&&(Q$[IN]=Gu[IN]);var cA,cY=Q$,hY=qr.ONE_SECOND_IN_TS,X$=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];cA=function(_){var S,x=0;cA.prototype.init.call(this),this.skipWarn_=function(I,O){this.trigger("log",{level:"warn",message:`adts skiping bytes ${I} to ${O} in frame ${x} outside syncword`})},this.push=function(I){var N,Q,ie,ue,Te,O=0;if(_||(x=0),"audio"===I.type){S&&S.length?(ie=S,(S=new Uint8Array(ie.byteLength+I.data.byteLength)).set(ie),S.set(I.data,ie.byteLength)):S=I.data;for(var Fe;O+7<S.length;)if(255===S[O]&&240==(246&S[O+1])){if("number"==typeof Fe&&(this.skipWarn_(Fe,O),Fe=null),Q=2*(1&~S[O+1]),Te=(ue=1024*(1+(3&S[O+6])))*hY/X$[(60&S[O+2])>>>2],S.byteLength-O<(N=(3&S[O+3])<<11|S[O+4]<<3|(224&S[O+5])>>5))break;this.trigger("data",{pts:I.pts+x*Te,dts:I.dts+x*Te,sampleCount:ue,audioobjecttype:1+(S[O+2]>>>6&3),channelcount:(1&S[O+2])<<2|(192&S[O+3])>>>6,samplerate:X$[(60&S[O+2])>>>2],samplingfrequencyindex:(60&S[O+2])>>>2,samplesize:16,data:S.subarray(O+7+Q,O+N)}),x++,O+=N}else"number"!=typeof Fe&&(Fe=O),O++;"number"==typeof Fe&&(this.skipWarn_(Fe,O),Fe=null),S=S.subarray(O)}},this.flush=function(){x=0,this.trigger("done")},this.reset=function(){S=void 0,this.trigger("reset")},this.endTimeline=function(){S=void 0,this.trigger("endedtimeline")}},cA.prototype=new t;var J$,fY=cA;J$=function(_){var S=_.byteLength,x=0,I=0;this.length=function(){return 8*S},this.bitsAvailable=function(){return 8*S+I},this.loadWord=function(){var O=_.byteLength-S,N=new Uint8Array(4),Q=Math.min(4,S);if(0===Q)throw new Error("no bytes available");N.set(_.subarray(O,O+Q)),x=new DataView(N.buffer).getUint32(0),I=8*Q,S-=Q},this.skipBits=function(O){var N;I>O?(x<<=O,I-=O):(O-=I,O-=8*(N=Math.floor(O/8)),S-=N,this.loadWord(),x<<=O,I-=O)},this.readBits=function(O){var N=Math.min(I,O),Q=x>>>32-N;return(I-=N)>0?x<<=N:S>0&&this.loadWord(),(N=O-N)>0?Q<<N|this.readBits(N):Q},this.skipLeadingZeros=function(){var O;for(O=0;O<I;++O)if(x&2147483648>>>O)return x<<=O,I-=O,O;return this.loadWord(),O+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var O=this.skipLeadingZeros();return this.readBits(O+1)-1},this.readExpGolomb=function(){var O=this.readUnsignedExpGolomb();return 1&O?1+O>>>1:-1*(O>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var dA,Tw,tH,eH=t,gY=J$;Tw=function(){var S,x,_=0;Tw.prototype.init.call(this),this.push=function(I){var O;x?((O=new Uint8Array(x.byteLength+I.data.byteLength)).set(x),O.set(I.data,x.byteLength),x=O):x=I.data;for(var N=x.byteLength;_<N-3;_++)if(1===x[_+2]){S=_+5;break}for(;S<N;)switch(x[S]){case 0:if(0!==x[S-1]){S+=2;break}if(0!==x[S-2]){S++;break}_+3!==S-2&&this.trigger("data",x.subarray(_+3,S-2));do{S++}while(1!==x[S]&&S<N);_=S-2,S+=3;break;case 1:if(0!==x[S-1]||0!==x[S-2]){S+=3;break}this.trigger("data",x.subarray(_+3,S-2)),_=S-2,S+=3;break;default:S+=3}x=x.subarray(_),S-=_,_=0},this.reset=function(){x=null,_=0,this.trigger("reset")},this.flush=function(){x&&x.byteLength>3&&this.trigger("data",x.subarray(_+3)),x=null,_=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Tw.prototype=new eH,tH={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},dA=function(){var S,x,I,O,N,Q,ie,_=new Tw;dA.prototype.init.call(this),S=this,this.push=function(ue){"video"===ue.type&&(x=ue.trackId,I=ue.pts,O=ue.dts,_.push(ue))},_.on("data",function(ue){var Te={trackId:x,pts:I,dts:O,data:ue,nalUnitTypeCode:31&ue[0]};switch(Te.nalUnitTypeCode){case 5:Te.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Te.nalUnitType="sei_rbsp",Te.escapedRBSP=N(ue.subarray(1));break;case 7:Te.nalUnitType="seq_parameter_set_rbsp",Te.escapedRBSP=N(ue.subarray(1)),Te.config=Q(Te.escapedRBSP);break;case 8:Te.nalUnitType="pic_parameter_set_rbsp";break;case 9:Te.nalUnitType="access_unit_delimiter_rbsp"}S.trigger("data",Te)}),_.on("done",function(){S.trigger("done")}),_.on("partialdone",function(){S.trigger("partialdone")}),_.on("reset",function(){S.trigger("reset")}),_.on("endedtimeline",function(){S.trigger("endedtimeline")}),this.flush=function(){_.flush()},this.partialFlush=function(){_.partialFlush()},this.reset=function(){_.reset()},this.endTimeline=function(){_.endTimeline()},ie=function(ue,Te){var Gt,Fe=8,ut=8;for(Gt=0;Gt<ue;Gt++)0!==ut&&(ut=(Fe+Te.readExpGolomb()+256)%256),Fe=0===ut?Fe:ut},N=function(ue){for(var Gt,vt,Te=ue.byteLength,Fe=[],ut=1;ut<Te-2;)0===ue[ut]&&0===ue[ut+1]&&3===ue[ut+2]?(Fe.push(ut+2),ut+=2):ut++;if(0===Fe.length)return ue;Gt=Te-Fe.length,vt=new Uint8Array(Gt);var mn=0;for(ut=0;ut<Gt;mn++,ut++)mn===Fe[0]&&(mn++,Fe.shift()),vt[ut]=ue[mn];return vt},Q=function(ue){var vt,mn,In,ps,ru,vy,DH,AH,kH,LN,MH,_y,Te=0,Fe=0,ut=0,Gt=0,Ui=[1,1];if(mn=(vt=new gY(ue)).readUnsignedByte(),ps=vt.readUnsignedByte(),In=vt.readUnsignedByte(),vt.skipUnsignedExpGolomb(),tH[mn]&&(3===(ru=vt.readUnsignedExpGolomb())&&vt.skipBits(1),vt.skipUnsignedExpGolomb(),vt.skipUnsignedExpGolomb(),vt.skipBits(1),vt.readBoolean()))for(MH=3!==ru?8:12,_y=0;_y<MH;_y++)vt.readBoolean()&&ie(_y<6?16:64,vt);if(vt.skipUnsignedExpGolomb(),0===(vy=vt.readUnsignedExpGolomb()))vt.readUnsignedExpGolomb();else if(1===vy)for(vt.skipBits(1),vt.skipExpGolomb(),vt.skipExpGolomb(),DH=vt.readUnsignedExpGolomb(),_y=0;_y<DH;_y++)vt.skipExpGolomb();if(vt.skipUnsignedExpGolomb(),vt.skipBits(1),AH=vt.readUnsignedExpGolomb(),kH=vt.readUnsignedExpGolomb(),0===(LN=vt.readBits(1))&&vt.skipBits(1),vt.skipBits(1),vt.readBoolean()&&(Te=vt.readUnsignedExpGolomb(),Fe=vt.readUnsignedExpGolomb(),ut=vt.readUnsignedExpGolomb(),Gt=vt.readUnsignedExpGolomb()),vt.readBoolean()&&vt.readBoolean())switch(vt.readUnsignedByte()){case 1:Ui=[1,1];break;case 2:Ui=[12,11];break;case 3:Ui=[10,11];break;case 4:Ui=[16,11];break;case 5:Ui=[40,33];break;case 6:Ui=[24,11];break;case 7:Ui=[20,11];break;case 8:Ui=[32,11];break;case 9:Ui=[80,33];break;case 10:Ui=[18,11];break;case 11:Ui=[15,11];break;case 12:Ui=[64,33];break;case 13:Ui=[160,99];break;case 14:Ui=[4,3];break;case 15:Ui=[3,2];break;case 16:Ui=[2,1];break;case 255:Ui=[vt.readUnsignedByte()<<8|vt.readUnsignedByte(),vt.readUnsignedByte()<<8|vt.readUnsignedByte()]}return{profileIdc:mn,levelIdc:In,profileCompatibility:ps,width:16*(AH+1)-2*Te-2*Fe,height:(2-LN)*(kH+1)*16-2*ut-2*Gt,sarRatio:Ui}}},dA.prototype=new eH;var hA,mY={H264Stream:dA,NalByteStream:Tw},yY=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],nH=function(_,S){var x=_[S+6]<<21|_[S+7]<<14|_[S+8]<<7|_[S+9];return x=x>=0?x:0,(16&_[S+5])>>4?x+20:x+10},rH=function(_,S){return _.length-S<10||_[S]!=="I".charCodeAt(0)||_[S+1]!=="D".charCodeAt(0)||_[S+2]!=="3".charCodeAt(0)?S:(S+=nH(_,S),rH(_,S))},iH=function(_){return _[0]<<21|_[1]<<14|_[2]<<7|_[3]},bY=function(_,S,x){return unescape(function(_,S,x){var I,O="";for(I=S;I<x;I++)O+="%"+("00"+_[I].toString(16)).slice(-2);return O}(_,S,x))},DN={isLikelyAacData:function(_){var S=rH(_,0);return _.length>=S+2&&255==(255&_[S])&&240==(240&_[S+1])&&16==(22&_[S+1])},parseId3TagSize:nH,parseAdtsSize:function(_,S){return 6144&_[S+3]|_[S+4]<<3|(224&_[S+5])>>5},parseType:function(_,S){return _[S]==="I".charCodeAt(0)&&_[S+1]==="D".charCodeAt(0)&&_[S+2]==="3".charCodeAt(0)?"timed-metadata":!0&_[S]&&240==(240&_[S+1])?"audio":null},parseSampleRate:function(_){for(var S=0;S+5<_.length;){if(255===_[S]&&240==(246&_[S+1]))return yY[(60&_[S+2])>>>2];S++}return null},parseAacTimestamp:function(_){var S,x,I;S=10,64&_[5]&&(S+=4,S+=iH(_.subarray(10,14)));do{if((x=iH(_.subarray(S+4,S+8)))<1)return null;if("PRIV"===String.fromCharCode(_[S],_[S+1],_[S+2],_[S+3])){I=_.subarray(S+10,S+x+10);for(var N=0;N<I.byteLength;N++)if(0===I[N]){if("com.apple.streaming.transportStreamTimestamp"===bY(I,0,N)){var ie=I.subarray(N+1),ue=(1&ie[3])<<30|ie[4]<<22|ie[5]<<14|ie[6]<<6|ie[7]>>>2;return(ue*=4)+(3&ie[7])}break}}S+=10,S+=x}while(S<_.byteLength);return null}},sH=DN;hA=function(){var _=new Uint8Array,S=0;hA.prototype.init.call(this),this.setTimestamp=function(x){S=x},this.push=function(x){var Q,ie,ue,I=0,O=0;for(_.length?(ue=_.length,(_=new Uint8Array(x.byteLength+ue)).set(_.subarray(0,ue)),_.set(x,ue)):_=x;_.length-O>=3;)if(_[O]!=="I".charCodeAt(0)||_[O+1]!=="D".charCodeAt(0)||_[O+2]!=="3".charCodeAt(0))if(255!=(255&_[O])||240!=(240&_[O+1]))O++;else{if(_.length-O<7||O+(I=sH.parseAdtsSize(_,O))>_.length)break;ie={type:"audio",data:_.subarray(O,O+I),pts:S,dts:S},this.trigger("data",ie),O+=I}else{if(_.length-O<10||O+(I=sH.parseId3TagSize(_,O))>_.length)break;Q={type:"timed-metadata",data:_.subarray(O,O+I)},this.trigger("data",Q),O+=I}_=_.length-O>0?_.subarray(O):new Uint8Array},this.reset=function(){_=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){_=new Uint8Array,this.trigger("endedtimeline")}},hA.prototype=new t;var Sw,u0,mA,my,fA=t,Ew=E9,ww=M9,pA=B9,zu=z9,$h=cY,gA=qr,oH=fY,MY=mY.H264Stream,OY=hA,RY=DN.isLikelyAacData,PY=qr.ONE_SECOND_IN_TS,AN=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],kN=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],NY=function(_,S){S.stream=_,this.trigger("log",S)},aH=function(_,S){for(var x=Object.keys(S),I=0;I<x.length;I++){var O=x[I];"headOfPipeline"===O||!S[O].on||S[O].on("log",NY.bind(_,O))}},lH=function(_,S){var x;if(_.length!==S.length)return!1;for(x=0;x<_.length;x++)if(_[x]!==S[x])return!1;return!0},MN=function(_,S,x,I,O,N){return{start:{dts:_,pts:_+(x-S)},end:{dts:_+(I-S),pts:_+(O-x)},prependedContentDuration:N,baseMediaDecodeTime:_}};u0=function(_,S){var I,x=[],O=0,N=0,Q=1/0;I=(S=S||{}).firstSequenceNumber||0,u0.prototype.init.call(this),this.push=function(ie){zu.collectDtsInfo(_,ie),_&&AN.forEach(function(ue){_[ue]=ie[ue]}),x.push(ie)},this.setEarliestDts=function(ie){O=ie},this.setVideoBaseMediaDecodeTime=function(ie){Q=ie},this.setAudioAppendStart=function(ie){N=ie},this.flush=function(){var ie,ue,Te,Fe,ut,Gt,vt;0!==x.length?(ie=pA.trimAdtsFramesByEarliestDts(x,_,O),_.baseMediaDecodeTime=zu.calculateTrackBaseMediaDecodeTime(_,S.keepOriginalTimestamps),vt=pA.prefixWithSilence(_,ie,N,Q),_.samples=pA.generateSampleTable(ie),Te=Ew.mdat(pA.concatenateFrameData(ie)),x=[],ue=Ew.moof(I,[_]),Fe=new Uint8Array(ue.byteLength+Te.byteLength),I++,Fe.set(ue),Fe.set(Te,ue.byteLength),zu.clearDtsInfo(_),ut=Math.ceil(1024*PY/_.samplerate),ie.length&&(Gt=ie.length*ut,this.trigger("segmentTimingInfo",MN(gA.audioTsToVideoTs(_.baseMediaDecodeTime,_.samplerate),ie[0].dts,ie[0].pts,ie[0].dts+Gt,ie[0].pts+Gt,vt||0)),this.trigger("timingInfo",{start:ie[0].pts,end:ie[0].pts+Gt})),this.trigger("data",{track:_,boxes:Fe}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){zu.clearDtsInfo(_),x=[],this.trigger("reset")}},u0.prototype=new fA,Sw=function(_,S){var x,N,Q,I=[],O=[];x=(S=S||{}).firstSequenceNumber||0,Sw.prototype.init.call(this),delete _.minPTS,this.gopCache_=[],this.push=function(ie){zu.collectDtsInfo(_,ie),"seq_parameter_set_rbsp"===ie.nalUnitType&&!N&&(N=ie.config,_.sps=[ie.data],kN.forEach(function(ue){_[ue]=N[ue]},this)),"pic_parameter_set_rbsp"===ie.nalUnitType&&!Q&&(Q=ie.data,_.pps=[ie.data]),I.push(ie)},this.flush=function(){for(var ie,ue,Te,Fe,ut,Gt,mn,In,vt=0;I.length&&"access_unit_delimiter_rbsp"!==I[0].nalUnitType;)I.shift();if(0===I.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(ie=ww.groupNalsIntoFrames(I),(Te=ww.groupFramesIntoGops(ie))[0][0].keyFrame||((ue=this.getGopForFusion_(I[0],_))?(vt=ue.duration,Te.unshift(ue),Te.byteLength+=ue.byteLength,Te.nalCount+=ue.nalCount,Te.pts=ue.pts,Te.dts=ue.dts,Te.duration+=ue.duration):Te=ww.extendFirstKeyFrame(Te)),O.length){var ps;if(!(ps=S.alignGopsAtEnd?this.alignGopsAtEnd_(Te):this.alignGopsAtStart_(Te)))return this.gopCache_.unshift({gop:Te.pop(),pps:_.pps,sps:_.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),I=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");zu.clearDtsInfo(_),Te=ps}zu.collectDtsInfo(_,Te),_.samples=ww.generateSampleTable(Te),ut=Ew.mdat(ww.concatenateNalData(Te)),_.baseMediaDecodeTime=zu.calculateTrackBaseMediaDecodeTime(_,S.keepOriginalTimestamps),this.trigger("processedGopsInfo",Te.map(function(ru){return{pts:ru.pts,dts:ru.dts,byteLength:ru.byteLength}})),this.trigger("segmentTimingInfo",MN(_.baseMediaDecodeTime,(mn=Te[0]).dts,mn.pts,(In=Te[Te.length-1]).dts+In.duration,In.pts+In.duration,vt)),this.trigger("timingInfo",{start:Te[0].pts,end:Te[Te.length-1].pts+Te[Te.length-1].duration}),this.gopCache_.unshift({gop:Te.pop(),pps:_.pps,sps:_.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),I=[],this.trigger("baseMediaDecodeTime",_.baseMediaDecodeTime),this.trigger("timelineStartInfo",_.timelineStartInfo),Fe=Ew.moof(x,[_]),Gt=new Uint8Array(Fe.byteLength+ut.byteLength),x++,Gt.set(Fe),Gt.set(ut,Fe.byteLength),this.trigger("data",{track:_,boxes:Gt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),I=[],this.gopCache_.length=0,O.length=0,this.trigger("reset")},this.resetStream_=function(){zu.clearDtsInfo(_),N=void 0,Q=void 0},this.getGopForFusion_=function(ie){var ut,Gt,vt,mn,In,Fe=1/0;for(In=0;In<this.gopCache_.length;In++)vt=(mn=this.gopCache_[In]).gop,_.pps&&lH(_.pps[0],mn.pps[0])&&_.sps&&lH(_.sps[0],mn.sps[0])&&(vt.dts<_.timelineStartInfo.dts||(ut=ie.dts-vt.dts-vt.duration)>=-1e4&&ut<=45e3&&(!Gt||Fe>ut)&&(Gt=mn,Fe=ut));return Gt?Gt.gop:null},this.alignGopsAtStart_=function(ie){var ue,Te,Fe,ut,Gt,vt,mn,In;for(Gt=ie.byteLength,vt=ie.nalCount,mn=ie.duration,ue=Te=0;ue<O.length&&Te<ie.length&&(Fe=O[ue]).pts!==(ut=ie[Te]).pts;)ut.pts>Fe.pts?ue++:(Te++,Gt-=ut.byteLength,vt-=ut.nalCount,mn-=ut.duration);return 0===Te?ie:Te===ie.length?null:((In=ie.slice(Te)).byteLength=Gt,In.duration=mn,In.nalCount=vt,In.pts=In[0].pts,In.dts=In[0].dts,In)},this.alignGopsAtEnd_=function(ie){var ue,Te,Fe,ut,Gt,vt,mn;for(ue=O.length-1,Te=ie.length-1,Gt=null,vt=!1;ue>=0&&Te>=0;){if((Fe=O[ue]).pts===(ut=ie[Te]).pts){vt=!0;break}Fe.pts>ut.pts?ue--:(ue===O.length-1&&(Gt=Te),Te--)}if(!vt&&null===Gt)return null;if(0===(mn=vt?Te:Gt))return ie;var In=ie.slice(mn),ps=In.reduce(function(ru,vy){return ru.byteLength+=vy.byteLength,ru.duration+=vy.duration,ru.nalCount+=vy.nalCount,ru},{byteLength:0,duration:0,nalCount:0});return In.byteLength=ps.byteLength,In.duration=ps.duration,In.nalCount=ps.nalCount,In.pts=In[0].pts,In.dts=In[0].dts,In},this.alignGopsWith=function(ie){O=ie}},Sw.prototype=new fA,my=function(_,S){this.numberOfTracks=0,this.metadataStream=S,this.remuxTracks=!(typeof(_=_||{}).remux<"u"&&!_.remux),this.keepOriginalTimestamps="boolean"==typeof _.keepOriginalTimestamps&&_.keepOriginalTimestamps,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,my.prototype.init.call(this),this.push=function(x){return x.text?this.pendingCaptions.push(x):x.frames?this.pendingMetadata.push(x):(this.pendingTracks.push(x.track),this.pendingBytes+=x.boxes.byteLength,"video"===x.track.type&&(this.videoTrack=x.track,this.pendingBoxes.push(x.boxes)),void("audio"===x.track.type&&(this.audioTrack=x.track,this.pendingBoxes.unshift(x.boxes))))}},my.prototype=new fA,my.prototype.flush=function(_){var I,O,N,ie,S=0,x={captions:[],captionStreams:{},metadata:[],info:{}},Q=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==_&&"AudioSegmentStream"!==_)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(Q=this.videoTrack.timelineStartInfo.pts,kN.forEach(function(ue){x.info[ue]=this.videoTrack[ue]},this)):this.audioTrack&&(Q=this.audioTrack.timelineStartInfo.pts,AN.forEach(function(ue){x.info[ue]=this.audioTrack[ue]},this)),this.videoTrack||this.audioTrack){for(x.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,N=Ew.initSegment(this.pendingTracks),x.initSegment=new Uint8Array(N.byteLength),x.initSegment.set(N),x.data=new Uint8Array(this.pendingBytes),ie=0;ie<this.pendingBoxes.length;ie++)x.data.set(this.pendingBoxes[ie],S),S+=this.pendingBoxes[ie].byteLength;for(ie=0;ie<this.pendingCaptions.length;ie++)(I=this.pendingCaptions[ie]).startTime=gA.metadataTsToSeconds(I.startPts,Q,this.keepOriginalTimestamps),I.endTime=gA.metadataTsToSeconds(I.endPts,Q,this.keepOriginalTimestamps),x.captionStreams[I.stream]=!0,x.captions.push(I);for(ie=0;ie<this.pendingMetadata.length;ie++)(O=this.pendingMetadata[ie]).cueTime=gA.metadataTsToSeconds(O.pts,Q,this.keepOriginalTimestamps),x.metadata.push(O);for(x.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",x),ie=0;ie<x.captions.length;ie++)this.trigger("caption",I=x.captions[ie]);for(ie=0;ie<x.metadata.length;ie++)this.trigger("id3Frame",O=x.metadata[ie])}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},my.prototype.setRemux=function(_){this.remuxTracks=_},mA=function(_){var I,O,S=this,x=!0;mA.prototype.init.call(this),this.baseMediaDecodeTime=(_=_||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var N={};this.transmuxPipeline_=N,N.type="aac",N.metadataStream=new $h.MetadataStream,N.aacStream=new OY,N.audioTimestampRolloverStream=new $h.TimestampRolloverStream("audio"),N.timedMetadataTimestampRolloverStream=new $h.TimestampRolloverStream("timed-metadata"),N.adtsStream=new oH,N.coalesceStream=new my(_,N.metadataStream),N.headOfPipeline=N.aacStream,N.aacStream.pipe(N.audioTimestampRolloverStream).pipe(N.adtsStream),N.aacStream.pipe(N.timedMetadataTimestampRolloverStream).pipe(N.metadataStream).pipe(N.coalesceStream),N.metadataStream.on("timestamp",function(Q){N.aacStream.setTimestamp(Q.timeStamp)}),N.aacStream.on("data",function(Q){"timed-metadata"!==Q.type&&"audio"!==Q.type||N.audioSegmentStream||(O=O||{timelineStartInfo:{baseMediaDecodeTime:S.baseMediaDecodeTime},codec:"adts",type:"audio"},N.coalesceStream.numberOfTracks++,N.audioSegmentStream=new u0(O,_),N.audioSegmentStream.on("log",S.getLogTrigger_("audioSegmentStream")),N.audioSegmentStream.on("timingInfo",S.trigger.bind(S,"audioTimingInfo")),N.adtsStream.pipe(N.audioSegmentStream).pipe(N.coalesceStream),S.trigger("trackinfo",{hasAudio:!!O,hasVideo:!!I}))}),N.coalesceStream.on("data",this.trigger.bind(this,"data")),N.coalesceStream.on("done",this.trigger.bind(this,"done")),aH(this,N)},this.setupTsPipeline=function(){var N={};this.transmuxPipeline_=N,N.type="ts",N.metadataStream=new $h.MetadataStream,N.packetStream=new $h.TransportPacketStream,N.parseStream=new $h.TransportParseStream,N.elementaryStream=new $h.ElementaryStream,N.timestampRolloverStream=new $h.TimestampRolloverStream,N.adtsStream=new oH,N.h264Stream=new MY,N.captionStream=new $h.CaptionStream(_),N.coalesceStream=new my(_,N.metadataStream),N.headOfPipeline=N.packetStream,N.packetStream.pipe(N.parseStream).pipe(N.elementaryStream).pipe(N.timestampRolloverStream),N.timestampRolloverStream.pipe(N.h264Stream),N.timestampRolloverStream.pipe(N.adtsStream),N.timestampRolloverStream.pipe(N.metadataStream).pipe(N.coalesceStream),N.h264Stream.pipe(N.captionStream).pipe(N.coalesceStream),N.elementaryStream.on("data",function(Q){var ie;if("metadata"===Q.type){for(ie=Q.tracks.length;ie--;)I||"video"!==Q.tracks[ie].type?!O&&"audio"===Q.tracks[ie].type&&((O=Q.tracks[ie]).timelineStartInfo.baseMediaDecodeTime=S.baseMediaDecodeTime):(I=Q.tracks[ie]).timelineStartInfo.baseMediaDecodeTime=S.baseMediaDecodeTime;I&&!N.videoSegmentStream&&(N.coalesceStream.numberOfTracks++,N.videoSegmentStream=new Sw(I,_),N.videoSegmentStream.on("log",S.getLogTrigger_("videoSegmentStream")),N.videoSegmentStream.on("timelineStartInfo",function(ue){O&&!_.keepOriginalTimestamps&&(O.timelineStartInfo=ue,N.audioSegmentStream.setEarliestDts(ue.dts-S.baseMediaDecodeTime))}),N.videoSegmentStream.on("processedGopsInfo",S.trigger.bind(S,"gopInfo")),N.videoSegmentStream.on("segmentTimingInfo",S.trigger.bind(S,"videoSegmentTimingInfo")),N.videoSegmentStream.on("baseMediaDecodeTime",function(ue){O&&N.audioSegmentStream.setVideoBaseMediaDecodeTime(ue)}),N.videoSegmentStream.on("timingInfo",S.trigger.bind(S,"videoTimingInfo")),N.h264Stream.pipe(N.videoSegmentStream).pipe(N.coalesceStream)),O&&!N.audioSegmentStream&&(N.coalesceStream.numberOfTracks++,N.audioSegmentStream=new u0(O,_),N.audioSegmentStream.on("log",S.getLogTrigger_("audioSegmentStream")),N.audioSegmentStream.on("timingInfo",S.trigger.bind(S,"audioTimingInfo")),N.audioSegmentStream.on("segmentTimingInfo",S.trigger.bind(S,"audioSegmentTimingInfo")),N.adtsStream.pipe(N.audioSegmentStream).pipe(N.coalesceStream)),S.trigger("trackinfo",{hasAudio:!!O,hasVideo:!!I})}}),N.coalesceStream.on("data",this.trigger.bind(this,"data")),N.coalesceStream.on("id3Frame",function(Q){Q.dispatchType=N.metadataStream.dispatchType,S.trigger("id3Frame",Q)}),N.coalesceStream.on("caption",this.trigger.bind(this,"caption")),N.coalesceStream.on("done",this.trigger.bind(this,"done")),aH(this,N)},this.setBaseMediaDecodeTime=function(N){var Q=this.transmuxPipeline_;_.keepOriginalTimestamps||(this.baseMediaDecodeTime=N),O&&(O.timelineStartInfo.dts=void 0,O.timelineStartInfo.pts=void 0,zu.clearDtsInfo(O),Q.audioTimestampRolloverStream&&Q.audioTimestampRolloverStream.discontinuity()),I&&(Q.videoSegmentStream&&(Q.videoSegmentStream.gopCache_=[]),I.timelineStartInfo.dts=void 0,I.timelineStartInfo.pts=void 0,zu.clearDtsInfo(I),Q.captionStream.reset()),Q.timestampRolloverStream&&Q.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(N){O&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(N)},this.setRemux=function(N){var Q=this.transmuxPipeline_;_.remux=N,Q&&Q.coalesceStream&&Q.coalesceStream.setRemux(N)},this.alignGopsWith=function(N){I&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(N)},this.getLogTrigger_=function(N){var Q=this;return function(ie){ie.stream=N,Q.trigger("log",ie)}},this.push=function(N){if(x){var Q=RY(N);Q&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():!Q&&"ts"!==this.transmuxPipeline_.type&&this.setupTsPipeline(),x=!1}this.transmuxPipeline_.headOfPipeline.push(N)},this.flush=function(){x=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},mA.prototype=new fA;var Cw,_H,EH,ON,LY={Transmuxer:mA,VideoSegmentStream:Sw,AudioSegmentStream:u0,AUDIO_PROPERTIES:AN,VIDEO_PROPERTIES:kN,generateSegmentTimingInfo:MN},yA_toUnsigned=function(_){return _>>>0},uH=function(_){var S="";return S+=String.fromCharCode(_[0]),S+=String.fromCharCode(_[1]),(S+=String.fromCharCode(_[2]))+String.fromCharCode(_[3])},BY=yA_toUnsigned,VY=uH,cH=function(_,S){var I,O,N,Q,ie,x=[];if(!S.length)return null;for(I=0;I<_.byteLength;)O=BY(_[I]<<24|_[I+1]<<16|_[I+2]<<8|_[I+3]),N=VY(_.subarray(I+4,I+8)),Q=O>1?I+O:_.byteLength,N===S[0]&&(1===S.length?x.push(_.subarray(I+8,Q)):(ie=cH(_.subarray(I+8,Q),S.slice(1))).length&&(x=x.concat(ie))),I=Q;return x},$Y=yA_toUnsigned,HY=s.getUint64,hH=function(_){var S={version:_[0],flags:new Uint8Array(_.subarray(1,4))};return S.baseMediaDecodeTime=1===S.version?HY(_.subarray(4)):$Y(_[4]<<24|_[5]<<16|_[6]<<8|_[7]),S},fH=function(_){return{isLeading:(12&_[0])>>>2,dependsOn:3&_[0],isDependedOn:(192&_[1])>>>6,hasRedundancy:(48&_[1])>>>4,paddingValue:(14&_[1])>>>1,isNonSyncSample:1&_[1],degradationPriority:_[2]<<8|_[3]}},pH=function(_){var ut,S={version:_[0],flags:new Uint8Array(_.subarray(1,4)),samples:[]},x=new DataView(_.buffer,_.byteOffset,_.byteLength),I=1&S.flags[2],O=4&S.flags[2],N=1&S.flags[1],Q=2&S.flags[1],ie=4&S.flags[1],ue=8&S.flags[1],Te=x.getUint32(4),Fe=8;for(I&&(S.dataOffset=x.getInt32(Fe),Fe+=4),O&&Te&&(ut={flags:fH(_.subarray(Fe,Fe+4))},Fe+=4,N&&(ut.duration=x.getUint32(Fe),Fe+=4),Q&&(ut.size=x.getUint32(Fe),Fe+=4),ue&&(ut.compositionTimeOffset=1===S.version?x.getInt32(Fe):x.getUint32(Fe),Fe+=4),S.samples.push(ut),Te--);Te--;)ut={},N&&(ut.duration=x.getUint32(Fe),Fe+=4),Q&&(ut.size=x.getUint32(Fe),Fe+=4),ie&&(ut.flags=fH(_.subarray(Fe,Fe+4)),Fe+=4),ue&&(ut.compositionTimeOffset=1===S.version?x.getInt32(Fe):x.getUint32(Fe),Fe+=4),S.samples.push(ut);return S},gH=function(_){var Fe,S=new DataView(_.buffer,_.byteOffset,_.byteLength),x={version:_[0],flags:new Uint8Array(_.subarray(1,4)),trackId:S.getUint32(4)},I=1&x.flags[2],O=2&x.flags[2],N=8&x.flags[2],Q=16&x.flags[2],ie=32&x.flags[2],ue=65536&x.flags[0],Te=131072&x.flags[0];return Fe=8,I&&(Fe+=4,x.baseDataOffset=S.getUint32(12),Fe+=4),O&&(x.sampleDescriptionIndex=S.getUint32(Fe),Fe+=4),N&&(x.defaultSampleDuration=S.getUint32(Fe),Fe+=4),Q&&(x.defaultSampleSize=S.getUint32(Fe),Fe+=4),ie&&(x.defaultSampleFlags=S.getUint32(Fe)),ue&&(x.durationIsEmpty=!0),!I&&Te&&(x.baseDataOffsetIsMoof=!0),x},ZY=(Cw=typeof window<"u"?window:typeof n<"u"?n:typeof self<"u"?self:{},q$.discardEmulationPreventionBytes),YY=W$.CaptionStream,xw=cH,QY=hH,XY=pH,JY=gH,yH=Cw,eQ=function(_,S){for(var x=_,I=0;I<S.length;I++){var O=S[I];if(x<O.size)return O;x-=O.size}return null},oQ=function(){var S,x,I,O,N,Q,_=!1;this.isInitialized=function(){return _},this.init=function(ie){S=new YY,_=!0,Q=!!ie&&ie.isPartial,S.on("data",function(ue){ue.startTime=ue.startPts/O,ue.endTime=ue.endPts/O,N.captions.push(ue),N.captionStreams[ue.stream]=!0}),S.on("log",function(ue){N.logs.push(ue)})},this.isNewInit=function(ie,ue){return!(ie&&0===ie.length||ue&&"object"==typeof ue&&0===Object.keys(ue).length||I===ie[0]&&O===ue[I])},this.parse=function(ie,ue,Te){var Fe;if(!this.isInitialized())return null;if(!ue||!Te)return null;if(this.isNewInit(ue,Te))O=Te[I=ue[0]];else if(null===I||!O)return x.push(ie),null;for(;x.length>0;){var ut=x.shift();this.parse(ut,ue,Te)}return Fe=function(_,S,x){if(null===S)return null;var O=function(_,S){var x=xw(_,["moof","traf"]),I=xw(_,["mdat"]),O={},N=[];return I.forEach(function(Q,ie){N.push({mdat:Q,traf:x[ie]})}),N.forEach(function(Q){var In,ps,ie=Q.mdat,ue=Q.traf,Te=xw(ue,["tfhd"]),Fe=JY(Te[0]),ut=Fe.trackId,Gt=xw(ue,["tfdt"]),vt=Gt.length>0?QY(Gt[0]).baseMediaDecodeTime:0,mn=xw(ue,["trun"]);S===ut&&mn.length>0&&(In=function(_,S,x){var I=S,O=x.defaultSampleDuration||0,N=x.defaultSampleSize||0,Q=x.trackId,ie=[];return _.forEach(function(ue){var Fe=XY(ue).samples;Fe.forEach(function(ut){void 0===ut.duration&&(ut.duration=O),void 0===ut.size&&(ut.size=N),ut.trackId=Q,ut.dts=I,void 0===ut.compositionTimeOffset&&(ut.compositionTimeOffset=0),"bigint"==typeof I?(ut.pts=I+yH.BigInt(ut.compositionTimeOffset),I+=yH.BigInt(ut.duration)):(ut.pts=I+ut.compositionTimeOffset,I+=ut.duration)}),ie=ie.concat(Fe)}),ie}(mn,vt,Fe),ps=function(_,S,x){var N,Q,ie,ue,I=new DataView(_.buffer,_.byteOffset,_.byteLength),O={logs:[],seiNals:[]};for(Q=0;Q+4<_.length;Q+=ie)if(ie=I.getUint32(Q),Q+=4,!(ie<=0))switch(31&_[Q]){case 6:var Te=_.subarray(Q+1,Q+1+ie),Fe=eQ(Q,S);if(N={nalUnitType:"sei_rbsp",size:ie,data:Te,escapedRBSP:ZY(Te),trackId:x},Fe)N.pts=Fe.pts,N.dts=Fe.dts,ue=Fe;else{if(!ue){O.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Q+" for trackId "+x+". See mux.js#223."});break}N.pts=ue.pts,N.dts=ue.dts}O.seiNals.push(N)}return O}(ie,In,ut),O[ut]||(O[ut]={seiNals:[],logs:[]}),O[ut].seiNals=O[ut].seiNals.concat(ps.seiNals),O[ut].logs=O[ut].logs.concat(ps.logs))}),O}(_,S)[S]||{};return{seiNals:O.seiNals,logs:O.logs,timescale:x}}(ie,I,O),Fe&&Fe.logs&&(N.logs=N.logs.concat(Fe.logs)),null!==Fe&&Fe.seiNals?(this.pushNals(Fe.seiNals),this.flushStream(),N):N.logs.length?{logs:N.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(ie){if(!this.isInitialized()||!ie||0===ie.length)return null;ie.forEach(function(ue){S.push(ue)})},this.flushStream=function(){if(!this.isInitialized())return null;Q?S.partialFlush():S.flush()},this.clearParsedCaptions=function(){N.captions=[],N.captionStreams={},N.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;S.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){x=[],I=null,O=null,N?this.clearParsedCaptions():N={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},vA=yA_toUnsigned,Iw=function(_){return("00"+_.toString(16)).slice(-2)},Ji=cH,c0=uH,cQ=s.getUint64,RN=Cw;_H=function(_,S){var I=Ji(S,["moof","traf"]).reduce(function(O,N){var ut,Q=Ji(N,["tfhd"])[0],ie=vA(Q[4]<<24|Q[5]<<16|Q[6]<<8|Q[7]),ue=_[ie]||9e4,Te=Ji(N,["tfdt"])[0],Fe=new DataView(Te.buffer,Te.byteOffset,Te.byteLength);let Gt;return"bigint"==typeof(ut=1===Te[0]?cQ(Te.subarray(4,12)):Fe.getUint32(4))?Gt=ut/RN.BigInt(ue):"number"==typeof ut&&!isNaN(ut)&&(Gt=ut/ue),Gt<Number.MAX_SAFE_INTEGER&&(Gt=Number(Gt)),Gt<O&&(O=Gt),O},1/0);return"bigint"==typeof I||isFinite(I)?I:0},ON=function(_){var x=0===_[0]?12:20;return vA(_[x]<<24|_[x+1]<<16|_[x+2]<<8|_[x+3])},EH=function(_){var S=Ji(_,["moov","trak"]),x=[];return S.forEach(function(I){var Q,ie,O={},N=Ji(I,["tkhd"])[0];N&&(ie=(Q=new DataView(N.buffer,N.byteOffset,N.byteLength)).getUint8(0),O.id=Q.getUint32(0===ie?12:20));var ue=Ji(I,["mdia","hdlr"])[0];if(ue){var Te=c0(ue.subarray(8,12));O.type="vide"===Te?"video":"soun"===Te?"audio":Te}var Fe=Ji(I,["mdia","minf","stbl","stsd"])[0];if(Fe){var ut=Fe.subarray(8);O.codec=c0(ut.subarray(4,8));var vt,Gt=Ji(ut,[O.codec])[0];Gt&&(/^[asm]vc[1-9]$/i.test(O.codec)?(vt=Gt.subarray(78),"avcC"===c0(vt.subarray(4,8))&&vt.length>11?(O.codec+=".",O.codec+=Iw(vt[9]),O.codec+=Iw(vt[10]),O.codec+=Iw(vt[11])):O.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(O.codec)?(vt=Gt.subarray(28),"esds"===c0(vt.subarray(4,8))&&vt.length>20&&0!==vt[19]?(O.codec+="."+Iw(vt[19]),O.codec+="."+Iw(vt[20]>>>2&63).replace(/^0/,"")):O.codec="mp4a.40.2"):O.codec=O.codec.toLowerCase())}var In=Ji(I,["mdia","mdhd"])[0];In&&(O.timescale=ON(In)),x.push(O)}),x};var wH_startTime=_H,wH_tracks=EH,PN=nA,SH=function(_){var S=31&_[1];return(S<<=8)|_[2]},_A=function(_){return!!(64&_[1])},bA=function(_){var S=0;return(48&_[3])>>>4>1&&(S+=_[4]+1),S},NN=function(_){switch(_){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},yQ={parseType:function(_,S){var x=SH(_);return 0===x?"pat":x===S?"pmt":S?"pes":null},parsePat:function(_){var S=_A(_),x=4+bA(_);return S&&(x+=_[x]+1),(31&_[x+10])<<8|_[x+11]},parsePmt:function(_){var S={},x=_A(_),I=4+bA(_);if(x&&(I+=_[I]+1),1&_[I+5]){var N;N=3+((15&_[I+1])<<8|_[I+2])-4;for(var ie=12+((15&_[I+10])<<8|_[I+11]);ie<N;){var ue=I+ie;S[(31&_[ue+1])<<8|_[ue+2]]=_[ue],ie+=5+((15&_[ue+3])<<8|_[ue+4])}return S}},parsePayloadUnitStartIndicator:_A,parsePesType:function(_,S){switch(S[SH(_)]){case PN.H264_STREAM_TYPE:return"video";case PN.ADTS_STREAM_TYPE:return"audio";case PN.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(_){if(!_A(_))return null;var x=4+bA(_);if(x>=_.byteLength)return null;var O,I=null;return 192&(O=_[x+7])&&((I={}).pts=(14&_[x+9])<<27|(255&_[x+10])<<20|(254&_[x+11])<<12|(255&_[x+12])<<5|(254&_[x+13])>>>3,I.pts*=4,I.pts+=(6&_[x+13])>>>1,I.dts=I.pts,64&O&&(I.dts=(14&_[x+14])<<27|(255&_[x+15])<<20|(254&_[x+16])<<12|(255&_[x+17])<<5|(254&_[x+18])>>>3,I.dts*=4,I.dts+=(6&_[x+18])>>>1)),I},videoPacketContainsKeyFrame:function(_){for(var S=4+bA(_),x=_.subarray(S),I=0,O=0,N=!1;O<x.byteLength-3;O++)if(1===x[O+2]){I=O+5;break}for(;I<x.byteLength;)switch(x[I]){case 0:if(0!==x[I-1]){I+=2;break}if(0!==x[I-2]){I++;break}O+3!==I-2&&"slice_layer_without_partitioning_rbsp_idr"===NN(31&x[O+3])&&(N=!0);do{I++}while(1!==x[I]&&I<x.length);O=I-2,I+=3;break;case 1:if(0!==x[I-1]||0!==x[I-2]){I+=3;break}"slice_layer_without_partitioning_rbsp_idr"===NN(31&x[O+3])&&(N=!0),O=I-2,I+=3;break;default:I+=3}return x=x.subarray(O),I-=O,O=0,x&&x.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===NN(31&x[O+3])&&(N=!0),N}},CH=nA,d0=Z$.handleRollover,mr={};mr.ts=yQ,mr.aac=DN;var yy=qr.ONE_SECOND_IN_TS,Yo=188,xH=function(_,S,x){for(var N,ie,ue,Te,I=0,O=Yo,Fe=!1;O<=_.byteLength;)if(71!==_[I]||71!==_[O]&&O!==_.byteLength)I++,O++;else{if("pes"===(N=_.subarray(I,O),mr.ts.parseType(N,S.pid))&&(ie=mr.ts.parsePesType(N,S.table),ue=mr.ts.parsePayloadUnitStartIndicator(N),"audio"===ie&&ue&&(Te=mr.ts.parsePesTime(N))&&(Te.type="audio",x.audio.push(Te),Fe=!0)),Fe)break;I+=Yo,O+=Yo}for(I=(O=_.byteLength)-Yo,Fe=!1;I>=0;)if(71!==_[I]||71!==_[O]&&O!==_.byteLength)I--,O--;else{if("pes"===(N=_.subarray(I,O),mr.ts.parseType(N,S.pid))&&(ie=mr.ts.parsePesType(N,S.table),ue=mr.ts.parsePayloadUnitStartIndicator(N),"audio"===ie&&ue&&(Te=mr.ts.parsePesTime(N))&&(Te.type="audio",x.audio.push(Te),Fe=!0)),Fe)break;I-=Yo,O-=Yo}},_Q=function(_,S,x){for(var N,ie,ue,Te,Fe,ut,Gt,I=0,O=Yo,vt=!1,mn={data:[],size:0};O<_.byteLength;)if(71!==_[I]||71!==_[O])I++,O++;else{if("pes"===(N=_.subarray(I,O),mr.ts.parseType(N,S.pid))&&(ie=mr.ts.parsePesType(N,S.table),ue=mr.ts.parsePayloadUnitStartIndicator(N),"video"===ie&&(ue&&!vt&&(Te=mr.ts.parsePesTime(N))&&(Te.type="video",x.video.push(Te),vt=!0),!x.firstKeyFrame))){if(ue&&0!==mn.size){for(Fe=new Uint8Array(mn.size),ut=0;mn.data.length;)Gt=mn.data.shift(),Fe.set(Gt,ut),ut+=Gt.byteLength;if(mr.ts.videoPacketContainsKeyFrame(Fe)){var In=mr.ts.parsePesTime(Fe);In?(x.firstKeyFrame=In,x.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}mn.size=0}mn.data.push(N),mn.size+=N.byteLength}if(vt&&x.firstKeyFrame)break;I+=Yo,O+=Yo}for(I=(O=_.byteLength)-Yo,vt=!1;I>=0;)if(71!==_[I]||71!==_[O])I--,O--;else{if("pes"===(N=_.subarray(I,O),mr.ts.parseType(N,S.pid))&&(ie=mr.ts.parsePesType(N,S.table),ue=mr.ts.parsePayloadUnitStartIndicator(N),"video"===ie&&ue&&(Te=mr.ts.parsePesTime(N))&&(Te.type="video",x.video.push(Te),vt=!0)),vt)break;I-=Yo,O-=Yo}},SQ_inspect=function(_,S){var I;return I=mr.aac.isLikelyAacData(_)?function(_){for(var ie,S=!1,x=0,I=null,O=null,N=0,Q=0;_.length-Q>=3;){switch(mr.aac.parseType(_,Q)){case"timed-metadata":if(_.length-Q<10){S=!0;break}if((N=mr.aac.parseId3TagSize(_,Q))>_.length){S=!0;break}null===O&&(ie=_.subarray(Q,Q+N),O=mr.aac.parseAacTimestamp(ie)),Q+=N;break;case"audio":if(_.length-Q<7){S=!0;break}if((N=mr.aac.parseAdtsSize(_,Q))>_.length){S=!0;break}null===I&&(ie=_.subarray(Q,Q+N),I=mr.aac.parseSampleRate(ie)),x++,Q+=N;break;default:Q++}if(S)return null}if(null===I||null===O)return null;var Te=yy/I;return{audio:[{type:"audio",dts:O,pts:O},{type:"audio",dts:O+1024*x*Te,pts:O+1024*x*Te}]}}(_):function(_){var S={pid:null,table:null},x={};for(var I in function(_,S){for(var O,x=0,I=Yo;I<_.byteLength;)if(71!==_[x]||71!==_[I])x++,I++;else{switch(O=_.subarray(x,I),mr.ts.parseType(O,S.pid)){case"pat":S.pid=mr.ts.parsePat(O);break;case"pmt":var Q=mr.ts.parsePmt(O);S.table=S.table||{},Object.keys(Q).forEach(function(ie){S.table[ie]=Q[ie]})}x+=Yo,I+=Yo}}(_,S),S.table)if(S.table.hasOwnProperty(I))switch(S.table[I]){case CH.H264_STREAM_TYPE:x.video=[],_Q(_,S,x),0===x.video.length&&delete x.video;break;case CH.ADTS_STREAM_TYPE:x.audio=[],xH(_,S,x),0===x.audio.length&&delete x.audio}return x}(_),I&&(I.audio||I.video)?(function(_,S){if(_.audio&&_.audio.length){var x=S;(typeof x>"u"||isNaN(x))&&(x=_.audio[0].dts),_.audio.forEach(function(N){N.dts=d0(N.dts,x),N.pts=d0(N.pts,x),N.dtsTime=N.dts/yy,N.ptsTime=N.pts/yy})}if(_.video&&_.video.length){var I=S;if((typeof I>"u"||isNaN(I))&&(I=_.video[0].dts),_.video.forEach(function(N){N.dts=d0(N.dts,I),N.pts=d0(N.pts,I),N.dtsTime=N.dts/yy,N.ptsTime=N.pts/yy}),_.firstKeyFrame){var O=_.firstKeyFrame;O.dts=d0(O.dts,I),O.pts=d0(O.pts,I),O.dtsTime=O.dts/yy,O.ptsTime=O.pts/yy}}}(I,S),I):null};class IH{constructor(S,x){this.options=x||{},this.self=S,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new LY.Transmuxer(this.options),function(_,S){S.on("data",function(x){const I=x.initSegment;x.initSegment={data:I.buffer,byteOffset:I.byteOffset,byteLength:I.byteLength};const O=x.data;x.data=O.buffer,_.postMessage({action:"data",segment:x,byteOffset:O.byteOffset,byteLength:O.byteLength},[x.data])}),S.on("done",function(x){_.postMessage({action:"done"})}),S.on("gopInfo",function(x){_.postMessage({action:"gopInfo",gopInfo:x})}),S.on("videoSegmentTimingInfo",function(x){const I={start:{decode:qr.videoTsToSeconds(x.start.dts),presentation:qr.videoTsToSeconds(x.start.pts)},end:{decode:qr.videoTsToSeconds(x.end.dts),presentation:qr.videoTsToSeconds(x.end.pts)},baseMediaDecodeTime:qr.videoTsToSeconds(x.baseMediaDecodeTime)};x.prependedContentDuration&&(I.prependedContentDuration=qr.videoTsToSeconds(x.prependedContentDuration)),_.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:I})}),S.on("audioSegmentTimingInfo",function(x){const I={start:{decode:qr.videoTsToSeconds(x.start.dts),presentation:qr.videoTsToSeconds(x.start.pts)},end:{decode:qr.videoTsToSeconds(x.end.dts),presentation:qr.videoTsToSeconds(x.end.pts)},baseMediaDecodeTime:qr.videoTsToSeconds(x.baseMediaDecodeTime)};x.prependedContentDuration&&(I.prependedContentDuration=qr.videoTsToSeconds(x.prependedContentDuration)),_.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:I})}),S.on("id3Frame",function(x){_.postMessage({action:"id3Frame",id3Frame:x})}),S.on("caption",function(x){_.postMessage({action:"caption",caption:x})}),S.on("trackinfo",function(x){_.postMessage({action:"trackinfo",trackInfo:x})}),S.on("audioTimingInfo",function(x){_.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:qr.videoTsToSeconds(x.start),end:qr.videoTsToSeconds(x.end)}})}),S.on("videoTimingInfo",function(x){_.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:qr.videoTsToSeconds(x.start),end:qr.videoTsToSeconds(x.end)}})}),S.on("log",function(x){_.postMessage({action:"log",log:x})})}(this.self,this.transmuxer)}pushMp4Captions(S){this.captionParser||(this.captionParser=new oQ,this.captionParser.init());const x=new Uint8Array(S.data,S.byteOffset,S.byteLength),I=this.captionParser.parse(x,S.trackIds,S.timescales);this.self.postMessage({action:"mp4Captions",captions:I&&I.captions||[],logs:I&&I.logs||[],data:x.buffer},[x.buffer])}probeMp4StartTime({timescales:S,data:x}){const I=wH_startTime(S,x);this.self.postMessage({action:"probeMp4StartTime",startTime:I,data:x},[x.buffer])}probeMp4Tracks({data:S}){const x=wH_tracks(S);this.self.postMessage({action:"probeMp4Tracks",tracks:x,data:S},[S.buffer])}probeTs({data:S,baseStartTime:x}){const I="number"!=typeof x||isNaN(x)?void 0:x*qr.ONE_SECOND_IN_TS,O=SQ_inspect(S,I);let N=null;O&&(N={hasVideo:O.video&&2===O.video.length||!1,hasAudio:O.audio&&2===O.audio.length||!1},N.hasVideo&&(N.videoStart=O.video[0].ptsTime),N.hasAudio&&(N.audioStart=O.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:N,data:S},[S.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(S){const x=new Uint8Array(S.data,S.byteOffset,S.byteLength);this.transmuxer.push(x)}reset(){this.transmuxer.reset()}setTimestampOffset(S){this.transmuxer.setBaseMediaDecodeTime(Math.round(qr.secondsToVideoTs(S.timestampOffset||0)))}setAudioAppendStart(S){this.transmuxer.setAudioAppendStart(Math.ceil(qr.secondsToVideoTs(S.appendStart)))}setRemux(S){this.transmuxer.setRemux(S.remux)}flush(S){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(S){this.transmuxer.alignGopsWith(S.gopsToAlignWith.slice())}}self.onmessage=function(_){"init"===_.data.action&&_.data.options?this.messageHandlers=new IH(self,_.data.options):(this.messageHandlers||(this.messageHandlers=new IH(self)),_.data&&_.data.action&&"init"!==_.data.action&&this.messageHandlers[_.data.action]&&this.messageHandlers[_.data.action](_.data))}}));var qk=Ux(Bx);const Kk=n=>{const{transmuxer:e,bytes:t,audioAppendStart:r,gopsToAlignWith:i,remux:s,onData:l,onTrackInfo:c,onAudioTimingInfo:f,onVideoTimingInfo:v,onVideoSegmentTimingInfo:T,onAudioSegmentTimingInfo:A,onId3:j,onCaptions:P,onDone:W,onEndedTimeline:J,onTransmuxerLog:se,isEndOfTimeline:Ne}=n,Qe={buffer:[]};let qe=Ne;if(e.onmessage=pe=>{e.currentTransmux===n&&("data"===pe.data.action&&((n,e,t)=>{const{type:r,initSegment:i,captions:s,captionStreams:l,metadata:c,videoFrameDtsTime:f,videoFramePtsTime:v}=n.data.segment;e.buffer.push({captions:s,captionStreams:l,metadata:c});const T=n.data.segment.boxes||{data:n.data.segment.data},A={type:r,data:new Uint8Array(T.data,T.data.byteOffset,T.data.byteLength),initSegment:new Uint8Array(i.data,i.byteOffset,i.byteLength)};typeof f<"u"&&(A.videoFrameDtsTime=f),typeof v<"u"&&(A.videoFramePtsTime=v),t(A)})(pe,Qe,l),"trackinfo"===pe.data.action&&c(pe.data.trackInfo),"gopInfo"===pe.data.action&&((n,e)=>{e.gopInfo=n.data.gopInfo})(pe,Qe),"audioTimingInfo"===pe.data.action&&f(pe.data.audioTimingInfo),"videoTimingInfo"===pe.data.action&&v(pe.data.videoTimingInfo),"videoSegmentTimingInfo"===pe.data.action&&T(pe.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===pe.data.action&&A(pe.data.audioSegmentTimingInfo),"id3Frame"===pe.data.action&&j([pe.data.id3Frame],pe.data.id3Frame.dispatchType),"caption"===pe.data.action&&P(pe.data.caption),"endedtimeline"===pe.data.action&&(qe=!1,J()),"log"===pe.data.action&&se(pe.data.log),"transmuxed"===pe.data.type&&(qe||(e.onmessage=null,(({transmuxedData:n,callback:e})=>{n.buffer=[],e(n)})({transmuxedData:Qe,callback:W}),GT(e))))},r&&e.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const pe=t instanceof ArrayBuffer?t:t.buffer,at=t instanceof ArrayBuffer?0:t.byteOffset;e.postMessage({action:"push",data:pe,byteOffset:at,byteLength:t.byteLength},[pe])}Ne&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},GT=n=>{n.currentTransmux=null,n.transmuxQueue.length&&(n.currentTransmux=n.transmuxQueue.shift(),"function"==typeof n.currentTransmux?n.currentTransmux():Kk(n.currentTransmux))},m_=(n,e)=>{n.postMessage({action:e}),GT(n)};var zT_reset=n=>{((n,e)=>{if(!e.currentTransmux)return e.currentTransmux=n,void m_(e,n);e.transmuxQueue.push(m_.bind(null,e,n))})("reset",n)};const y_=function(n){const e=n.transmuxer,t=n.endAction||n.action,r=n.callback,i=qd({},n,{endAction:null,transmuxer:null,callback:null}),s=l=>{l.data.action===t&&(e.removeEventListener("message",s),l.data.data&&(l.data.data=new Uint8Array(l.data.data,n.byteOffset||0,n.byteLength||l.data.data.byteLength),n.data&&(n.data=l.data.data)),r(l.data))};if(e.addEventListener("message",s),n.data){const l=n.data instanceof ArrayBuffer;i.byteOffset=l?0:n.data.byteOffset,i.byteLength=n.data.byteLength,e.postMessage(i,[l?n.data:n.data.buffer])}else e.postMessage(i)},Hx=n=>{n.forEach(e=>{e.abort()})},qT=(n,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:-101,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:-102,xhr:e}:n?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:2,xhr:e}:"arraybuffer"===e.responseType&&0===e.response.byteLength?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:2,xhr:e}:null,Qk=(n,e,t)=>(r,i)=>{const s=i.response,l=qT(r,i);if(l)return t(l,n);if(16!==s.byteLength)return t({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},n);const c=new DataView(s),f=new Uint32Array([c.getUint32(0),c.getUint32(4),c.getUint32(8),c.getUint32(12)]);for(let v=0;v<e.length;v++)e[v].bytes=f;return t(null,n)},Xk=(n,e)=>{const t=mb(n.map.bytes);if("mp4"!==t)return e({internal:!0,message:`Found unsupported ${t||"unknown"} container for initialization segment at URL: ${n.map.resolvedUri||n.map.uri}`,code:2});y_({action:"probeMp4Tracks",data:n.map.bytes,transmuxer:n.transmuxer,callback:({tracks:r,data:i})=>(n.map.bytes=i,r.forEach(function(s){n.map.tracks=n.map.tracks||{},!n.map.tracks[s.type]&&(n.map.tracks[s.type]=s,"number"==typeof s.id&&s.timescale&&(n.map.timescales=n.map.timescales||{},n.map.timescales[s.id]=s.timescale))}),e(null))})},jL=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:v,dataFn:T,doneFn:A,onTransmuxerLog:j})=>{const P=n.map&&n.map.tracks||{},W=Boolean(P.audio&&P.video);let J=r.bind(null,n,"audio","start");const se=r.bind(null,n,"audio","end");let Ne=r.bind(null,n,"video","start");const Qe=r.bind(null,n,"video","end");y_({action:"probeTs",transmuxer:n.transmuxer,data:e,baseStartTime:n.baseStartTime,callback:Ie=>{n.bytes=e=Ie.data;const pe=Ie.result;pe&&(t(n,{hasAudio:pe.hasAudio,hasVideo:pe.hasVideo,isMuxed:W}),t=null,pe.hasAudio&&!W&&J(pe.audioStart),pe.hasVideo&&Ne(pe.videoStart),J=null,Ne=null),(n=>{if(!n.transmuxer.currentTransmux)return n.transmuxer.currentTransmux=n,void Kk(n);n.transmuxer.transmuxQueue.push(n)})({bytes:e,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:W,onData:Ie=>{Ie.type="combined"===Ie.type?"video":Ie.type,T(n,Ie)},onTrackInfo:Ie=>{t&&(W&&(Ie.isMuxed=!0),t(n,Ie))},onAudioTimingInfo:Ie=>{J&&typeof Ie.start<"u"&&(J(Ie.start),J=null),se&&typeof Ie.end<"u"&&se(Ie.end)},onVideoTimingInfo:Ie=>{Ne&&typeof Ie.start<"u"&&(Ne(Ie.start),Ne=null),Qe&&typeof Ie.end<"u"&&Qe(Ie.end)},onVideoSegmentTimingInfo:Ie=>{i(Ie)},onAudioSegmentTimingInfo:Ie=>{s(Ie)},onId3:(Ie,pe)=>{l(n,Ie,pe)},onCaptions:Ie=>{c(n,[Ie])},isEndOfTimeline:f,onEndedTimeline:()=>{v()},onTransmuxerLog:j,onDone:Ie=>{A&&(Ie.type="combined"===Ie.type?"video":Ie.type,A(null,n,Ie))}})}})},Jk=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:v,dataFn:T,doneFn:A,onTransmuxerLog:j})=>{let P=new Uint8Array(e);if(function(e){return co(e,["moof"]).length>0}(P)){n.isFmp4=!0;const{tracks:W}=n.map,J={isFmp4:!0,hasVideo:!!W.video,hasAudio:!!W.audio};W.audio&&W.audio.codec&&"enca"!==W.audio.codec&&(J.audioCodec=W.audio.codec),W.video&&W.video.codec&&"encv"!==W.video.codec&&(J.videoCodec=W.video.codec),W.video&&W.audio&&(J.isMuxed=!0),t(n,J);const se=Ne=>{T(n,{data:P,type:J.hasAudio&&!J.isMuxed?"audio":"video"}),Ne&&Ne.length&&c(n,Ne),A(null,n,{})};y_({action:"probeMp4StartTime",timescales:n.map.timescales,data:P,transmuxer:n.transmuxer,callback:({data:Ne,startTime:Qe})=>{e=Ne.buffer,n.bytes=P=Ne,J.hasAudio&&!J.isMuxed&&r(n,"audio","start",Qe),J.hasVideo&&r(n,"video","start",Qe),W.video&&Ne.byteLength&&n.transmuxer?y_({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:P,timescales:n.map.timescales,trackIds:[W.video.id],callback:qe=>{e=qe.data.buffer,n.bytes=P=qe.data,qe.logs.forEach(function(Ie){j(Er(Ie,{stream:"mp4CaptionParser"}))}),se(qe.captions)}}):se()}})}else{if(n.transmuxer)return typeof n.container>"u"&&(n.container=mb(P)),"ts"!==n.container&&"aac"!==n.container?(t(n,{hasAudio:!1,hasVideo:!1}),void A(null,n,{})):void jL({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:v,dataFn:T,doneFn:A,onTransmuxerLog:j});A(null,n,{})}},o=function({id:n,key:e,encryptedBytes:t,decryptionWorker:r},i){const s=c=>{if(c.data.source===n){r.removeEventListener("message",s);const f=c.data.decrypted;i(new Uint8Array(f.bytes,f.byteOffset,f.byteLength))}};let l;r.addEventListener("message",s),l=e.bytes.slice?e.bytes.slice():new Uint32Array(Array.prototype.slice.call(e.bytes)),r.postMessage(FT({source:n,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},y=({xhr:n,xhrOptions:e,decryptionWorker:t,segment:r,abortFn:i,progressFn:s,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:T,captionsFn:A,isEndOfTimeline:j,endedTimelineFn:P,dataFn:W,doneFn:J,onTransmuxerLog:se})=>{const Ne=[],Qe=(({activeXhrs:n,decryptionWorker:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:v,dataFn:T,doneFn:A,onTransmuxerLog:j})=>{let P=0,W=!1;return(J,se)=>{if(!W){if(J)return W=!0,Hx(n),A(J,se);if(P+=1,P===n.length){const Ne=function(){if(se.encryptedBytes)return(({decryptionWorker:n,segment:e,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:v,dataFn:T,doneFn:A,onTransmuxerLog:j})=>{o({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:n},P=>{e.bytes=P,Jk({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:v,dataFn:T,doneFn:A,onTransmuxerLog:j})})})({decryptionWorker:e,segment:se,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:v,dataFn:T,doneFn:A,onTransmuxerLog:j});Jk({segment:se,bytes:se.bytes,trackInfoFn:t,timingInfoFn:r,videoSegmentTimingInfoFn:i,audioSegmentTimingInfoFn:s,id3Fn:l,captionsFn:c,isEndOfTimeline:f,endedTimelineFn:v,dataFn:T,doneFn:A,onTransmuxerLog:j})};if(se.endOfAllRequests=Date.now(),se.map&&se.map.encryptedBytes&&!se.map.bytes)return o({decryptionWorker:e,id:se.requestId+"-init",encryptedBytes:se.map.encryptedBytes,key:se.map.key},Qe=>{se.map.bytes=Qe,Xk(se,qe=>{if(qe)return Hx(n),A(qe,se);Ne()})});Ne()}}}})({activeXhrs:Ne,decryptionWorker:t,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:T,captionsFn:A,isEndOfTimeline:j,endedTimelineFn:P,dataFn:W,doneFn:J,onTransmuxerLog:se});if(r.key&&!r.key.bytes){const Dt=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&Dt.push(r.map.key);const dr=n(Er(e,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),Qk(r,Dt,Qe));Ne.push(dr)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const cn=n(Er(e,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),Qk(r,[r.map.key],Qe));Ne.push(cn)}const un=Er(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:LT(r.map)}),jn=(({segment:n,finishProcessingFn:e})=>(t,r)=>{const i=qT(t,r);if(i)return e(i,n);const s=new Uint8Array(r.response);if(n.map.key)return n.map.encryptedBytes=s,e(null,n);n.map.bytes=s,Xk(n,function(l){if(l)return l.xhr=r,l.status=r.status,e(l,n);e(null,n)})})({segment:r,finishProcessingFn:Qe}),dr=n(un,jn);Ne.push(dr)}const qe=Er(e,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:LT(r)}),pe=n(qe,(({segment:n,finishProcessingFn:e,responseType:t})=>(r,i)=>{const s=qT(r,i);if(s)return e(s,n);const l="arraybuffer"!==t&&i.responseText?(n=>{const e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer})(i.responseText.substring(n.lastReachedChar||0)):i.response;return n.stats=(n=>({bandwidth:n.bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0}))(i),n.key?n.encryptedBytes=new Uint8Array(l):n.bytes=new Uint8Array(l),e(null,n)})({segment:r,finishProcessingFn:Qe,responseType:qe.responseType}));pe.addEventListener("progress",(({segment:n,progressFn:e})=>A=>{if(!A.target.aborted)return n.stats=Er(n.stats,(n=>{const e=n.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return r.bytesReceived=n.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r})(A)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),e(A,n)})({segment:r,progressFn:s,trackInfoFn:l,timingInfoFn:c,videoSegmentTimingInfoFn:f,audioSegmentTimingInfoFn:v,id3Fn:T,captionsFn:A,isEndOfTimeline:j,endedTimelineFn:P,dataFn:W})),Ne.push(pe);const at={};return Ne.forEach(Dt=>{Dt.addEventListener("loadend",(({loadendState:n,abortFn:e})=>t=>{t.target.aborted&&e&&!n.calledAbortFn&&(e(),n.calledAbortFn=!0)})({loadendState:at,abortFn:i}))}),()=>Hx(Ne)},E=eu("CodecUtils"),D=(n,e)=>{const t=e.attributes||{};return n&&n.mediaGroups&&n.mediaGroups.AUDIO&&t.AUDIO&&n.mediaGroups.AUDIO[t.AUDIO]},G=function(n){const e={};return n.forEach(({mediaType:t,type:r,details:i})=>{e[t]=e[t]||[],e[t].push(Q0(`${r}${i}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1)return E(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(e[t]=null);e[t]=e[t][0]}),e},ee=function(n){let e=0;return n.audio&&e++,n.video&&e++,e},xe=function(n,e){const t=e.attributes||{},r=G(function(n){const e=n.attributes||{};if(e.CODECS)return zl(e.CODECS)}(e)||[]);if(D(n,e)&&!r.audio&&!((n,e)=>{if(!D(n,e))return!0;const r=n.mediaGroups.AUDIO[(e.attributes||{}).AUDIO];for(const i in r)if(!r[i].uri&&!r[i].playlists)return!0;return!1})(n,e)){const i=G(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var r=e.mediaGroups.AUDIO[t];if(!r)return null;for(var i in r){var s=r[i];if(s.default&&s.playlists)return zl(s.playlists[0].attributes.CODECS)}return null}(n,t.AUDIO)||[]);i.audio&&(r.audio=i.audio)}return r},Ve=eu("PlaylistSelector"),dt=function(n){if(!n||!n.playlist)return;const e=n.playlist;return JSON.stringify({id:e.id,bandwidth:n.bandwidth,width:n.width,height:n.height,codecs:e.attributes&&e.attributes.CODECS||""})},Ct=function(n,e){if(!n)return"";const t=ye().getComputedStyle(n);return t?t[e]:""},kt=function(n,e){const t=n.slice();n.sort(function(r,i){const s=e(r,i);return 0===s?t.indexOf(r)-t.indexOf(i):s})},zt=function(n,e){let t,r;return n.attributes.BANDWIDTH&&(t=n.attributes.BANDWIDTH),t=t||ye().Number.MAX_VALUE,e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||ye().Number.MAX_VALUE,t-r};let bt=function(n,e,t,r,i,s){if(!n)return;const l={bandwidth:e,width:t,height:r,limitRenditionByPlayerDimensions:i};let c=n.playlists;Is.isAudioOnly(n)&&(c=s.getAudioTrackPlaylists_(),l.audioOnly=!0);let f=c.map(pe=>{let at;const Dt=pe.attributes&&pe.attributes.RESOLUTION&&pe.attributes.RESOLUTION.width,un=pe.attributes&&pe.attributes.RESOLUTION&&pe.attributes.RESOLUTION.height;return at=pe.attributes&&pe.attributes.BANDWIDTH,at=at||ye().Number.MAX_VALUE,{bandwidth:at,width:Dt,height:un,playlist:pe}});kt(f,(pe,at)=>pe.bandwidth-at.bandwidth),f=f.filter(pe=>!Is.isIncompatible(pe.playlist));let v=f.filter(pe=>Is.isEnabled(pe.playlist));v.length||(v=f.filter(pe=>!Is.isDisabled(pe.playlist)));const T=v.filter(pe=>pe.bandwidth*Ni.BANDWIDTH_VARIANCE<e);let A=T[T.length-1];const j=T.filter(pe=>pe.bandwidth===A.bandwidth)[0];if(!1===i){const pe=j||v[0]||f[0];if(pe&&pe.playlist){let at="sortedPlaylistReps";return j&&(at="bandwidthBestRep"),v[0]&&(at="enabledPlaylistReps"),Ve(`choosing ${dt(pe)} using ${at} with options`,l),pe.playlist}return Ve("could not choose a playlist with options",l),null}const P=T.filter(pe=>pe.width&&pe.height);kt(P,(pe,at)=>pe.width-at.width);const W=P.filter(pe=>pe.width===t&&pe.height===r);A=W[W.length-1];const J=W.filter(pe=>pe.bandwidth===A.bandwidth)[0];let se,Ne,Qe,qe;if(J||(se=P.filter(pe=>pe.width>t||pe.height>r),Ne=se.filter(pe=>pe.width===se[0].width&&pe.height===se[0].height),A=Ne[Ne.length-1],Qe=Ne.filter(pe=>pe.bandwidth===A.bandwidth)[0]),s.leastPixelDiffSelector){const pe=P.map(at=>(at.pixelDiff=Math.abs(at.width-t)+Math.abs(at.height-r),at));kt(pe,(at,Dt)=>at.pixelDiff===Dt.pixelDiff?Dt.bandwidth-at.bandwidth:at.pixelDiff-Dt.pixelDiff),qe=pe[0]}const Ie=qe||Qe||J||j||v[0]||f[0];if(Ie&&Ie.playlist){let pe="sortedPlaylistReps";return qe?pe="leastPixelDiffRep":Qe?pe="resolutionPlusOneRep":J?pe="resolutionBestRep":j?pe="bandwidthBestRep":v[0]&&(pe="enabledPlaylistReps"),Ve(`choosing ${dt(Ie)} using ${pe} with options`,l),Ie.playlist}return Ve("could not choose a playlist with options",l),null};const Tn=function(){const n=this.useDevicePixelRatio&&ye().devicePixelRatio||1;return bt(this.playlists.main,this.systemBandwidth,parseInt(Ct(this.tech_.el(),"width"),10)*n,parseInt(Ct(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)},WT=function(n,e,t){let r,i;if(t&&t.cues)for(r=t.cues.length;r--;)i=t.cues[r],i.startTime>=n&&i.endTime<=e&&t.removeCue(i)},VL=n=>"number"==typeof n&&isFinite(n),Gx=1/60,v_=n=>{const{startOfSegment:e,duration:t,segment:r,part:i,playlist:{mediaSequence:s,id:l,segments:c=[]},mediaIndex:f,partIndex:v,timeline:T}=n,A=c.length-1;let j="mediaIndex/partIndex increment";n.getMediaInfoForTime?j=`getMediaInfoForTime (${n.getMediaInfoForTime})`:n.isSyncRequest&&(j="getSyncSegmentCandidate (isSyncRequest)"),n.independent&&(j+=` with independent ${n.independent}`);const P="number"==typeof v,W=n.segment.uri?"segment":"pre-segment",J=P?o_({preloadSegment:r})-1:0;return`${W} [${s+f}/${s+A}]`+(P?` part [${v}/${J}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(P?` part start/end [${i.start} => ${i.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${T}] selected by [${j}] playlist [${l}]`},$L=n=>`${n}TimingInfo`,HL=({timelineChangeController:n,currentTimeline:e,segmentTimeline:t,loaderType:r,audioDisabled:i})=>{if(e===t)return!1;if("audio"===r){const s=n.lastTimelineChange({type:"main"});return!s||s.to!==t}if("main"===r&&i){const s=n.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},GL=({segmentDuration:n,maxDuration:e})=>!!n&&Math.round(n)>e+jc;class eM extends nt.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=nt.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=eu(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return(n=>{const e=new qk;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:n}),e})({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&ye().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,ye().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&zT_reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return xs();if("main"===this.loaderType_){const{hasAudio:t,hasVideo:r,isMuxed:i}=e;if(r&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const r=h_(e);let i=this.initSegments_[r];return t&&!i&&e.bytes&&(this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e}segmentKey(e,t=!1){if(!e)return null;const r=Px(e);let i=this.keyCache_[r];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[r]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(i||e).resolvedUri};return i&&(s.bytes=i.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_){if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;const r=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(r&&(r.id?s=r.id:r.uri&&(s=r.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");const l=e.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${l}]`),null!==this.mediaIndex)if(this.mediaIndex-=l,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){const f=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=f}}i&&(i.mediaIndex-=l,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,e)}pause(){this.checkBufferTimeout_&&(ye().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&zT_reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,r=(()=>{}),i=!1){if(t===1/0&&(t=this.duration_()),t<=e)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let s=1;const l=()=>{s--,0===s&&r()};(i||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,l)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=((n,e,t,r)=>{const i=Math.ceil((e-r)*_v.ONE_SECOND_IN_TS),s=Math.ceil((t-r)*_v.ONE_SECOND_IN_TS),l=n.slice();let c=n.length;for(;c--&&!(n[c].pts<=s););if(-1===c)return l;let f=c+1;for(;f--&&!(n[f].pts<=i););return f=Math.max(f,0),l.splice(f,c-f+1),l})(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,l));for(const c in this.inbandTextTracks_)WT(e,t,this.inbandTextTracks_[c]);WT(e,t,this.segmentMetadataTrack_),l()}monitorBuffer_(){this.checkBufferTimeout_&&ye().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ye().setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&ye().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ye().setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,r=this.partIndex){if(!t||!this.mediaSource_)return!1;const i="number"==typeof e&&t.segments[e];return t.endList&&"open"===this.mediaSource_.readyState&&e+1===t.segments.length&&(!i||!i.parts||r+1===i.parts.length)}chooseNextRequest_(){const e=this.buffered_(),t=xT(e)||0,r=s_(e,this.currentTime_()),i=!this.hasPlayed_()&&r>=1,s=r>=this.goalBufferLength_(),l=this.playlist_.segments;if(!l.length||i||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());const c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(c.isSyncRequest)c.mediaIndex=function(n,e,t){e=e||[];const r=[];let i=0;for(let s=0;s<e.length;s++){const l=e[s];if(n===l.timeline&&(r.push(s),i+=l.duration,i>t))return s}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,l,t);else if(null!==this.mediaIndex){const A=l[this.mediaIndex],j="number"==typeof this.partIndex?this.partIndex:-1;c.startOfSegment=A.end?A.end:t,A.parts&&A.parts[j+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=j+1):c.mediaIndex=this.mediaIndex+1}else{const{segmentIndex:A,startTime:j,partIndex:P}=Is.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});c.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,c.mediaIndex=A,c.startOfSegment=j,c.partIndex=P}const f=l[c.mediaIndex];let v=f&&"number"==typeof c.partIndex&&f.parts&&f.parts[c.partIndex];if(!f||"number"==typeof c.partIndex&&!v)return null;if("number"!=typeof c.partIndex&&f.parts&&(c.partIndex=0,v=f.parts[0]),!r&&v&&!v.independent)if(0===c.partIndex){const A=l[c.mediaIndex-1],j=A.parts&&A.parts.length&&A.parts[A.parts.length-1];j&&j.independent&&(c.mediaIndex-=1,c.partIndex=A.parts.length-1,c.independent="previous segment")}else f.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");return c.mediaIndex>=l.length-1&&this.mediaSource_&&"ended"===this.mediaSource_.readyState&&!this.seeking_()?null:this.generateSegmentInfo_(c)}generateSegmentInfo_(e){const{independent:t,playlist:r,mediaIndex:i,startOfSegment:s,isSyncRequest:l,partIndex:c,forceTimestampOffset:f,getMediaInfoForTime:v}=e,T=r.segments[i],A="number"==typeof c&&T.parts[c],j={requestId:"segment-loader-"+Math.random(),uri:A&&A.resolvedUri||T.resolvedUri,mediaIndex:i,partIndex:A?c:null,isSyncRequest:l,startOfSegment:s,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:T.timeline,duration:A&&A.duration||T.duration,segment:T,part:A,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:v,independent:t},P=typeof f<"u"?f:this.isPendingTimestampOffset_;j.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:T.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:P});const W=xT(this.sourceUpdater_.audioBuffered());return"number"==typeof W&&(j.audioAppendStart=W-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(j.gopsToAlignWith=((n,e,t)=>{if(typeof e>"u"||null===e||!n.length)return[];const r=Math.ceil((e-this.timeMapping_+3)*_v.ONE_SECOND_IN_TS);let i;for(i=0;i<n.length&&!(n[i].pts>r);i++);return n.slice(i)})(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset())),j}timestampOffsetForSegment_(e){return(({segmentTimeline:n,currentTimeline:e,startOfSegment:t,buffered:r,overrideCheck:i})=>i||n!==e?n<e?t:r.length?r.end(r.length-1):t:null)(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),r=e.bandwidth,i=this.pendingSegment_.duration,s=Is.estimateSegmentRequestTime(i,r,this.playlist_,e.bytesReceived),l=function(n,e,t=1){return((n.length?n.end(n.length-1):0)-e)/t}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=l)return;const c=function(n){const{main:e,currentTime:t,bandwidth:r,duration:i,segmentDuration:s,timeUntilRebuffer:l,currentTimeline:c,syncController:f}=n,v=e.playlists.filter(W=>!Is.isIncompatible(W));let T=v.filter(Is.isEnabled);T.length||(T=v.filter(W=>!Is.isDisabled(W)));const j=T.filter(Is.hasAttribute.bind(null,"BANDWIDTH")).map(W=>{const se=f.getSyncPoint(W,i,c,t)?1:2;return{playlist:W,rebufferingImpact:Is.estimateSegmentRequestTime(s,r,W)*se-l}}),P=j.filter(W=>W.rebufferingImpact<=0);return kt(P,(W,J)=>zt(J.playlist,W.playlist)),P.length?P[0]:(kt(j,(W,J)=>W.rebufferingImpact-J.rebufferingImpact),j[0]||null)}({main:this.vhs_.playlists.main,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!c)return;let T=.5;l<=jc&&(T=1),c.playlist&&c.playlist.uri!==this.playlist_.uri&&!(s-l-c.rebufferingImpact<T)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*Ni.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${v_(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(function(n,e){if(!n&&!e||!n&&e||n&&!e)return!1;if(n===e)return!0;const t=Object.keys(n).sort(),r=Object.keys(e).sort();if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(s!==r[i]||n[s]!==e[s])return!1}return!0}(this.currentMediaInfo_,t=t||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,t,r,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,l=$L(t);s[l]=s[l]||{},s[l][r]=i,this.logger_(`timinginfo: ${t} - ${r} - ${i}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(0===t.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));const i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(l=>{s[l.stream]=s[l.stream]||{startTime:1/0,captions:[],endTime:0};const c=s[l.stream];c.startTime=Math.min(c.startTime,l.startTime+i),c.endTime=Math.max(c.endTime,l.endTime+i),c.captions.push(l)}),Object.keys(s).forEach(l=>{const{startTime:c,endTime:f,captions:v}=s[l],T=this.inbandTextTracks_;this.logger_(`adding cues from ${c} -> ${f} for ${l}`),function(n,e,t){if(!n[t]){e.trigger({type:"usage",name:"vhs-608"});let r=t;/^cc708_/.test(t)&&(r="SERVICE"+t.split("_")[1]);const i=e.textTracks().getTrackById(r);if(i)n[t]=i;else{let l=t,c=t,f=!1;const v=(e.options_.vhs&&e.options_.vhs.captionServices||{})[r];v&&(l=v.label,c=v.language,f=v.default),n[t]=e.addRemoteTextTrack({kind:"captions",id:r,default:f,label:l,language:c},!1).track}}}(T,this.vhs_.tech_,l),WT(c,f,T[l]),function({inbandTextTracks:n,captionArray:e,timestampOffset:t}){if(!e)return;const r=ye().WebKitDataCue||ye().VTTCue;e.forEach(i=>{n[i.stream].addCue(new r(i.startTime+t,i.endTime+t,i.text))})}({captionArray:v,inbandTextTracks:T,timestampOffset:i})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,r));const s=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();((n,e,t)=>{n.metadataTrack_||(n.metadataTrack_=this.vhs_.tech_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,n.metadataTrack_.inBandMetadataTrackDispatchType=e)})(this.inbandTextTracks_,r),(({inbandTextTracks:n,metadataArray:e,timestampOffset:t,videoDuration:r})=>{if(!e)return;const i=ye().WebKitDataCue||ye().VTTCue,s=n.metadataTrack_;if(!s||(e.forEach(T=>{const A=T.cueTime+t;"number"!=typeof A||ye().isNaN(A)||A<0||!(A<1/0)||T.frames.forEach(j=>{const P=new i(A,A,j.value||j.url||j.data||"");P.frame=j,P.value=j,function(n){Object.defineProperties(n.frame,{id:{get:()=>(nt.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key)},value:{get:()=>(nt.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data)},privateData:{get:()=>(nt.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data)}})}(P),s.addCue(P)})}),!s.cues||!s.cues.length))return;const l=s.cues,c=[];for(let T=0;T<l.length;T++)l[T]&&c.push(l[T]);const f=c.reduce((T,A)=>{const j=T[A.startTime]||[];return j.push(A),T[A.startTime]=j,T},{}),v=Object.keys(f).sort((T,A)=>Number(T)-Number(A));v.forEach((T,A)=>{const j=f[T],P=Number(v[A+1])||r;j.forEach(W=>{W.endTime=P})})})({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:s,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&HL({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:r,hasVideo:i,isMuxed:s}=t;return!(i&&!e.videoTimingInfo||r&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||HL({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return void this.callQueue_.push(this.handleData_.bind(this,e,t));const r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),r.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),r.isFmp4=e.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[$L(t.type)].start;else{const i=this.getCurrentMediaInfo_(),s="main"===this.loaderType_&&i&&i.hasVideo;let l;s&&(l=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:l,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,t.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:"main"===this.loaderType_});const i=this.chooseNextRequest_();if(i.mediaIndex!==r.mediaIndex||i.partIndex!==r.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,t)}}updateAppendInitSegmentStatus(e,t){"main"===this.loaderType_&&"number"==typeof e.timestampOffset&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:r,playlist:i}){if(r){const s=h_(r);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=i,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r},i){const s=this.sourceUpdater_.audioBuffered(),l=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+pp(s).join(", ")),l.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+pp(l).join(", "));const c=s.length?s.start(0):0,f=s.length?s.end(s.length-1):0,v=l.length?l.start(0):0,T=l.length?l.end(l.length-1):0;if(f-c<=1&&T-v<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${pp(s).join(", ")}, video buffer: ${pp(l).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:r}));const j=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${j}`),this.remove(0,j,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=ye().setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:r},i){if(i){if(22===i.code)return void this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:r});this.logger_("Received non QUOTA_EXCEEDED_ERR on append",i),this.error(`${t} append of ${r.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:r,data:i,bytes:s}){if(!s){const l=[i];let c=i.byteLength;r&&(l.unshift(r),c+=r.byteLength),s=(n=>{let t,e=0;return n.bytes&&(t=new Uint8Array(n.bytes),n.segments.forEach(r=>{t.set(r,e),e+=r.byteLength})),t})({bytes:c,segments:l})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,r){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const i=this.pendingSegment_.segment,s=`${e}TimingInfo`;i[s]||(i[s]={}),i[s].transmuxerPrependedSeconds=r.prependedContentDuration||0,i[s].transmuxedPresentationStart=r.start.presentation,i[s].transmuxedDecodeStart=r.start.decode,i[s].transmuxedPresentationEnd=r.end.presentation,i[s].transmuxedDecodeEnd=r.end.decode,i[s].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(e,t){const{type:r,data:i}=t;if(!i||!i.byteLength||"audio"===r&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:r,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:r,initSegment:s,data:i})}loadSegment_(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(()=>{const t=qd({},e,{forceTimestampOffset:!0});qd(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)})}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),l=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)||null!==this.mediaIndex&&e.timeline!==this.currentTimeline_&&e.timeline>0;this.logger_(`Requesting ${v_(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=y({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:l,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:c,level:f,stream:v})=>{this.logger_(`${v_(e)} logged from transmuxer stream ${v} as a ${f}: ${c}`)}})}trimBackBuffer_(e){const t=((n,e,t)=>{let r=e-Ni.BACK_BUFFER_LENGTH;return n.length&&(r=Math.max(r,n.start(0))),Math.min(e-t,r)})(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,r=e.part,i={resolvedUri:r?r.resolvedUri:t.resolvedUri,byterange:r?r.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},s=e.playlist.segments[e.mediaIndex-1];if(s&&s.timeline===t.timeline&&(s.videoTimingInfo?i.baseStartTime=s.videoTimingInfo.transmuxedDecodeEnd:s.audioTimingInfo&&(i.baseStartTime=s.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=l}return t.map&&(i.map=this.initSegmentForMap(t.map)),i}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<Gx?this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Gx}`):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,r){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,r));if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",-102===e.code)return;return this.pause(),-101===e.code?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=((n,e,t)=>{if(!e.length)return n;if(this.safeAppend_)return e.slice();const r=e[0].pts;let i=0;for(;i<n.length&&!(n[i].pts>=r);i++);return n.slice(0,i).concat(e)})(this.gopBuffer_,r.gopInfo)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){this.mediaSecondsLoaded+="number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:r,firstVideoFrameTimeForData:i,currentVideoTimestampOffset:s,useVideoTimingInfo:l,videoTimingInfo:c,audioTimingInfo:f}){if(typeof e<"u")return e;if(!l)return f.start;const v=t.segments[r-1];return 0===r||!v||typeof v.start>"u"||v.end!==i+s?i:c.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:r,hasVideo:i,isMuxed:s}=t,l="main"===this.loaderType_&&i,c=!this.audioDisabled_&&r&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_)return!e.timingInfo&&"number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);l&&e.waitingOnAppends++,c&&e.waitingOnAppends++,l&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=((n,e,t)=>"main"===n&&e&&t?t.hasAudio||t.hasVideo?e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null)(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(e){if(null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_)return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:r}){return this.useDtsForTimestampOffset_?e&&"number"==typeof e.transmuxedDecodeStart?e.transmuxedDecodeStart:t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),i="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;i&&(e.timingInfo.end="number"==typeof i.end?i.end:i.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});const t=((n,e)=>{if("hls"!==e)return null;const t=(n=>{let e=0;return["video","audio"].forEach(function(t){const r=n[`${t}TimingInfo`];if(!r)return;const{start:i,end:s}=r;let l;"bigint"==typeof i||"bigint"==typeof s?l=ye().BigInt(s)-ye().BigInt(i):"number"==typeof i&&"number"==typeof s&&(l=s-i),typeof l<"u"&&l>e&&(e=l)}),"bigint"==typeof e&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e})({audioTimingInfo:n.audioTimingInfo,videoTimingInfo:n.videoTimingInfo});if(!t)return null;const r=n.playlist.targetDuration,i=GL({segmentDuration:t,maxDuration:2*r}),s=GL({segmentDuration:t,maxDuration:r});return i||s?{severity:i?"warn":"info",message:`Segment with index ${n.mediaIndex} from playlist ${n.playlist.id} has a duration of ${t} when the reported duration is ${n.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`}:null})(e,this.sourceType_);if(t&&("warn"===t.severity?nt.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${v_(e)}`);this.logger_(`Appended ${v_(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"===this.loaderType_&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const r=e.segment,i=e.part,s=r.end&&this.currentTime_()-r.end>3*e.playlist.targetDuration,l=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(s||l)return this.logger_(`bad ${s?"segment":"part"} ${v_(e)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Gx)return void this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Gx}`);const t=this.throughput.rate,r=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/r*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,r=t.start,i=t.end;if(!VL(r)||!VL(i))return;WT(r,i,this.segmentMetadataTrack_);const s=ye().WebKitDataCue||ye().VTTCue,l={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:r,end:i},f=new s(r,i,JSON.stringify(l));f.value=l,this.segmentMetadataTrack_.addCue(f)}}function xh(){}const zL=function(n){return"string"!=typeof n?n:n.replace(/./,e=>e.toUpperCase())},t4=["video","audio"],tM=(n,e)=>{const t=e[`${n}Buffer`];return t&&t.updating||e.queuePending[n]},__=(n,e)=>{if(0===e.queue.length)return;let t=0,r=e.queue[t];if("mediaSource"!==r.type){if("mediaSource"!==n&&e.ready()&&"closed"!==e.mediaSource.readyState&&!tM(n,e)){if(r.type!==n){if(t=((n,e)=>{for(let t=0;t<e.length;t++){const r=e[t];if("mediaSource"===r.type)return null;if(r.type===n)return t}return null})(n,e.queue),null===t)return;r=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[n]=r,r.action(n,e),!r.doneFn)return e.queuePending[n]=null,void __(n,e)}}else!e.updating()&&"closed"!==e.mediaSource.readyState&&(e.queue.shift(),r.action(e),r.doneFn&&r.doneFn(),__("audio",e),__("video",e))},qL=(n,e)=>{const t=e[`${n}Buffer`],r=zL(n);t&&(t.removeEventListener("updateend",e[`on${r}UpdateEnd_`]),t.removeEventListener("error",e[`on${r}Error_`]),e.codecs[n]=null,e[`${n}Buffer`]=null)},Uc=(n,e)=>n&&e&&-1!==Array.prototype.indexOf.call(n.sourceBuffers,e),pl_appendBuffer=(n,e,t)=>(r,i)=>{const s=i[`${r}Buffer`];if(Uc(i.mediaSource,s)){i.logger_(`Appending segment ${e.mediaIndex}'s ${n.length} bytes to ${r}Buffer`);try{s.appendBuffer(n)}catch(l){i.logger_(`Error with code ${l.code} `+(22===l.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${r}Buffer`),i.queuePending[r]=null,t(l)}}},pl_remove=(n,e)=>(t,r)=>{const i=r[`${t}Buffer`];if(Uc(r.mediaSource,i)){r.logger_(`Removing ${n} to ${e} from ${t}Buffer`);try{i.remove(n,e)}catch{r.logger_(`Remove ${n} to ${e} from ${t}Buffer failed`)}}},pl_timestampOffset=n=>(e,t)=>{const r=t[`${e}Buffer`];Uc(t.mediaSource,r)&&(t.logger_(`Setting ${e}timestampOffset to ${n}`),r.timestampOffset=n)},pl_callback=n=>(e,t)=>{n()},pl_endOfStream=n=>e=>{if("open"===e.mediaSource.readyState){e.logger_(`Calling mediaSource endOfStream(${n||""})`);try{e.mediaSource.endOfStream(n)}catch(t){nt.log.warn("Failed to call media source endOfStream",t)}}},pl_duration=n=>e=>{e.logger_(`Setting mediaSource duration to ${n}`);try{e.mediaSource.duration=n}catch(t){nt.log.warn("Failed to set media source duration",t)}},pl_addSourceBuffer=(n,e)=>t=>{const r=zL(n),i=Xg(e);t.logger_(`Adding ${n}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(i);s.addEventListener("updateend",t[`on${r}UpdateEnd_`]),s.addEventListener("error",t[`on${r}Error_`]),t.codecs[n]=e,t[`${n}Buffer`]=s},pl_removeSourceBuffer=n=>e=>{const t=e[`${n}Buffer`];if(qL(n,e),Uc(e.mediaSource,t)){e.logger_(`Removing ${n}Buffer with codec ${e.codecs[n]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(r){nt.log.warn(`Failed to removeSourceBuffer ${n}Buffer`,r)}}},pl_changeType=n=>(e,t)=>{const r=t[`${e}Buffer`],i=Xg(n);Uc(t.mediaSource,r)&&t.codecs[e]!==n&&(t.logger_(`changing ${e}Buffer codec from ${t.codecs[e]} to ${n}`),r.changeType(i),t.codecs[e]=n)},gl=({type:n,sourceUpdater:e,action:t,doneFn:r,name:i})=>{e.queue.push({type:n,action:t,doneFn:r,name:i}),__(n,e)},WL=(n,e)=>t=>{if(e.queuePending[n]){const r=e.queuePending[n].doneFn;e.queuePending[n]=null,r&&r(e[`${n}Error_`])}__(n,e)};class KL extends nt.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>__("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=eu("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=WL("video",this),this.onAudioUpdateEnd_=WL("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){gl({type:"mediaSource",sourceUpdater:this,action:pl_addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){gl({type:e,sourceUpdater:this,action:(n,e)=>{if("open"!==e.mediaSource.readyState)return;const t=e[`${n}Buffer`];if(Uc(e.mediaSource,t)){e.logger_(`calling abort on ${n}Buffer`);try{t.abort()}catch(r){nt.log.warn(`Failed to abort on ${n}Buffer`,r)}}},name:"abort"})}removeSourceBuffer(e){this.canRemoveSourceBuffer()?gl({type:"mediaSource",sourceUpdater:this,action:pl_removeSourceBuffer(e),name:"removeSourceBuffer"}):nt.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!nt.browser.IE_VERSION&&!nt.browser.IS_FIREFOX&&ye().MediaSource&&ye().MediaSource.prototype&&"function"==typeof ye().MediaSource.prototype.removeSourceBuffer}static canChangeType(){return ye().SourceBuffer&&ye().SourceBuffer.prototype&&"function"==typeof ye().SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){this.canChangeType()?gl({type:e,sourceUpdater:this,action:pl_changeType(t),name:"changeType"}):nt.log.error("changeType is not supported!")}addOrChangeSourceBuffers(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const r=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,r);this.canChangeType()&&this.changeType(t,r)})}appendBuffer(e,t){const{segmentInfo:r,type:i,bytes:s}=e;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_(`delayed audio append of ${s.length} until video append`);if(gl({type:i,sourceUpdater:this,action:pl_appendBuffer(s,r||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const c=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${c.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,c.forEach(f=>{this.appendBuffer.apply(this,f)})}}audioBuffered(){return Uc(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:xs()}videoBuffered(){return Uc(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:xs()}buffered(){const e=Uc(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Uc(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(n,e){let t=null,r=null,i=0;const s=[],l=[];if(!(n&&n.length&&e&&e.length))return xs();let c=n.length;for(;c--;)s.push({time:n.start(c),type:"start"}),s.push({time:n.end(c),type:"end"});for(c=e.length;c--;)s.push({time:e.start(c),type:"start"}),s.push({time:e.end(c),type:"end"});for(s.sort(function(f,v){return f.time-v.time}),c=0;c<s.length;c++)"start"===s[c].type?(i++,2===i&&(t=s[c].time)):"end"===s[c].type&&(i--,1===i&&(r=s[c].time)),null!==t&&null!==r&&(l.push([t,r]),t=null,r=null);return xs(l)}(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=xh){gl({type:"mediaSource",sourceUpdater:this,action:pl_duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=xh){"string"!=typeof e&&(e=void 0),gl({type:"mediaSource",sourceUpdater:this,action:pl_endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,r=xh){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?gl({type:"audio",sourceUpdater:this,action:pl_remove(e,t),doneFn:r,name:"remove"}):r()}removeVideo(e,t,r=xh){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?gl({type:"video",sourceUpdater:this,action:pl_remove(e,t),doneFn:r,name:"remove"}):r()}updating(){return!(!tM("audio",this)&&!tM("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(gl({type:"audio",sourceUpdater:this,action:pl_timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(gl({type:"video",sourceUpdater:this,action:pl_timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&gl({type:"audio",sourceUpdater:this,action:pl_callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&gl({type:"video",sourceUpdater:this,action:pl_callback(e),name:"callback"})}dispose(){this.trigger("dispose"),t4.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>qL(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const ZL=n=>decodeURIComponent(escape(String.fromCharCode.apply(null,n))),YL=new Uint8Array("\n\n".split("").map(n=>n.charCodeAt(0)));class r4 extends eM{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return xs();const e=this.subtitlesTrack_.cues;return xs([[e[0].startTime,e[e.length-1].startTime]])}initSegmentForMap(e,t=!1){if(!e)return null;const r=h_(e);let i=this.initSegments_[r];if(t&&!i&&e.bytes){const l=new Uint8Array(YL.byteLength+e.bytes.byteLength);l.set(e.bytes),l.set(YL,e.bytes.byteLength),this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:l}}return i||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(e,t){WT(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",()=>{this.state="READY",this.paused()||this.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,r){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return-101===e.code&&this.handleTimeout_(),-102===e.code?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);const i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const s=i.segment;if(s.map&&(s.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof ye().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){let l;const c=()=>{this.subtitlesTrack_.tech_.off("vttjsloaded",l),this.stopForError({message:"Error loading vtt.js"})};return l=()=>{this.subtitlesTrack_.tech_.off("vttjserror",c),this.segmentRequestFinished_(e,t,r)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",l),void this.subtitlesTrack_.tech_.one("vttjserror",c)}s.requested=!0;try{this.parseVTTCues_(i)}catch(l){return void this.stopForError({message:l.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.timingInfo=i.cues.length?{start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:{start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.forEach(l=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new(ye().VTTCue)(l.startTime,l.endTime,l.text):l)}),function(n){const e=n.cues;if(e)for(let t=0;t<e.length;t++){const r=[];let i=0;for(let s=0;s<e.length;s++)e[t].startTime===e[s].startTime&&e[t].endTime===e[s].endTime&&e[t].text===e[s].text&&(i++,i>1&&r.push(e[s]));r.length&&r.forEach(s=>n.removeCue(s))}}(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,r=!1;"function"==typeof ye().TextDecoder?t=new(ye().TextDecoder)("utf8"):(t=ye().WebVTT.StringDecoder(),r=!0);const i=new(ye().WebVTT.Parser)(ye(),ye().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=l=>{e.timestampmap=l},i.onparsingerror=l=>{nt.log.warn("Error encountered when parsing cues: "+l.message)},e.segment.map){let l=e.segment.map.bytes;r&&(l=ZL(l)),i.parse(l)}let s=e.bytes;r&&(s=ZL(s)),i.parse(s),i.flush()}updateTimeMapping_(e,t,r){const i=e.segment;if(!t)return;if(!e.cues.length)return void(i.empty=!0);const s=e.timestampmap,l=s.MPEGTS/_v.ONE_SECOND_IN_TS-s.LOCAL+t.mapping;e.cues.forEach(c=>{c.startTime+=l,c.endTime+=l}),r.syncInfo||(r.syncInfo={mediaSequence:r.mediaSequence+e.mediaIndex,time:Math.min(e.cues[0].startTime,e.cues[e.cues.length-1].startTime-i.duration)})}}const i4=function(n,e){const t=n.cues;for(let r=0;r<t.length;r++){const i=t[r];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},QL=[{name:"VOD",run:(n,e,t,r,i)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(n,e,t,r,i)=>{if(!Object.keys(n.timelineToDatetimeMappings).length)return null;let s=null,l=null;const c=jo(e);i=i||0;for(let f=0;f<c.length;f++){const T=c[e.endList||0===i?f:c.length-(f+1)],A=T.segment,j=n.timelineToDatetimeMappings[A.timeline];if(!j||!A.dateTimeObject)continue;let W=A.dateTimeObject.getTime()/1e3+j;if(A.parts&&"number"==typeof T.partIndex)for(let se=0;se<T.partIndex;se++)W+=A.parts[se].duration;const J=Math.abs(i-W);if(null!==l&&(0===J||l<J))break;l=J,s={time:W,segmentIndex:T.segmentIndex,partIndex:T.partIndex}}return s}},{name:"Segment",run:(n,e,t,r,i)=>{let s=null,l=null;i=i||0;const c=jo(e);for(let f=0;f<c.length;f++){const T=c[e.endList||0===i?f:c.length-(f+1)],A=T.segment,j=T.part&&T.part.start||A&&A.start;if(A.timeline===r&&typeof j<"u"){const P=Math.abs(i-j);if(null!==l&&l<P)break;(!s||null===l||l>=P)&&(l=P,s={time:j,segmentIndex:T.segmentIndex,partIndex:T.partIndex})}}return s}},{name:"Discontinuity",run:(n,e,t,r,i)=>{let s=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length){let l=null;for(let c=0;c<e.discontinuityStarts.length;c++){const f=e.discontinuityStarts[c],T=n.discontinuities[e.discontinuitySequence+c+1];if(T){const A=Math.abs(i-T.time);if(null!==l&&l<A)break;(!s||null===l||l>=A)&&(l=A,s={time:T.time,segmentIndex:f,partIndex:null})}}}return s}},{name:"Playlist",run:(n,e,t,r,i)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class a4 extends nt.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=eu("SyncController")}getSyncPoint(e,t,r,i){const s=this.runStrategies_(e,t,r,i);return s.length?this.selectSyncPoint_(s,{key:"time",value:i}):null}getExpiredTime(e,t){if(!e||!e.segments)return null;const r=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!r.length)return null;const i=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+xm({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))}runStrategies_(e,t,r,i){const s=[];for(let l=0;l<QL.length;l++){const c=QL[l],f=c.run(this,e,t,r,i);f&&(f.strategy=c.name,s.push({strategy:c.name,syncPoint:f}))}return s}selectSyncPoint_(e,t){let r=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let l=1;l<e.length;l++){const c=Math.abs(e[l].syncPoint[t.key]-t.value);c<i&&(i=c,r=e[l].syncPoint,s=e[l].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+("number"==typeof r.partIndex?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(e,t){const r=t.mediaSequence-e.mediaSequence;if(r>86400)nt.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);else for(let i=r-1;i>=0;i--){const s=e.segments[i];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+i,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],r=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const r=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),i=e.segment;r&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:i.start}));const s=i.dateTimeObject;i.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[i.timeline]=-s.getTime()/1e3)}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,r){const i=e.segment,s=e.part;let c,f,l=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)l={time:e.startOfSegment,mapping:e.startOfSegment-t.start},r&&(this.timelines[e.timeline]=l,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${l.time}] [mapping: ${l.mapping}]`)),c=e.startOfSegment,f=t.end+l.mapping;else{if(!l)return!1;c=t.start+l.mapping,f=t.end+l.mapping}return s&&(s.start=c,s.end=f),(!i.start||c<i.start)&&(i.start=c),i.end=f,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,r=e.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let i=0;i<t.discontinuityStarts.length;i++){const s=t.discontinuityStarts[i],l=t.discontinuitySequence+i+1,c=s-e.mediaIndex,f=Math.abs(c);if(!this.discontinuities[l]||this.discontinuities[l].accuracy>f){let v;v=c<0?r.start-xm({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):r.end+xm({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[l]={time:v,accuracy:f}}}}dispose(){this.trigger("dispose"),this.off()}}class l4 extends nt.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:r}){return"number"==typeof t&&"number"==typeof r&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:r}){return"number"==typeof t&&"number"==typeof r&&(this.lastTimelineChanges_[e]={type:e,from:t,to:r},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const u4=VT($T(function(){var n=function(){function J(){this.listeners={}}var se=J.prototype;return se.on=function(Qe,qe){this.listeners[Qe]||(this.listeners[Qe]=[]),this.listeners[Qe].push(qe)},se.off=function(Qe,qe){if(!this.listeners[Qe])return!1;var Ie=this.listeners[Qe].indexOf(qe);return this.listeners[Qe]=this.listeners[Qe].slice(0),this.listeners[Qe].splice(Ie,1),Ie>-1},se.trigger=function(Qe){var qe=this.listeners[Qe];if(qe)if(2===arguments.length)for(var Ie=qe.length,pe=0;pe<Ie;++pe)qe[pe].call(this,arguments[1]);else for(var at=Array.prototype.slice.call(arguments,1),Dt=qe.length,un=0;un<Dt;++un)qe[un].apply(this,at)},se.dispose=function(){this.listeners={}},se.pipe=function(Qe){this.on("data",function(qe){Qe.push(qe)})},J}();let r=null;class i{constructor(se){let Ne,Qe,qe;r||(r=function(){const J=[[[],[],[],[],[]],[[],[],[],[],[]]],se=J[0],Ne=J[1],Qe=se[4],qe=Ne[4];let Ie,pe,at;const Dt=[],un=[];let jn,dr,ai,li,cn,kr;for(Ie=0;Ie<256;Ie++)un[(Dt[Ie]=Ie<<1^283*(Ie>>7))^Ie]=Ie;for(pe=at=0;!Qe[pe];pe^=jn||1,at=un[at]||1)for(li=at^at<<1^at<<2^at<<3^at<<4,li=li>>8^255&li^99,Qe[pe]=li,qe[li]=pe,ai=Dt[dr=Dt[jn=Dt[pe]]],kr=16843009*ai^65537*dr^257*jn^16843008*pe,cn=257*Dt[li]^16843008*li,Ie=0;Ie<4;Ie++)se[Ie][pe]=cn=cn<<24^cn>>>8,Ne[Ie][li]=kr=kr<<24^kr>>>8;for(Ie=0;Ie<5;Ie++)se[Ie]=se[Ie].slice(0),Ne[Ie]=Ne[Ie].slice(0);return J}()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];const Ie=this._tables[0][4],pe=this._tables[1],at=se.length;let Dt=1;if(4!==at&&6!==at&&8!==at)throw new Error("Invalid aes key size");const un=se.slice(0),jn=[];for(this._key=[un,jn],Ne=at;Ne<4*at+28;Ne++)qe=un[Ne-1],(Ne%at==0||8===at&&Ne%at==4)&&(qe=Ie[qe>>>24]<<24^Ie[qe>>16&255]<<16^Ie[qe>>8&255]<<8^Ie[255&qe],Ne%at==0&&(qe=qe<<8^qe>>>24^Dt<<24,Dt=Dt<<1^283*(Dt>>7))),un[Ne]=un[Ne-at]^qe;for(Qe=0;Ne;Qe++,Ne--)qe=un[3&Qe?Ne:Ne-4],jn[Qe]=Ne<=4||Qe<4?qe:pe[0][Ie[qe>>>24]]^pe[1][Ie[qe>>16&255]]^pe[2][Ie[qe>>8&255]]^pe[3][Ie[255&qe]]}decrypt(se,Ne,Qe,qe,Ie,pe){const at=this._key[1];let ai,li,cn,Dt=se^at[0],un=qe^at[1],jn=Qe^at[2],dr=Ne^at[3];const kr=at.length/4-2;let Yc,Bh=4;const Hp=this._tables[1],cy=Hp[0],dy=Hp[1],hy=Hp[2],fy=Hp[3],py=Hp[4];for(Yc=0;Yc<kr;Yc++)ai=cy[Dt>>>24]^dy[un>>16&255]^hy[jn>>8&255]^fy[255&dr]^at[Bh],li=cy[un>>>24]^dy[jn>>16&255]^hy[dr>>8&255]^fy[255&Dt]^at[Bh+1],cn=cy[jn>>>24]^dy[dr>>16&255]^hy[Dt>>8&255]^fy[255&un]^at[Bh+2],dr=cy[dr>>>24]^dy[Dt>>16&255]^hy[un>>8&255]^fy[255&jn]^at[Bh+3],Bh+=4,Dt=ai,un=li,jn=cn;for(Yc=0;Yc<4;Yc++)Ie[(3&-Yc)+pe]=py[Dt>>>24]<<24^py[un>>16&255]<<16^py[jn>>8&255]<<8^py[255&dr]^at[Bh++],ai=Dt,Dt=un,un=jn,jn=dr,dr=ai}}class s extends n{constructor(){super(n),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}push(se){this.jobs.push(se),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const l=function(J){return J<<24|(65280&J)<<8|(16711680&J)>>8|J>>>24};class f{constructor(se,Ne,Qe,qe){const Ie=f.STEP,pe=new Int32Array(se.buffer),at=new Uint8Array(se.byteLength);let Dt=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(pe.subarray(Dt,Dt+Ie),Ne,Qe,at)),Dt=Ie;Dt<pe.length;Dt+=Ie)Qe=new Uint32Array([l(pe[Dt-4]),l(pe[Dt-3]),l(pe[Dt-2]),l(pe[Dt-1])]),this.asyncStream_.push(this.decryptChunk_(pe.subarray(Dt,Dt+Ie),Ne,Qe,at));this.asyncStream_.push(function(){qe(null,function e(J){return J.subarray(0,J.byteLength-J[J.byteLength-1])}(at))})}static get STEP(){return 32e3}decryptChunk_(se,Ne,Qe,qe){return function(){const Ie=function(J,se,Ne){const Qe=new Int32Array(J.buffer,J.byteOffset,J.byteLength>>2),qe=new i(Array.prototype.slice.call(se)),Ie=new Uint8Array(J.byteLength),pe=new Int32Array(Ie.buffer);let at,Dt,un,jn,dr,ai,li,cn,kr;for(at=Ne[0],Dt=Ne[1],un=Ne[2],jn=Ne[3],kr=0;kr<Qe.length;kr+=4)dr=l(Qe[kr]),ai=l(Qe[kr+1]),li=l(Qe[kr+2]),cn=l(Qe[kr+3]),qe.decrypt(dr,ai,li,cn,pe,kr),pe[kr]=l(pe[kr]^at),pe[kr+1]=l(pe[kr+1]^Dt),pe[kr+2]=l(pe[kr+2]^un),pe[kr+3]=l(pe[kr+3]^jn),at=dr,Dt=ai,un=li,jn=cn;return Ie}(se,Ne,Qe);qe.set(Ie,se.byteOffset)}}}var J,v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P=(typeof window<"u"?window:typeof v<"u"?v:typeof self<"u"?self:{}).BigInt||Number;P("0x1"),P("0x100"),P("0x10000"),P("0x1000000"),P("0x100000000"),P("0x10000000000"),P("0x1000000000000"),P("0x100000000000000"),P("0x10000000000000000"),J=new Uint16Array([65484]),new Uint8Array(J.buffer,J.byteOffset,J.byteLength);self.onmessage=function(J){const se=J.data,Ne=new Uint8Array(se.encrypted.bytes,se.encrypted.byteOffset,se.encrypted.byteLength),Qe=new Uint32Array(se.key.bytes,se.key.byteOffset,se.key.byteLength/4),qe=new Uint32Array(se.iv.bytes,se.iv.byteOffset,se.iv.byteLength/4);new f(Ne,Qe,qe,function(Ie,pe){self.postMessage(function(J){const se={};return Object.keys(J).forEach(Ne=>{const Qe=J[Ne];se[Ne]=function(se){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(se):se&&se.buffer instanceof ArrayBuffer}(Qe)?{bytes:Qe.buffer,byteOffset:Qe.byteOffset,byteLength:Qe.byteLength}:Qe}),se}({source:se.source,decrypted:pe}),[pe.buffer])})}}));var c4=Ux(u4);const d4=n=>{let e=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},zx=(n,e)=>{n.abort(),n.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},nM=(n,e)=>{e.activePlaylistLoader=n,n.load()},qx={AUDIO:(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:r},excludePlaylist:i}=e;zx(t,r);const s=r.activeTrack(),l=r.activeGroup(),c=(l.filter(v=>v.default)[0]||l[0]).id,f=r.tracks[c];if(s!==f){nt.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const v in r.tracks)r.tracks[v].enabled=r.tracks[v]===f;r.onTrackChanged()}else i({error:{message:"Problem encountered loading the default audio track."}})},SUBTITLES:(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:r}}=e;nt.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),zx(t,r);const i=r.activeTrack();i&&(i.mode="disabled"),r.onTrackChanged()}},XL={AUDIO:(n,e,t)=>{if(!e)return;const{tech:r,requestOptions:i,segmentLoaders:{[n]:s}}=t;e.on("loadedmetadata",()=>{const l=e.media();s.playlist(l,i),(!r.paused()||l.endList&&"none"!==r.preload())&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),r.paused()||s.load()}),e.on("error",qx[n](n,t))},SUBTITLES:(n,e,t)=>{const{tech:r,requestOptions:i,segmentLoaders:{[n]:s},mediaTypes:{[n]:l}}=t;e.on("loadedmetadata",()=>{const c=e.media();s.playlist(c,i),s.track(l.activeTrack()),(!r.paused()||c.endList&&"none"!==r.preload())&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),i),r.paused()||s.load()}),e.on("error",qx[n](n,t))}},g4={AUDIO:(n,e)=>{const{vhs:t,sourceType:r,segmentLoaders:{[n]:i},requestOptions:s,main:{mediaGroups:l},mediaTypes:{[n]:{groups:c,tracks:f,logger_:v}},mainPlaylistLoader:T}=e,A=gp(T.main);(!l[n]||0===Object.keys(l[n]).length)&&(l[n]={main:{default:{default:!0}}},A&&(l[n].main.default.playlists=T.main.playlists));for(const j in l[n]){c[j]||(c[j]=[]);for(const P in l[n][j]){let J,W=l[n][j][P];if(A?(v(`AUDIO group '${j}' label '${P}' is a main playlist`),W.isMainPlaylist=!0,J=null):J="vhs-json"===r&&W.playlists?new Sh(W.playlists[0],t,s):W.resolvedUri?new Sh(W.resolvedUri,t,s):W.playlists&&"dash"===r?new Fx(W.playlists[0],t,s,T):null,W=Er({id:P,playlistLoader:J},W),XL[n](n,W.playlistLoader,e),c[j].push(W),typeof f[P]>"u"){const se=new nt.AudioTrack({id:P,kind:d4(W),enabled:!1,language:W.language,default:W.default,label:P});f[P]=se}}}i.on("error",qx[n](n,e))},SUBTITLES:(n,e)=>{const{tech:t,vhs:r,sourceType:i,segmentLoaders:{[n]:s},requestOptions:l,main:{mediaGroups:c},mediaTypes:{[n]:{groups:f,tracks:v}},mainPlaylistLoader:T}=e;for(const A in c[n]){f[A]||(f[A]=[]);for(const j in c[n][A]){if(c[n][A][j].forced)continue;let W,P=c[n][A][j];if("hls"===i)W=new Sh(P.resolvedUri,r,l);else if("dash"===i){if(!P.playlists.filter(se=>se.excludeUntil!==1/0).length)return;W=new Fx(P.playlists[0],r,l,T)}else"vhs-json"===i&&(W=new Sh(P.playlists?P.playlists[0]:P.resolvedUri,r,l));if(P=Er({id:j,playlistLoader:W},P),XL[n](n,P.playlistLoader,e),f[A].push(P),typeof v[j]>"u"){const J=t.addRemoteTextTrack({id:j,kind:"subtitles",default:P.default&&P.autoselect,language:P.language,label:j},!1).track;v[j]=J}}}s.on("error",qx[n](n,e))},"CLOSED-CAPTIONS":(n,e)=>{const{tech:t,main:{mediaGroups:r},mediaTypes:{[n]:{groups:i,tracks:s}}}=e;for(const l in r[n]){i[l]||(i[l]=[]);for(const c in r[n][l]){const f=r[n][l][c];if(!/^(?:CC|SERVICE)/.test(f.instreamId))continue;const v=t.options_.vhs&&t.options_.vhs.captionServices||{};let T={label:c,language:f.language,instreamId:f.instreamId,default:f.default&&f.autoselect};if(v[T.instreamId]&&(T=Er(T,v[T.instreamId])),void 0===T.default&&delete T.default,i[l].push(Er({id:c},f)),typeof s[c]>"u"){const A=t.addRemoteTextTrack({id:T.instreamId,kind:"captions",default:T.default,language:T.language,label:T.label},!1).track;s[c]=A}}}}},JL=(n,e)=>{for(let t=0;t<n.length;t++)if(fl(e,n[t])||n[t].playlists&&JL(n[t].playlists,e))return!0;return!1},y4={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const r in t)if(t[r].enabled)return t[r];return null},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const r in t)if("showing"===t[r].mode||"hidden"===t[r].mode)return t[r];return null}};let Ih;const E4=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],w4=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]};class C4 extends nt.EventTarget{constructor(e){super();const{src:t,withCredentials:r,tech:i,bandwidth:s,externVhs:l,useCueTags:c,playlistExclusionDuration:f,enableLowInitialPlaylist:v,sourceType:T,cacheEncryptionKeys:A,bufferBasedABR:j,leastPixelDiffSelector:P,captionServices:W}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:J}=e;(null===J||typeof J>"u")&&(J=1/0),Ih=l,this.bufferBasedABR=Boolean(j),this.leastPixelDiffSelector=Boolean(P),this.withCredentials=r,this.tech_=i,this.vhs_=i.vhs,this.sourceType_=T,this.useCueTags_=c,this.playlistExclusionDuration=f,this.maxPlaylistRetries=J,this.enableLowInitialPlaylist=v,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:J,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=(()=>{const n={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:xh,activeTrack:xh,getActiveGroup:xh,onGroupChanged:xh,onTrackChanged:xh,lastTrack_:null,logger_:eu(`MediaGroups[${e}]`)}}),n})(),this.mediaSource=new(ye().MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=xs(),this.hasPlayed_=!1,this.syncController_=new a4(e),this.segmentMetadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new c4,this.sourceUpdater_=new KL(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new l4;const se={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:W,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:A,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings};this.mainPlaylistLoader_="dash"===this.sourceType_?new Fx(t,this.vhs_,this.requestOptions_):new Sh(t,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new eM(Er(se,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new eM(Er(se,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new r4(Er(se,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),E4.forEach(Qe=>{this[Qe+"_"]=w4.bind(this,Qe)}),this.logger_=eu("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const Ne="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(Ne,()=>{const Qe=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-Qe,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,r){const i=this.media(),s=i&&(i.id||i.uri),l=e.id||e.uri;s&&s!==l&&(this.logger_(`switch media ${s} -> ${l} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,r)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=ye().setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(ye().clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const r=e.mediaGroups.AUDIO,i=Object.keys(r);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const c=r.main||i.length&&r[i[0]];for(const f in c)if(c[f].default){s={label:f};break}}if(!s)return t;const l=[];for(const c in r)if(r[c][s.label]){const f=r[c][s.label];if(f.playlists&&f.playlists.length)l.push.apply(l,f.playlists);else if(f.uri)l.push(f);else if(e.playlists.length)for(let v=0;v<e.playlists.length;v++){const T=e.playlists[v];T.attributes&&T.attributes.AUDIO&&T.attributes.AUDIO===c&&l.push(T)}}return l.length?l:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;this.requestOptions_.timeout=Dm(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:t,e.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),(n=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(v=>{g4[v](v,n)});const{mediaTypes:e,mainPlaylistLoader:t,tech:r,vhs:i,segmentLoaders:{AUDIO:s,main:l}}=n;["AUDIO","SUBTITLES"].forEach(v=>{e[v].activeGroup=((n,e)=>t=>{const{mainPlaylistLoader:r,mediaTypes:{[n]:{groups:i}}}=e,s=r.media();if(!s)return null;let l=null;s.attributes[n]&&(l=i[s.attributes[n]]);const c=Object.keys(i);if(!l)if("AUDIO"===n&&c.length>1&&gp(e.main))for(let f=0;f<c.length;f++){const v=i[c[f]];if(JL(v,s)){l=v;break}}else i.main?l=i.main:1===c.length&&(l=i[c[0]]);return typeof t>"u"?l:null!==t&&l&&l.filter(f=>f.id===t.id)[0]||null})(v,n),e[v].activeTrack=y4[v](v,n),e[v].onGroupChanged=((n,e)=>()=>{const{segmentLoaders:{[n]:t,main:r},mediaTypes:{[n]:i}}=e,s=i.activeTrack(),l=i.getActiveGroup(),c=i.activePlaylistLoader,f=i.lastGroup_;if((!l||!f||l.id!==f.id)&&(i.lastGroup_=l,i.lastTrack_=s,zx(t,i),l&&!l.isMainPlaylist)){if(!l.playlistLoader)return void(c&&r.resetEverything());t.resyncLoader(),nM(l.playlistLoader,i)}})(v,n),e[v].onGroupChanging=((n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:r}}=e;r.lastGroup_=null,t.abort(),t.pause()})(v,n),e[v].onTrackChanged=((n,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[n]:r,main:i},mediaTypes:{[n]:s}}=e,l=s.activeTrack(),c=s.getActiveGroup(),f=s.activePlaylistLoader,v=s.lastTrack_;if((!v||!l||v.id!==l.id)&&(s.lastGroup_=c,s.lastTrack_=l,zx(r,s),c)){if(c.isMainPlaylist){if(!l||!v||l.id===v.id)return;const T=e.vhs.playlistController_,A=T.selectPlaylist();if(T.media()===A)return;return s.logger_(`track change. Switching main audio from ${v.id} to ${l.id}`),t.pause(),i.resetEverything(),void T.fastQualityChange_(A)}if("AUDIO"===n){if(!c.playlistLoader)return i.setAudio(!0),void i.resetEverything();r.setAudio(!0),i.setAudio(!1)}if(f===c.playlistLoader)return void nM(c.playlistLoader,s);r.track&&r.track(l),r.resetEverything(),nM(c.playlistLoader,s)}})(v,n),e[v].getActiveGroup=((n,{mediaTypes:e})=>()=>{const t=e[n].activeTrack();return t?e[n].activeGroup(t):null})(v,n)});const c=e.AUDIO.activeGroup();if(c){const v=(c.filter(A=>A.default)[0]||c[0]).id;e.AUDIO.tracks[v].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(l.setAudio(!1),s.setAudio(!0)):l.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(v=>e[v].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(v=>e[v].onGroupChanging())});const f=()=>{e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",f),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",()=>{r.audioTracks().removeEventListener("change",f),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const v in e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[v])})({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){let t;if(this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t)||(this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial"),"vhs-json"!==this.sourceType_||!this.initialMedia_.segments))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{const e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const e=this.mainPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;this.requestOptions_.timeout=Dm(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?0:t,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const e=this.mainPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const r=e.mediaGroups||{};let i=!0;const s=Object.keys(r.AUDIO);for(const l in r.AUDIO)for(const c in r.AUDIO[l])r.AUDIO[l][c].uri||(i=!1);i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),Ih.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(r.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),i=this.bufferLowWaterLine(),s=this.bufferHighWaterLine();return function({currentPlaylist:n,buffered:e,currentTime:t,nextPlaylist:r,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:l,bufferBasedABR:c,log:f}){if(!r)return nt.log.warn("We received no playlist to switch to. Please check your stream."),!1;const v=`allowing switch ${n&&n.id||"null"} -> ${r.id}`;if(!n)return f(`${v} as current playlist is not set`),!0;if(r.id===n.id)return!1;const T=Boolean(Cm(e,t).length);if(!n.endList)return T||"number"!=typeof n.partTargetDuration?(f(`${v} as current playlist is live`),!0):(f(`not ${v} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const A=s_(e,t),j=c?Ni.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ni.MAX_BUFFER_LOW_WATER_LINE;if(l<j)return f(`${v} as duration < max low water line (${l} < ${j})`),!0;const P=r.attributes.BANDWIDTH,W=n.attributes.BANDWIDTH;if(P<W&&(!c||A<s)){let J=`${v} as next bandwidth < current bandwidth (${P} < ${W})`;return c&&(J+=` and forwardBuffer < bufferHighWaterLine (${A} < ${s})`),f(J),!0}if((!c||P>W)&&A>=i){let J=`${v} as forwardBuffer >= bufferLowWaterLine (${A} >= ${i})`;return c&&(J+=` and next bandwidth > current bandwidth (${P} > ${W})`),f(J),!0}return f(`not ${v} as no switching criteria met`),!1}({buffered:this.tech_.buffered(),currentTime:r,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const t=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",t=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:120}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const t=this.getCodecsOrExclude_();t&&this.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){e!==this.mainPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(()=>{this.tech_.setCurrentTime(nt.browser.IE_VERSION||nt.browser.IS_EDGE?this.tech_.currentTime()+.04:this.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){const t=this.seekable();if(!t.length)return!1;if(nt.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(t.end(0)),this.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(t.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&"function"==typeof e.then&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const r=this.syncController_.getExpiredTime(e,this.duration());if(null===r)return!1;const i=Ih.Playlist.playlistEnd(e,r),s=this.tech_.currentTime(),l=this.tech_.buffered();if(!l.length)return i-s<=Fo;const c=l.end(l.length-1);return c-s<=Fo&&i-c<=Fo}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:r}){if(e=e||this.mainPlaylistLoader_.media(),r=r||t.playlistExclusionDuration||this.playlistExclusionDuration,!e)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));e.playlistErrors_++;const i=this.mainPlaylistLoader_.main.playlists,s=i.filter(Im),l=1===s.length&&s[0]===e;if(1===i.length&&r!==1/0)return nt.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(l);if(l){let P=!1;i.forEach(W=>{if(W===e)return;const J=W.excludeUntil;typeof J<"u"&&J!==1/0&&(P=!0,delete W.excludeUntil)}),P&&(nt.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let c;c=e.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*r,e.excludeUntil=c,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const f=this.selectPlaylist();if(!f)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");(t.internal?this.logger_:nt.log.warn)(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${t.message?" "+t.message:""} Switching to playlist ${f.id}.`),f.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),f.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const A=f.targetDuration/2*1e3||5e3,j="number"==typeof f.lastRequest&&Date.now()-f.lastRequest<=A;return this.switchMedia_(f,"exclude",l||j)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const r=[],i="all"===e;(i||"main"===e)&&r.push(this.mainPlaylistLoader_);const s=[];(i||"audio"===e)&&s.push("AUDIO"),(i||"subtitle"===e)&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(l=>{const c=this.mediaTypes_[l]&&this.mediaTypes_[l].activePlaylistLoader;c&&r.push(c)}),["main","audio","subtitle"].forEach(l=>{const c=this[`${l}SegmentLoader_`];c&&(e===l||"all"===e)&&r.push(c)}),r.forEach(l=>t.forEach(c=>{"function"==typeof l[c]&&l[c]()}))}setCurrentTime(e){const t=Cm(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Ih.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let r=this.syncController_.getExpiredTime(t,this.duration());if(null===r)return;const i=this.mainPlaylistLoader_.main,s=Ih.Playlist.seekable(t,r,Ih.Playlist.liveEdgeDelay(i,t));if(0===s.length||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),r=this.syncController_.getExpiredTime(t,this.duration()),null===r||(e=Ih.Playlist.seekable(t,r,Ih.Playlist.liveEdgeDelay(i,t)),0===e.length)))return;let l,c;this.seekable_&&this.seekable_.length&&(l=this.seekable_.end(0),c=this.seekable_.start(0)),this.seekable_=e?e.start(0)>s.end(0)||s.start(0)>e.end(0)?s:xs([[e.start(0)>s.start(0)?e.start(0):s.start(0),e.end(0)<s.end(0)?e.end(0):s.end(0)]]):s,(!this.seekable_||!this.seekable_.length||this.seekable_.end(0)!==l||this.seekable_.start(0)!==c)&&(this.logger_(`seekable updated [${Ex(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){const i=this.seekable();if(!i.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1)))}const t=this.tech_.buffered();let r=Ih.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(r=Math.max(r,t.end(t.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const r in t)t[r].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!r)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};e.video=e.main;const t=xe(this.main(),this.media()),r={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=t.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(r.video+=`,${t.audio||e.main.audioCodec||em}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||i)&&(r.audio=t.audio||e.main.audioCodec||e.audio.audioCodec||em,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!r.audio&&!r.video)return void this.excludePlaylist({playlistToExclude:this.media(),error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const l={};let c;if(["video","audio"].forEach(function(f){if(r.hasOwnProperty(f)&&!((f,v)=>f?Wd(v):Jg(v))(e[f].isFmp4,r[f])){const v=e[f].isFmp4?"browser":"muxer";l[v]=l[v]||[],l[v].push(r[f]),"audio"===f&&(c=v)}}),i&&c&&this.media().attributes.AUDIO){const f=this.media().attributes.AUDIO;this.main().playlists.forEach(v=>{(v.attributes&&v.attributes.AUDIO)===f&&v!==this.media()&&(v.excludeUntil=1/0)}),this.logger_(`excluding audio group ${f} as ${c} does not support codec(s): "${r.audio}"`)}if(!Object.keys(l).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const f=[];if(["video","audio"].forEach(v=>{const T=(zl(this.sourceUpdater_.codecs[v]||"")[0]||{}).type,A=(zl(r[v]||"")[0]||{}).type;T&&A&&T.toLowerCase()!==A.toLowerCase()&&f.push(`"${this.sourceUpdater_.codecs[v]}" -> "${r[v]}"`)}),f.length)return void this.excludePlaylist({playlistToExclude:this.media(),error:{message:`Codec switching not supported: ${f.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return r}{const f=Object.keys(l).reduce((v,T)=>(v&&(v+=", "),v+`${T} does not support codec(s): "${l[T].join(",")}"`),"")+".";this.excludePlaylist({playlistToExclude:this.media(),error:{internal:!0,message:f},playlistExclusionDuration:1/0})}}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(r=>{const i=e[r];if(-1!==t.indexOf(i.id))return;t.push(i.id);const s=xe(this.main,i),l=[];s.audio&&!Jg(s.audio)&&!Wd(s.audio)&&l.push(`audio codec ${s.audio}`),s.video&&!Jg(s.video)&&!Wd(s.video)&&l.push(`video codec ${s.video}`),s.text&&"stpp.ttml.im1t"===s.text&&l.push(`text codec ${s.text}`),l.length&&(i.excludeUntil=1/0,this.logger_(`excluding ${i.id} for unsupported: ${l.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],r=this.main().playlists,i=G(zl(e)),s=ee(i),l=i.video&&zl(i.video)[0]||null,c=i.audio&&zl(i.audio)[0]||null;Object.keys(r).forEach(f=>{const v=r[f];if(-1!==t.indexOf(v.id)||v.excludeUntil===1/0)return;t.push(v.id);const T=[],A=xe(this.mainPlaylistLoader_.main,v),j=ee(A);if(A.audio||A.video){if(j!==s&&T.push(`codec count "${j}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const P=A.video&&zl(A.video)[0]||null,W=A.audio&&zl(A.audio)[0]||null;P&&l&&P.type.toLowerCase()!==l.type.toLowerCase()&&T.push(`video codec "${P.type}" !== "${l.type}"`),W&&c&&W.type.toLowerCase()!==c.type.toLowerCase()&&T.push(`audio codec "${W.type}" !== "${c.type}"`)}T.length&&(v.excludeUntil=1/0,this.logger_(`excluding ${v.id}: ${T.join(" && ")}`))}})}updateAdCues_(e){let t=0;const r=this.seekable();r.length&&(t=r.start(0)),function(n,e,t=0){if(!n.segments)return;let i,r=t;for(let s=0;s<n.segments.length;s++){const l=n.segments[s];if(i||(i=i4(e,r+l.duration/2)),i){if("cueIn"in l){i.endTime=r,i.adEndTime=r,r+=l.duration,i=null;continue}if(r<i.endTime){r+=l.duration;continue}i.endTime+=l.duration}else if("cueOut"in l&&(i=new(ye().VTTCue)(r,r+l.duration,l.cueOut),i.adStartTime=r,i.adEndTime=r+parseFloat(l.cueOut),e.addCue(i)),"cueOutCont"in l){const[c,f]=l.cueOutCont.split("/").map(parseFloat);i=new(ye().VTTCue)(r,r+l.duration,""),i.adStartTime=r-c,i.adEndTime=i.adStartTime+f,e.addCue(i)}r+=l.duration}}(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Ni.GOAL_BUFFER_LENGTH,r=Ni.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Ni.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*r,i)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Ni.BUFFER_LOW_WATER_LINE,r=Ni.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Ni.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Ni.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*r,this.bufferBasedABR?s:i)}bufferHighWaterLine(){return Ni.BUFFER_HIGH_WATER_LINE}}class I4{constructor(e,t,r){const{playlistController_:i}=e,s=i.fastQualityChange_.bind(i);if(t.attributes){const l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=xe(i.main(),t),this.playlist=t,this.id=r,this.enabled=((n,e,t)=>r=>{const i=n.main.playlists[e],s=AT(i),l=Im(i);return typeof r>"u"?l:(r?delete i.disabled:i.disabled=!0,r!==l&&!s&&(t(),n.trigger(r?"renditionenabled":"renditiondisabled")),r)})(e.playlists,t.id,s)}}const eF=["seeking","seeked","pause","playing","error"];class A4{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=eu("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),i=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),l=this.playlistController_,c=["main","subtitle","audio"],f={};c.forEach(T=>{f[T]={reset:()=>this.resetSegmentDownloads_(T),updateend:()=>this.checkSegmentDownloads_(T)},l[`${T}SegmentLoader_`].on("appendsdone",f[T].updateend),l[`${T}SegmentLoader_`].on("playlistupdate",f[T].reset),this.tech_.on(["seeked","seeking"],f[T].reset)});const v=T=>{["main","audio"].forEach(A=>{l[`${A}SegmentLoader_`][T]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=()=>v("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(eF,s),this.tech_.on("canplay",r),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",i),this.tech_.off(eF,s),this.tech_.off("canplay",r),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),c.forEach(T=>{l[`${T}SegmentLoader_`].off("appendsdone",f[T].updateend),l[`${T}SegmentLoader_`].off("playlistupdate",f[T].reset),this.tech_.off(["seeked","seeking"],f[T].reset)}),this.checkCurrentTimeTimeout_&&ye().clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&ye().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=ye().setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,r=t[`${e}SegmentLoader_`],i=r.buffered_(),s=function(n,e){if(n===e)return!1;if(!n&&e||!e&&n||n.length!==e.length)return!0;for(let t=0;t<n.length;t++)if(n.start(t)!==e.start(t)||n.end(t)!==e.end(t))return!0;return!1}(this[`${e}Buffered_`],i);this[`${e}Buffered_`]=i,s?this.resetSegmentDownloads_(e):(this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:pp(i)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),"subtitle"!==e&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0})))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Fo>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),r=this.tech_.currentTime();let s;if(this.afterSeekableWindow_(t,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,r)){const W=t.start(0);s=W+(W===t.end(0)?0:Fo)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${Ex(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const l=this.playlistController_.sourceUpdater_,c=this.tech_.buffered(),f=l.audioBuffer?l.audioBuffered():null,v=l.videoBuffer?l.videoBuffered():null,T=this.media(),A=T.partTargetDuration?T.partTargetDuration:2*(T.targetDuration-jc),j=[f,v];for(let W=0;W<j.length;W++)if(j[W]&&s_(j[W],r)<A)return!1;const P=CT(c,r);return 0!==P.length&&(s=P.start(0)+Fo,this.logger_(`Buffered region starts (${P.start(0)})  just beyond seek point (${r}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),r=Cm(t,e);return r.length&&e+3<=r.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const c=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${c}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(c),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const r=this.tech_.vhs.playlistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const l=CT(i,t);return l.length>0&&(this.logger_(`Stopped at ${t} and seeking to ${l.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}afterSeekableWindow_(e,t,r,i=!1){if(!e.length)return!1;let s=e.end(e.length-1)+Fo;return!r.endList&&i&&(s=e.end(e.length-1)+3*r.targetDuration),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:r}){if(!e)return;let i;if(e.length&&t.length){const s=Cm(e,r-3),l=Cm(e,r),c=Cm(t,r);c.length&&!l.length&&s.length&&(i={start:s.end(0),end:c.end(0)})}else CT(e,r).length||(i=this.gapFromVideoUnderflow_(e,r));return!!i&&(this.logger_(`Encountered a gap in video from ${i.start} to ${i.end}. Seeking to current time ${r}`),!0)}skipTheGap_(e){const t=this.tech_.buffered(),r=this.tech_.currentTime(),i=CT(t,r);this.resetTimeUpdate_(),0!==i.length&&r===e&&(this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+jc),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){const r=function(n){if(n.length<2)return xs();const e=[];for(let t=1;t<n.length;t++){const r=n.end(t-1),i=n.start(t);e.push([r,i])}return xs(e)}(e);for(let i=0;i<r.length;i++){const s=r.start(i),l=r.end(i);if(t-s<4&&t-s>2)return{start:s,end:l}}return null}}const k4={errorInterval:30,getSource(n){return n(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},tF=function(n,e){let t=0,r=0;const i=Er(k4,e);n.ready(()=>{n.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){r&&n.currentTime(r)},l=function(T){null!=T&&(r=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",s),n.src(T),n.trigger({type:"usage",name:"vhs-error-reload"}),n.play())},c=function(){if(Date.now()-t<1e3*i.errorInterval)n.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(i.getSource&&"function"==typeof i.getSource)return t=Date.now(),i.getSource.call(n,l);nt.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},f=function(){n.off("loadedmetadata",s),n.off("error",c),n.off("dispose",f)};n.on("error",c),n.on("dispose",f),n.reloadSourceOnError=function(T){f(),tF(n,T)}},Uo={PlaylistLoader:Sh,Playlist:Is,utils:DL,STANDARD_PLAYLIST_SELECTOR:Tn,INITIAL_PLAYLIST_SELECTOR:function(){const n=this.playlists.main.playlists.filter(Is.isEnabled);return kt(n,(t,r)=>zt(t,r)),n.filter(t=>!!xe(this.playlists.main,t).video)[0]||null},lastBandwidthSelector:Tn,movingAverageBandwidthSelector:function(n){let e=-1,t=-1;if(n<0||n>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){const r=this.useDevicePixelRatio&&ye().devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=n*this.systemBandwidth+(1-n)*e,t=this.systemBandwidth),bt(this.playlists.main,e,parseInt(Ct(this.tech_.el(),"width"),10)*r,parseInt(Ct(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:zt,comparePlaylistResolution:function(n,e){let t,r;return n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(t=n.attributes.RESOLUTION.width),t=t||ye().Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||ye().Number.MAX_VALUE,t===r&&n.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?n.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-r},xhr:NT()};Object.keys(Ni).forEach(n=>{Object.defineProperty(Uo,n,{get:()=>(nt.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),Ni[n]),set(e){nt.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),"number"!=typeof e||e<0?nt.log.warn(`value of Vhs.${n} must be greater than or equal to 0`):Ni[n]=e}})});const rF="videojs-vhs",iF=function(n,e){const t=e.media();let r=-1;for(let i=0;i<n.length;i++)if(n[i].id===t.id){r=i;break}n.selectedIndex_=r,n.trigger({selectedIndex:r,type:"change"})};Uo.canPlaySource=function(){return nt.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const sF=()=>{if(!ye().localStorage)return null;const n=ye().localStorage.getItem(rF);if(!n)return null;try{return JSON.parse(n)}catch{return null}};Uo.supportsNativeHls=function(){if(!At()||!At().createElement)return!1;const n=At().createElement("video");return!!nt.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(n.canPlayType(t))})}(),Uo.supportsNativeDash=!!(At()&&At().createElement&&nt.getTech("Html5").isSupported())&&/maybe|probably/i.test(At().createElement("video").canPlayType("application/dash+xml")),Uo.supportsTypeNatively=n=>"hls"===n?Uo.supportsNativeHls:"dash"===n&&Uo.supportsNativeDash,Uo.isSupported=function(){return nt.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const H4=nt.getComponent("Component");class oF extends H4{constructor(e,t,r){if(super(t,r.vhs),"number"==typeof r.initialBandwidth&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=eu("VhsHandler"),t.options_&&t.options_.playerId){const i=nt.getPlayer(t.options_.playerId);this.player_=i}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(At(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const s=At().fullscreenElement||At().webkitFullscreenElement||At().mozFullScreenElement||At().msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const e=sF();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Ni.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ni.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(e=>{typeof this.source_[e]<"u"&&(this.options_[e]=this.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=(n=>0===n.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(n.substring(n.indexOf(",")+1)):n)(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Uo,this.options_.sourceType=J0(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.playlistController_=new C4(this.options_);const r=Er({liveRangeSafeTimeDelta:Fo},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new A4(r),this.playlistController_.on("error",()=>{const s=nt.players[this.tech_.options_.playerId];let l=this.playlistController_.error;"object"!=typeof l||l.code?"string"==typeof l&&(l={message:l,code:3}):l.code=3,s.error(l)});const i=this.options_.bufferBasedABR?Uo.movingAverageBandwidthSelector(.55):Uo.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.playlistController_.selectInitialPlaylist=Uo.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const l=ye().navigator.connection||ye().navigator.mozConnection||ye().navigator.webkitConnection,c=1e7;if(this.options_.useNetworkInformationApi&&l){const f=1e3*l.downlink*1e3;s=f>=c&&s>=c?Math.max(s,f):f}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let l;return l=this.throughput>0?1/this.throughput:0,Math.floor(1/(1/(this.bandwidth||1)+l))},set(){nt.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>pp(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>pp(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&(n=>{if(!ye().localStorage)return!1;let e=sF();e=e?Er(e,n):n;try{ye().localStorage.setItem(rF,JSON.stringify(e))}catch{return!1}})({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{!function(n){n.representations=()=>{const e=n.playlistController_.main(),t=gp(e)?n.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(r=>!AT(r)).map((r,i)=>new I4(n,r,r.id)):[]}}(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=ye().URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),(({player:n,sourceKeySystems:e,audioMedia:t,mainPlaylists:r})=>{if(!n.eme.initializeMediaKeys)return Promise.resolve();const s=((n,e)=>n.reduce((t,r)=>{if(!r.contentProtection)return t;const i=e.reduce((s,l)=>{const c=r.contentProtection[l];return c&&c.pssh&&(s[l]={pssh:c.pssh}),s},{});return Object.keys(i).length&&t.push(i),t},[]))(t?r.concat([t]):r,Object.keys(e)),l=[],c=[];return s.forEach(f=>{c.push(new Promise((v,T)=>{n.tech_.one("keysessioncreated",v)})),l.push(new Promise((v,T)=>{n.eme.initializeMediaKeys({keySystems:f},A=>{A?T(A):v()})}))}),Promise.race([Promise.all(l),Promise.race(c)])})({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=(({player:n,sourceKeySystems:e,media:t,audioMedia:r})=>{const i=((n,e,t)=>{if(!n)return n;let r={};e&&e.attributes&&e.attributes.CODECS&&(r=G(zl(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(r.audio=t.attributes.CODECS);const i=Xg(r.video),s=Xg(r.audio),l={};for(const c in n)l[c]={},s&&(l[c].audioContentType=s),i&&(l[c].videoContentType=i),e.contentProtection&&e.contentProtection[c]&&e.contentProtection[c].pssh&&(l[c].pssh=e.contentProtection[c].pssh),"string"==typeof n[c]&&(l[c].url=n[c]);return Er(n,l)})(e,t,r);return!(!i||(n.currentSource().keySystems=i,i&&!n.eme&&(nt.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))})({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",r=>{if("output-restricted"!==r.status)return;const i=this.playlistController_.main();if(!i||!i.playlists)return;const s=[];i.playlists.forEach(l=>{l&&l.attributes&&l.attributes.RESOLUTION&&l.attributes.RESOLUTION.height>=720&&(!l.excludeUntil||l.excludeUntil<1/0)&&(l.excludeUntil=1/0,s.push(l))}),s.length&&(nt.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...s),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==nt.browser.IE_VERSION&&t?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const e=nt.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{!function(n,e){e.representations().forEach(t=>{n.addQualityLevel(t)}),iF(n,e.playlists)}(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{iF(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":"3.0.0","mux.js":"6.2.0","mpd-parser":"1.0.1","m3u8-parser":"6.0.0","aes-decrypter":"4.0.1"}}version(){return this.constructor.version()}canChangeType(){return KL.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&ye().URL.revokeObjectURL&&(ye().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return(({playlist:n,time:e,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||void 0===e)return t({message:"getProgramTime: playlist and time must be provided"});const r=((n,e)=>{if(!e||!e.segments||0===e.segments.length)return null;let r,t=0;for(let s=0;s<e.segments.length&&(r=e.segments[s],t=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:t+r.duration,!(n<=t));s++);const i=e.segments[e.segments.length-1];if(i.videoTimingInfo&&i.videoTimingInfo.transmuxedPresentationEnd<n)return null;if(n>t){if(n>t+.25*i.duration)return null;r=i}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:t-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}})(e,n);if(!r)return t({message:"valid programTime was not found"});if("estimate"===r.type)return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const i={mediaSeconds:e},s=((n,e)=>{if(!e.dateTimeObject)return null;const s=n-(e.videoTimingInfo.transmuxedPresentationStart+e.videoTimingInfo.transmuxerPrependedSeconds);return new Date(e.dateTimeObject.getTime()+1e3*s)})(e,r.segment);return s&&(i.programDateTime=s.toISOString()),t(null,i)})({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,r=!0,i=2){return jT({programTime:e,playlist:this.playlistController_.media(),retryCount:i,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}const rM={name:"videojs-http-streaming",VERSION:"3.0.0",canHandleSource(n,e={}){const t=Er(nt.options,e);return rM.canPlayType(n.type,t)},handleSource(n,e,t={}){const r=Er(nt.options,t);return e.vhs=new oF(n,e,r),e.vhs.xhr=NT(),e.vhs.src(n.src,n.type),e.vhs},canPlayType(n,e={}){const{vhs:{overrideNative:t=!nt.browser.IS_ANY_SAFARI}={}}=Er(nt.options,e),r=J0(n);return!r||Uo.supportsTypeNatively(r)&&!t?"":"maybe"}};Wd("avc1.4d400d,mp4a.40.2")&&nt.getTech("Html5").registerSourceHandler(rM,0),nt.VhsHandler=oF,nt.VhsSourceHandler=rM,nt.Vhs=Uo,nt.use||nt.registerComponent("Vhs",Uo),nt.options.vhs=nt.options.vhs||{},(!nt.getPlugin||!nt.getPlugin("reloadSourceOnError"))&&nt.registerPlugin("reloadSourceOnError",function(n){tF(this,n)});var tt=B(5861),Wx=B(4986),ri=B(2122);function iM(){return(0,Zi.e)((n,e)=>{let t,r=!1;n.subscribe((0,ht.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function z4(n,e){return n===e}var Qt,Bo=B(2011),aF=(B(8971),B(3942)),Bu=B(9681),b_=B(4859),yp=B(1877),Rn=B(2090),q4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dh={},sM=sM||{},Dn=q4||self;function Kx(){}function Zx(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ZT(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var oM="closure_uid_"+(1e9*Math.random()>>>0),K4=0;function Z4(n,e,t){return n.call.apply(n.bind,arguments)}function Y4(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function po(n,e,t){return(po=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Z4:Y4).apply(null,arguments)}function Yx(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function qs(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var l=Array(arguments.length-2),c=2;c<arguments.length;c++)l[c-2]=arguments[c];return e.prototype[i].apply(r,l)}}function vp(){this.s=this.s,this.o=this.o}vp.prototype.s=!1,vp.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function W4(n){Object.prototype.hasOwnProperty.call(n,oM)&&n[oM]||(n[oM]=++K4)}(this)},vp.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function aM(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function uF(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Zx(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let l=0;l<s;l++)n[i+l]=r[l]}else n.push(r)}}function go(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}go.prototype.h=function(){this.defaultPrevented=!0};var X4=function(){if(!Dn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dn.addEventListener("test",Kx,e),Dn.removeEventListener("test",Kx,e)}catch{}return n}();function Qx(n){return/^[\s\xa0]*$/.test(n)}var cF=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function lM(n,e){return n<e?-1:n>e?1:0}function Xx(){var n=Dn.navigator;return n&&(n=n.userAgent)?n:""}function Bc(n){return-1!=Xx().indexOf(n)}function uM(n){return uM[" "](n),n}uM[" "]=Kx;var Jx,e6=Bc("Opera"),T_=Bc("Trident")||Bc("MSIE"),dF=Bc("Edge"),cM=dF||T_,hF=Bc("Gecko")&&!(-1!=Xx().toLowerCase().indexOf("webkit")&&!Bc("Edge"))&&!(Bc("Trident")||Bc("MSIE"))&&!Bc("Edge"),t6=-1!=Xx().toLowerCase().indexOf("webkit")&&!Bc("Edge");function fF(){var n=Dn.document;return n?n.documentMode:void 0}e:{var dM="",hM=function(){var n=Xx();return hF?/rv:([^\);]+)(\)|;)/.exec(n):dF?/Edge\/([\d\.]+)/.exec(n):T_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):t6?/WebKit\/(\S+)/.exec(n):e6?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(hM&&(dM=hM?hM[1]:""),T_){var fM=fF();if(null!=fM&&fM>parseFloat(dM)){Jx=String(fM);break e}}Jx=dM}var n6={};var i6=Dn.document&&T_&&(fF()||parseInt(Jx,10))||void 0;function YT(n,e){if(go.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(hF){e:{try{uM(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:s6[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&YT.X.h.call(this)}}qs(YT,go);var s6={2:"touch",3:"pen",4:"mouse"};YT.prototype.h=function(){YT.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var QT="closure_listenable_"+(1e6*Math.random()|0),o6=0;function a6(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++o6,this.ba=this.ea=!1}function eI(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function gM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function gF(n){const e={};for(const t in n)e[t]=n[t];return e}const mF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yF(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<mF.length;s++)t=mF[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function tI(n){this.src=n,this.g={},this.h=0}function mM(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=lF(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(eI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function yM(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}tI.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=yM(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new a6(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var vM="closure_lm_"+(1e6*Math.random()|0),_M={};function vF(n,e,t,r,i){if(r&&r.once)return bF(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)vF(n,e[s],t,r,i);return null}return t=wM(t),n&&n[QT]?n.N(e,t,ZT(r)?!!r.capture:!!r,i):_F(n,e,t,!1,r,i)}function _F(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=ZT(i)?!!i.capture:!!i,c=TM(n);if(c||(n[vM]=c=new tI(n)),(t=c.add(e,t,r,l,s)).proxy)return t;if(r=function l6(){const e=u6;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)X4||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(EF(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function bF(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)bF(n,e[s],t,r,i);return null}return t=wM(t),n&&n[QT]?n.O(e,t,ZT(r)?!!r.capture:!!r,i):_F(n,e,t,!0,r,i)}function TF(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)TF(n,e[s],t,r,i);else r=ZT(r)?!!r.capture:!!r,t=wM(t),n&&n[QT]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=yM(s=n.g[e],t,r,i))&&(eI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=TM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=yM(e,t,r,i)),(t=-1<n?e[n]:null)&&bM(t))}function bM(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[QT])mM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(EF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=TM(e))?(mM(t,n),0==t.h&&(t.src=null,e[vM]=null)):eI(n)}}}function EF(n){return n in _M?_M[n]:_M[n]="on"+n}function u6(n,e){if(n.ba)n=!0;else{e=new YT(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&bM(n),n=t.call(r,e)}return n}function TM(n){return(n=n[vM])instanceof tI?n:null}var EM="__closure_events_fn_"+(1e9*Math.random()>>>0);function wM(n){return"function"==typeof n?n:(n[EM]||(n[EM]=function(e){return n.handleEvent(e)}),n[EM])}function Ds(){vp.call(this),this.i=new tI(this),this.P=this,this.I=null}function Ws(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new go(e,n);else if(e instanceof go)e.target=e.target||n;else{var i=e;yF(e=new go(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=nI(l,r,!0,e)&&i}if(i=nI(l=e.g=n,r,!0,e)&&i,i=nI(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=nI(l=e.g=t[s],r,!1,e)&&i}function nI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.ba&&l.capture==t){var c=l.listener,f=l.ha||l.src;l.ea&&mM(n.i,l),i=!1!==c.call(f,r)&&i}}return i&&!r.defaultPrevented}qs(Ds,vp),Ds.prototype[QT]=!0,Ds.prototype.removeEventListener=function(n,e,t,r){TF(this,n,e,t,r)},Ds.prototype.M=function(){if(Ds.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)eI(t[r]);delete n.g[e],n.h--}}this.I=null},Ds.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ds.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var SM=Dn.JSON.stringify;function c6(){var n=CF;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var CM,wF=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new h6,n=>n.reset());class h6{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function f6(n){Dn.setTimeout(()=>{throw n},0)}function SF(n,e){CM||function p6(){var n=Dn.Promise.resolve(void 0);CM=function(){n.then(g6)}}(),xM||(CM(),xM=!0),CF.add(n,e)}var xM=!1,CF=new class d6{constructor(){this.h=this.g=null}add(e,t){const r=wF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function g6(){for(var n;n=c6();){try{n.h.call(n.g)}catch(t){f6(t)}var e=wF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}xM=!1}function rI(n,e){Ds.call(this),this.h=n||1,this.g=e||Dn,this.j=po(this.lb,this),this.l=Date.now()}function IM(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function DM(n,e,t){if("function"==typeof n)t&&(n=po(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=po(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dn.setTimeout(n,e||0)}function xF(n){n.g=DM(()=>{n.g=null,n.i&&(n.i=!1,xF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}qs(rI,Ds),(Qt=rI.prototype).ca=!1,Qt.R=null,Qt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ws(this,"tick"),this.ca&&(IM(this),this.start()))}},Qt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qt.M=function(){rI.X.M.call(this),IM(this),delete this.g};class m6 extends vp{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xF(this)}M(){super.M(),this.g&&(Dn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function XT(n){vp.call(this),this.h=n,this.g={}}qs(XT,vp);var IF=[];function DF(n,e,t,r){Array.isArray(t)||(t&&(IF[0]=t.toString()),t=IF);for(var i=0;i<t.length;i++){var s=vF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function AF(n){gM(n.g,function(e,t){this.g.hasOwnProperty(t)&&bM(e)},n),n.g={}}function iI(){this.g=!0}function E_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function b6(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return SM(t)}catch{return e}}(n,t)+(r?" "+r:"")})}XT.prototype.M=function(){XT.X.M.call(this),AF(this)},XT.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iI.prototype.Aa=function(){this.g=!1},iI.prototype.info=function(){};var Mm={},kF=null;function sI(){return kF=kF||new Ds}function MF(n){go.call(this,Mm.Pa,n)}function JT(n){const e=sI();Ws(e,new MF(e))}function OF(n,e){go.call(this,Mm.STAT_EVENT,n),this.stat=e}function Vo(n){const e=sI();Ws(e,new OF(e,n))}function RF(n,e){go.call(this,Mm.Qa,n),this.size=e}function eE(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dn.setTimeout(function(){n()},e)}Mm.Pa="serverreachability",qs(MF,go),Mm.STAT_EVENT="statevent",qs(OF,go),Mm.Qa="timingevent",qs(RF,go);var oI={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},PF={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function AM(){}function LF(){}AM.prototype.h=null;var OM,tE={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function kM(){go.call(this,"d")}function MM(){go.call(this,"c")}function aI(){}function nE(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new XT(this),this.O=T6,this.T=new rI(n=cM?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new FF}function FF(){this.i=null,this.g="",this.h=!1}qs(kM,go),qs(MM,go),qs(aI,AM),aI.prototype.g=function(){return new XMLHttpRequest},aI.prototype.i=function(){return{}},OM=new aI;var T6=45e3,RM={},lI={};function PM(n,e,t){n.K=1,n.v=hI(Ah(e)),n.s=t,n.P=!0,jF(n,null)}function jF(n,e){n.F=Date.now(),rE(n),n.A=Ah(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),KF(t.i,"t",r),n.C=0,t=n.l.H,n.h=new FF,n.g=vj(n.l,t?e:null,!n.s),0<n.N&&(n.L=new m6(po(n.La,n,n.g),n.N)),DF(n.S,n.g,"readystatechange",n.ib),e=n.H?gF(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),JT(),function y6(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",c=s.split("&"),f=0;f<c.length;f++){var v=c[f].split("=");if(1<v.length){var T=v[0];v=v[1];var A=T.split("_");l=2<=A.length&&"type"==A[1]?l+(T+"=")+v+"&":l+(T+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function UF(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function BF(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=E6(n,t),i==lI){4==e&&(n.o=4,Vo(14),r=!1),E_(n.j,n.m,null,"[Incomplete Response]");break}if(i==RM){n.o=4,Vo(15),E_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}E_(n.j,n.m,i,null),NM(n,i)}UF(n)&&i!=lI&&i!=RM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),HM(e),e.K=!0,Vo(11))):(E_(n.j,n.m,t,"[Invalid Chunked Response]"),Om(n),iE(n))}function E6(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?lI:(t=Number(e.substring(t,r)),isNaN(t)?RM:(r+=1)+t>e.length?lI:(e=e.substr(r,t),n.C=r+t,e))}function rE(n){n.V=Date.now()+n.O,VF(n,n.O)}function VF(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=eE(po(n.gb,n),e)}function uI(n){n.B&&(Dn.clearTimeout(n.B),n.B=null)}function iE(n){0==n.l.G||n.I||pj(n.l,n)}function Om(n){uI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,IM(n.T),AF(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function NM(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||LM(t.h,n)))if(!n.J&&LM(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;vI(t),mI(t)}$M(t),Vo(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=eE(po(t.cb,t),6e3));if(1>=QF(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Pm(t,11)}else if((n.J||t.g==n)&&vI(t),!Qx(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const T=v[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const A=v[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const j=v[5];null!=j&&"number"==typeof j&&0<j&&(t.J=r=1.5*j,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const W=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(W){var s=r.h;s.g||-1==W.indexOf("spdy")&&-1==W.indexOf("quic")&&-1==W.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(FM(s,s.h),s.h=null))}if(r.D){const J=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(r.za=J,ii(r.F,r.D,J))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=yj(r,r.H?r.ka:null,r.V),l.J){XF(r.h,l);var c=l,f=r.J;f&&c.setTimeout(f),c.B&&(uI(c),rE(c)),r.g=l}else hj(r);0<t.i.length&&yI(t)}else"stop"!=v[0]&&"close"!=v[0]||Pm(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Pm(t,7):VM(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}JT()}catch{}}function $F(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Zx(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function S6(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Zx(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function w6(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Zx(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(Qt=nE.prototype).setTimeout=function(n){this.O=n},Qt.ib=function(n){n=n.target;const e=this.L;e&&3==kh(n)?e.l():this.La(n)},Qt.La=function(n){try{if(n==this.g)e:{const T=kh(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||cM||this.g&&(this.h.h||this.g.fa()||oj(this.g)))){this.I||4!=T||7==e||JT(),uI(this);var t=this.g.aa();this.Y=t;t:if(UF(this)){var r=oj(this.g);n="";var i=r.length,s=4==kh(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Om(this),iE(this);var l="";break t}this.h.i=new Dn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function v6(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,f=this.g;if((c=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qx(c)){var v=c;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Vo(12),Om(this),iE(this);break e}E_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,NM(this,t)}this.P?(BF(this,T,l),cM&&this.i&&3==T&&(DF(this.S,this.T,"tick",this.hb),this.T.start())):(E_(this.j,this.m,l,null),NM(this,l)),4==T&&Om(this),this.i&&!this.I&&(4==T?pj(this.l,this):(this.i=!1,rE(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Vo(12)):(this.o=0,Vo(13)),Om(this),iE(this)}}}catch{}},Qt.hb=function(){if(this.g){var n=kh(this.g),e=this.g.fa();this.C<e.length&&(uI(this),BF(this,n,e),this.i&&4!=n&&rE(this))}},Qt.cancel=function(){this.I=!0,Om(this)},Qt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function _6(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(JT(),Vo(17)),Om(this),this.o=2,iE(this)):VF(this,this.V-n)};var HF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rm(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Rm){this.h=void 0!==e?e:n.h,cI(this,n.j),this.s=n.s,this.g=n.g,dI(this,n.m),this.l=n.l,e=n.i;var t=new aE;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),GF(this,t),this.o=n.o}else n&&(t=String(n).match(HF))?(this.h=!!e,cI(this,t[1]||"",!0),this.s=sE(t[2]||""),this.g=sE(t[3]||"",!0),dI(this,t[4]),this.l=sE(t[5]||"",!0),GF(this,t[6]||"",!0),this.o=sE(t[7]||"")):(this.h=!!e,this.i=new aE(null,this.h))}function Ah(n){return new Rm(n)}function cI(n,e,t){n.j=t?sE(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function GF(n,e,t){e instanceof aE?(n.i=e,function M6(n,e){e&&!n.j&&(_p(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(qF(this,r),KF(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=oE(e,A6)),n.i=new aE(e,n.h))}function ii(n,e,t){n.i.set(e,t)}function hI(n){return ii(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function sE(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function oE(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,x6),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function x6(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rm.prototype.toString=function(){var n=[],e=this.j;e&&n.push(oE(e,zF,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(oE(e,zF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(oE(t,"/"==t.charAt(0)?D6:I6,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",oE(t,k6)),n.join("")};var zF=/[#\/\?@]/g,I6=/[#\?:]/g,D6=/[#\?]/g,A6=/[#\?@]/g,k6=/#/g;function aE(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function _p(n){n.g||(n.g=new Map,n.h=0,n.i&&function C6(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qF(n,e){_p(n),e=w_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function WF(n,e){return _p(n),e=w_(n,e),n.g.has(e)}function KF(n,e,t){qF(n,e),0<t.length&&(n.i=null,n.g.set(w_(n,e),aM(t)),n.h+=t.length)}function w_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function ZF(n){this.l=n||R6,n=Dn.PerformanceNavigationTiming?0<(n=Dn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dn.g&&Dn.g.Ga&&Dn.g.Ga()&&Dn.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Qt=aE.prototype).add=function(n,e){_p(this),this.i=null,n=w_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Qt.forEach=function(n,e){_p(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Qt.oa=function(){_p(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},Qt.W=function(n){_p(this);let e=[];if("string"==typeof n)WF(this,n)&&(e=e.concat(this.g.get(w_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Qt.set=function(n,e){return _p(this),this.i=null,WF(this,n=w_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Qt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Qt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=s;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var R6=10;function YF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function QF(n){return n.h?1:n.g?n.g.size:0}function LM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function FM(n,e){n.g?n.g.add(e):n.h=e}function XF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function JF(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return aM(n.i)}function jM(){}function P6(){this.g=new jM}function N6(n,e,t){const r=t||"";try{$F(n,function(i,s){let l=i;ZT(i)&&(l=SM(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function fI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function lE(n){this.l=n.ac||null,this.j=n.jb||!1}function pI(n,e){Ds.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=UM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ZF.prototype.cancel=function(){if(this.i=JF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},jM.prototype.stringify=function(n){return Dn.JSON.stringify(n,void 0)},jM.prototype.parse=function(n){return Dn.JSON.parse(n,void 0)},qs(lE,AM),lE.prototype.g=function(){return new pI(this.l,this.j)},lE.prototype.i=function(n){return function(){return n}}({}),qs(pI,Ds);var UM=0;function ej(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function uE(n){n.readyState=4,n.l=null,n.j=null,n.A=null,cE(n)}function cE(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Qt=pI.prototype).open=function(n,e){if(this.readyState!=UM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,cE(this)},Qt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dn).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Qt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,uE(this)),this.readyState=UM},Qt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,cE(this)),this.g&&(this.readyState=3,cE(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Dn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ej(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Qt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?uE(this):cE(this),3==this.readyState&&ej(this)}},Qt.Va=function(n){this.g&&(this.response=this.responseText=n,uE(this))},Qt.Ua=function(n){this.g&&(this.response=n,uE(this))},Qt.ga=function(){this.g&&uE(this)},Qt.setRequestHeader=function(n,e){this.v.append(n,e)},Qt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Qt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(pI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var F6=Dn.JSON.parse;function Si(n){Ds.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tj,this.K=this.L=!1}qs(Si,Ds);var tj="",j6=/^https?$/i,U6=["POST","PUT"];function nj(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,rj(n),gI(n)}function rj(n){n.D||(n.D=!0,Ws(n,"complete"),Ws(n,"error"))}function ij(n){if(n.h&&typeof sM<"u"&&(!n.C[1]||4!=kh(n)||2!=n.aa()))if(n.v&&4==kh(n))DM(n.Ha,0,n);else if(Ws(n,"readystatechange"),4==kh(n)){n.h=!1;try{const c=n.aa();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.H).match(HF)[1]||null;if(!i&&Dn.self&&Dn.self.location){var s=Dn.self.location.protocol;i=s.substr(0,s.length-1)}r=!j6.test(i?i.toLowerCase():"")}t=r}if(t)Ws(n,"complete"),Ws(n,"success");else{n.m=6;try{var l=2<kh(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",rj(n)}}finally{gI(n)}}}function gI(n,e){if(n.g){sj(n);const t=n.g,r=n.C[0]?Kx:null;n.g=null,n.C=null,e||Ws(n,"ready");try{t.onreadystatechange=r}catch{}}}function sj(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dn.clearTimeout(n.A),n.A=null)}function kh(n){return n.g?n.g.readyState:0}function oj(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case tj:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function aj(n){let e="";return gM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function BM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=aj(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ii(n,e,t))}function dE(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lj(n){this.Ca=0,this.i=[],this.j=new iI,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=dE("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=dE("baseRetryDelayMs",5e3,n),this.bb=dE("retryDelaySeedMs",1e4,n),this.$a=dE("forwardChannelMaxRetries",2,n),this.ta=dE("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new ZF(n&&n.concurrentRequestLimit),this.Fa=new P6,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function VM(n){if(uj(n),3==n.G){var e=n.U++,t=Ah(n.F);ii(t,"SID",n.I),ii(t,"RID",e),ii(t,"TYPE","terminate"),hE(n,t),(e=new nE(n,n.j,e,void 0)).K=2,e.v=hI(Ah(t)),t=!1,Dn.navigator&&Dn.navigator.sendBeacon&&(t=Dn.navigator.sendBeacon(e.v.toString(),"")),!t&&Dn.Image&&((new Image).src=e.v,t=!0),t||(e.g=vj(e.l,null),e.g.da(e.v)),e.F=Date.now(),rE(e)}mj(n)}function mI(n){n.g&&(HM(n),n.g.cancel(),n.g=null)}function uj(n){mI(n),n.u&&(Dn.clearTimeout(n.u),n.u=null),vI(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Dn.clearTimeout(n.m),n.m=null)}function yI(n){YF(n.h)||n.m||(n.m=!0,SF(n.Ja,n),n.C=0)}function cj(n,e){var t;t=e?e.m:n.U++;const r=Ah(n.F);ii(r,"SID",n.I),ii(r,"RID",t),ii(r,"AID",n.T),hE(n,r),n.o&&n.s&&BM(r,n.o,n.s),t=new nE(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=dj(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),FM(n.h,t),PM(t,r,e)}function hE(n,e){n.ia&&gM(n.ia,function(t,r){ii(e,r,t)}),n.l&&$F({},function(t,r){ii(e,r,t)})}function dj(n,e,t){t=Math.min(n.i.length,t);var r=n.l?po(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].h,l.push("ofs="+s)):s=0:l.push("ofs="+s);let c=!0;for(let f=0;f<t;f++){let v=i[f].h;const T=i[f].g;if(v-=s,0>v)s=Math.max(0,i[f].h-100),c=!1;else try{N6(T,l,"req"+v+"_")}catch{r&&r(T)}}if(c){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function hj(n){n.g||n.u||(n.Z=1,SF(n.Ia,n),n.A=0)}function $M(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=eE(po(n.Ia,n),gj(n,n.A)),n.A++,0))}function HM(n){null!=n.B&&(Dn.clearTimeout(n.B),n.B=null)}function fj(n){n.g=new nE(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ah(n.sa);ii(e,"RID","rpc"),ii(e,"SID",n.I),ii(e,"CI",n.L?"0":"1"),ii(e,"AID",n.T),ii(e,"TYPE","xmlhttp"),hE(n,e),n.o&&n.s&&BM(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=hI(Ah(e)),t.s=null,t.P=!0,jF(t,n)}function vI(n){null!=n.v&&(Dn.clearTimeout(n.v),n.v=null)}function pj(n,e){var t=null;if(n.g==e){vI(n),HM(n),n.g=null;var r=2}else{if(!LM(n.h,e))return;t=e.D,XF(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ws(r=sI(),new RF(r,t)),yI(n)}else hj(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function V6(n,e){return!(QF(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=eE(po(n.Ja,n,e),gj(n,n.C)),n.C++,0)))}(n,e)||2==r&&$M(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Pm(n,5);break;case 4:Pm(n,10);break;case 3:Pm(n,6);break;default:Pm(n,2)}}function gj(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Pm(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=po(n.kb,n);t||(t=new Rm("//www.google.com/images/cleardot.gif"),Dn.location&&"http"==Dn.location.protocol||cI(t,"https"),hI(t)),function L6(n,e){const t=new iI;if(Dn.Image){const r=new Image;r.onload=Yx(fI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yx(fI,t,r,"TestLoadImage: error",!1,e),r.onabort=Yx(fI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yx(fI,t,r,"TestLoadImage: timeout",!1,e),Dn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vo(2);n.G=0,n.l&&n.l.va(e),mj(n),uj(n)}function mj(n){if(n.G=0,n.la=[],n.l){const e=JF(n.h);(0!=e.length||0!=n.i.length)&&(uF(n.la,e),uF(n.la,n.i),n.h.i.length=0,aM(n.i),n.i.length=0),n.l.ua()}}function yj(n,e,t){var r=t instanceof Rm?Ah(t):new Rm(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),dI(r,r.m);else{var i=Dn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Rm(null,void 0);r&&cI(s,r),e&&(s.g=e),i&&dI(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&ii(r,t,e),ii(r,"VER",n.ma),hE(n,r),r}function vj(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Si(t&&n.Da&&!n.ra?new lE({jb:!0}):n.ra)).Ka(n.H),e}function _j(){}function _I(){if(T_&&!(10<=Number(i6)))throw Error("Environmental error: no available transport.")}function ml(n,e){Ds.call(this),this.g=new lj(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Qx(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qx(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new S_(this)}function bj(n){kM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Tj(){MM.call(this),this.status=1}function S_(n){this.g=n}(Qt=Si.prototype).Ka=function(n){this.L=n},Qt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():OM.g(),this.C=function NF(n){return n.h||(n.h=n.i())}(this.u?this.u:OM),this.g.onreadystatechange=po(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void nj(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Dn.FormData&&n instanceof Dn.FormData,!(0<=lF(U6,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sj(this),0<this.B&&((this.K=function B6(n){return T_&&function r6(){return function J4(n){var e=n6;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=cF(String(Jx)).split("."),t=cF("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",s=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=lM(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||lM(0==i[2].length,0==s[2].length)||lM(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=po(this.qa,this)):this.A=DM(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){nj(this,s)}},Qt.qa=function(){typeof sM<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ws(this,"timeout"),this.abort(8))},Qt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ws(this,"complete"),Ws(this,"abort"),gI(this))},Qt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gI(this,!0)),Si.X.M.call(this)},Qt.Ha=function(){this.s||(this.F||this.v||this.l?ij(this):this.fb())},Qt.fb=function(){ij(this)},Qt.aa=function(){try{return 2<kh(this)?this.g.status:-1}catch{return-1}},Qt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Qt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),F6(e)}},Qt.Ea=function(){return this.m},Qt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qt=lj.prototype).ma=8,Qt.G=1,Qt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new nE(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=gF(s),yF(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=dj(this,i,e),ii(t=Ah(this.F),"RID",n),ii(t,"CVER",22),this.D&&ii(t,"X-HTTP-Session-Id",this.D),hE(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(aj(s)))+"&"+e:this.o&&BM(t,this.o,s)),FM(this.h,i),this.Ya&&ii(t,"TYPE","init"),this.O?(ii(t,"$req",e),ii(t,"SID","null"),i.Z=!0,PM(i,t,null)):PM(i,t,e),this.G=2}}else 3==this.G&&(n?cj(this,n):0==this.i.length||YF(this.h)||cj(this))},Qt.Ia=function(){if(this.u=null,fj(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=eE(po(this.eb,this),n)}},Qt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vo(10),mI(this),fj(this))},Qt.cb=function(){null!=this.v&&(this.v=null,mI(this),$M(this),Vo(19))},Qt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Vo(2)):(this.j.info("Failed to ping google.com"),Vo(1))},(Qt=_j.prototype).xa=function(){},Qt.wa=function(){},Qt.va=function(){},Qt.ua=function(){},Qt.Ra=function(){},_I.prototype.g=function(n,e){return new ml(n,e)},qs(ml,Ds),ml.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Vo(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=yj(n,null,n.V),yI(n)},ml.prototype.close=function(){VM(this.g)},ml.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=SM(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&yI(e)},ml.prototype.M=function(){this.g.l=null,delete this.j,VM(this.g),delete this.g,ml.X.M.call(this)},qs(bj,kM),qs(Tj,MM),qs(S_,_j),S_.prototype.xa=function(){Ws(this.g,"a")},S_.prototype.wa=function(n){Ws(this.g,new bj(n))},S_.prototype.va=function(n){Ws(this.g,new Tj)},S_.prototype.ua=function(){Ws(this.g,"b")},_I.prototype.createWebChannel=_I.prototype.g,ml.prototype.send=ml.prototype.u,ml.prototype.open=ml.prototype.m,ml.prototype.close=ml.prototype.close,oI.NO_ERROR=0,oI.TIMEOUT=8,oI.HTTP_ERROR=6,PF.COMPLETE="complete",LF.EventType=tE,tE.OPEN="a",tE.CLOSE="b",tE.ERROR="c",tE.MESSAGE="d",Ds.prototype.listen=Ds.prototype.N,Si.prototype.listenOnce=Si.prototype.O,Si.prototype.getLastError=Si.prototype.Oa,Si.prototype.getLastErrorCode=Si.prototype.Ea,Si.prototype.getStatus=Si.prototype.aa,Si.prototype.getResponseJson=Si.prototype.Sa,Si.prototype.getResponseText=Si.prototype.fa,Si.prototype.send=Si.prototype.da,Si.prototype.setWithCredentials=Si.prototype.Ka;var $6=Dh.createWebChannelTransport=function(){return new _I},H6=Dh.getStatEventTarget=function(){return sI()},GM=Dh.ErrorCode=oI,G6=Dh.EventType=PF,z6=Dh.Event=Mm,Ej=Dh.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},q6=Dh.FetchXmlHttpFactory=lE,bI=Dh.WebChannel=LF,W6=Dh.XhrIo=Si;const wj="@firebase/firestore";class As{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");let C_="9.18.0";const bp=new yp.Yd("@firebase/firestore");function zM(){return bp.logLevel}function St(n,...e){if(bp.logLevel<=yp.in.DEBUG){const t=e.map(qM);bp.debug(`Firestore (${C_}): ${n}`,...t)}}function Li(n,...e){if(bp.logLevel<=yp.in.ERROR){const t=e.map(qM);bp.error(`Firestore (${C_}): ${n}`,...t)}}function Nm(n,...e){if(bp.logLevel<=yp.in.WARN){const t=e.map(qM);bp.warn(`Firestore (${C_}): ${n}`,...t)}}function qM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function qt(n="Unexpected state"){const e=`FIRESTORE (${C_}) INTERNAL ASSERTION FAILED: `+n;throw Li(e),new Error(e)}function Xt(n,e){n||qt()}function Lt(n,e){return n}const rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends Rn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Sj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(As.UNAUTHENTICATED))}shutdown(){}}class Q6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class X6{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new hs,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const v=l;e.enqueueRetryable((0,tt.Z)(function*(){yield v.promise,yield s(r.currentUser)}))},f=v=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(v=>f(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?f(v):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new hs)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xt("string"==typeof r.accessToken),new Sj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xt(null===e||"string"==typeof e),new As(e)}}class J6{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=As.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Xt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class e8{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new J6(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(As.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t8{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.A;return this.A=s.token,St("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xt("string"==typeof t.token),this.A=t.token,new Cj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function n8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class xj{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=n8(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function An(n,e){return n<e?-1:n>e?1:0}function x_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ij(n){return n+"\0"}class si{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Tt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Tt(rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Tt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tt(rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return si.fromMillis(Date.now())}static fromDate(e){return si.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new si(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sn(e)}static min(){return new sn(new si(0,0))}static max(){return new sn(new si(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class fE{constructor(e,t,r){void 0===t?t=0:t>e.length&&qt(),void 0===r?r=e.length-t:r>e.length-t&&qt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===fE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class er extends fE{construct(e,t,r){return new er(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Tt(rt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new er(t)}static emptyPath(){return new er([])}}const r8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ci extends fE{construct(e,t,r){return new Ci(e,t,r)}static isValidIdentifier(e){return r8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ci.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ci(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Tt(rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if("\\"===c){if(i+1===e.length)throw new Tt(rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Tt(rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else"`"===c?(l=!l,i++):"."!==c||l?(r+=c,i++):(s(),i++)}if(s(),l)throw new Tt(rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ci(t)}static emptyPath(){return new Ci([])}}class Nt{constructor(e){this.path=e}static fromPath(e){return new Nt(er.fromString(e))}static fromName(e){return new Nt(er.fromString(e).popFirst(5))}static empty(){return new Nt(er.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===er.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return er.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nt(new er(e.slice()))}}class TI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function WM(n){return n.fields.find(e=>2===e.kind)}function Lm(n){return n.fields.filter(e=>2!==e.kind)}TI.UNKNOWN_ID=-1;class EI{constructor(e,t){this.fieldPath=e,this.kind=t}}class pE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new pE(0,yl.min())}}function Dj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=sn.fromTimestamp(1e9===r?new si(t+1,0):new si(t,r));return new yl(i,Nt.empty(),e)}function Aj(n){return new yl(n.readTime,n.key,-1)}class yl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new yl(sn.min(),Nt.empty(),-1)}static max(){return new yl(sn.max(),Nt.empty(),-1)}}function KM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Nt.comparator(n.documentKey,e.documentKey),0!==t?t:An(n.largestBatchId,e.largestBatchId))}const kj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Tp(n){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,tt.Z)(function*(n){if(n.code!==rt.FAILED_PRECONDITION||n.message!==kj)throw n;St("LocalStore","Unexpectedly lost primary lease")}),ZM.apply(this,arguments)}class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Je((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Je?t:Je.resolve(t)}catch(t){return Je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.reject(t)}static resolve(e){return new Je((t,r)=>{t(e)})}static reject(e){return new Je((t,r)=>{r(e)})}static waitFor(e){return new Je((t,r)=>{let i=0,s=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++s,l&&s===i&&t()},f=>r(f))}),l=!0,s===i&&t()})}static or(e){let t=Je.resolve(!1);for(const r of e)t=t.next(i=>i?Je.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Je((r,i)=>{const s=e.length,l=new Array(s);let c=0;for(let f=0;f<s;f++){const v=f;t(e[v]).next(T=>{l[v]=T,++c,c===s&&r(l)},T=>i(T))}})}static doWhile(e,t){return new Je((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class wI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new hs,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new gE(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=YM(r.target.error);this.P.reject(new gE(e,i))}}static open(e,t,r,i){try{return new wI(t,e.transaction(i,r))}catch(s){throw new gE(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(St("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new a8(t)}}class Vu{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Vu.D((0,Rn.z$)())&&Li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return St("SimpleDb","Removing database:",e),Fm(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Rn.hl)())return!1;if(Vu.N())return!0;const e=(0,Rn.z$)(),t=Vu.D(e),r=0<t&&t<10,i=Vu.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,tt.Z)(function*(){return t.db||(St("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new gE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const c=l.target.error;i("VersionError"===c.name?new Tt(rt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new Tt(rt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new gE(e,c))},s.onupgradeneeded=l=>{St("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.F(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{St("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,tt.Z)(function*(){const l="readonly"===t;let c=0;for(;;){++c;try{s.db=yield s.O(e);const f=wI.open(s.db,e,l?"readonly":"readwrite",r),v=i(f).next(T=>(f.V(),T)).catch(T=>(f.abort(T),Je.reject(T))).toPromise();return v.catch(()=>{}),yield f.v,v}catch(f){const v=f,T="FirebaseError"!==v.name&&c<3;if(St("SimpleDb","Transaction failed with error:",v.message,"Retrying:",T),s.close(),!T)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class o8{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Fm(this.q.delete())}}class gE extends Tt{constructor(e,t){super(rt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ep(n){return"IndexedDbTransactionError"===n.name}class a8{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(St("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(St("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fm(r)}add(e){return St("SimpleDb","ADD",this.store.name,e,e),Fm(this.store.add(e))}get(e){return Fm(this.store.get(e)).next(t=>(void 0===t&&(t=null),St("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return St("SimpleDb","DELETE",this.store.name,e),Fm(this.store.delete(e))}count(){return St("SimpleDb","COUNT",this.store.name),Fm(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(l,c)=>{s.push(c)}).next(()=>s)}{const i=this.store.getAll(r.range);return new Je((s,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Je((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){St("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const i=this.cursor(r);return this.H(i,(s,l,c)=>c.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new Je((r,i)=>{t.onerror=s=>{const l=YM(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(c=>{c?l.continue():r()}):r()}})}H(e,t){const r=[];return new Je((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const f=new o8(c),v=t(c.primaryKey,c.value,f);if(v instanceof Je){const T=v.catch(A=>(f.done(),Je.reject(A)));r.push(T)}f.isDone?i():null===f.G?c.continue():c.continue(f.G)}}).next(()=>Je.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fm(n){return new Je((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=YM(r.target.error);t(i)}})}let Oj=!1;function YM(n){const e=Vu.D((0,Rn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Oj||(Oj=!0,setTimeout(()=>{throw r},0)),r}}return n}class l8{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;St("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,tt.Z)(function*(){t.task=null;try{St("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ep(r)?St("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Tp(r)}yield t.nt(6e4)}))}}class u8{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,tt.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return Je.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return St("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(c=>{i-=c,r.add(l)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,s)).next(c=>(St("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=Aj(s);KM(l,r)>0&&(r=l)}),new yl(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let vl=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class h8{constructor(e,t,r,i,s,l,c,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.useFetchStreams=f}}class wp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wp&&e.projectId===this.projectId&&e.database===this.database}}function Rj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Pj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mE(n){return null==n}function yE(n){return 0===n&&1/n==-1/0}function Nj(n){return"number"==typeof n&&Number.isInteger(n)&&!yE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class f8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new f8("Invalid base64 string: "+i):i}}(e);return new fs(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new fs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fs.EMPTY_BYTE_STRING=new fs("");const g8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sp(n){if(Xt(!!n),"string"==typeof n){let e=0;const t=g8.exec(n);if(Xt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xi(n.seconds),nanos:xi(n.nanos)}}function xi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Um(n){return"string"==typeof n?fs.fromBase64String(n):fs.fromUint8Array(n)}function XM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Lj(n){const e=n.mapValue.fields.__previous_value__;return XM(e)?Lj(e):e}function vE(n){const e=Sp(n.mapValue.fields.__local_write_time__.timestampValue);return new si(e.seconds,e.nanos)}const Cp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},SI={nullValue:"NULL_VALUE"};function Bm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?XM(n)?4:Bj(n)?9007199254740991:10:qt()}function Vc(n,e){if(n===e)return!0;const t=Bm(n);if(t!==Bm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vE(n).isEqual(vE(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Sp(r.timestampValue),l=Sp(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Um(n.bytesValue).isEqual(Um(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return xi(r.geoPointValue.latitude)===xi(i.geoPointValue.latitude)&&xi(r.geoPointValue.longitude)===xi(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xi(r.integerValue)===xi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=xi(r.doubleValue),l=xi(i.doubleValue);return s===l?yE(s)===yE(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return x_(n.arrayValue.values||[],e.arrayValue.values||[],Vc);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Rj(s)!==Rj(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===l[c]||!Vc(s[c],l[c])))return!1;return!0}(n,e);default:return qt()}var i}function _E(n,e){return void 0!==(n.values||[]).find(t=>Vc(t,e))}function xp(n,e){if(n===e)return 0;const t=Bm(n),r=Bm(e);if(t!==r)return An(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return An(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=xi(i.integerValue||i.doubleValue),c=xi(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return Fj(n.timestampValue,e.timestampValue);case 4:return Fj(vE(n),vE(e));case 5:return An(n.stringValue,e.stringValue);case 6:return function(i,s){const l=Um(i),c=Um(s);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),c=s.split("/");for(let f=0;f<l.length&&f<c.length;f++){const v=An(l[f],c[f]);if(0!==v)return v}return An(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=An(xi(i.latitude),xi(s.latitude));return 0!==l?l:An(xi(i.longitude),xi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],c=s.values||[];for(let f=0;f<l.length&&f<c.length;++f){const v=xp(l[f],c[f]);if(v)return v}return An(l.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Cp.mapValue&&s===Cp.mapValue)return 0;if(i===Cp.mapValue)return 1;if(s===Cp.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=s.fields||{},v=Object.keys(f);c.sort(),v.sort();for(let T=0;T<c.length&&T<v.length;++T){const A=An(c[T],v[T]);if(0!==A)return A;const j=xp(l[c[T]],f[v[T]]);if(0!==j)return j}return An(c.length,v.length)}(n.mapValue,e.mapValue);default:throw qt()}}function Fj(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return An(n,e);const t=Sp(n),r=Sp(e),i=An(t.seconds,r.seconds);return 0!==i?i:An(t.nanos,r.nanos)}function I_(n){return JM(n)}function JM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Sp(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Um(n.bytesValue).toBase64():"referenceValue"in n?Nt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=JM(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const c of i)l?l=!1:s+=",",s+=`${c}:${JM(r.fields[c])}`;return s+"}"}(n.mapValue):qt();var e}function Vm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function eO(n){return!!n&&"integerValue"in n}function bE(n){return!!n&&"arrayValue"in n}function jj(n){return!!n&&"nullValue"in n}function Uj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function CI(n){return!!n&&"mapValue"in n}function TE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return jm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=TE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=TE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Bj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function m8(n){return"nullValue"in n?SI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vm(wp.empty(),Nt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:qt()}function y8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vm(wp.empty(),Nt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Cp:qt()}function Vj(n,e){const t=xp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $j(n,e){const t=xp(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ip{constructor(e,t){this.position=e,this.inclusive=t}}function Hj(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?Nt.comparator(Nt.fromName(l.referenceValue),t.key):xp(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Gj(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vc(n.position[t],e.position[t]))return!1;return!0}class zj{}class Kn extends zj{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new v8(e,t,r):"array-contains"===t?new T8(e,r):"in"===t?new Qj(e,r):"not-in"===t?new E8(e,r):"array-contains-any"===t?new w8(e,r):new Kn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new _8(e,r):new b8(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xp(t,this.value)):null!==t&&Bm(this.value)===Bm(t)&&this.matchesComparison(xp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class pr extends zj{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new pr(e,t)}matches(e){return D_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function D_(n){return"and"===n.op}function tO(n){return"or"===n.op}function nO(n){return qj(n)&&D_(n)}function qj(n){for(const e of n.filters)if(e instanceof pr)return!1;return!0}function rO(n){if(n instanceof Kn)return n.field.canonicalString()+n.op.toString()+I_(n.value);if(nO(n))return n.filters.map(e=>rO(e)).join(",");{const e=n.filters.map(t=>rO(t)).join(",");return`${n.op}(${e})`}}function Wj(n,e){return n instanceof Kn?(t=n,(r=e)instanceof Kn&&t.op===r.op&&t.field.isEqual(r.field)&&Vc(t.value,r.value)):n instanceof pr?function(t,r){return r instanceof pr&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,l)=>i&&Wj(s,r.filters[l]),!0)}(n,e):void qt();var t,r}function Kj(n,e){const t=n.filters.concat(e);return pr.create(t,n.op)}function Zj(n){return n instanceof Kn?function(e){return`${e.field.canonicalString()} ${e.op} ${I_(e.value)}`}(n):n instanceof pr?function(e){return e.op.toString()+" {"+e.getFilters().map(Zj).join(" ,")+"}"}(n):"Filter"}class v8 extends Kn{constructor(e,t,r){super(e,t,r),this.key=Nt.fromName(r.referenceValue)}matches(e){const t=Nt.comparator(e.key,this.key);return this.matchesComparison(t)}}class _8 extends Kn{constructor(e,t){super(e,"in",t),this.keys=Yj(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class b8 extends Kn{constructor(e,t){super(e,"not-in",t),this.keys=Yj(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Yj(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Nt.fromName(r.referenceValue))}class T8 extends Kn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bE(t)&&_E(t.arrayValue,this.value)}}class Qj extends Kn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_E(this.value.arrayValue,t)}}class E8 extends Kn{constructor(e,t){super(e,"not-in",t)}matches(e){if(_E(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_E(this.value.arrayValue,t)}}class w8 extends Kn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_E(this.value.arrayValue,r))}}class A_{constructor(e,t="asc"){this.field=e,this.dir=t}}function S8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Ii{constructor(e,t){this.comparator=e,this.root=t||Ks.EMPTY}insert(e,t){return new Ii(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ks.BLACK,null,null))}remove(e){return new Ii(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ks.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xI(this.root,e,this.comparator,!1)}getReverseIterator(){return new xI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xI(this.root,e,this.comparator,!0)}}class xI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ks{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ks.RED,this.left=i??Ks.EMPTY,this.right=s??Ks.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ks(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ks.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ks.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ks.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ks.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw qt();const e=this.left.check();if(e!==this.right.check())throw qt();return e+(this.isRed()?0:1)}}Ks.EMPTY=null,Ks.RED=!0,Ks.BLACK=!1,Ks.EMPTY=new class{constructor(){this.size=0}get key(){throw qt()}get value(){throw qt()}get color(){throw qt()}get left(){throw qt()}get right(){throw qt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ks(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wr{constructor(e){this.comparator=e,this.data=new Ii(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xj(this.data.getIterator())}getIteratorFrom(e){return new Xj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wr(this.comparator);return t.data=e,t}}class Xj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function k_(n){return n.hasNext()?n.getNext():void 0}class Ia{constructor(e){this.fields=e,e.sort(Ci.comparator)}static empty(){return new Ia([])}unionWith(e){let t=new wr(Ci.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ia(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return x_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ks{constructor(e){this.value=e}static empty(){return new ks({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!CI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=TE(t)}setAll(e){let t=Ci.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=TE(l):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());CI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];CI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){jm(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ks(TE(this.value))}}function Jj(n){const e=[];return jm(n.fields,(t,r)=>{const i=new Ci([t]);if(CI(r)){const s=Jj(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new Ia(e)}class Hr{constructor(e,t,r,i,s,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Hr(e,0,sn.min(),sn.min(),sn.min(),ks.empty(),0)}static newFoundDocument(e,t,r,i){return new Hr(e,1,t,sn.min(),r,i,0)}static newNoDocument(e,t){return new Hr(e,2,t,sn.min(),sn.min(),ks.empty(),0)}static newUnknownDocument(e,t){return new Hr(e,3,t,sn.min(),sn.min(),ks.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ks.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ks.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class C8{constructor(e,t=null,r=[],i=[],s=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=c,this._t=null}}function iO(n,e=null,t=[],r=[],i=null,s=null,l=null){return new C8(n,e,t,r,i,s,l)}function $m(n){const e=Lt(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>rO(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),mE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>I_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>I_(r)).join(",")),e._t=t}return e._t}function EE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!S8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Wj(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gj(n.startAt,e.startAt)&&Gj(n.endAt,e.endAt)}function II(n){return Nt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function DI(n,e){return n.filters.filter(t=>t instanceof Kn&&t.field.isEqual(e))}function eU(n,e,t){let r=SI,i=!0;for(const s of DI(n,e)){let l=SI,c=!0;switch(s.op){case"<":case"<=":l=m8(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,c=!1;break;case"!=":case"not-in":l=SI}Vj({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];Vj({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function tU(n,e,t){let r=Cp,i=!0;for(const s of DI(n,e)){let l=Cp,c=!0;switch(s.op){case">=":case">":l=y8(s.value),c=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,c=!1;break;case"!=":case"not-in":l=Cp}$j({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];$j({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Mh{constructor(e,t=null,r=[],i=[],s=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=c,this.endAt=f,this.wt=null,this.gt=null}}function nU(n,e,t,r,i,s,l,c){return new Mh(n,e,t,r,i,s,l,c)}function M_(n){return new Mh(n)}function rU(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function sO(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function AI(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function oO(n){return null!==n.collectionGroup}function Hm(n){const e=Lt(n);if(null===e.wt){e.wt=[];const t=AI(e),r=sO(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new A_(t)),e.wt.push(new A_(Ci.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new A_(Ci.keyField(),s))}}}return e.wt}function $o(n){const e=Lt(n);if(!e.gt)if("F"===e.limitType)e.gt=iO(e.path,e.collectionGroup,Hm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Hm(e))t.push(new A_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Ip(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Ip(e.startAt.position,e.startAt.inclusive):null;e.gt=iO(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.gt}function aO(n,e){e.getFirstInequalityField(),AI(n);const t=n.filters.concat([e]);return new Mh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function kI(n,e,t){return new Mh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wE(n,e){return EE($o(n),$o(e))&&n.limitType===e.limitType}function iU(n){return`${$m($o(n))}|lt:${n.limitType}`}function lO(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Zj(r)).join(", ")}]`),mE(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>I_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>I_(r)).join(",")),`Target(${t})`}($o(n))}; limitType=${n.limitType})`}function SE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Nt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Hm(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const c=Hj(i,s,l);return i.inclusive?c<=0:c<0}(t.startAt,Hm(t),r)||t.endAt&&!function(i,s,l){const c=Hj(i,s,l);return i.inclusive?c>=0:c>0}(t.endAt,Hm(t),r)));var t,r}function sU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oU(n){return(e,t)=>{let r=!1;for(const i of Hm(n)){const s=x8(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function x8(n,e,t){const r=n.field.isKeyField()?Nt.comparator(e.key,t.key):function(i,s,l){const c=s.data.field(i),f=l.data.field(i);return null!==c&&null!==f?xp(c,f):qt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return qt()}}function aU(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yE(e)?"-0":e}}function lU(n){return{integerValue:""+n}}function uU(n,e){return Nj(e)?lU(e):aU(n,e)}class MI{constructor(){this._=void 0}}function I8(n,e,t){return n instanceof O_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Gm?dU(n,e):n instanceof zm?hU(n,e):function(r,i){const s=cU(r,i),l=fU(s)+fU(r.It);return eO(s)&&eO(r.It)?lU(l):aU(r.Tt,l)}(n,e)}function D8(n,e,t){return n instanceof Gm?dU(n,e):n instanceof zm?hU(n,e):t}function cU(n,e){return n instanceof R_?eO(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class O_ extends MI{}class Gm extends MI{constructor(e){super(),this.elements=e}}function dU(n,e){const t=pU(e);for(const r of n.elements)t.some(i=>Vc(i,r))||t.push(r);return{arrayValue:{values:t}}}class zm extends MI{constructor(e){super(),this.elements=e}}function hU(n,e){let t=pU(e);for(const r of n.elements)t=t.filter(i=>!Vc(i,r));return{arrayValue:{values:t}}}class R_ extends MI{constructor(e,t){super(),this.Tt=e,this.It=t}}function fU(n){return xi(n.integerValue||n.doubleValue)}function pU(n){return bE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class CE{constructor(e,t){this.field=e,this.transform=t}}class k8{constructor(e,t){this.version=e,this.transformResults=t}}class oi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function OI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class RI{}function gU(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new N_(n.key,oi.none()):new P_(n.key,n.data,oi.none());{const t=n.data,r=ks.empty();let i=new wr(Ci.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new Oh(n.key,r,new Ia(i.toArray()),oi.none())}}function M8(n,e,t){n instanceof P_?function(r,i,s){const l=r.value.clone(),c=vU(r.fieldTransforms,i,s.transformResults);l.setAll(c),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Oh?function(r,i,s){if(!OI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=vU(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(yU(r)),c.setAll(l),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xE(n,e,t,r){return n instanceof P_?function(i,s,l,c){if(!OI(i.precondition,s))return l;const f=i.value.clone(),v=_U(i.fieldTransforms,c,s);return f.setAll(v),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Oh?function(i,s,l,c){if(!OI(i.precondition,s))return l;const f=_U(i.fieldTransforms,c,s),v=s.data;return v.setAll(yU(i)),v.setAll(f),s.convertToFoundDocument(s.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,OI(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function O8(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=cU(r.transform,i||null);null!=s&&(null===t&&(t=ks.empty()),t.set(r.field,s))}return t||null}function mU(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&x_(t,r,(i,s)=>function A8(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Gm&&r instanceof Gm||t instanceof zm&&r instanceof zm?x_(t.elements,r.elements,Vc):t instanceof R_&&r instanceof R_?Vc(t.It,r.It):t instanceof O_&&r instanceof O_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class P_ extends RI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oh extends RI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yU(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function vU(n,e,t){const r=new Map;Xt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,c=e.data.field(s.field);r.set(s.field,D8(l,c,t[i]))}return r}function _U(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,I8(s,l,e))}return r}class N_ extends RI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uO extends RI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class R8{constructor(e){this.count=e}}var Xi,tr;function bU(n){switch(n){default:return qt();case rt.CANCELLED:case rt.UNKNOWN:case rt.DEADLINE_EXCEEDED:case rt.RESOURCE_EXHAUSTED:case rt.INTERNAL:case rt.UNAVAILABLE:case rt.UNAUTHENTICATED:return!1;case rt.INVALID_ARGUMENT:case rt.NOT_FOUND:case rt.ALREADY_EXISTS:case rt.PERMISSION_DENIED:case rt.FAILED_PRECONDITION:case rt.ABORTED:case rt.OUT_OF_RANGE:case rt.UNIMPLEMENTED:case rt.DATA_LOSS:return!0}}function TU(n){if(void 0===n)return Li("GRPC error has no .code"),rt.UNKNOWN;switch(n){case Xi.OK:return rt.OK;case Xi.CANCELLED:return rt.CANCELLED;case Xi.UNKNOWN:return rt.UNKNOWN;case Xi.DEADLINE_EXCEEDED:return rt.DEADLINE_EXCEEDED;case Xi.RESOURCE_EXHAUSTED:return rt.RESOURCE_EXHAUSTED;case Xi.INTERNAL:return rt.INTERNAL;case Xi.UNAVAILABLE:return rt.UNAVAILABLE;case Xi.UNAUTHENTICATED:return rt.UNAUTHENTICATED;case Xi.INVALID_ARGUMENT:return rt.INVALID_ARGUMENT;case Xi.NOT_FOUND:return rt.NOT_FOUND;case Xi.ALREADY_EXISTS:return rt.ALREADY_EXISTS;case Xi.PERMISSION_DENIED:return rt.PERMISSION_DENIED;case Xi.FAILED_PRECONDITION:return rt.FAILED_PRECONDITION;case Xi.ABORTED:return rt.ABORTED;case Xi.OUT_OF_RANGE:return rt.OUT_OF_RANGE;case Xi.UNIMPLEMENTED:return rt.UNIMPLEMENTED;case Xi.DATA_LOSS:return rt.DATA_LOSS;default:return qt()}}(tr=Xi||(Xi={}))[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS";class Dp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jm(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Pj(this.inner)}size(){return this.innerSize}}const P8=new Ii(Nt.comparator);function Da(){return P8}const EU=new Ii(Nt.comparator);function IE(...n){let e=EU;for(const t of n)e=e.insert(t.key,t);return e}function wU(n){let e=EU;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $c(){return DE()}function SU(){return DE()}function DE(){return new Dp(n=>n.toString(),(n,e)=>n.isEqual(e))}const N8=new Ii(Nt.comparator),L8=new wr(Nt.comparator);function Fn(...n){let e=L8;for(const t of n)e=e.add(t);return e}const F8=new wr(An);function PI(){return F8}class AE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,kE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new AE(sn.min(),i,PI(),Da(),Fn())}}class kE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kE(r,t,Fn(),Fn(),Fn())}}class NI{constructor(e,t,r,i){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=i}}class CU{constructor(e,t){this.targetId=e,this.Rt=t}}class xU{constructor(e,t,r=fs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class IU{constructor(){this.Pt=0,this.vt=AU(),this.bt=fs.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=Fn(),t=Fn(),r=Fn();return this.vt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:qt()}}),new kE(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=AU()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class j8{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Da(),this.Kt=DU(),this.Gt=new wr(An)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:qt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,i)=>{this.Jt(i)&&t(i)})}Zt(e){const t=e.targetId,r=e.Rt.count,i=this.Xt(t);if(i){const s=i.target;if(II(s))if(0===r){const l=new Nt(s.path);this.zt(t,l,Hr.newNoDocument(l,sn.min()))}else Xt(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((s,l)=>{const c=this.Xt(l);if(c){if(s.current&&II(c.target)){const f=new Nt(c.target.path);null!==this.Ut.get(f)||this.ne(l,f)||this.zt(l,f,Hr.newNoDocument(f,e))}s.Ct&&(t.set(l,s.Nt()),s.kt())}});let r=Fn();this.Kt.forEach((s,l)=>{let c=!0;l.forEachWhile(f=>{const v=this.Xt(f);return!v||2===v.purpose||(c=!1,!1)}),c&&(r=r.add(s))}),this.Ut.forEach((s,l)=>l.setReadTime(e));const i=new AE(e,t,this.Gt,this.Ut,r);return this.Ut=Da(),this.Kt=DU(),this.Gt=new wr(An),i}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,t)?i.$t(t,1):i.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new IU,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new wr(An),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||St("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new IU),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function DU(){return new Ii(Nt.comparator)}function AU(){return new Ii(Nt.comparator)}const U8={asc:"ASCENDING",desc:"DESCENDING"},B8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V8={and:"AND",or:"OR"};class $8{constructor(e,t){this.databaseId=e,this.yt=t}}function L_(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kU(n,e){return n.yt?e.toBase64():e.toUint8Array()}function H8(n,e){return L_(n,e.toTimestamp())}function Fi(n){return Xt(!!n),sn.fromTimestamp(function(e){const t=Sp(e);return new si(t.seconds,t.nanos)}(n))}function cO(n,e){return(t=n,new er(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function MU(n){const e=er.fromString(n);return Xt(BU(e)),e}function ME(n,e){return cO(n.databaseId,e.path)}function Hc(n,e){const t=MU(e);if(t.get(1)!==n.databaseId.projectId)throw new Tt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Tt(rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Nt(RU(t))}function dO(n,e){return cO(n.databaseId,e)}function OU(n){const e=MU(n);return 4===e.length?er.emptyPath():RU(e)}function OE(n){return new er(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RU(n){return Xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function PU(n,e,t){return{name:ME(n,e),fields:t.value.mapValue.fields}}function NU(n,e,t){const r=Hc(n,e.name),i=Fi(e.updateTime),s=e.createTime?Fi(e.createTime):sn.min(),l=new ks({mapValue:{fields:e.fields}}),c=Hr.newFoundDocument(r,i,s,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function RE(n,e){let t;if(e instanceof P_)t={update:PU(n,e.key,e.value)};else if(e instanceof N_)t={delete:ME(n,e.key)};else if(e instanceof Oh)t={update:PU(n,e.key,e.data),updateMask:Q8(e.fieldMask)};else{if(!(e instanceof uO))return qt();t={verify:ME(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof O_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Gm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zm)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof R_)return{fieldPath:s.field.canonicalString(),increment:l.It};throw qt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:H8(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:qt()),t;var i}function hO(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?oi.updateTime(Fi(i.updateTime)):void 0!==i.exists?oi.exists(i.exists):oi.none():oi.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let c=null;"setToServerValue"in l?(Xt("REQUEST_TIME"===l.setToServerValue),c=new O_):"appendMissingElements"in l?c=new Gm(l.appendMissingElements.values||[]):"removeAllFromArray"in l?c=new zm(l.removeAllFromArray.values||[]):"increment"in l?c=new R_(s,l.increment):qt();const f=Ci.fromServerFormat(l.fieldPath);return new CE(f,c)}(n,i)):[];var i;if(e.update){const i=Hc(n,e.update.name),s=new ks({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ia((e.updateMask.fieldPaths||[]).map(v=>Ci.fromServerFormat(v)));return new Oh(i,s,l,t,r)}return new P_(i,s,t,r)}if(e.delete){const i=Hc(n,e.delete);return new N_(i,t)}if(e.verify){const i=Hc(n,e.verify);return new uO(i,t)}return qt()}function LU(n,e){return{documents:[dO(n,e.path)]}}function fO(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dO(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dO(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(f){if(0!==f.length)return UU(pr.create(f,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(f){if(0!==f.length)return f.map(v=>{return{field:Ap((T=v).field),direction:K8(T.dir)};var T})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=(v=e.limit,n.yt||mE(v)?v:{value:v});var v,c,f;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function FU(n){let e=OU(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Xt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let s=[];t.where&&(s=function(T){const A=jU(T);return A instanceof pr&&nO(A)?A.getFilters():[A]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new A_(F_((A=T).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let c=null;t.limit&&(c=function(T){let A;return A="object"==typeof T?T.value:T,mE(A)?null:A}(t.limit));let f=null;var T;t.startAt&&(f=new Ip((T=t.startAt).values||[],!!T.before));let v=null;return t.endAt&&(v=function(T){return new Ip(T.values||[],!T.before)}(t.endAt)),nU(e,i,l,s,c,"F",f,v)}function jU(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=F_(e.unaryFilter.field);return Kn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=F_(e.unaryFilter.field);return Kn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=F_(e.unaryFilter.field);return Kn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=F_(e.unaryFilter.field);return Kn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return qt()}}(n):void 0!==n.fieldFilter?function(e){return Kn.create(F_(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):void 0!==n.compositeFilter?function(e){return pr.create(e.compositeFilter.filters.map(t=>jU(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return qt()}}(e.compositeFilter.op))}(n):qt()}function K8(n){return U8[n]}function Z8(n){return B8[n]}function Y8(n){return V8[n]}function Ap(n){return{fieldPath:n.canonicalString()}}function F_(n){return Ci.fromServerFormat(n.fieldPath)}function UU(n){return n instanceof Kn?function(e){if("=="===e.op){if(Uj(e.value))return{unaryFilter:{field:Ap(e.field),op:"IS_NAN"}};if(jj(e.value))return{unaryFilter:{field:Ap(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Uj(e.value))return{unaryFilter:{field:Ap(e.field),op:"IS_NOT_NAN"}};if(jj(e.value))return{unaryFilter:{field:Ap(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ap(e.field),op:Z8(e.op),value:e.value}}}(n):n instanceof pr?function(e){const t=e.getFilters().map(r=>UU(r));return 1===t.length?t[0]:{compositeFilter:{op:Y8(e.op),filters:t}}}(n):qt()}function Q8(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ho(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VU(e)),e=X8(n.get(t),e);return VU(e)}function X8(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function VU(n){return n+"\x01\x01"}function Gc(n){const e=n.length;if(Xt(e>=2),2===e)return Xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),er.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&qt(),n.charAt(l+1)){case"\x01":const c=n.substring(s,l);let f;0===i.length?f=c:(i+=c,f=i,i=""),r.push(f);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:qt()}s=l+2}return new er(r)}const $U=["userId","batchId"];function LI(n,e){return[n,Ho(e)]}function HU(n,e,t){return[n,Ho(e),t]}const J8={},eG=["prefixPath","collectionGroup","readTime","documentId"],tG=["prefixPath","collectionGroup","documentId"],nG=["collectionGroup","readTime","prefixPath","documentId"],rG=["canonicalId","targetId"],iG=["targetId","path"],sG=["path","targetId"],oG=["collectionId","parent"],aG=["indexId","uid"],lG=["uid","sequenceNumber"],uG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cG=["indexId","uid","orderedDocumentKey"],dG=["userId","collectionPath","documentId"],hG=["userId","collectionPath","largestBatchId"],fG=["userId","collectionGroup","largestBatchId"],GU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pG=[...GU,"documentOverlays"],zU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qU=zU,gG=[...qU,"indexConfiguration","indexState","indexEntries"];class pO extends Mj{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function Ms(n,e){const t=Lt(n);return Vu.M(t.re,e)}class gO{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&M8(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=SU();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let c=this.applyToLocalView(l,s.mutatedFields);c=t.has(i.key)?null:c;const f=gU(l,c);null!==f&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(sn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fn())}isEqual(e){return this.batchId===e.batchId&&x_(this.mutations,e.mutations,(t,r)=>mU(t,r))&&x_(this.baseMutations,e.baseMutations,(t,r)=>mU(t,r))}}class mO{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Xt(e.mutations.length===r.length);let i=N8;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new mO(e,t,r,i)}}class yO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kp{constructor(e,t,r,i,s=sn.min(),l=sn.min(),c=fs.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c}withSequenceNumber(e){return new kp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new kp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new kp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class WU{constructor(e){this.oe=e}}function KU(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ME(i=n.oe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:L_(i,s.version.toTimestamp()),createTime:L_(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qm(e.version)};else{if(!e.isUnknownDocument())return qt();r.unknownDocument={path:t.path.toArray(),version:qm(e.version)}}var i,s;return r}function FI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wm(n){const e=new si(n.seconds,n.nanoseconds);return sn.fromTimestamp(e)}function Km(n,e){const t=(e.baseMutations||[]).map(s=>hO(n.oe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>hO(n.oe,s)),i=si.fromMillis(e.localWriteTimeMs);return new gO(e.batchId,i,t,r)}function PE(n){const e=Wm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Wm(n.lastLimboFreeSnapshotVersion):sn.min();let r;var i;return void 0!==n.query.documents?(Xt(1===(i=n.query).documents.length),r=$o(M_(OU(i.documents[0])))):r=$o(FU(n.query)),new kp(r,n.targetId,0,n.lastListenSequenceNumber,e,t,fs.fromBase64String(n.resumeToken))}function ZU(n,e){const t=qm(e.snapshotVersion),r=qm(e.lastLimboFreeSnapshotVersion);let i;i=II(e.target)?LU(n.oe,e.target):fO(n.oe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$m(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function vO(n){const e=FU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?kI(e,e.limit,"L"):e}function _O(n,e){return new yO(e.largestBatchId,hO(n.oe,e.overlayMutation))}function YU(n,e){const t=e.path.lastSegment();return[n,Ho(e.path.popLast()),t]}function QU(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:qm(r.readTime),documentKey:Ho(r.documentKey.path),largestBatchId:r.largestBatchId}}class yG{getBundleMetadata(e,t){return XU(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Wm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return XU(e).put({bundleId:(r=t).id,createTime:qm(Fi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return JU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:vO(i.bundledQuery),readTime:Wm(i.readTime)};var i})}saveNamedQuery(e,t){return JU(e).put({name:(r=t).name,readTime:qm(Fi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function XU(n){return Ms(n,"bundles")}function JU(n){return Ms(n,"namedQueries")}class jI{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new jI(e,t.uid||"")}getOverlay(e,t){return NE(e).get(YU(this.userId,t)).next(r=>r?_O(this.Tt,r):null)}getOverlays(e,t){const r=$c();return Je.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const c=new yO(t,l);i.push(this.ce(e,c))}),Je.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ho(l.getCollectionPath())));const s=[];return i.forEach(l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(NE(e).Y("collectionPathOverlayIndex",c))}),Je.waitFor(s)}getOverlaysForCollection(e,t,r){const i=$c(),s=Ho(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return NE(e).W("collectionPathOverlayIndex",l).next(c=>{for(const f of c){const v=_O(this.Tt,f);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=$c();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return NE(e).X({index:"collectionGroupOverlayIndex",range:c},(f,v,T)=>{const A=_O(this.Tt,v);s.size()<i||A.largestBatchId===l?(s.set(A.getKey(),A),l=A.largestBatchId):T.done()}).next(()=>s)}ce(e,t){return NE(e).put(function(r,i,s){const[l,c,f]=YU(i,s.mutation.key);return{userId:i,collectionPath:c,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:RE(r.oe,s.mutation)}}(this.Tt,this.userId,t))}}function NE(n){return Ms(n,"documentOverlays")}class Zm{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(xi(e.integerValue));else if("doubleValue"in e){const r=xi(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),yE(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Um(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?Bj(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):qt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const i of Object.keys(r))this.we(i,t),this.he(r[i],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const i of r)this.he(i,t)}ye(e,t){this.fe(t,37),Nt.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function vG(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function e2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=vG(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Zm.Ee=new Zm;class _G{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const i=t.codePointAt(0);this.Re(240|i>>>18),this.Re(128|63&i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i)}}this.Pe()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Ve()}Ce(e){const t=this.xe(e),r=e2(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}ke(e){const t=this.xe(e),r=e2(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class bG{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class TG{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class LE{constructor(){this.Le=new _G,this.qe=new bG(this.Le),this.Ue=new TG(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class Ym{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ym(this.indexId,this.documentKey,this.arrayValue,r)}}function Mp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=t2(n.arrayValue,e.arrayValue),0!==t?t:(t=t2(n.directionalValue,e.directionalValue),0!==t?t:Nt.comparator(n.documentKey,e.documentKey)))}function t2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class EG{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){Xt(e.collectionGroup===this.collectionId);const t=WM(e);if(void 0!==t&&!this.He(t))return!1;const r=Lm(e);let i=0,s=0;for(;i<r.length&&this.He(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.ze){const l=r[i];if(!this.Je(this.ze,l)||!this.Ye(this.Qe[s++],l))return!1;++i}for(;i<r.length;++i)if(s>=this.Qe.length||!this.Ye(this.Qe[s++],r[i]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function n2(n){var e,t;if(Xt(n instanceof Kn||n instanceof pr),n instanceof Kn){if(n instanceof Qj){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Kn.create(n.field,"==",s)))||[];return pr.create(i,"or")}return n}const r=n.filters.map(i=>n2(i));return pr.create(r,n.op)}function wG(n){if(0===n.getFilters().length)return[];const e=EO(n2(n));return Xt(r2(e)),bO(e)||TO(e)?[e]:e.getFilters()}function bO(n){return n instanceof Kn}function TO(n){return n instanceof pr&&nO(n)}function r2(n){return bO(n)||TO(n)||function(e){if(e instanceof pr&&tO(e)){for(const t of e.getFilters())if(!bO(t)&&!TO(t))return!1;return!0}return!1}(n)}function EO(n){if(Xt(n instanceof Kn||n instanceof pr),n instanceof Kn)return n;if(1===n.filters.length)return EO(n.filters[0]);const e=n.filters.map(r=>EO(r));let t=pr.create(e,n.op);return t=UI(t),r2(t)?t:(Xt(t instanceof pr),Xt(D_(t)),Xt(t.filters.length>1),t.filters.reduce((r,i)=>wO(r,i)))}function wO(n,e){let t;return Xt(n instanceof Kn||n instanceof pr),Xt(e instanceof Kn||e instanceof pr),t=n instanceof Kn?e instanceof Kn?pr.create([n,e],"and"):i2(n,e):e instanceof Kn?i2(e,n):function(r,i){if(Xt(r.filters.length>0&&i.filters.length>0),D_(r)&&D_(i))return Kj(r,i.getFilters());const s=tO(r)?r:i,l=tO(r)?i:r,c=s.filters.map(f=>wO(f,l));return pr.create(c,"or")}(n,e),UI(t)}function i2(n,e){if(D_(e))return Kj(e,n.getFilters());{const t=e.filters.map(r=>wO(n,r));return pr.create(t,"or")}}function UI(n){if(Xt(n instanceof Kn||n instanceof pr),n instanceof Kn)return n;const e=n.getFilters();if(1===e.length)return UI(e[0]);if(qj(n))return n;const t=e.map(i=>UI(i)),r=[];return t.forEach(i=>{i instanceof Kn?r.push(i):i instanceof pr&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:pr.create(r,n.op)}class SG{constructor(){this.Ze=new SO}addToCollectionParentIndex(e,t){return this.Ze.add(t),Je.resolve()}getCollectionParents(e,t){return Je.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return Je.resolve()}deleteFieldIndex(e,t){return Je.resolve()}getDocumentsMatchingTarget(e,t){return Je.resolve(null)}getIndexType(e,t){return Je.resolve(0)}getFieldIndexes(e,t){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,t){return Je.resolve(yl.min())}getMinOffsetFromCollectionGroup(e,t){return Je.resolve(yl.min())}updateCollectionGroup(e,t,r){return Je.resolve()}updateIndexEntries(e,t){return Je.resolve()}}class SO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wr(er.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wr(er.comparator)).toArray()}}const BI=new Uint8Array(0);class CG{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new SO,this.tn=new Dp(r=>$m(r),(r,i)=>EE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:Ho(i)};return s2(e).put(s)}return Je.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ij(t),""],!1,!0);return s2(e).W(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(Gc(l.parent))}return r})}addFieldIndex(e,t){const r=VI(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const l=jE(e);return s.next(c=>{l.put(QU(c,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=VI(e),i=jE(e),s=FE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=FE(e);let i=!0;const s=new Map;return Je.forEach(this.en(t),l=>this.nn(e,l).next(c=>{i&&(i=!!c),s.set(l,c)})).next(()=>{if(i){let l=Fn();const c=[];return Je.forEach(s,(f,v)=>{var T;St("IndexedDbIndexManager",`Using index ${T=f,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(qe=>`${qe.fieldPath}:${qe.kind}`).join(",")}`} to execute ${$m(t)}`);const A=function(qe,Ie){const pe=WM(Ie);if(void 0===pe)return null;for(const at of DI(qe,pe.fieldPath))switch(at.op){case"array-contains-any":return at.value.arrayValue.values||[];case"array-contains":return[at.value]}return null}(v,f),j=function(qe,Ie){const pe=new Map;for(const at of Lm(Ie))for(const Dt of DI(qe,at.fieldPath))switch(Dt.op){case"==":case"in":pe.set(at.fieldPath.canonicalString(),Dt.value);break;case"not-in":case"!=":return pe.set(at.fieldPath.canonicalString(),Dt.value),Array.from(pe.values())}return null}(v,f),P=function(qe,Ie){const pe=[];let at=!0;for(const Dt of Lm(Ie)){const un=0===Dt.kind?eU(qe,Dt.fieldPath,qe.startAt):tU(qe,Dt.fieldPath,qe.startAt);pe.push(un.value),at&&(at=un.inclusive)}return new Ip(pe,at)}(v,f),W=function(qe,Ie){const pe=[];let at=!0;for(const Dt of Lm(Ie)){const un=0===Dt.kind?tU(qe,Dt.fieldPath,qe.endAt):eU(qe,Dt.fieldPath,qe.endAt);pe.push(un.value),at&&(at=un.inclusive)}return new Ip(pe,at)}(v,f),J=this.sn(f,v,P),se=this.sn(f,v,W),Ne=this.rn(f,v,j),Qe=this.on(f.indexId,A,J,P.inclusive,se,W.inclusive,Ne);return Je.forEach(Qe,qe=>r.J(qe,t.limit).next(Ie=>{Ie.forEach(pe=>{const at=Nt.fromSegments(pe.documentKey);l.has(at)||(l=l.add(at),c.push(at))})}))}).next(()=>c)}return Je.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:wG(pr.create(e.filters,"and")).map(r=>iO(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,i,s,l,c){const f=(null!=t?t.length:1)*Math.max(r.length,s.length),v=f/(null!=t?t.length:1),T=[];for(let A=0;A<f;++A){const j=t?this.un(t[A/v]):BI,P=this.cn(e,j,r[A%v],i),W=this.an(e,j,s[A%v],l),J=c.map(se=>this.cn(e,j,se,!0));T.push(...this.createRange(P,W,J))}return T}cn(e,t,r,i){const s=new Ym(e,Nt.empty(),t,r);return i?s:s.Ge()}an(e,t,r,i){const s=new Ym(e,Nt.empty(),t,r);return i?s.Ge():s}nn(e,t){const r=new EG(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const c of s)r.We(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l})}getIndexType(e,t){let r=2;const i=this.en(t);return Je.forEach(i,s=>this.nn(e,s).next(l=>{l?0!==r&&l.fields.length<function(c){let f=new wr(Ci.comparator),v=!1;for(const T of c.filters)for(const A of T.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:f=f.add(A.field));for(const T of c.orderBy)T.field.isKeyField()||(f=f.add(T.field));return f.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}hn(e,t){const r=new LE;for(const i of Lm(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.Ke(i.kind);Zm.Ee.ae(s,l)}return r.Be()}un(e){const t=new LE;return Zm.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new LE;return Zm.Ee.ae(Vm(this.databaseId,t),r.Ke(function(i){const s=Lm(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let i=[];i.push(new LE);let s=0;for(const l of Lm(e)){const c=r[s++];for(const f of i)if(this.fn(t,l.fieldPath)&&bE(c))i=this.dn(i,l,c);else{const v=f.Ke(l.kind);Zm.Ee.ae(c,v)}}return this._n(i)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const c of i){const f=new LE;f.seed(c.Be()),Zm.Ee.ae(l,f.Ke(t.kind)),s.push(f)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Kn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=VI(e),i=jE(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const l=[];return Je.forEach(s,c=>i.get([c.indexId,this.uid]).next(f=>{l.push(function(v,T){const A=T?new pE(T.sequenceNumber,new yl(Wm(T.readTime),new Nt(Gc(T.documentKey)),T.largestBatchId)):pE.empty(),j=v.fields.map(([P,W])=>new EI(Ci.fromServerFormat(P),W));return new TI(v.indexId,v.collectionGroup,j,A)}(c,f))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:An(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=VI(e),s=jE(e);return this.wn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>Je.forEach(c,f=>s.put(QU(f.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return Je.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?Je.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),Je.forEach(c,f=>this.mn(e,i,f).next(v=>{const T=this.gn(s,f);return v.isEqual(T)?Je.resolve():this.yn(e,s,f,v,T)}))))})}pn(e,t,r,i){return FE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,i){return FE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const i=FE(e);let s=new wr(Mp);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(l,c)=>{s=s.add(new Ym(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}gn(e,t){let r=new wr(Mp);const i=this.hn(t,e);if(null==i)return r;const s=WM(t);if(null!=s){const l=e.data.field(s.fieldPath);if(bE(l))for(const c of l.arrayValue.values||[])r=r.add(new Ym(t.indexId,e.key,this.un(c),i))}else r=r.add(new Ym(t.indexId,e.key,BI,i));return r}yn(e,t,r,i,s){St("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(c,f,v,T,A){const j=c.getIterator(),P=f.getIterator();let W=k_(j),J=k_(P);for(;W||J;){let se=!1,Ne=!1;if(W&&J){const Qe=v(W,J);Qe<0?Ne=!0:Qe>0&&(se=!0)}else null!=W?Ne=!0:se=!0;se?(T(J),J=k_(P)):Ne?(A(W),W=k_(j)):(W=k_(j),J=k_(P))}}(i,s,Mp,c=>{l.push(this.pn(e,t,r,c))},c=>{l.push(this.In(e,t,r,c))}),Je.waitFor(l)}wn(e){let t=1;return jE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,c)=>Mp(l,c)).filter((l,c,f)=>!c||0!==Mp(l,f[c-1]));const i=[];i.push(e);for(const l of r){const c=Mp(l,e),f=Mp(l,t);if(0===c)i[0]=e.Ge();else if(c>0&&f<0)i.push(l),i.push(l.Ge());else if(f>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2){if(this.Tn(i[l],i[l+1]))return[];s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,BI,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,BI,[]]))}return s}Tn(e,t){return Mp(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(o2)}getMinOffset(e,t){return Je.mapArray(this.en(t),r=>this.nn(e,r).next(i=>i||qt())).next(o2)}}function s2(n){return Ms(n,"collectionParents")}function FE(n){return Ms(n,"indexEntries")}function VI(n){return Ms(n,"indexConfiguration")}function jE(n){return Ms(n,"indexState")}function o2(n){Xt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;KM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new yl(e.readTime,e.documentKey,t)}const a2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Aa{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Aa(e,Aa.DEFAULT_COLLECTION_PERCENTILE,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function l2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let c=0;const f=r.X({range:l},(T,A,j)=>(c++,j.delete()));s.push(f.next(()=>{Xt(1===c)}));const v=[];for(const T of t.mutations){const A=HU(e,T.key.path,t.batchId);s.push(i.delete(A)),v.push(T.key)}return Je.waitFor(s).next(()=>v)}function $I(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw qt();e=n.noDocument}return JSON.stringify(e).length}Aa.DEFAULT_COLLECTION_PERCENTILE=10,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Aa.DEFAULT=new Aa(41943040,Aa.DEFAULT_COLLECTION_PERCENTILE,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Aa.DISABLED=new Aa(-1,0,0);class HI{constructor(e,t,r,i){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=i,this.En={}}static ue(e,t,r,i){Xt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new HI(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Op(e).X({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=j_(e),l=Op(e);return l.add({}).next(c=>{Xt("number"==typeof c);const f=new gO(c,t,r,i),v=function(j,P,W){const J=W.baseMutations.map(Ne=>RE(j.oe,Ne)),se=W.mutations.map(Ne=>RE(j.oe,Ne));return{userId:P,batchId:W.batchId,localWriteTimeMs:W.localWriteTime.toMillis(),baseMutations:J,mutations:se}}(this.Tt,this.userId,f),T=[];let A=new wr((j,P)=>An(j.canonicalString(),P.canonicalString()));for(const j of i){const P=HU(this.userId,j.key.path,c);A=A.add(j.key.path.popLast()),T.push(l.put(v)),T.push(s.put(P,J8))}return A.forEach(j=>{T.push(this.indexManager.addToCollectionParentIndex(e,j))}),e.addOnCommittedListener(()=>{this.En[c]=f.keys()}),Je.waitFor(T).next(()=>f)})}lookupMutationBatch(e,t){return Op(e).get(t).next(r=>r?(Xt(r.userId===this.userId),Km(this.Tt,r)):null)}An(e,t){return this.En[t]?Je.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.En[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Op(e).X({index:"userMutationsIndex",range:i},(l,c,f)=>{c.userId===this.userId&&(Xt(c.batchId>=r),s=Km(this.Tt,c)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Op(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Op(e).W("userMutationsIndex",t).next(r=>r.map(i=>Km(this.Tt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=LI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return j_(e).X({range:i},(l,c,f)=>{const[v,T,A]=l,j=Gc(T);if(v===this.userId&&t.path.isEqual(j))return Op(e).get(A).next(P=>{if(!P)throw qt();Xt(P.userId===this.userId),s.push(Km(this.Tt,P))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wr(An);const i=[];return t.forEach(s=>{const l=LI(this.userId,s.path),c=IDBKeyRange.lowerBound(l),f=j_(e).X({range:c},(v,T,A)=>{const[j,P,W]=v,J=Gc(P);j===this.userId&&s.path.isEqual(J)?r=r.add(W):A.done()});i.push(f)}),Je.waitFor(i).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=LI(this.userId,r),l=IDBKeyRange.lowerBound(s);let c=new wr(An);return j_(e).X({range:l},(f,v,T)=>{const[A,j,P]=f,W=Gc(j);A===this.userId&&r.isPrefixOf(W)?W.length===i&&(c=c.add(P)):T.done()}).next(()=>this.Rn(e,c))}Rn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Op(e).get(s).next(l=>{if(null===l)throw qt();Xt(l.userId===this.userId),r.push(Km(this.Tt,l))}))}),Je.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return l2(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),Je.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Je.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return j_(e).X({range:r},(s,l,c)=>{if(s[0]===this.userId){const f=Gc(s[1]);i.push(f)}else c.done()}).next(()=>{Xt(0===i.length)})})}containsKey(e,t){return u2(e,this.userId,t)}vn(e){return c2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function u2(n,e,t){const r=LI(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return j_(n).X({range:s,Z:!0},(c,f,v)=>{const[T,A,j]=c;T===e&&A===i&&(l=!0),v.done()}).next(()=>l)}function Op(n){return Ms(n,"mutations")}function j_(n){return Ms(n,"documentMutations")}function c2(n){return Ms(n,"mutationQueues")}class Qm{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new Qm(0)}static Sn(){return new Qm(-1)}}class xG{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new Qm(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>sn.fromTimestamp(new si(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Cn(e,i)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>U_(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(Xt(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return U_(e).X((l,c)=>{const f=PE(c);f.sequenceNumber<=t&&null===r.get(f.targetId)&&(i++,s.push(this.removeTargetData(e,f)))}).next(()=>Je.waitFor(s)).next(()=>i)}forEachTarget(e,t){return U_(e).X((r,i)=>{const s=PE(i);t(s)})}Dn(e){return d2(e).get("targetGlobalKey").next(t=>(Xt(null!==t),t))}Cn(e,t){return d2(e).put("targetGlobalKey",t)}xn(e,t){return U_(e).put(ZU(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$m(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return U_(e).X({range:i,index:"queryTargetsIndex"},(l,c,f)=>{const v=PE(c);EE(t,v.target)&&(s=v,f.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Rp(e);return t.forEach(l=>{const c=Ho(l.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))}),Je.waitFor(i)}removeMatchingKeys(e,t,r){const i=Rp(e);return Je.forEach(t,s=>{const l=Ho(s.path);return Je.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Rp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Rp(e);let s=Fn();return i.X({range:r,Z:!0},(l,c,f)=>{const v=Gc(l[1]),T=new Nt(v);s=s.add(T)}).next(()=>s)}containsKey(e,t){const r=Ho(t.path),i=IDBKeyRange.bound([r],[Ij(r)],!1,!0);let s=0;return Rp(e).X({index:"documentTargetsIndex",Z:!0,range:i},([l,c],f,v)=>{0!==l&&(s++,v.done())}).next(()=>s>0)}ie(e,t){return U_(e).get(t).next(r=>r?PE(r):null)}}function U_(n){return Ms(n,"targets")}function d2(n){return Ms(n,"targetGlobal")}function Rp(n){return Ms(n,"targetDocuments")}function h2([n,e],[t,r]){const i=An(n,t);return 0===i?An(e,r):i}class IG{constructor(e){this.kn=e,this.buffer=new wr(h2),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();h2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DG{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;St("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,tt.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ep(r)?St("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Tp(r)}yield t.Bn(3e5)}))}}class AG{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Je.resolve(vl.at);const r=new IG(t);return this.Ln.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.Ln.Un(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(a2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a2):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,i,s,l,c,f,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(St("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,l=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,c=Date.now(),this.removeTargets(e,r,t))).next(A=>(s=A,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(v=Date.now(),zM()<=yp.in.DEBUG&&St("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(c-l)+`ms\n\tRemoved ${s} targets in `+(f-c)+`ms\n\tRemoved ${A} documents in `+(v-f)+`ms\nTotal Duration: ${v-T}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:A})))}}class kG{constructor(e,t){this.db=e,this.garbageCollector=new AG(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,i)=>t(i))}addReference(e,t,r){return GI(e,r)}removeReference(e,t,r){return GI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return GI(e,t)}jn(e,t){return function(r,i){let s=!1;return c2(r).tt(l=>u2(r,l,i).next(c=>(c&&(s=!0),Je.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Qn(e,(l,c)=>{if(c<=t){const f=this.jn(e,l).next(v=>{if(!v)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,sn.min()),Rp(e).delete([0,Ho(l.path)])))});i.push(f)}}).next(()=>Je.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return GI(e,t)}Qn(e,t){const r=Rp(e);let i,s=vl.at;return r.X({index:"documentTargetsIndex"},([l,c],{path:f,sequenceNumber:v})=>{0===l?(s!==vl.at&&t(new Nt(Gc(i)),s),s=v,i=f):s=vl.at}).next(()=>{s!==vl.at&&t(new Nt(Gc(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function GI(n,e){return Rp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ho(e.path),sequenceNumber:r}));var r}class f2{constructor(){this.changes=new Dp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Je.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class MG{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xm(e).put(r)}removeEntry(e,t,r){return Xm(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],FI(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=Hr.newInvalidDocument(t);return Xm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(UE(t))},(i,s)=>{r=this.Wn(t,s)}).next(()=>r)}Hn(e,t){let r={size:0,document:Hr.newInvalidDocument(t)};return Xm(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(UE(t))},(i,s)=>{r={document:this.Wn(t,s),size:$I(s)}}).next(()=>r)}getEntries(e,t){let r=Da();return this.Jn(e,t,(i,s)=>{const l=this.Wn(i,s);r=r.insert(i,l)}).next(()=>r)}Yn(e,t){let r=Da(),i=new Ii(Nt.comparator);return this.Jn(e,t,(s,l)=>{const c=this.Wn(s,l);r=r.insert(s,c),i=i.insert(s,$I(l))}).next(()=>({documents:r,Zn:i}))}Jn(e,t,r){if(t.isEmpty())return Je.resolve();let i=new wr(y2);t.forEach(f=>i=i.add(f));const s=IDBKeyRange.bound(UE(i.first()),UE(i.last())),l=i.getIterator();let c=l.getNext();return Xm(e).X({index:"documentKeyIndex",range:s},(f,v,T)=>{const A=Nt.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;c&&y2(c,A)<0;)r(c,null),c=l.getNext();c&&c.isEqual(A)&&(r(c,v),c=l.hasNext()?l.getNext():null),c?T.j(UE(c)):T.done()}).next(()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,l=[s.popLast().toArray(),s.lastSegment(),FI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xm(e).W(IDBKeyRange.bound(l,c,!0)).next(f=>{let v=Da();for(const T of f){const A=this.Wn(Nt.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);A.isFoundDocument()&&(SE(t,A)||i.has(A.key))&&(v=v.insert(A.key,A))}return v})}getAllFromCollectionGroup(e,t,r,i){let s=Da();const l=m2(t,r),c=m2(t,yl.max());return Xm(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,c,!0)},(f,v,T)=>{const A=this.Wn(Nt.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);s=s.insert(A.key,A),s.size===i&&T.done()}).next(()=>s)}newChangeBuffer(e){return new OG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return g2(e).get("remoteDocumentGlobalKey").next(t=>(Xt(!!t),t))}zn(e,t){return g2(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function mG(n,e){let t;if(e.document)t=NU(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Nt.fromSegments(e.noDocument.path),i=Wm(e.noDocument.readTime);t=Hr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return qt();{const r=Nt.fromSegments(e.unknownDocument.path),i=Wm(e.unknownDocument.version);t=Hr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new si(r[0],r[1]);return sn.fromTimestamp(i)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(sn.min()))return r}return Hr.newInvalidDocument(e)}}function p2(n){return new MG(n)}class OG extends f2{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new Dp(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new wr((s,l)=>An(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const c=this.ts.get(s);if(t.push(this.Xn.removeEntry(e,s,c.readTime)),l.isValidDocument()){const f=KU(this.Xn.Tt,l);i=i.add(s.path.popLast());const v=$I(f);r+=v-c.size,t.push(this.Xn.addEntry(e,s,f))}else if(r-=c.size,this.trackRemovals){const f=KU(this.Xn.Tt,l.convertToNoDocument(sn.min()));t.push(this.Xn.addEntry(e,s,f))}}),i.forEach(s=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Xn.updateMetadata(e,r)),Je.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:i})=>(i.forEach((s,l)=>{this.ts.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function g2(n){return Ms(n,"remoteDocumentGlobal")}function Xm(n){return Ms(n,"remoteDocumentsV14")}function UE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function m2(n,e){const t=e.documentKey.path.toArray();return[n,FI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function y2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=An(t[s],r[s]),i)return i;return i=An(t.length,r.length),i||(i=An(t[t.length-2],r[r.length-2]),i||An(t[t.length-1],r[r.length-1]))}class RG{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class v2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&xE(r.mutation,i,Ia.empty(),si.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Fn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Fn()){const i=$c();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=IE();return s.forEach((c,f)=>{l=l.insert(c,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=$c();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Fn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let s=Da();const l=DE(),c=DE();return t.forEach((f,v)=>{const T=r.get(v.key);i.has(v.key)&&(void 0===T||T.mutation instanceof Oh)?s=s.insert(v.key,v):void 0!==T?(l.set(v.key,T.mutation.getFieldMask()),xE(T.mutation,v,T.mutation.getFieldMask(),si.now())):l.set(v.key,Ia.empty())}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((v,T)=>l.set(v,T)),t.forEach((v,T)=>{var A;return c.set(v,new RG(T,null!==(A=l.get(v))&&void 0!==A?A:null))}),c))}recalculateAndSaveOverlays(e,t){const r=DE();let i=new Ii((l,c)=>l-c),s=Fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(f=>{const v=t.get(f);if(null===v)return;let T=r.get(f)||Ia.empty();T=c.applyToLocalView(v,T),r.set(f,T);const A=(i.get(c.batchId)||Fn()).add(f);i=i.insert(c.batchId,A)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),v=f.key,T=f.value,A=SU();T.forEach(j=>{if(!s.has(j)){const P=gU(t.get(j),r.get(j));null!==P&&A.set(j,P),s=s.add(j)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,A))}return Je.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Nt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):oO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Je.resolve($c());let c=-1,f=s;return l.next(v=>Je.forEach(v,(T,A)=>(c<A.largestBatchId&&(c=A.largestBatchId),s.get(T)?Je.resolve():this.remoteDocumentCache.getEntry(e,T).next(j=>{f=f.insert(T,j)}))).next(()=>this.populateOverlays(e,v,s)).next(()=>this.computeViews(e,f,v,Fn())).next(T=>({batchId:c,changes:wU(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Nt(t)).next(r=>{let i=IE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=IE();return this.indexManager.getCollectionParents(e,i).next(l=>Je.forEach(l,c=>{const f=(v=t,T=c.child(i),new Mh(T,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,T;return this.getDocumentsMatchingCollectionQuery(e,f,r).next(v=>{v.forEach((T,A)=>{s=s.insert(T,A)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((c,f)=>{const v=f.getKey();null===s.get(v)&&(s=s.insert(v,Hr.newInvalidDocument(v)))});let l=IE();return s.forEach((c,f)=>{const v=i.get(c);void 0!==v&&xE(v.mutation,f,Ia.empty(),si.now()),SE(t,f)&&(l=l.insert(c,f))}),l})}}class PG{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return Je.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:Fi(r.createTime)}),Je.resolve()}getNamedQuery(e,t){return Je.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:vO(r.bundledQuery),readTime:Fi(r.readTime)}),Je.resolve();var r}}class NG{constructor(){this.overlays=new Ii(Nt.comparator),this.ss=new Map}getOverlay(e,t){return Je.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$c();return Je.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ce(e,t,s)}),Je.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ss.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ss.delete(r)),Je.resolve()}getOverlaysForCollection(e,t,r){const i=$c(),s=t.length+1,l=new Nt(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,v=f.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return Je.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ii((v,T)=>v-T);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=s.get(v.largestBatchId);null===T&&(T=$c(),s=s.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const c=$c(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((v,T)=>c.set(v,T)),!(c.size()>=i)););return Je.resolve(c)}ce(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new yO(t,r));let s=this.ss.get(t);void 0===s&&(s=Fn(),this.ss.set(t,s)),this.ss.set(t,s.add(r.key))}}class CO{constructor(){this.rs=new wr(Os.os),this.us=new wr(Os.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Os(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Os(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new Nt(new er([])),r=new Os(t,e),i=new Os(t,e+1),s=[];return this.us.forEachInRange([r,i],l=>{this.ls(l),s.push(l.key)}),s}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new Nt(new er([])),r=new Os(t,e),i=new Os(t,e+1);let s=Fn();return this.us.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Os(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Os{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return Nt.comparator(e.key,t.key)||An(e.gs,t.gs)}static cs(e,t){return An(e.gs,t.gs)||Nt.comparator(e.key,t.key)}}class LG{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new wr(Os.os)}checkEmpty(e){return Je.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ys;this.ys++;const l=new gO(s,t,r,i);this.mutationQueue.push(l);for(const c of i)this.ps=this.ps.add(new Os(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Je.resolve(l)}lookupMutationBatch(e,t){return Je.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ts(t+1),s=i<0?0:i;return Je.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Os(t,0),i=new Os(t,Number.POSITIVE_INFINITY),s=[];return this.ps.forEachInRange([r,i],l=>{const c=this.Is(l.gs);s.push(c)}),Je.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wr(An);return t.forEach(i=>{const s=new Os(i,0),l=new Os(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([s,l],c=>{r=r.add(c.gs)})}),Je.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Nt.isDocumentKey(s)||(s=s.child(""));const l=new Os(new Nt(s),0);let c=new wr(An);return this.ps.forEachWhile(f=>{const v=f.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(c=c.add(f.gs)),!0)},l),Je.resolve(this.Es(c))}Es(e){const t=[];return e.forEach(r=>{const i=this.Is(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Xt(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return Je.forEach(t.mutations,i=>{const s=new Os(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){const r=new Os(t,0),i=this.ps.firstAfterOrEqual(r);return Je.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Je.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class FG{constructor(e){this.Rs=e,this.docs=new Ii(Nt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Je.resolve(r?r.document.mutableCopy():Hr.newInvalidDocument(t))}getEntries(e,t){let r=Da();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Hr.newInvalidDocument(i))}),Je.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Da();const l=t.path,c=new Nt(l.child("")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:v,value:{document:T}}=f.getNext();if(!l.isPrefixOf(v.path))break;v.path.length>l.length+1||KM(Aj(T),r)<=0||(i.has(T.key)||SE(t,T))&&(s=s.insert(T.key,T.mutableCopy()))}return Je.resolve(s)}getAllFromCollectionGroup(e,t,r,i){qt()}Ps(e,t){return Je.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jG(this)}getSize(e){return Je.resolve(this.size)}}class jG extends f2{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),Je.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class UG{constructor(e){this.persistence=e,this.vs=new Dp(t=>$m(t),EE),this.lastRemoteSnapshotVersion=sn.min(),this.highestTargetId=0,this.bs=0,this.Vs=new CO,this.targetCount=0,this.Ss=Qm.Vn()}forEachTarget(e,t){return this.vs.forEach((r,i)=>t(i)),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),Je.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new Qm(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,Je.resolve()}updateTargetData(e,t){return this.xn(t),Je.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.vs.forEach((l,c)=>{c.sequenceNumber<=t&&null===r.get(c.targetId)&&(this.vs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),Je.waitFor(s).next(()=>i)}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return Je.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),Je.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),Je.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),Je.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return Je.resolve(r)}containsKey(e,t){return Je.resolve(this.Vs.containsKey(t))}}class _2{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new vl(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new UG(this),this.indexManager=new SG,this.remoteDocumentCache=new FG(r=>this.referenceDelegate.ks(r)),this.Tt=new WU(t),this.$s=new PG(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new LG(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){St("MemoryPersistence","Starting transaction:",e);const i=new BG(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Fs(e,t){return Je.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class BG extends Mj{constructor(e){super(),this.currentSequenceNumber=e}}class zI{constructor(e){this.persistence=e,this.Bs=new CO,this.Ls=null}static qs(e){return new zI(e)}get Us(){if(this.Ls)return this.Ls;throw qt()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),Je.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),Je.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),Je.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Us.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.Us,r=>{const i=Nt.fromPath(r);return this.Ks(e,i).next(s=>{s||t.removeEntry(i,sn.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return Je.or([()=>Je.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class VG{constructor(e){this.Tt=e}F(e,t,r,i){const s=new wI("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$U,{unique:!0}),c.createObjectStore("documentMutations"),b2(e),function(c){c.createObjectStore("remoteDocuments")}(e));let l=Je.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),b2(e)),l=l.next(()=>function(c){const f=c.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sn.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",v)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(c,f){return f.store("mutations").W().next(v=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$U,{unique:!0});const T=f.store("mutations"),A=v.map(j=>T.put(j));return Je.waitFor(A)})}(e,s))),l=l.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Gs(s))),r<6&&i>=6&&(l=l.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(s)))),r<7&&i>=7&&(l=l.next(()=>this.js(s))),r<8&&i>=8&&(l=l.next(()=>this.zs(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ws(s))),r<11&&i>=11&&(l=l.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(c){const f=c.createObjectStore("documentOverlays",{keyPath:dG});f.createIndex("collectionPathOverlayIndex",hG,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",fG,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(c){const f=c.createObjectStore("remoteDocumentsV14",{keyPath:eG});f.createIndex("documentKeyIndex",tG),f.createIndex("collectionGroupIndex",nG)}(e)).next(()=>this.Hs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Js(e,s))),r<15&&i>=15&&(l=l.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:aG}).createIndex("sequenceNumberIndex",lG,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:uG}).createIndex("documentKeyIndex",cG,{unique:!1})}(e))),l}Qs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=$I(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>Je.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(c=>Je.forEach(c,f=>{Xt(f.userId===s.userId);const v=Km(this.Tt,f);return l2(e,s.userId,v).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((l,c)=>{const f=new er(l),v=[0,Ho(f)];s.push(t.get(v).next(T=>T?Je.resolve():t.put({targetId:0,path:Ho(f),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Je.waitFor(s))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:oG});const r=t.store("collectionParents"),i=new SO,s=l=>{if(i.add(l)){const c=l.lastSegment(),f=l.popLast();return r.put({collectionId:c,parent:Ho(f)})}};return t.store("remoteDocuments").X({Z:!0},(l,c)=>{const f=new er(l);return s(f.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([l,c,f],v)=>{const T=Gc(c);return s(T.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,i)=>{const s=PE(i),l=ZU(this.Tt,s);return t.put(l)})}Hs(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,l)=>{const c=t.store("remoteDocumentsV14"),f=(v=l,v.document?new Nt(er.fromString(v.document.name).popFirst(5)):v.noDocument?Nt.fromSegments(v.noDocument.path):v.unknownDocument?Nt.fromSegments(v.unknownDocument.path):qt()).path.toArray();var v;const T={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(T))}).next(()=>Je.waitFor(i))}Js(e,t){const r=t.store("mutations"),i=p2(this.Tt),s=new _2(zI.qs,this.Tt.oe);return r.W().next(l=>{const c=new Map;return l.forEach(f=>{var v;let T=null!==(v=c.get(f.userId))&&void 0!==v?v:Fn();Km(this.Tt,f).keys().forEach(A=>T=T.add(A)),c.set(f.userId,T)}),Je.forEach(c,(f,v)=>{const T=new As(v),A=jI.ue(this.Tt,T),j=s.getIndexManager(T),P=HI.ue(T,this.Tt,j,s.referenceDelegate);return new v2(i,P,A,j).recalculateAndSaveOverlaysForDocumentKeys(new pO(t,vl.at),f).next()})})}}function b2(n){n.createObjectStore("targetDocuments",{keyPath:iG}).createIndex("documentTargetsIndex",sG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rG,{unique:!0}),n.createObjectStore("targetGlobal")}const xO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class IO{constructor(e,t,r,i,s,l,c,f,v,T,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=s,this.window=l,this.document=c,this.Zs=v,this.Xs=T,this.ti=A,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=j=>Promise.resolve(),!IO.C())throw new Tt(rt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kG(this,i),this.oi=t+"main",this.Tt=new WU(f),this.ui=new Vu(this.oi,this.ti,new VG(this.Tt)),this.Ns=new xG(this.referenceDelegate,this.Tt),this.remoteDocumentCache=p2(this.Tt),this.$s=new yG,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===T&&Li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tt(rt.FAILED_PRECONDITION,xO);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new vl(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,tt.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,tt.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,tt.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Ep(e))return St("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return St("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return BE(e).get("owner").next(t=>Je.resolve(this.yi(t)))}pi(e){return qI(e).delete(this.clientId)}Ii(){var e=this;return(0,tt.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ms(r,"clientMetadata");return i.W().next(s=>{const l=e.Ei(s,18e5),c=s.filter(f=>-1===l.indexOf(f));return Je.forEach(c,f=>i.delete(f.clientId)).next(()=>c)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?Je.resolve(!0):BE(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Tt(rt.FAILED_PRECONDITION,xO);return!1}}return!(!this.networkEnabled||!this.inForeground)||qI(e).W().next(r=>void 0===this.Ei(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&St("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,tt.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new pO(t,vl.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>qI(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return HI.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new CG(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return jI.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,r){St("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.ti)?gG:14===l?qU:13===l?zU:12===l?pG:11===l?GU:void qt();var l;let c;return this.ui.runTransaction(e,i,s,f=>(c=new pO(f,this.Cs?this.Cs.next():vl.at),"readwrite-primary"===t?this._i(c).next(v=>!!v||this.wi(c)).next(v=>{if(!v)throw Li(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Tt(rt.FAILED_PRECONDITION,kj);return r(c)}).next(v=>this.gi(c).next(()=>v)):this.Di(c).next(()=>r(c)))).then(f=>(c.raiseOnCommittedEvent(),f))}Di(e){return BE(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Tt(rt.FAILED_PRECONDITION,xO)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return BE(e).put("owner",t)}static C(){return Vu.C()}mi(e){const t=BE(e);return t.get("owner").next(r=>this.yi(r)?(St("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Je.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(Li(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,Rn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return St("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Li("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){Li("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function BE(n){return Ms(n,"owner")}function qI(n){return Ms(n,"clientMetadata")}function DO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class AO{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=i}static Ni(e,t){let r=Fn(),i=Fn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new AO(e,t.fromCache,r,i)}}class T2{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Mi(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Fi(e,t))}Mi(e,t){if(rU(t))return Je.resolve(null);let r=$o(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=kI(t,null,"F"),r=$o(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=Fn(...s);return this.$i.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(f=>{const v=this.Bi(t,c);return this.Li(t,v,l,f.readTime)?this.Mi(e,kI(t,null,"F")):this.qi(e,v,t,f)}))})))}Oi(e,t,r,i){return rU(t)||i.isEqual(sn.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(s=>{const l=this.Bi(t,s);return this.Li(t,l,r,i)?this.Fi(e,t):(zM()<=yp.in.DEBUG&&St("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lO(t)),this.qi(e,l,t,Dj(i,-1)))})}Bi(e,t){let r=new wr(oU(e));return t.forEach((i,s)=>{SE(e,s)&&(r=r.add(s))}),r}Li(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Fi(e,t){return zM()<=yp.in.DEBUG&&St("QueryEngine","Using full collection scan to execute query:",lO(t)),this.$i.getDocumentsMatchingQuery(e,t,yl.min())}qi(e,t,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class $G{constructor(e,t,r,i){this.persistence=e,this.Ui=t,this.Tt=i,this.Ki=new Ii(An),this.Gi=new Dp(s=>$m(s),EE),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v2(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function E2(n,e,t,r){return new $G(n,e,t,r)}function w2(n,e){return kO.apply(this,arguments)}function kO(){return kO=(0,tt.Z)(function*(n,e){const t=Lt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],c=[];let f=Fn();for(const v of i){l.push(v.batchId);for(const T of v.mutations)f=f.add(T.key)}for(const v of s){c.push(v.batchId);for(const T of v.mutations)f=f.add(T.key)}return t.localDocuments.getDocuments(r,f).next(v=>({Wi:v,removedBatchIds:l,addedBatchIds:c}))})})}),kO.apply(this,arguments)}function S2(n){const e=Lt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function C2(n,e,t){let r=Fn(),i=Fn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=Da();return t.forEach((c,f)=>{const v=s.get(c);f.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(c)),f.isNoDocument()&&f.version.isEqual(sn.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!v.isValidDocument()||f.version.compareTo(v.version)>0||0===f.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):St("LocalStore","Ignoring outdated watch update for ",c,". Current version:",v.version," Watch version:",f.version)}),{Hi:l,Ji:i}})}function zG(n,e){const t=Lt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function B_(n,e){const t=Lt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ns.getTargetData(r,e).next(s=>s?(i=s,Je.resolve(i)):t.Ns.allocateTargetId(r).next(l=>(i=new kp(e,l,0,r.currentSequenceNumber),t.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ki.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function V_(n,e,t){return MO.apply(this,arguments)}function MO(){return MO=(0,tt.Z)(function*(n,e,t){const r=Lt(n),i=r.Ki.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ep(l))throw l;St("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}),MO.apply(this,arguments)}function WI(n,e,t){const r=Lt(n);let i=sn.min(),s=Fn();return r.persistence.runTransaction("Execute query","readonly",l=>function(c,f,v){const T=Lt(c),A=T.Gi.get(v);return void 0!==A?Je.resolve(T.Ki.get(A)):T.Ns.getTargetData(f,v)}(r,l,$o(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(l,c.targetId).next(f=>{s=f})}).next(()=>r.Ui.getDocumentsMatchingQuery(l,e,t?i:sn.min(),t?s:Fn())).next(c=>(D2(r,sU(e),c),{documents:c,Yi:s})))}function x2(n,e){const t=Lt(n),r=Lt(t.Ns),i=t.Ki.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ie(s,e).next(l=>l?l.target:null))}function I2(n,e){const t=Lt(n),r=t.Qi.get(e)||sn.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ji.getAllFromCollectionGroup(i,e,Dj(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(D2(t,e,i),i))}function D2(n,e,t){let r=n.Qi.get(e)||sn.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Qi.set(e,r)}function OO(){return OO=(0,tt.Z)(function*(n,e,t,r){const i=Lt(n);let s=Fn(),l=Da();for(const v of t){const T=e.Zi(v.metadata.name);v.document&&(s=s.add(T));const A=e.Xi(v);A.setReadTime(e.tr(v.metadata.readTime)),l=l.insert(T,A)}const c=i.ji.newChangeBuffer({trackRemovals:!0}),f=yield B_(i,(v=r,$o(M_(er.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>C2(v,c,l).next(T=>(c.apply(v),T)).next(T=>i.Ns.removeMatchingKeysForTargetId(v,f.targetId).next(()=>i.Ns.addMatchingKeys(v,s,f.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,T.Hi,T.Ji)).next(()=>T.Hi)))}),OO.apply(this,arguments)}function WG(n,e){return RO.apply(this,arguments)}function RO(){return RO=(0,tt.Z)(function*(n,e,t=Fn()){const r=yield B_(n,$o(vO(e.bundledQuery))),i=Lt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=Fi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.$s.saveNamedQuery(s,e);const c=r.withResumeToken(fs.EMPTY_BYTE_STRING,l);return i.Ki=i.Ki.insert(c.targetId,c),i.Ns.updateTargetData(s,c).next(()=>i.Ns.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ns.addMatchingKeys(s,t,r.targetId)).next(()=>i.$s.saveNamedQuery(s,e))})}),RO.apply(this,arguments)}function A2(n,e){return`firestore_clients_${n}_${e}`}function k2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function PO(n,e){return`firestore_targets_${n}_${e}`}class KI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static er(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new Tt(i.error.code,i.error.message))),l?new KI(e,t,i.state,s):(Li("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class VE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Tt(r.error.code,r.error.message))),s?new VE(e,r.state,i):(Li("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ZI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=PI();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=Nj(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new ZI(e,s):(Li("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class NO{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new NO(t.clientId,t.onlineState):(Li("SharedClientState",`Failed to parse online state: ${e}`),null)}}class LO{constructor(){this.activeTargetIds=PI()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FO{constructor(e,t,r,i,s){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new Ii(An),this.started=!1,this.hr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.lr=A2(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new LO),this._r=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,tt.Z)(function*(){const t=yield e.syncEngine.Si();for(const i of t){if(i===e.rr)continue;const s=e.getItem(A2(e.persistenceKey,i));if(s){const l=ZI.er(i,s);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const i=e.Ir(r);i&&e.Tr(i)}for(const i of e.hr)e.cr(i);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(PO(this.persistenceKey,e));if(r){const i=VE.er(e,r);i&&(t=i.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(PO(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Rr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return St("SharedClientState","READ",e,t),t}setItem(e,t){St("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){St("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(St("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void Li("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,tt.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const i=t.Sr(r.key);return t.Dr(i,null)}{const i=t.Cr(r.key,r.newValue);if(i)return t.Dr(i.clientId,i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const i=t.$r(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.gr){if(null!==r.newValue){const i=t.Ir(r.newValue);if(i)return t.Tr(i)}}else if(r.key===t.dr){const i=function(s){let l=vl.at;if(null!=s)try{const c=JSON.parse(s);Xt("number"==typeof c),l=c}catch(c){Li("SharedClientState","Failed to read sequence number from WebStorage",c)}return l}(r.newValue);i!==vl.at&&t.sequenceNumberHandler(i)}else if(r.key===t.yr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Fr(s)))}}else t.hr.push(r)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,r){const i=new KI(this.currentUser,e,t,r),s=k2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.nr())}Rr(e){const t=k2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const i=PO(this.persistenceKey,e),s=new VE(e,t,r);this.setItem(i,s.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return ZI.er(r,t)}Nr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return KI.er(new As(void 0!==r[2]?r[2]:null),i,t)}$r(e,t){const r=this.mr.exec(e),i=Number(r[1]);return VE.er(i,t)}Ir(e){return NO.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,tt.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);St("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Er(this.ar),s=this.Er(r),l=[],c=[];return s.forEach(f=>{i.has(f)||l.push(f)}),i.forEach(f=>{s.has(f)||c.push(f)}),this.syncEngine.qr(l,c).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=PI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class M2{constructor(){this.Ur=new LO,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new LO,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KG{Gr(e){}shutdown(){}}class O2{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){St("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){St("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let YI=null;function jO(){return null===YI?YI=268435456+Math.round(2147483648*Math.random()):YI++,"0x"+YI.toString(16)}const ZG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YG{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const mo="WebChannelConnection";class QG extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,i,s){const l=jO(),c=this.fo(e,t);St("RestConnection",`Sending RPC '${e}' ${l}:`,c,r);const f={};return this._o(f,i,s),this.wo(e,c,f,r).then(v=>(St("RestConnection",`Received RPC '${e}' ${l}: `,v),v),v=>{throw Nm("RestConnection",`RPC '${e}' ${l} failed with error: `,v,"url: ",c,"request:",r),v})}mo(e,t,r,i,s,l){return this.lo(e,t,r,i,s)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+C_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}fo(e,t){return`${this.co}/v1/${t}:${ZG[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,i){const s=jO();return new Promise((l,c)=>{const f=new W6;f.setWithCredentials(!0),f.listenOnce(G6.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case GM.NO_ERROR:const T=f.getResponseJson();St(mo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(T)),l(T);break;case GM.TIMEOUT:St(mo,`RPC '${e}' ${s} timed out`),c(new Tt(rt.DEADLINE_EXCEEDED,"Request time out"));break;case GM.HTTP_ERROR:const A=f.getStatus();if(St(mo,`RPC '${e}' ${s} failed with status:`,A,"response text:",f.getResponseText()),A>0){let j=f.getResponseJson();Array.isArray(j)&&(j=j[0]);const P=j?.error;if(P&&P.status&&P.message){const W=function(J){const se=J.toLowerCase().replace(/_/g,"-");return Object.values(rt).indexOf(se)>=0?se:rt.UNKNOWN}(P.status);c(new Tt(W,P.message))}else c(new Tt(rt.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Tt(rt.UNAVAILABLE,"Connection failed."));break;default:qt()}}finally{St(mo,`RPC '${e}' ${s} completed.`)}});const v=JSON.stringify(i);St(mo,`RPC '${e}' ${s} sending request:`,i),f.send(t,"POST",v,r,15)})}yo(e,t,r){const i=jO(),s=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=$6(),c=H6(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new q6({})),this._o(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=s.join("");St(mo,`Creating RPC '${e}' stream ${i}: ${v}`,f);const T=l.createWebChannel(v,f);let A=!1,j=!1;const P=new YG({Yr:J=>{j?St(mo,`Not sending because RPC '${e}' stream ${i} is closed:`,J):(A||(St(mo,`Opening RPC '${e}' stream ${i} transport.`),T.open(),A=!0),St(mo,`RPC '${e}' stream ${i} sending:`,J),T.send(J))},Zr:()=>T.close()}),W=(J,se,Ne)=>{J.listen(se,Qe=>{try{Ne(Qe)}catch(qe){setTimeout(()=>{throw qe},0)}})};return W(T,bI.EventType.OPEN,()=>{j||St(mo,`RPC '${e}' stream ${i} transport opened.`)}),W(T,bI.EventType.CLOSE,()=>{j||(j=!0,St(mo,`RPC '${e}' stream ${i} transport closed`),P.oo())}),W(T,bI.EventType.ERROR,J=>{j||(j=!0,Nm(mo,`RPC '${e}' stream ${i} transport errored:`,J),P.oo(new Tt(rt.UNAVAILABLE,"The operation could not be completed")))}),W(T,bI.EventType.MESSAGE,J=>{var se;if(!j){const Ne=J.data[0];Xt(!!Ne);const qe=Ne.error||(null===(se=Ne[0])||void 0===se?void 0:se.error);if(qe){St(mo,`RPC '${e}' stream ${i} received error:`,qe);const Ie=qe.status;let pe=function(Dt){const un=Xi[Dt];if(void 0!==un)return TU(un)}(Ie),at=qe.message;void 0===pe&&(pe=rt.INTERNAL,at="Unknown error status: "+Ie+" with message "+qe.message),j=!0,P.oo(new Tt(pe,at)),T.close()}else St(mo,`RPC '${e}' stream ${i} received:`,Ne),P.uo(Ne)}}),W(c,z6.STAT_EVENT,J=>{J.stat===Ej.PROXY?St(mo,`RPC '${e}' stream ${i} detected buffering proxy`):J.stat===Ej.NOPROXY&&St(mo,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.ro()},0),P}}function R2(){return typeof window<"u"?window:null}function QI(){return typeof document<"u"?document:null}function $E(n){return new $8(n,!0)}class UO{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=i,this.To=s,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,t-r);i>0&&St("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class P2{constructor(e,t,r,i,s,l,c,f){this.Ys=e,this.So=r,this.Do=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new UO(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,tt.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,tt.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,tt.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===rt.RESOURCE_EXHAUSTED?(Li(t.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),r.ko.Po()):t&&t.code===rt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===t&&this.jo(r,i)},r=>{e(()=>{const i=new Tt(rt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.ko.vo((0,tt.Z)(function*(){e.state=0,e.start()}))}zo(e){return St("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(St("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XG extends P2{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.Tt=s}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function z8(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:qt(),i=e.targetChange.targetIds||[],s=function(f,v){return f.yt?(Xt(void 0===v||"string"==typeof v),fs.fromBase64String(v||"")):(Xt(void 0===v||v instanceof Uint8Array),fs.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const v=void 0===f.code?rt.UNKNOWN:TU(f.code);return new Tt(v,f.message||"")}(l);t=new xU(r,i,s,c||null)}else if("documentChange"in e){const r=e.documentChange,i=Hc(n,r.document.name),s=Fi(r.document.updateTime),l=r.document.createTime?Fi(r.document.createTime):sn.min(),c=new ks({mapValue:{fields:r.document.fields}}),f=Hr.newFoundDocument(i,s,l,c);t=new NI(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Hc(n,r.document),s=r.readTime?Fi(r.readTime):sn.min(),l=Hr.newNoDocument(i,s);t=new NI([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Hc(n,r.document);t=new NI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return qt();{const r=e.filter,s=new R8(r.count||0);t=new CU(r.targetId,s)}}var f;return t}(this.Tt,e),r=function(i){if(!("targetChange"in i))return sn.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?sn.min():s.readTime?Fi(s.readTime):sn.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=OE(this.Tt),t.addTarget=function(i,s){let l;const c=s.target;return l=II(c)?{documents:LU(i,c)}:{query:fO(i,c)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?l.resumeToken=kU(i,s.resumeToken):s.snapshotVersion.compareTo(sn.min())>0&&(l.readTime=L_(i,s.snapshotVersion.toTimestamp())),l}(this.Tt,e);const r=function W8(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=OE(this.Tt),t.removeTarget=e,this.qo(t)}}class JG extends P2{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.Tt=s,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(Xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function q8(n,e){return n&&n.length>0?(Xt(void 0!==e),n.map(t=>function(r,i){let s=Fi(r.updateTime?r.updateTime:i);return s.isEqual(sn.min())&&(s=Fi(i)),new k8(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Fi(e.commitTime);return this.listener.eu(r,t)}return Xt(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=OE(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>RE(this.Tt,r))};this.qo(t)}}class ez extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new Tt(rt.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.lo(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Tt(rt.UNKNOWN,i.toString())})}mo(e,t,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.mo(e,t,r,s,l,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Tt(rt.UNKNOWN,s.toString())})}terminate(){this.iu=!0}}class nz{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(Li(t),this.cu=!1):St("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class rz{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=s,this.yu.Gr(c=>{r.enqueueAndForget((0,tt.Z)(function*(){var f;Rh(l)&&(St("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,tt.Z)(function*(v){const T=Lt(v);T.mu.add(4),yield $_(T),T.pu.set("Unknown"),T.mu.delete(4),yield HE(T)}),function(v){return f.apply(this,arguments)})(l))}))}),this.pu=new nz(r,i)}}function HE(n){return VO.apply(this,arguments)}function VO(){return VO=(0,tt.Z)(function*(n){if(Rh(n))for(const e of n.gu)yield e(!0)}),VO.apply(this,arguments)}function $_(n){return $O.apply(this,arguments)}function $O(){return $O=(0,tt.Z)(function*(n){for(const e of n.gu)yield e(!1)}),$O.apply(this,arguments)}function XI(n,e){const t=Lt(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),zO(t)?GO(t):G_(t).Mo()&&HO(t,e))}function GE(n,e){const t=Lt(n),r=G_(t);t.wu.delete(e),r.Mo()&&N2(t,e),0===t.wu.size&&(r.Mo()?r.Bo():Rh(t)&&t.pu.set("Unknown"))}function HO(n,e){n.Iu.Ot(e.targetId),G_(n).Jo(e)}function N2(n,e){n.Iu.Ot(e),G_(n).Yo(e)}function GO(n){n.Iu=new j8({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),G_(n).start(),n.pu.au()}function zO(n){return Rh(n)&&!G_(n).$o()&&n.wu.size>0}function Rh(n){return 0===Lt(n).mu.size}function L2(n){n.Iu=void 0}function iz(n){return qO.apply(this,arguments)}function qO(){return qO=(0,tt.Z)(function*(n){n.wu.forEach((e,t)=>{HO(n,e)})}),qO.apply(this,arguments)}function sz(n,e){return WO.apply(this,arguments)}function WO(){return WO=(0,tt.Z)(function*(n,e){L2(n),zO(n)?(n.pu.fu(e),GO(n)):n.pu.set("Unknown")}),WO.apply(this,arguments)}function oz(n,e,t){return KO.apply(this,arguments)}function KO(){return KO=(0,tt.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof xU&&2===e.state&&e.cause)try{yield(r=(0,tt.Z)(function*(i,s){const l=s.cause;for(const c of s.targetIds)i.wu.has(c)&&(yield i.remoteSyncer.rejectListen(c,l),i.wu.delete(c),i.Iu.removeTarget(c))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){St("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield JI(n,r)}else if(e instanceof NI?n.Iu.Qt(e):e instanceof CU?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(sn.min()))try{const r=yield S2(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.Iu.ee(s);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const v=i.wu.get(f);v&&i.wu.set(f,v.withResumeToken(c.resumeToken,s))}}),l.targetMismatches.forEach(c=>{const f=i.wu.get(c);if(!f)return;i.wu.set(c,f.withResumeToken(fs.EMPTY_BYTE_STRING,f.snapshotVersion)),N2(i,c);const v=new kp(f.target,c,1,f.sequenceNumber);HO(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){St("RemoteStore","Failed to raise snapshot:",r),yield JI(n,r)}var r}),KO.apply(this,arguments)}function JI(n,e,t){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,tt.Z)(function*(n,e,t){if(!Ep(e))throw e;n.mu.add(1),yield $_(n),n.pu.set("Offline"),t||(t=()=>S2(n.localStore)),n.asyncQueue.enqueueRetryable((0,tt.Z)(function*(){St("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield HE(n)}))}),ZO.apply(this,arguments)}function F2(n,e){return e().catch(t=>JI(n,t,e))}function H_(n){return YO.apply(this,arguments)}function YO(){return YO=(0,tt.Z)(function*(n){const e=Lt(n),t=Pp(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;az(e);)try{const i=yield zG(e.localStore,r);if(null===i){0===e._u.length&&t.Bo();break}r=i.batchId,lz(e,i)}catch(i){yield JI(e,i)}j2(e)&&U2(e)}),YO.apply(this,arguments)}function az(n){return Rh(n)&&n._u.length<10}function lz(n,e){n._u.push(e);const t=Pp(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function j2(n){return Rh(n)&&!Pp(n).$o()&&n._u.length>0}function U2(n){Pp(n).start()}function uz(n){return QO.apply(this,arguments)}function QO(){return QO=(0,tt.Z)(function*(n){Pp(n).su()}),QO.apply(this,arguments)}function cz(n){return XO.apply(this,arguments)}function XO(){return XO=(0,tt.Z)(function*(n){const e=Pp(n);for(const t of n._u)e.tu(t.mutations)}),XO.apply(this,arguments)}function dz(n,e,t){return JO.apply(this,arguments)}function JO(){return JO=(0,tt.Z)(function*(n,e,t){const r=n._u.shift(),i=mO.from(r,e,t);yield F2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield H_(n)}),JO.apply(this,arguments)}function hz(n,e){return eR.apply(this,arguments)}function eR(){return eR=(0,tt.Z)(function*(n,e){var t;e&&Pp(n).Xo&&(yield(t=(0,tt.Z)(function*(r,i){if(bU(s=i.code)&&s!==rt.ABORTED){const l=r._u.shift();Pp(r).Fo(),yield F2(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield H_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),j2(n)&&U2(n)}),eR.apply(this,arguments)}function B2(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,tt.Z)(function*(n,e){const t=Lt(n);t.asyncQueue.verifyOperationInProgress(),St("RemoteStore","RemoteStore received new credentials");const r=Rh(t);t.mu.add(3),yield $_(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield HE(t)}),tR.apply(this,arguments)}function nR(n,e){return rR.apply(this,arguments)}function rR(){return rR=(0,tt.Z)(function*(n,e){const t=Lt(n);e?(t.mu.delete(2),yield HE(t)):e||(t.mu.add(2),yield $_(t),t.pu.set("Unknown"))}),rR.apply(this,arguments)}function G_(n){return n.Tu||(n.Tu=function(e,t,r){const i=Lt(e);return i.ru(),new XG(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:iz.bind(null,n),no:sz.bind(null,n),Ho:oz.bind(null,n)}),n.gu.push(function(){var e=(0,tt.Z)(function*(t){t?(n.Tu.Fo(),zO(n)?GO(n):n.pu.set("Unknown")):(yield n.Tu.stop(),L2(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function Pp(n){return n.Eu||(n.Eu=function(e,t,r){const i=Lt(e);return i.ru(),new JG(t,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(n.datastore,n.asyncQueue,{Xr:uz.bind(null,n),no:hz.bind(null,n),nu:cz.bind(null,n),eu:dz.bind(null,n)}),n.gu.push(function(){var e=(0,tt.Z)(function*(t){t?(n.Eu.Fo(),yield H_(n)):(yield n.Eu.stop(),n._u.length>0&&(St("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class iR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,c=new iR(e,t,l,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Tt(rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z_(n,e){if(Li("AsyncQueue",`${e}: ${n}`),Ep(n))return new Tt(rt.UNAVAILABLE,`${e}: ${n}`);throw n}class q_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Nt.comparator(t.key,r.key):(t,r)=>Nt.comparator(t.key,r.key),this.keyedMap=IE(),this.sortedSet=new Ii(this.comparator)}static emptySet(e){return new q_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof q_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new q_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class V2{constructor(){this.Au=new Ii(Nt.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):qt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class W_{constructor(e,t,r,i,s,l,c,f,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,s){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new W_(e,t,q_.emptySet(t),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class fz{constructor(){this.Pu=void 0,this.listeners=[]}}class pz{constructor(){this.queries=new Dp(e=>iU(e),wE),this.onlineState="Unknown",this.vu=new Set}}function sR(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,tt.Z)(function*(n,e){const t=Lt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new fz),i)try{s.Pu=yield t.onListen(r)}catch(l){const c=z_(l,`Initialization of query '${lO(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Pu&&e.Vu(s.Pu)&&uR(t)}),oR.apply(this,arguments)}function aR(n,e){return lR.apply(this,arguments)}function lR(){return lR=(0,tt.Z)(function*(n,e){const t=Lt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),lR.apply(this,arguments)}function gz(n,e){const t=Lt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const c of l.listeners)c.Vu(i)&&(r=!0);l.Pu=i}}r&&uR(t)}function mz(n,e,t){const r=Lt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function uR(n){n.vu.forEach(e=>{e.next()})}class cR{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new W_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=W_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class yz{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class $2{constructor(e){this.Tt=e}Zi(e){return Hc(this.Tt,e)}Xi(e){return e.metadata.exists?NU(this.Tt,e.document,!1):Hr.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return Fi(e)}}class vz{constructor(e,t,r){this.Fu=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=H2(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=er.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new $2(this.Tt);for(const i of e)if(i.metadata.queries){const s=r.Zi(i.metadata.name);for(const l of i.metadata.queries){const c=(t.get(l)||Fn()).add(s);t.set(l,c)}}return t}complete(){var e=this;return(0,tt.Z)(function*(){const t=yield function qG(n,e,t,r){return OO.apply(this,arguments)}(e.localStore,new $2(e.Tt),e.documents,e.Fu.id),r=e.Lu(e.documents);for(const i of e.queries)yield WG(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function H2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class G2{constructor(e){this.key=e}}class z2{constructor(e){this.key=e}}class q2{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Fn(),this.mutatedKeys=Fn(),this.ju=oU(e),this.zu=new q_(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new V2,i=t?t.zu:this.zu;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const f="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,A)=>{const j=i.get(T),P=SE(this.query,A)?A:null,W=!!j&&this.mutatedKeys.has(j.key),J=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let se=!1;j&&P?j.data.isEqual(P.data)?W!==J&&(r.track({type:3,doc:P}),se=!0):this.Yu(j,P)||(r.track({type:2,doc:P}),se=!0,(f&&this.ju(P,f)>0||v&&this.ju(P,v)<0)&&(c=!0)):!j&&P?(r.track({type:0,doc:P}),se=!0):j&&!P&&(r.track({type:1,doc:j}),se=!0,(f||v)&&(c=!0)),se&&(P?(l=l.add(P),s=J?s.add(T):s.delete(T)):(l=l.delete(T),s=s.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),s=s.delete(T.key),r.track({type:1,doc:T})}return{zu:l,Ju:r,Li:c,mutatedKeys:s}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const s=e.Ju.Ru();s.sort((v,T)=>function(A,j){const P=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qt()}};return P(A)-P(j)}(v.type,T.type)||this.ju(v.doc,T.doc)),this.Zu(r);const l=t?this.Xu():[],c=0===this.Qu.size&&this.current?1:0,f=c!==this.Gu;return this.Gu=c,0!==s.length||f?{snapshot:new W_(this.query,e.zu,i,s,e.mutatedKeys,0===c,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:l}:{tc:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new V2,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Fn(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new z2(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new G2(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=Fn();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return W_.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class _z{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class bz{constructor(e){this.key=e,this.ic=!1}}class Tz{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.rc={},this.oc=new Dp(c=>iU(c),wE),this.uc=new Map,this.cc=new Set,this.ac=new Ii(Nt.comparator),this.hc=new Map,this.lc=new CO,this.fc={},this.dc=new Map,this._c=Qm.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function Ez(n,e){return dR.apply(this,arguments)}function dR(){return dR=(0,tt.Z)(function*(n,e){const t=PR(n);let r,i;const s=t.oc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.sc();else{const l=yield B_(t.localStore,$o(e));t.isPrimaryClient&&XI(t.remoteStore,l);const c=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield hR(t,e,r,"current"===c,l.resumeToken)}return i}),dR.apply(this,arguments)}function hR(n,e,t,r,i){return fR.apply(this,arguments)}function fR(){return fR=(0,tt.Z)(function*(n,e,t,r,i){n.mc=(A,j,P)=>{return(W=(0,tt.Z)(function*(J,se,Ne,Qe){let qe=se.view.Hu(Ne);qe.Li&&(qe=yield WI(J.localStore,se.query,!1).then(({documents:at})=>se.view.Hu(at,qe)));const Ie=Qe&&Qe.targetChanges.get(se.targetId),pe=se.view.applyChanges(qe,J.isPrimaryClient,Ie);return wR(J,se.targetId,pe.tc),pe.snapshot}),function(J,se,Ne,Qe){return W.apply(this,arguments)})(n,A,j,P);var W};const s=yield WI(n.localStore,e,!0),l=new q2(e,s.Yi),c=l.Hu(s.documents),f=kE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(c,n.isPrimaryClient,f);wR(n,t,v.tc);const T=new _z(e,t,l);return n.oc.set(e,T),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),v.snapshot}),fR.apply(this,arguments)}function wz(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,tt.Z)(function*(n,e){const t=Lt(n),r=t.oc.get(e),i=t.uc.get(r.targetId);if(i.length>1)return t.uc.set(r.targetId,i.filter(s=>!wE(s,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield V_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),GE(t.remoteStore,r.targetId),K_(t,r.targetId)}).catch(Tp))):(K_(t,r.targetId),yield V_(t.localStore,r.targetId,!0))}),pR.apply(this,arguments)}function gR(){return gR=(0,tt.Z)(function*(n,e,t){const r=NR(n);try{const i=yield function(s,l){const c=Lt(s),f=si.now(),v=l.reduce((j,P)=>j.add(P.key),Fn());let T,A;return c.persistence.runTransaction("Locally write mutations","readwrite",j=>{let P=Da(),W=Fn();return c.ji.getEntries(j,v).next(J=>{P=J,P.forEach((se,Ne)=>{Ne.isValidDocument()||(W=W.add(se))})}).next(()=>c.localDocuments.getOverlayedDocuments(j,P)).next(J=>{T=J;const se=[];for(const Ne of l){const Qe=O8(Ne,T.get(Ne.key).overlayedDocument);null!=Qe&&se.push(new Oh(Ne.key,Qe,Jj(Qe.value.mapValue),oi.exists(!0)))}return c.mutationQueue.addMutationBatch(j,f,se,l)}).next(J=>{A=J;const se=J.applyToLocalDocumentSet(T,W);return c.documentOverlayCache.saveOverlays(j,J.batchId,se)})}).then(()=>({batchId:A.batchId,changes:wU(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,c){let f=s.fc[s.currentUser.toKey()];f||(f=new Ii(An)),f=f.insert(l,c),s.fc[s.currentUser.toKey()]=f}(r,i.batchId,t),yield Ph(r,i.changes),yield H_(r.remoteStore)}catch(i){const s=z_(i,"Failed to persist write");t.reject(s)}}),gR.apply(this,arguments)}function W2(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,tt.Z)(function*(n,e){const t=Lt(n);try{const r=yield function GG(n,e){const t=Lt(n),r=e.snapshotVersion;let i=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.ji.newChangeBuffer({trackRemovals:!0});i=t.Ki;const c=[];e.targetChanges.forEach((T,A)=>{const j=i.get(A);if(!j)return;c.push(t.Ns.removeMatchingKeys(s,T.removedDocuments,A).next(()=>t.Ns.addMatchingKeys(s,T.addedDocuments,A)));let P=j.withSequenceNumber(s.currentSequenceNumber);var W,J,se;e.targetMismatches.has(A)?P=P.withResumeToken(fs.EMPTY_BYTE_STRING,sn.min()).withLastLimboFreeSnapshotVersion(sn.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,r)),i=i.insert(A,P),J=P,se=T,(0===(W=j).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0)&&c.push(t.Ns.updateTargetData(s,P))});let f=Da(),v=Fn();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,T))}),c.push(C2(s,l,e.documentUpdates).next(T=>{f=T.Hi,v=T.Ji})),!r.isEqual(sn.min())){const T=t.Ns.getLastRemoteSnapshotVersion(s).next(A=>t.Ns.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(T)}return Je.waitFor(c).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,v)).next(()=>f)}).then(s=>(t.Ki=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.hc.get(s);l&&(Xt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ic=!0:i.modifiedDocuments.size>0?Xt(l.ic):i.removedDocuments.size>0&&(Xt(l.ic),l.ic=!1))}),yield Ph(t,r,e)}catch(r){yield Tp(r)}}),mR.apply(this,arguments)}function K2(n,e,t){const r=Lt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.oc.forEach((s,l)=>{const c=l.view.bu(e);c.snapshot&&i.push(c.snapshot)}),function(s,l){const c=Lt(s);c.onlineState=l;let f=!1;c.queries.forEach((v,T)=>{for(const A of T.listeners)A.bu(l)&&(f=!0)}),f&&uR(c)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Cz(n,e,t){return yR.apply(this,arguments)}function yR(){return yR=(0,tt.Z)(function*(n,e,t){const r=Lt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.hc.get(e),s=i&&i.key;if(s){let l=new Ii(Nt.comparator);l=l.insert(s,Hr.newNoDocument(s,sn.min()));const c=Fn().add(s),f=new AE(sn.min(),new Map,new wr(An),l,c);yield W2(r,f),r.ac=r.ac.remove(s),r.hc.delete(e),SR(r)}else yield V_(r.localStore,e,!1).then(()=>K_(r,e,t)).catch(Tp)}),yR.apply(this,arguments)}function xz(n,e){return vR.apply(this,arguments)}function vR(){return vR=(0,tt.Z)(function*(n,e){const t=Lt(n),r=e.batch.batchId;try{const i=yield function HG(n,e){const t=Lt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.ji.newChangeBuffer({trackRemovals:!0});return function(l,c,f,v){const T=f.batch,A=T.keys();let j=Je.resolve();return A.forEach(P=>{j=j.next(()=>v.getEntry(c,P)).next(W=>{const J=f.docVersions.get(P);Xt(null!==J),W.version.compareTo(J)<0&&(T.applyToRemoteDocument(W,f),W.isValidDocument()&&(W.setReadTime(f.commitVersion),v.addEntry(W)))})}),j.next(()=>l.mutationQueue.removeMutationBatch(c,T))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Fn();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);ER(t,r,null),TR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ph(t,i)}catch(i){yield Tp(i)}}),vR.apply(this,arguments)}function Iz(n,e,t){return _R.apply(this,arguments)}function _R(){return _R=(0,tt.Z)(function*(n,e,t){const r=Lt(n);try{const i=yield function(s,l){const c=Lt(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let v;return c.mutationQueue.lookupMutationBatch(f,l).next(T=>(Xt(null!==T),v=T.keys(),c.mutationQueue.removeMutationBatch(f,T))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,v,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,v)).next(()=>c.localDocuments.getDocuments(f,v))})}(r.localStore,e);ER(r,e,t),TR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ph(r,i)}catch(i){yield Tp(i)}}),_R.apply(this,arguments)}function bR(){return bR=(0,tt.Z)(function*(n,e){const t=Lt(n);Rh(t.remoteStore)||St("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=Lt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>l.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.dc.get(r)||[];i.push(e),t.dc.set(r,i)}catch(r){const i=z_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),bR.apply(this,arguments)}function TR(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function ER(n,e,t){const r=Lt(n);let i=r.fc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function K_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||Z2(n,r)})}function Z2(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(GE(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),SR(n))}function wR(n,e,t){for(const r of t)r instanceof G2?(n.lc.addReference(r.key,e),Az(n,r)):r instanceof z2?(St("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||Z2(n,r.key)):qt()}function Az(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(St("SyncEngine","New document in limbo: "+t),n.cc.add(r),SR(n))}function SR(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new Nt(er.fromString(e)),r=n._c.next();n.hc.set(r,new bz(t)),n.ac=n.ac.insert(t,r),XI(n.remoteStore,new kp($o(M_(t.path)),r,2,vl.at))}}function Ph(n,e,t){return CR.apply(this,arguments)}function CR(){return CR=(0,tt.Z)(function*(n,e,t){const r=Lt(n),i=[],s=[],l=[];var c;r.oc.isEmpty()||(r.oc.forEach((c,f)=>{l.push(r.mc(f,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(f.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const T=AO.Ni(f.targetId,v);s.push(T)}}))}),yield Promise.all(l),r.rc.Ho(i),yield(c=(0,tt.Z)(function*(f,v){const T=Lt(f);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Je.forEach(v,j=>Je.forEach(j.Ci,P=>T.persistence.referenceDelegate.addReference(A,j.targetId,P)).next(()=>Je.forEach(j.xi,P=>T.persistence.referenceDelegate.removeReference(A,j.targetId,P)))))}catch(A){if(!Ep(A))throw A;St("LocalStore","Failed to update sequence numbers: "+A)}for(const A of v){const j=A.targetId;if(!A.fromCache){const P=T.Ki.get(j),J=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);T.Ki=T.Ki.insert(j,J)}}}),function(f,v){return c.apply(this,arguments)})(r.localStore,s))}),CR.apply(this,arguments)}function kz(n,e){return xR.apply(this,arguments)}function xR(){return xR=(0,tt.Z)(function*(n,e){const t=Lt(n);if(!t.currentUser.isEqual(e)){St("SyncEngine","User change. New user:",e.toKey());const r=yield w2(t.localStore,e);t.currentUser=e,(i=t).dc.forEach(l=>{l.forEach(c=>{c.reject(new Tt(rt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ph(t,r.Wi)}var i}),xR.apply(this,arguments)}function Mz(n,e){const t=Lt(n),r=t.hc.get(e);if(r&&r.ic)return Fn().add(r.key);{let i=Fn();const s=t.uc.get(e);if(!s)return i;for(const l of s){const c=t.oc.get(l);i=i.unionWith(c.view.Wu)}return i}}function Oz(n,e){return IR.apply(this,arguments)}function IR(){return IR=(0,tt.Z)(function*(n,e){const t=Lt(n),r=yield WI(t.localStore,e.query,!0),i=e.view.nc(r);return t.isPrimaryClient&&wR(t,e.targetId,i.tc),i}),IR.apply(this,arguments)}function Rz(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,tt.Z)(function*(n,e){const t=Lt(n);return I2(t.localStore,e).then(r=>Ph(t,r))}),DR.apply(this,arguments)}function Pz(n,e,t,r){return AR.apply(this,arguments)}function AR(){return AR=(0,tt.Z)(function*(n,e,t,r){const i=Lt(n),s=yield function(l,c){const f=Lt(l),v=Lt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",T=>v.An(T,c).next(A=>A?f.localDocuments.getDocuments(T,A):Je.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield H_(i.remoteStore):"acknowledged"===t||"rejected"===t?(ER(i,e,r||null),TR(i,e),c=e,Lt(Lt(i.localStore).mutationQueue).Pn(c)):qt(),yield Ph(i,s)):St("SyncEngine","Cannot apply mutation batch with id: "+e)}),AR.apply(this,arguments)}function kR(){return kR=(0,tt.Z)(function*(n,e){const t=Lt(n);if(PR(t),NR(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Y2(t,r.toArray());t.wc=!0,yield nR(t.remoteStore,!0);for(const s of i)XI(t.remoteStore,s)}else if(!1===e&&!1!==t.wc){const r=[];let i=Promise.resolve();t.uc.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(K_(t,l),V_(t.localStore,l,!0))),GE(t.remoteStore,l)}),yield i,yield Y2(t,r),function(s){const l=Lt(s);l.hc.forEach((c,f)=>{GE(l.remoteStore,f)}),l.lc._s(),l.hc=new Map,l.ac=new Ii(Nt.comparator)}(t),t.wc=!1,yield nR(t.remoteStore,!1)}}),kR.apply(this,arguments)}function Y2(n,e,t){return MR.apply(this,arguments)}function MR(){return MR=(0,tt.Z)(function*(n,e,t){const r=Lt(n),i=[],s=[];for(const l of e){let c;const f=r.uc.get(l);if(f&&0!==f.length){c=yield B_(r.localStore,$o(f[0]));for(const v of f){const T=r.oc.get(v),A=yield Oz(r,T);A.snapshot&&s.push(A.snapshot)}}else{const v=yield x2(r.localStore,l);c=yield B_(r.localStore,v),yield hR(r,Q2(v),l,!1,c.resumeToken)}i.push(c)}return r.rc.Ho(s),i}),MR.apply(this,arguments)}function Q2(n){return nU(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Lz(n){const e=Lt(n);return Lt(Lt(e.localStore).persistence).Si()}function Fz(n,e,t,r){return OR.apply(this,arguments)}function OR(){return OR=(0,tt.Z)(function*(n,e,t,r){const i=Lt(n);if(i.wc)return void St("SyncEngine","Ignoring unexpected query state notification.");const s=i.uc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield I2(i.localStore,sU(s[0])),c=AE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,fs.EMPTY_BYTE_STRING);yield Ph(i,l,c);break}case"rejected":yield V_(i.localStore,e,!0),K_(i,e,r);break;default:qt()}}),OR.apply(this,arguments)}function jz(n,e,t){return RR.apply(this,arguments)}function RR(){return RR=(0,tt.Z)(function*(n,e,t){const r=PR(n);if(r.wc){for(const i of e){if(r.uc.has(i)){St("SyncEngine","Adding an already active target "+i);continue}const s=yield x2(r.localStore,i),l=yield B_(r.localStore,s);yield hR(r,Q2(s),l.targetId,!1,l.resumeToken),XI(r.remoteStore,l)}for(const i of t)r.uc.has(i)&&(yield V_(r.localStore,i,!1).then(()=>{GE(r.remoteStore,i),K_(r,i)}).catch(Tp))}}),RR.apply(this,arguments)}function PR(n){const e=Lt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=W2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cz.bind(null,e),e.rc.Ho=gz.bind(null,e.eventManager),e.rc.gc=mz.bind(null,e.eventManager),e}function NR(n){const e=Lt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Iz.bind(null,e),e}class X2{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,tt.Z)(function*(){t.Tt=$E(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return E2(this.persistence,new T2,e.initialUser,this.Tt)}Tc(e){return new _2(zI.qs,this.Tt)}Ic(e){return new M2}terminate(){var e=this;return(0,tt.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class J2 extends X2{constructor(e,t,r){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,tt.Z)(function*(){yield t().call(r,e),yield r.Pc.initialize(r,e),yield NR(r.Pc.syncEngine),yield H_(r.Pc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return E2(this.persistence,new T2,e.initialUser,this.Tt)}Ac(e,t){return new DG(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new u8(t,this.persistence);return new l8(e.asyncQueue,r)}Tc(e){const t=DO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Aa.withCacheSize(this.cacheSizeBytes):Aa.DEFAULT;return new IO(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,R2(),QI(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new M2}}class Bz extends J2{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,tt.Z)(function*(){yield t().call(r,e);const i=r.Pc.syncEngine;r.sharedClientState instanceof FO&&(r.sharedClientState.syncEngine={Br:Pz.bind(null,i),Lr:Fz.bind(null,i),qr:jz.bind(null,i),Si:Lz.bind(null,i),Fr:Rz.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var s=(0,tt.Z)(function*(l){yield function Nz(n,e){return kR.apply(this,arguments)}(r.Pc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}Ic(e){const t=R2();if(!FO.C(t))throw new Tt(rt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=DO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new FO(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class LR{initialize(e,t){var r=this;return(0,tt.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>K2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=kz.bind(null,r.syncEngine),yield nR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new pz}createDatastore(e){const t=$E(e.databaseInfo.databaseId),r=new QG(e.databaseInfo);return new ez(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=c=>K2(this.syncEngine,c,0),l=O2.C()?new O2:new KG,new rz(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,c,f,v){const T=new Tz(r,i,s,l,c,f);return v&&(T.wc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return function(){var e=(0,tt.Z)(function*(t){const r=Lt(t);St("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield $_(r),r.yu.shutdown(),r.pu.set("Unknown")});return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}function eB(n,e=10240){let t=0;return{read:()=>(0,tt.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,tt.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class eD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):Li("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Vz{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new hs,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,tt.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,tt.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,tt.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),i=Number(r);isNaN(i)&&e.xc(`length string (${r}) is not valid number`);const s=yield e.Nc(i);return new yz(JSON.parse(s),t.length+i)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,tt.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,tt.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,tt.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class $z{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,tt.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Tt(rt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,tt.Z)(function*(s,l){const c=Lt(s),f=OE(c.Tt)+"/documents",v={documents:l.map(P=>ME(c.Tt,P))},T=yield c.mo("BatchGetDocuments",f,v,l.length),A=new Map;T.forEach(P=>{const W=function G8(n,e){return"found"in e?function(t,r){Xt(!!r.found);const i=Hc(t,r.found.name),s=Fi(r.found.updateTime),l=r.found.createTime?Fi(r.found.createTime):sn.min(),c=new ks({mapValue:{fields:r.found.fields}});return Hr.newFoundDocument(i,s,l,c)}(n,e):"missing"in e?function(t,r){Xt(!!r.missing),Xt(!!r.readTime);const i=Hc(t,r.missing),s=Fi(r.readTime);return Hr.newNoDocument(i,s)}(n,e):qt()}(c.Tt,P);A.set(W.key.toString(),W)});const j=[];return l.forEach(P=>{const W=A.get(P.toString());Xt(!!W),j.push(W)}),j}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new N_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,tt.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Nt.fromPath(i);e.mutations.push(new uO(s,e.precondition(s)))}),yield(r=(0,tt.Z)(function*(i,s){const l=Lt(i),c=OE(l.Tt)+"/documents",f={writes:s.map(v=>RE(l.Tt,v))};yield l.lo("Commit",c,f)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw qt();t=sn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Tt(rt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(sn.min())?oi.exists(!1):oi.updateTime(t):oi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(sn.min()))throw new Tt(rt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return oi.updateTime(t)}return oi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Hz{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Mc=r.maxAttempts,this.ko=new UO(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,tt.Z)(function*(){const t=new $z(e.datastore),r=e.Fc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Bc(s)}))}).catch(i=>{e.Bc(i)})}))}Fc(e){try{const t=this.updateFunction(e);return!mE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bU(t)}return!1}}class Gz{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=As.UNAUTHENTICATED,this.clientId=xj.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,tt.Z)(function*(c){St("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(St("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,tt.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Tt(rt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,tt.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=z_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function tB(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,tt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),St("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,tt.Z)(function*(s){r.isEqual(s)||(yield w2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),FR.apply(this,arguments)}function nB(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,tt.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield UR(n);St("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>B2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>B2(e.remoteStore,s)),n.onlineComponents=e}),jR.apply(this,arguments)}function UR(n){return BR.apply(this,arguments)}function BR(){return BR=(0,tt.Z)(function*(n){return n.offlineComponents||(St("FirestoreClient","Using default OfflineComponentProvider"),yield tB(n,new X2)),n.offlineComponents}),BR.apply(this,arguments)}function tD(n){return VR.apply(this,arguments)}function VR(){return VR=(0,tt.Z)(function*(n){return n.onlineComponents||(St("FirestoreClient","Using default OnlineComponentProvider"),yield nB(n,new LR)),n.onlineComponents}),VR.apply(this,arguments)}function rB(n){return UR(n).then(e=>e.persistence)}function nD(n){return UR(n).then(e=>e.localStore)}function $R(n){return tD(n).then(e=>e.remoteStore)}function HR(n){return tD(n).then(e=>e.syncEngine)}function Z_(n){return GR.apply(this,arguments)}function GR(){return GR=(0,tt.Z)(function*(n){const e=yield tD(n),t=e.eventManager;return t.onListen=Ez.bind(null,e.syncEngine),t.onUnlisten=wz.bind(null,e.syncEngine),t}),GR.apply(this,arguments)}function sB(n,e,t={}){const r=new hs;return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return function(i,s,l,c,f){const v=new eD({next:A=>{s.enqueueAndForget(()=>aR(i,T));const j=A.docs.has(l);!j&&A.fromCache?f.reject(new Tt(rt.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&A.fromCache&&c&&"server"===c.source?f.reject(new Tt(rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(A)},error:A=>f.reject(A)}),T=new cR(M_(l.path),v,{includeMetadataChanges:!0,$u:!0});return sR(i,T)}(yield Z_(n),n.asyncQueue,e,t,r)})),r.promise}function oB(n,e,t={}){const r=new hs;return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return function(i,s,l,c,f){const v=new eD({next:A=>{s.enqueueAndForget(()=>aR(i,T)),A.fromCache&&"server"===c.source?f.reject(new Tt(rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(A)},error:A=>f.reject(A)}),T=new cR(l,v,{includeMetadataChanges:!0,$u:!0});return sR(i,T)}(yield Z_(n),n.asyncQueue,e,t,r)})),r.promise}const aB=new Map;function zR(n,e,t){if(!t)throw new Tt(rt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lB(n,e,t,r){if(!0===e&&!0===r)throw new Tt(rt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uB(n){if(!Nt.isDocumentKey(n))throw new Tt(rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cB(n){if(Nt.isDocumentKey(n))throw new Tt(rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":qt()}function Zn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Tt(rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rD(n);throw new Tt(rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dB(n,e){if(e<=0)throw new Tt(rt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Tt(rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Tt(rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,lB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Tt(rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Tt(rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Y6;switch(t.type){case"gapi":return new e8(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Tt(rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aB.get(e);t&&(St("ComponentProvider","Removing Datastore"),aB.delete(e),t.terminate())}(this),Promise.resolve()}}class Gr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gr(this.firestore,e,this._key)}}class Zs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zs(this.firestore,e,this._query)}}class zc extends Zs{constructor(e,t,r){super(e,t,M_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gr(this.firestore,null,new Nt(e))}withConverter(e){return new zc(this.firestore,e,this._path)}}function pB(n,e,...t){if(n=(0,Rn.m9)(n),zR("collection","path",e),n instanceof zE){const r=er.fromString(e,...t);return cB(r),new zc(n,null,r)}{if(!(n instanceof Gr||n instanceof zc))throw new Tt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(er.fromString(e,...t));return cB(r),new zc(n.firestore,null,r)}}function iD(n,e,...t){if(n=(0,Rn.m9)(n),1===arguments.length&&(e=xj.R()),zR("doc","path",e),n instanceof zE){const r=er.fromString(e,...t);return uB(r),new Gr(n,null,new Nt(r))}{if(!(n instanceof Gr||n instanceof zc))throw new Tt(rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(er.fromString(e,...t));return uB(r),new Gr(n.firestore,n instanceof zc?n.converter:null,new Nt(r))}}function gB(n,e){return n=(0,Rn.m9)(n),e=(0,Rn.m9)(e),(n instanceof Gr||n instanceof zc)&&(e instanceof Gr||e instanceof zc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function qR(n,e){return n=(0,Rn.m9)(n),e=(0,Rn.m9)(e),n instanceof Zs&&e instanceof Zs&&n.firestore===e.firestore&&wE(n._query,e._query)&&n.converter===e.converter}class Jz{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new UO(this,"async_queue_retry"),this.Hc=()=>{const t=QI();t&&St("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=QI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=QI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new hs;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,tt.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Ep(t))throw t;St("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,Li("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const i=iR.createAndSchedule(this,e,t,r,s=>this.Xc(s));return this.Gc.push(i),i}Jc(){this.Qc&&qt()}verifyOperationInProgress(){}ta(){var e=this;return(0,tt.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function WR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class eq{constructor(){this._progressObserver={},this._taskCompletionResolver=new hs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zr extends zE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jz,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mB(this),this._firestoreClient.terminate()}}function ji(n){return n._firestoreClient||mB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mB(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new h8(n._databaseId,s,n._persistenceKey,(c=t).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams));var s,c;n._firestoreClient=new Gz(n._authCredentials,n._appCheckCredentials,n._queue,r)}function yB(n,e,t){const r=new hs;return n.asyncQueue.enqueue((0,tt.Z)(function*(){try{yield tB(n,t),yield nB(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(l=s).name?l.code===rt.FAILED_PRECONDITION||l.code===rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw s;Nm("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var l})).then(()=>r.promise)}function vB(n){if(n._initialized||n._terminated)throw new Tt(rt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class qc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qc(fs.fromBase64String(e))}catch(t){throw new Tt(rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qc(fs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Tt(rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ci(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Jm{constructor(e){this._methodName=e}}class sD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Tt(rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Tt(rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}}const dq=/^__.*__$/;class hq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Oh(e,this.data,this.fieldMask,t,this.fieldTransforms):new P_(e,this.data,t,this.fieldTransforms)}}class _B{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qt()}}class oD{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ia(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new oD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return uD(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(bB(this.ra)&&dq.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class fq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||$E(e)}wa(e,t,r,i=!1){return new oD({ra:e,methodName:t,_a:r,path:Ci.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function ey(n){const e=n._freezeSettings(),t=$E(n._databaseId);return new fq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function aD(n,e,t,r,i,s={}){const l=n.wa(s.merge||s.mergeFields?2:0,e,t,i);QR("Data must be an object, but it was:",l,r);const c=wB(r,l);let f,v;if(s.merge)f=new Ia(l.fieldMask),v=l.fieldTransforms;else if(s.mergeFields){const T=[];for(const A of s.mergeFields){const j=KE(e,A,t);if(!l.contains(j))throw new Tt(rt.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);CB(T,j)||T.push(j)}f=new Ia(T),v=l.fieldTransforms.filter(A=>f.covers(A.field))}else f=null,v=l.fieldTransforms;return new hq(new ks(c),f,v)}class WE extends Jm{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof WE}}function TB(n,e,t){return new oD({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class KR extends Jm{_toFieldTransform(e){return new CE(e.path,new O_)}isEqual(e){return e instanceof KR}}class pq extends Jm{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=TB(this,e,!0),r=this.ma.map(s=>ty(s,t)),i=new Gm(r);return new CE(e.path,i)}isEqual(e){return this===e}}class gq extends Jm{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=TB(this,e,!0),r=this.ma.map(s=>ty(s,t)),i=new zm(r);return new CE(e.path,i)}isEqual(e){return this===e}}class mq extends Jm{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new R_(e.Tt,uU(e.Tt,this.ga));return new CE(e.path,t)}isEqual(e){return this===e}}function ZR(n,e,t,r){const i=n.wa(1,e,t);QR("Data must be an object, but it was:",i,r);const s=[],l=ks.empty();jm(r,(f,v)=>{const T=lD(e,f,t);v=(0,Rn.m9)(v);const A=i.ha(T);if(v instanceof WE)s.push(T);else{const j=ty(v,A);null!=j&&(s.push(T),l.set(T,j))}});const c=new Ia(s);return new _B(l,c,i.fieldTransforms)}function YR(n,e,t,r,i,s){const l=n.wa(1,e,t),c=[KE(e,r,t)],f=[i];if(s.length%2!=0)throw new Tt(rt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<s.length;j+=2)c.push(KE(e,s[j])),f.push(s[j+1]);const v=[],T=ks.empty();for(let j=c.length-1;j>=0;--j)if(!CB(v,c[j])){const P=c[j];let W=f[j];W=(0,Rn.m9)(W);const J=l.ha(P);if(W instanceof WE)v.push(P);else{const se=ty(W,J);null!=se&&(v.push(P),T.set(P,se))}}const A=new Ia(v);return new _B(T,A,l.fieldTransforms)}function EB(n,e,t,r=!1){return ty(t,n.wa(r?4:3,e))}function ty(n,e){if(SB(n=(0,Rn.m9)(n)))return QR("Unsupported field value:",e,n),wB(n,e);if(n instanceof Jm)return function(t,r){if(!bB(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let c=ty(l,r.la(s));null==c&&(c={nullValue:"NULL_VALUE"}),i.push(c),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Rn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return uU(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=si.fromDate(t);return{timestampValue:L_(r.Tt,i)}}if(t instanceof si){const i=new si(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:L_(r.Tt,i)}}if(t instanceof sD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qc)return{bytesValue:kU(r.Tt,t._byteString)};if(t instanceof Gr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.fa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cO(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${rD(t)}`)}(n,e)}function wB(n,e){const t={};return Pj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jm(n,(r,i)=>{const s=ty(i,e.ua(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function SB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof si||n instanceof sD||n instanceof qc||n instanceof Gr||n instanceof Jm)}function QR(n,e,t){if(!SB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=rD(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function KE(n,e,t){if((e=(0,Rn.m9)(e))instanceof Nh)return e._internalPath;if("string"==typeof e)return lD(n,e);throw uD("Field path arguments must be of type string or ",n,!1,void 0,t)}const yq=new RegExp("[~\\*/\\[\\]]");function lD(n,e,t){if(e.search(yq)>=0)throw uD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nh(...e.split("."))._internalPath}catch{throw uD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function uD(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(s||l)&&(f+=" (found",s&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new Tt(rt.INVALID_ARGUMENT,c+n+f)}function CB(n,e){return n.some(t=>t.isEqual(e))}class ZE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vq extends ZE{data(){return super.data()}}function cD(n,e){return"string"==typeof e?lD(n,e):e instanceof Nh?e._internalPath:e._delegate._internalPath}function xB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Tt(rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XR{}class YE extends XR{}function Np(n,e,...t){let r=[];e instanceof XR&&r.push(e),r=r.concat(t),function(i){const s=i.filter(c=>c instanceof Y_).length,l=i.filter(c=>c instanceof QE).length;if(s>1||s>0&&l>0)throw new Tt(rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class QE extends YE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new QE(e,t,r)}_apply(e){const t=this._parse(e);return kB(e._query,t),new Zs(e.firestore,e.converter,aO(e._query,t))}_parse(e){const t=ey(e.firestore);return function(i,s,l,c,f,v,T){let A;if(f.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Tt(rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){AB(T,v);const j=[];for(const P of T)j.push(DB(c,i,P));A={arrayValue:{values:j}}}else A=DB(c,i,T)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||AB(T,v),A=EB(l,"where",T,"in"===v||"not-in"===v);return Kn.create(f,v,A)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Y_ extends XR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Y_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const l=i.getFlattenedFilters();for(const c of l)kB(s,c),s=aO(s,c)}(e._query,t),new Zs(e.firestore,e.converter,aO(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class JR extends YE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new JR(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Tt(rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Tt(rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new A_(i,s);return function(c,f){if(null===sO(c)){const v=AI(c);null!==v&&MB(0,v,f.field)}}(r,l),l}(e._query,this._field,this._direction);return new Zs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Mh(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class dD extends YE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new dD(e,t,r)}_apply(e){return new Zs(e.firestore,e.converter,kI(e._query,this._limit,this._limitType))}}class hD extends YE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new hD(e,t,r)}_apply(e){const t=IB(e,this.type,this._docOrFields,this._inclusive);return new Zs(e.firestore,e.converter,(i=t,new Mh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class fD extends YE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new fD(e,t,r)}_apply(e){const t=IB(e,this.type,this._docOrFields,this._inclusive);return new Zs(e.firestore,e.converter,(i=t,new Mh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function IB(n,e,t,r){if(t[0]=(0,Rn.m9)(t[0]),t[0]instanceof ZE)return function(i,s,l,c,f){if(!c)throw new Tt(rt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const T of Hm(i))if(T.field.isKeyField())v.push(Vm(s,c.key));else{const A=c.data.field(T.field);if(XM(A))throw new Tt(rt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const j=T.field.canonicalString();throw new Tt(rt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${j}' (used as the orderBy) does not exist.`)}v.push(A)}return new Ip(v,f)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ey(n.firestore);return function(s,l,c,f,v,T){const A=s.explicitOrderBy;if(v.length>A.length)throw new Tt(rt.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const j=[];for(let P=0;P<v.length;P++){const W=v[P];if(A[P].field.isKeyField()){if("string"!=typeof W)throw new Tt(rt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof W}`);if(!oO(s)&&-1!==W.indexOf("/"))throw new Tt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${W}' contains a slash.`);const J=s.path.child(er.fromString(W));if(!Nt.isDocumentKey(J))throw new Tt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const se=new Nt(J);j.push(Vm(l,se))}else{const J=EB(c,f,W);j.push(J)}}return new Ip(j,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function DB(n,e,t){if("string"==typeof(t=(0,Rn.m9)(t))){if(""===t)throw new Tt(rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oO(e)&&-1!==t.indexOf("/"))throw new Tt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(er.fromString(t));if(!Nt.isDocumentKey(r))throw new Tt(rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vm(n,new Nt(r))}if(t instanceof Gr)return Vm(n,t._key);throw new Tt(rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rD(t)}.`)}function AB(n,e){if(!Array.isArray(n)||0===n.length)throw new Tt(rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kB(n,e){if(e.isInequality()){const r=AI(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Tt(rt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=sO(n);null!==s&&MB(0,i,s)}const t=function(r,i){for(const s of r)for(const l of s.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Tt(rt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function MB(n,e,t){if(!t.isEqual(e))throw new Tt(rt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class eP{convertValue(e,t="none"){switch(Bm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Um(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw qt()}}convertObject(e,t){const r={};return jm(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new sD(xi(e.latitude),xi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lj(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vE(e));default:return null}}convertTimestamp(e){const t=Sp(e);return new si(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=er.fromString(e);Xt(BU(r));const i=new wp(r.get(1),r.get(3)),s=new Nt(r.popFirst(5));return i.isEqual(t)||Li(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function pD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Iq extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new qc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gr(this.firestore,null,t)}}class ny{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lh extends ZE{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new XE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class XE extends Lh{data(e={}){return super.data(e)}}class Lp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ny(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new XE(this._firestore,this._userDataWriter,r.key,r,new ny(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Tt(rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new XE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ny(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const c=new XE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new ny(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,v=-1;return 0!==l.type&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),v=s.indexOf(l.doc.key)),{type:Aq(l.type),doc:c,oldIndex:f,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Aq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qt()}}function RB(n,e){return n instanceof Lh&&e instanceof Lh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Lp&&e instanceof Lp&&n._firestore===e._firestore&&qR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Fp extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new qc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gr(this.firestore,null,t)}}function PB(n,e,t){n=Zn(n,Gr);const r=Zn(n.firestore,zr),i=pD(n.converter,e,t);return Q_(r,[aD(ey(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,oi.none())])}function NB(n,e,t,...r){n=Zn(n,Gr);const i=Zn(n.firestore,zr),s=ey(i);let l;return l="string"==typeof(e=(0,Rn.m9)(e))||e instanceof Nh?YR(s,"updateDoc",n._key,e,t,r):ZR(s,"updateDoc",n._key,e),Q_(i,[l.toMutation(n._key,oi.exists(!0))])}function LB(n,...e){var t,r,i;n=(0,Rn.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||WR(e[l])||(s=e[l],l++);const c={includeMetadataChanges:s.includeMetadataChanges};if(WR(e[l])){const A=e[l];e[l]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[l+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[l+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let f,v,T;if(n instanceof Gr)v=Zn(n.firestore,zr),T=M_(n._key.path),f={next:A=>{e[l]&&e[l](tP(v,n,A))},error:e[l+1],complete:e[l+2]};else{const A=Zn(n,Zs);v=Zn(A.firestore,zr),T=A._query;const j=new Fp(v);f={next:P=>{e[l]&&e[l](new Lp(v,j,A,P))},error:e[l+1],complete:e[l+2]},xB(n._query)}return function(A,j,P,W){const J=new eD(W),se=new cR(j,J,P);return A.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return sR(yield Z_(A),se)})),()=>{J.bc(),A.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return aR(yield Z_(A),se)}))}}(ji(v),T,c,f)}function Q_(n,e){return function(t,r){const i=new hs;return t.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return function Sz(n,e,t){return gR.apply(this,arguments)}(yield HR(t),r,i)})),i.promise}(ji(n),e)}function tP(n,e,t){const r=t.docs.get(e._key),i=new Fp(n);return new Lh(n,i,e._key,r,new ny(t.hasPendingWrites,t.fromCache),e.converter)}const Bq={maxAttempts:5};class FB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ey(e)}set(e,t,r){this._verifyNotCommitted();const i=jp(e,this._firestore),s=pD(i.converter,t,r),l=aD(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,oi.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=jp(e,this._firestore);let l;return l="string"==typeof(t=(0,Rn.m9)(t))||t instanceof Nh?YR(this._dataReader,"WriteBatch.update",s._key,t,r,i):ZR(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,oi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jp(e,this._firestore);return this._mutations=this._mutations.concat(new N_(t._key,oi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tt(rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jp(n,e){if((n=(0,Rn.m9)(n)).firestore!==e)throw new Tt(rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Vq extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ey(e)}get(e){const t=jp(e,this._firestore),r=new Iq(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return qt();const s=i[0];if(s.isFoundDocument())return new ZE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new ZE(this._firestore,r,t._key,null,t.converter);throw qt()})}set(e,t,r){const i=jp(e,this._firestore),s=pD(i.converter,t,r),l=aD(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=jp(e,this._firestore);let l;return l="string"==typeof(t=(0,Rn.m9)(t))||t instanceof Nh?YR(this._dataReader,"Transaction.update",s._key,t,r,i):ZR(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=jp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jp(e,this._firestore),r=new Fp(this._firestore);return super.get(e).then(i=>new Lh(this._firestore,r,t._key,i._document,new ny(!1,!1),t.converter))}}!function(n,e=!0){C_=Bu.SDK_VERSION,(0,Bu._registerComponent)(new b_.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),l=new zr(new X6(t.getProvider("auth-internal")),new t8(t.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Tt(rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wp(c.options.projectId,f)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Bu.registerVersion)(wj,"3.9.0",n),(0,Bu.registerVersion)(wj,"3.9.0","esm2017")}();function nP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Tt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function UB(){if(typeof Uint8Array>"u")throw new Tt("unimplemented","Uint8Arrays are not available in this environment.")}function BB(){if(!function p8(){return typeof atob<"u"}())throw new Tt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class JE{constructor(e){this._delegate=e}static fromBase64String(e){return BB(),new JE(qc.fromBase64String(e))}static fromUint8Array(e){return UB(),new JE(qc.fromUint8Array(e))}toBase64(){return BB(),this._delegate.toBase64()}toUint8Array(){return UB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rP(n){return function Yq(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Qq{enableIndexedDbPersistence(e,t){return function nq(n,e){vB(n=Zn(n,zr));const t=ji(n),r=n._freezeSettings(),i=new LR;return yB(t,i,new J2(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function rq(n){vB(n=Zn(n,zr));const e=ji(n),t=n._freezeSettings(),r=new LR;return yB(e,r,new Bz(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function iq(n){if(n._initialized&&!n._terminated)throw new Tt(rt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new hs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,tt.Z)(function*(){try{yield(t=(0,tt.Z)(function*(r){if(!Vu.C())return Promise.resolve();const i=r+"main";yield Vu.delete(i)}),function(r){return t.apply(this,arguments)})(DO(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class VB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function fB(n,e,t,r={}){var i;const s=(n=Zn(n,zE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Nm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,c;if("string"==typeof r.mockUserToken)l=r.mockUserToken,c=As.MOCK_USER;else{l=(0,Rn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Tt(rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new As(f)}n._authCredentials=new Q6(new Sj(l,c))}}(this._delegate,e,t,r)}enableNetwork(){return function oq(n){return function zz(n){return n.asyncQueue.enqueue((0,tt.Z)(function*(){const e=yield rB(n),t=yield $R(n);return e.setNetworkEnabled(!0),function(r){const i=Lt(r);return i.mu.delete(0),HE(i)}(t)}))}(ji(n=Zn(n,zr)))}(this._delegate)}disableNetwork(){return function aq(n){return function qz(n){return n.asyncQueue.enqueue((0,tt.Z)(function*(){const e=yield rB(n),t=yield $R(n);return e.setNetworkEnabled(!1),(r=(0,tt.Z)(function*(i){const s=Lt(i);s.mu.add(0),yield $_(s),s.pu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ji(n=Zn(n,zr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function sq(n){return function(e){const t=new hs;return e.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return function Dz(n,e){return bR.apply(this,arguments)}(yield HR(e),t)})),t.promise}(ji(n=Zn(n,zr)))}(this._delegate)}onSnapshotsInSync(e){return function jq(n,e){return function Zz(n,e){const t=new eD(e);return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return r=yield Z_(n),i=t,Lt(r).vu.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return r=yield Z_(n),i=t,void Lt(r).vu.delete(i);var r,i}))}}(ji(n=Zn(n,zr)),WR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Tt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new X_(this,pB(this._delegate,e))}catch(t){throw Go(t,"collection()","Firestore.collection()")}}doc(e){try{return new tu(this,iD(this._delegate,e))}catch(t){throw Go(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zo(this,function Xz(n,e){if(n=Zn(n,zE),zR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Tt(rt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zs(n,null,(t=e,new Mh(er.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Go(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function $q(n,e,t){n=Zn(n,zr);const r=Object.assign(Object.assign({},Bq),t);return function(i){if(i.maxAttempts<1)throw new Tt(rt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,l){const c=new hs;return i.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){const f=yield function iB(n){return tD(n).then(e=>e.datastore)}(i);new Hz(i.asyncQueue,f,l,s,c).run()})),c.promise}(ji(n),i=>e(new Vq(n,i)),r)}(this._delegate,t=>e(new $B(this,t)))}batch(){return ji(this._delegate),new HB(new FB(this._delegate,e=>Q_(this._delegate,e)))}loadBundle(e){return function lq(n,e){const t=ji(n=Zn(n,zr)),r=new eq;return function Yz(n,e,t,r){const i=function(s,l){let c;return c="string"==typeof s?(new TextEncoder).encode(s):s,f=function(f,v){if(f instanceof Uint8Array)return eB(f,v);if(f instanceof ArrayBuffer)return eB(new Uint8Array(f),v);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Vz(f,l);var f}(t,$E(e));n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){!function Uz(n,e,t){const r=Lt(n);var i;(i=(0,tt.Z)(function*(s,l,c){try{const f=yield l.getMetadata();if(yield function(j,P){const W=Lt(j),J=Fi(P.createTime);return W.persistence.runTransaction("hasNewerBundle","readonly",se=>W.$s.getBundleMetadata(se,P.id)).then(se=>!!se&&se.createTime.compareTo(J)>=0)}(s.localStore,f))return yield l.close(),c._completeWith({taskState:"Success",documentsLoaded:(j=f).totalDocuments,bytesLoaded:j.totalBytes,totalDocuments:j.totalDocuments,totalBytes:j.totalBytes}),Promise.resolve(new Set);c._updateProgress(H2(f));const v=new vz(f,s.localStore,l.Tt);let T=yield l.yc();for(;T;){const j=yield v.Bu(T);j&&c._updateProgress(j),T=yield l.yc()}const A=yield v.complete();return yield Ph(s,A.Uu,void 0),yield function(j,P){const W=Lt(j);return W.persistence.runTransaction("Save bundle","readwrite",J=>W.$s.saveBundleMetadata(J,P))}(s.localStore,f),c._completeWith(A.progress),Promise.resolve(A.qu)}catch(f){return Nm("SyncEngine",`Loading bundle failed with ${f}`),c._failWith(f),Promise.resolve(new Set)}var j}),function(s,l,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield HR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function uq(n,e){return function Qz(n,e){return n.asyncQueue.enqueue((0,tt.Z)(function*(){return function(t,r){const i=Lt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.$s.getNamedQuery(s,r))}(yield nD(n),e)}))}(ji(n=Zn(n,zr)),e).then(t=>t?new Zs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new zo(this,t):null)}}class gD extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new JE(new qc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tu.forKey(t,this.firestore,null)}}class $B{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}get(e){const t=iy(e);return this._delegate.get(t).then(r=>new ew(this._firestore,new Lh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=iy(e);return r?(nP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=iy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=iy(e);return this._delegate.delete(t),this}}class HB{constructor(e){this._delegate=e}set(e,t,r){const i=iy(e);return r?(nP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=iy(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=iy(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ry{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new XE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new tw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ry.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new ry(e,new gD(e),t),i.set(t,s)),s}}ry.INSTANCES=new WeakMap;class tu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Tt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new tu(t,new Gr(t._delegate,r,new Nt(e)))}static forKey(e,t,r){return new tu(t,new Gr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new X_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new X_(this.firestore,pB(this._delegate,e))}catch(t){throw Go(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Rn.m9)(e))instanceof Gr&&gB(this._delegate,e)}set(e,t){t=nP("DocumentReference.set",t);try{return t?PB(this._delegate,e,t):PB(this._delegate,e)}catch(r){throw Go(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?NB(this._delegate,e):NB(this._delegate,e,t,...r)}catch(i){throw Go(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Lq(n){return Q_(Zn(n.firestore,zr),[new N_(n._key,oi.none())])}(this._delegate)}onSnapshot(...e){const t=GB(e),r=zB(e,i=>new ew(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return LB(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Mq(n){n=Zn(n,Gr);const e=Zn(n.firestore,zr),t=ji(e),r=new Fp(e);return function Wz(n,e){const t=new hs;return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return(r=(0,tt.Z)(function*(i,s,l){try{const c=yield function(f,v){const T=Lt(f);return T.persistence.runTransaction("read document","readonly",A=>T.localDocuments.getDocument(A,v))}(i,s);c.isFoundDocument()?l.resolve(c):c.isNoDocument()?l.resolve(null):l.reject(new Tt(rt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const f=z_(c,`Failed to get document '${s} from cache`);l.reject(f)}}),function(i,s,l){return r.apply(this,arguments)})(yield nD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Lh(e,r,n._key,i,new ny(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Oq(n){n=Zn(n,Gr);const e=Zn(n.firestore,zr);return sB(ji(e),n._key,{source:"server"}).then(t=>tP(e,n,t))}(this._delegate):function kq(n){n=Zn(n,Gr);const e=Zn(n.firestore,zr);return sB(ji(e),n._key).then(t=>tP(e,n,t))}(this._delegate),t.then(r=>new ew(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new tu(this.firestore,this._delegate.withConverter(e?ry.getInstance(this.firestore,e):null))}}function Go(n,e,t){return n.message=n.message.replace(e,t),n}function GB(n){for(const e of n)if("object"==typeof e&&!rP(e))return e;return{}}function zB(n,e){var t,r;let i;return i=rP(n[0])?n[0]:rP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ew{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return RB(this._delegate,e._delegate)}}class tw extends ew{data(e){const t=this._delegate.data(e);return function Z6(n,e){n||qt()}(void 0!==t),t}}class zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gD(e)}where(e,t,r){try{return new zo(this.firestore,Np(this._delegate,function _q(n,e,t){const r=e,i=cD("where",n);return QE._create(i,r,t)}(e,t,r)))}catch(i){throw Go(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zo(this.firestore,Np(this._delegate,function bq(n,e="asc"){const t=e,r=cD("orderBy",n);return JR._create(r,t)}(e,t)))}catch(r){throw Go(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zo(this.firestore,Np(this._delegate,function Tq(n){return dB("limit",n),dD._create("limit",n,"F")}(e)))}catch(t){throw Go(t,"limit()","Query.limit()")}}limitToLast(e){try{return new zo(this.firestore,Np(this._delegate,function Eq(n){return dB("limitToLast",n),dD._create("limitToLast",n,"L")}(e)))}catch(t){throw Go(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zo(this.firestore,Np(this._delegate,function wq(...n){return hD._create("startAt",n,!0)}(...e)))}catch(t){throw Go(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zo(this.firestore,Np(this._delegate,function Sq(...n){return hD._create("startAfter",n,!1)}(...e)))}catch(t){throw Go(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zo(this.firestore,Np(this._delegate,function Cq(...n){return fD._create("endBefore",n,!1)}(...e)))}catch(t){throw Go(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zo(this.firestore,Np(this._delegate,function xq(...n){return fD._create("endAt",n,!0)}(...e)))}catch(t){throw Go(t,"endAt()","Query.endAt()")}}isEqual(e){return qR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Pq(n){n=Zn(n,Zs);const e=Zn(n.firestore,zr),t=ji(e),r=new Fp(e);return function Kz(n,e){const t=new hs;return n.asyncQueue.enqueueAndForget((0,tt.Z)(function*(){return(r=(0,tt.Z)(function*(i,s,l){try{const c=yield WI(i,s,!0),f=new q2(s,c.Yi),v=f.Hu(c.documents),T=f.applyChanges(v,!1);l.resolve(T.snapshot)}catch(c){const f=z_(c,`Failed to execute query '${s} against cache`);l.reject(f)}}),function(i,s,l){return r.apply(this,arguments)})(yield nD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Lp(e,r,n,i))}(this._delegate):"server"===e?.source?function Nq(n){n=Zn(n,Zs);const e=Zn(n.firestore,zr),t=ji(e),r=new Fp(e);return oB(t,n._query,{source:"server"}).then(i=>new Lp(e,r,n,i))}(this._delegate):function Rq(n){n=Zn(n,Zs);const e=Zn(n.firestore,zr),t=ji(e),r=new Fp(e);return xB(n._query),oB(t,n._query).then(i=>new Lp(e,r,n,i))}(this._delegate),t.then(r=>new iP(this.firestore,new Lp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=GB(e),r=zB(e,i=>new iP(this.firestore,new Lp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return LB(this._delegate,t,r)}withConverter(e){return new zo(this.firestore,this._delegate.withConverter(e?ry.getInstance(this.firestore,e):null))}}class Jq{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new tw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class iP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new tw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Jq(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new tw(this._firestore,r))})}isEqual(e){return RB(this._delegate,e._delegate)}}class X_ extends zo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tu(this.firestore,e):null}doc(e){try{return new tu(this.firestore,void 0===e?iD(this._delegate):iD(this._delegate,e))}catch(t){throw Go(t,"doc()","CollectionReference.doc()")}}add(e){return function Fq(n,e){const t=Zn(n.firestore,zr),r=iD(n),i=pD(n.converter,e);return Q_(t,[aD(ey(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,oi.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new tu(this.firestore,t))}isEqual(e){return gB(this._delegate,e._delegate)}withConverter(e){return new X_(this.firestore,this._delegate.withConverter(e?ry.getInstance(this.firestore,e):null))}}function iy(n){return Zn(n,Gr)}class sP{constructor(...e){this._delegate=new Nh(...e)}static documentId(){return new sP(Ci.keyField().canonicalString())}isEqual(e){return(e=(0,Rn.m9)(e))instanceof Nh&&this._delegate._internalPath.isEqual(e._internalPath)}}class sy{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Gq(){return new KR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sy(e)}static delete(){const e=function Hq(){return new WE("deleteField")}();return e._methodName="FieldValue.delete",new sy(e)}static arrayUnion(...e){const t=function zq(...n){return new pq("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new sy(t)}static arrayRemove(...e){const t=function qq(...n){return new gq("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new sy(t)}static increment(e){const t=function Wq(n){return new mq("increment",n)}(e);return t._methodName="FieldValue.increment",new sy(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const e5={Firestore:VB,GeoPoint:sD,Timestamp:si,Blob:JE,Transaction:$B,WriteBatch:HB,DocumentReference:tu,DocumentSnapshot:ew,Query:zo,QueryDocumentSnapshot:tw,QuerySnapshot:iP,CollectionReference:X_,FieldPath:sP,FieldValue:sy,setLogLevel:function Xq(n){!function K6(n){bp.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function n5(n){(function t5(n,e){n.INTERNAL.registerComponent(new b_.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},e5)))})(n,(e,t)=>new VB(e,t,new Qq)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(aF.Z);var r5=B(6451),mD=B(5363),i5=B(6063);class s5 extends pa.x{constructor(e=1/0,t=1/0,r=i5.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let c=0;for(let f=1;f<r.length&&r[f]<=l;f+=2)c=f;c&&r.splice(0,c+1)}}}var o5=B(3099);function qB(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,o5.B)({connector:()=>new s5(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function WB(n,e){return(0,bi.m)(e)?Cr(()=>n,e):Cr(()=>n)}var oP=B(9468);B(259);const lP=new Map,ZB={activated:!1,tokenObservers:[]},d5={initialized:!1,enabled:!1};function Ys(n){return lP.get(n)||Object.assign({},ZB)}function vD(){return d5}const uP="https://content-firebaseappcheck.googleapis.com/v1",g5="exchangeDebugToken",YB={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class y5{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,tt.Z)(function*(){t.stop();try{t.pending=new Rn.BH,yield function v5(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Rn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const qo=new Rn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function hP(){return hP=(0,tt.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const s={method:"POST",body:JSON.stringify(e),headers:r};let l,c;try{l=yield fetch(n,s)}catch(A){throw qo.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==l.status)throw qo.create("fetch-status-error",{httpStatus:l.status});try{c=yield l.json()}catch(A){throw qo.create("fetch-parse-error",{originalErrorMessage:A?.message})}const f=c.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw qo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});const v=1e3*Number(f[1]),T=Date.now();return{token:c.token,expireTimeMillis:T+v,issuedAtTimeMillis:T}}),hP.apply(this,arguments)}const w5="firebase-app-check-database",S5=1,nw="firebase-app-check-store";let TD=null;function fP(){return fP=(0,tt.Z)(function*(n,e){const r=(yield function JB(){return TD||(TD=new Promise((n,e)=>{try{const t=indexedDB.open(w5,S5);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(qo.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(nw,{keyPath:"compositeKey"})}}catch(t){e(qo.create("storage-open",{originalErrorMessage:t?.message}))}}),TD)}()).transaction(nw,"readwrite"),s=r.objectStore(nw).put({compositeKey:n,value:e});return new Promise((l,c)=>{s.onsuccess=f=>{l()},r.onerror=f=>{var v;c(qo.create("storage-set",{originalErrorMessage:null===(v=f.target.error)||void 0===v?void 0:v.message}))}})}),fP.apply(this,arguments)}const rw=new yp.Yd("@firebase/app-check");function mP(n,e){return(0,Rn.hl)()?function x5(n,e){return function eV(n,e){return fP.apply(this,arguments)}(function nV(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{rw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function vP(){return vP=(0,tt.Z)(function*(){const n=vD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),vP.apply(this,arguments)}const O5={error:"UNKNOWN_ERROR"};function R5(n){return Rn.US.encodeString(JSON.stringify(n),!1)}function ED(n){return _P.apply(this,arguments)}function _P(){return _P=(0,tt.Z)(function*(n,e=!1){const t=n.app;!function QB(n){if(!Ys(n).activated)throw qo.create("use-before-activation",{appName:n.name})}(t);const r=Ys(t);let s,i=r.token;if(i&&!J_(i)&&(r.token=void 0,i=void 0),!i){const f=yield r.cachedTokenPromise;f&&(J_(f)?i=f:yield mP(t,void 0))}if(!e&&i&&J_(i))return{token:i.token};let c,l=!1;if(function rV(){return vD().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function dP(n,e){return hP.apply(this,arguments)}(function E5(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${uP}/projects/${t}/apps/${r}:${g5}?key=${i}`,body:{debug_token:e}}}(t,yield function iV(){return vP.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const f=yield r.exchangeTokenPromise;return yield mP(t,f),r.token=f,{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Ys(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?rw.warn(f.message):rw.error(f),s=f}return i?s?c=J_(i)?{token:i.token,internalError:s}:aV(s):(c={token:i.token},r.token=i,yield mP(t,i)):c=aV(s),l&&function oV(n,e){const t=Ys(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,c),c}),_P.apply(this,arguments)}function TP(n,e){const t=Ys(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function sV(n){const{app:e}=n,t=Ys(e);let r=t.tokenRefresher;r||(r=function P5(n){const{app:e}=n;return new y5((0,tt.Z)(function*(){let r;if(r=Ys(e).token?yield ED(n,!0):yield ED(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ys(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},YB.RETRIAL_MIN_WAIT,YB.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function J_(n){return n.expireTimeMillis-Date.now()>0}function aV(n){return{token:R5(O5),error:n}}class N5{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ys(this.app);for(const t of e)TP(this.app,t.next);return Promise.resolve()}}const gV="app-check-internal";!function Z5(){(0,Bu._registerComponent)(new b_.wA("app-check",n=>function L5(n,e){return new N5(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gV).initialize()})),(0,Bu._registerComponent)(new b_.wA(gV,n=>function F5(n){return{getToken:e=>ED(n,e),addTokenListener:e=>function bP(n,e,t,r){const{app:i}=n,s=Ys(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&J_(s.token)){const c=s.token;Promise.resolve().then(()=>{t({token:c.token}),sV(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>sV(n))}(n,"INTERNAL",e),removeTokenListener:e=>TP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Bu.registerVersion)("@firebase/app-check","0.6.4")}();class SD{constructor(){return(0,ri.vb)("app-check")}}typeof window<"u"&&window;var e0=B(9260);const yV=new d.OlP("angularfire2.auth.use-emulator"),vV=new d.OlP("angularfire2.auth.settings"),_V=new d.OlP("angularfire2.auth.tenant-id"),bV=new d.OlP("angularfire2.auth.langugage-code"),TV=new d.OlP("angularfire2.auth.use-device-language"),EV=new d.OlP("angularfire.auth.persistence"),wV=(n,e,t,r,i,s,l,c)=>(0,Bo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),r&&(f.tenantId=r),f.languageCode=i,s&&f.useDeviceLanguage(),l)for(const[v,T]of Object.entries(l))f.settings[v]=T;return c&&f.setPersistence(c),f},[t,r,i,s,l,c]);let Fh=(()=>{class n{constructor(t,r,i,s,l,c,f,v,T,A,j,P){const W=new pa.x,J=Vt(void 0).pipe((0,mD.Q)(l.outsideAngular),Cr(()=>s.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,8971)))),(0,M.U)(()=>(0,Bo.on)(t,s,r)),(0,M.U)(se=>wV(se,s,c,v,T,A,f,j)),qB({bufferSize:1,refCount:!1}));if(du(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Vt(null);else{J.pipe(jl()).subscribe();const Ne=J.pipe(Cr(Ie=>Ie.getRedirectResult().then(pe=>pe,()=>null)),ri.iC,qB({bufferSize:1,refCount:!1})),Qe=J.pipe(Cr(Ie=>new Ur.y(pe=>({unsubscribe:s.runOutsideAngular(()=>Ie.onAuthStateChanged(at=>pe.next(at),at=>pe.error(at),()=>pe.complete()))})))),qe=J.pipe(Cr(Ie=>new Ur.y(pe=>({unsubscribe:s.runOutsideAngular(()=>Ie.onIdTokenChanged(at=>pe.next(at),at=>pe.error(at),()=>pe.complete()))}))));this.authState=Ne.pipe(WB(Qe),(0,oP.R)(l.outsideAngular),(0,mD.Q)(l.insideAngular)),this.user=Ne.pipe(WB(qe),(0,oP.R)(l.outsideAngular),(0,mD.Q)(l.insideAngular)),this.idToken=this.user.pipe(Cr(Ie=>Ie?(0,Wn.D)(Ie.getIdToken()):Vt(null))),this.idTokenResult=this.user.pipe(Cr(Ie=>Ie?(0,Wn.D)(Ie.getIdTokenResult()):Vt(null))),this.credential=(0,r5.T)(Ne,W,this.authState.pipe(Oo(Ie=>!Ie))).pipe((0,M.U)(Ie=>Ie?.user?Ie:null),(0,oP.R)(l.outsideAngular),(0,mD.Q)(l.insideAngular))}return(0,Bo.pX)(this,J,s,{spy:{apply:(se,Ne,Qe)=>{(se.startsWith("signIn")||se.startsWith("createUser"))&&Qe.then(qe=>W.next(qe))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Bo.Dh),d.LFG(Bo.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ri.HU),d.LFG(yV,8),d.LFG(vV,8),d.LFG(_V,8),d.LFG(bV,8),d.LFG(TV,8),d.LFG(EV,8),d.LFG(SD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tW=(()=>{class n{constructor(){e0.Z.registerVersion("angularfire",ri.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Fh]}),n})();function SV(n,e){return function nW(n,e=Wx.z){return new Ur.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function xP(n,e){return SV(n,e).pipe((0,M.U)(t=>({payload:t,type:"query"})))}function CD(n,e){return xP(n,e).pipe(xu(void 0),iM(),(0,M.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,c)=>{const f=i.find(T=>T.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(l.metadata)||!f&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:l}})}),s}))}function CV(n,e,t){return CD(n,t).pipe(Ka((r,i)=>function iW(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function sW(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return IP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return IP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return IP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),function G4(n,e=k.y){return n=n??z4,(0,Zi.e)((t,r)=>{let i,s=!0;t.subscribe((0,ht.x)(r,l=>{const c=e(l);(s||!n(i,c))&&(s=!1,i=c,r.next(l))}))})}(),(0,M.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function IP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function xV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class IV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=CD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,M.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(xu(void 0),iM(),Oo(([r,i])=>i.length>0||!r),(0,M.U)(([r,i])=>i),ri.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ka((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xV(e);return CV(this.query,t,this.afs.schedulers.outsideAngular).pipe(ri.iC)}valueChanges(e={}){return xP(this.query,this.afs.schedulers.outsideAngular).pipe((0,M.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ri.iC)}get(e){return(0,Wn.D)(this.query.get(e)).pipe(ri.iC)}add(e){return this.ref.add(e)}doc(e){return new DV(this.ref.doc(e),this.afs)}}class DV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=MV(r,t);return new IV(i,s,this.afs)}snapshotChanges(){return function rW(n,e){return SV(n,e).pipe(xu(void 0),iM(),(0,M.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ri.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,M.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Wn.D)(this.ref.get(e)).pipe(ri.iC)}}class oW{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?CD(this.query,this.afs.schedulers.outsideAngular).pipe((0,M.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Oo(t=>t.length>0),ri.iC):CD(this.query,this.afs.schedulers.outsideAngular).pipe(ri.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ka((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=xV(e);return CV(this.query,t,this.afs.schedulers.outsideAngular).pipe(ri.iC)}valueChanges(e={}){return xP(this.query,this.afs.schedulers.outsideAngular).pipe((0,M.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ri.iC)}get(e){return(0,Wn.D)(this.query.get(e)).pipe(ri.iC)}}const AV=new d.OlP("angularfire2.enableFirestorePersistence"),kV=new d.OlP("angularfire2.firestore.persistenceSettings"),aW=new d.OlP("angularfire2.firestore.settings"),lW=new d.OlP("angularfire2.firestore.use-emulator");function MV(n,e=(t=>t)){return{query:e(n),ref:n}}let DP=(()=>{class n{constructor(t,r,i,s,l,c,f,v,T,A,j,P,W,J,se,Ne,Qe){this.schedulers=f;const qe=(0,Bo.on)(t,c,r),Ie=T;A&&wV(qe,c,j,W,J,se,P,Ne),[this.firestore,this.persistenceEnabled$]=(0,Bo.cc)(`${qe.name}.firestore`,"AngularFirestore",qe.name,()=>{const pe=c.runOutsideAngular(()=>qe.firestore());if(s&&pe.settings(s),Ie&&pe.useEmulator(...Ie),i&&!du(l)){const at=()=>{try{return(0,Wn.D)(pe.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Dt){return typeof console<"u"&&console.warn(Dt),Vt(!1)}};return[pe,c.runOutsideAngular(at)]}return[pe,Vt(!1)]},[s,Ie,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=MV(i,r),c=this.schedulers.ngZone.run(()=>s);return new IV(c,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new oW(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new DV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Bo.Dh),d.LFG(Bo.xv,8),d.LFG(AV,8),d.LFG(aW,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ri.HU),d.LFG(kV,8),d.LFG(lW,8),d.LFG(Fh,8),d.LFG(yV,8),d.LFG(vV,8),d.LFG(_V,8),d.LFG(bV,8),d.LFG(TV,8),d.LFG(EV,8),d.LFG(SD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uW=(()=>{class n{constructor(){e0.Z.registerVersion("angularfire",ri.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:AV,useValue:!0},{provide:kV,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[DP]}),n})();const OV="firebasestorage.googleapis.com",RV="storageBucket";class vi extends Rn.ZR{constructor(e,t,r=0){super(AP(e),`Firebase Storage: ${t} (${AP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return AP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Lr=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Lr||(Lr={})),Lr))();function AP(n){return"storage/"+n}function kP(){return new vi(Lr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function PV(){return new vi(Lr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NV(){return new vi(Lr.CANCELED,"User canceled the upload/download.")}function LV(){return new vi(Lr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function t0(n){return new vi(Lr.INVALID_ARGUMENT,n)}function FV(){return new vi(Lr.APP_DELETED,"The Firebase app was deleted.")}function jV(n){return new vi(Lr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function iw(n,e){return new vi(Lr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function sw(n){throw new vi(Lr.INTERNAL_ERROR,"Internal error: "+n)}class yo{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=yo.makeFromUrl(e,t)}catch{return new yo(e,"")}if(""===r.path)return r;throw function bW(n){return new vi(Lr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",c=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Ie){Ie.path_=decodeURIComponent(Ie.path)}const A=t.replace(/[.]/g,"\\."),qe=[{regex:c,indices:{bucket:1,path:3},postModify:function s(Ie){"/"===Ie.path.charAt(Ie.path.length-1)&&(Ie.path_=Ie.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===OV?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Ie=0;Ie<qe.length;Ie++){const pe=qe[Ie],at=pe.regex.exec(e);if(at){let un=at[pe.indices.path];un||(un=""),r=new yo(at[pe.indices.bucket],un),pe.postModify(r);break}}if(null==r)throw function _W(n){return new vi(Lr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class CW{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function xD(n){return"string"==typeof n||n instanceof String}function UV(n){return MP()&&n instanceof Blob}function MP(){return typeof Blob<"u"&&!(0,Rn.UG)()}function OP(n,e,t,r){if(r<e)throw t0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw t0(`Invalid value for '${n}'. Expected ${t} or less.`)}function jh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function BV(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Up=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Up||(Up={})),Up))();function VV(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class MW{constructor(e,t,r,i,s,l,c,f,v,T,A,j=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=f,this.timeout_=v,this.progressCallback_=T,this.connectionFactory_=A,this.retry=j,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,W)=>{this.resolve_=P,this.reject_=W,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(c,c.getResponse());!function DW(n){return void 0!==n}(f)?s():s(f)}catch(f){l(f)}else if(null!==c){const f=kP();f.serverResponse=c.getErrorText(),l(this.errorCallback_?this.errorCallback_(c,f):f)}else l(i.canceled?this.appDelete_?FV():NV():PV())};this.canceled_?t(0,new ID(!1,null,!0)):this.backoffId_=function xW(n,e,t){let r=1,i=null,s=null,l=!1,c=0;function f(){return 2===c}let v=!1;function T(...se){v||(v=!0,e.apply(null,se))}function A(se){i=setTimeout(()=>{i=null,n(P,f())},se)}function j(){s&&clearTimeout(s)}function P(se,...Ne){if(v)return void j();if(se)return j(),void T.call(null,se,...Ne);if(f()||l)return j(),void T.call(null,se,...Ne);let qe;r<64&&(r*=2),1===c?(c=2,qe=0):qe=1e3*(r+Math.random()),A(qe)}let W=!1;function J(se){W||(W=!0,j(),!v&&(null!==i?(se||(c=2),clearTimeout(i),A(0)):se||(c=1)))}return A(0),s=setTimeout(()=>{l=!0,J(!0)},t),J}((r,i)=>{if(i)return void r(!1,new ID(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=c=>{null!==this.progressCallback_&&this.progressCallback_(c.loaded,c.lengthComputable?c.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const c=s.getErrorCode()===Up.NO_ERROR,f=s.getStatus();if(!c||VV(f,this.additionalRetryCodes_)&&this.retry){const T=s.getErrorCode()===Up.ABORT;return void r(!1,new ID(!1,null,T))}const v=-1!==this.successCodes_.indexOf(f);r(!0,new ID(v,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function IW(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ID{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function jW(...n){const e=function FW(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(MP())return new Blob(n);throw new vi(Lr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const _l={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class RP{constructor(e,t){this.data=e,this.contentType=t||null}}function PP(n,e){switch(n){case _l.RAW:return new RP($V(e));case _l.BASE64:case _l.BASE64URL:return new RP(HV(n,e));case _l.DATA_URL:return new RP(function $W(n){const e=new GV(n);return e.base64?HV(_l.BASE64,e.rest):function VW(n){let e;try{e=decodeURIComponent(n)}catch{throw iw(_l.DATA_URL,"Malformed data URL.")}return $V(e)}(e.rest)}(e),function HW(n){return new GV(n).contentType}(e))}throw kP()}function $V(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function HV(n,e){switch(n){case _l.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw iw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case _l.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw iw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function BW(n){if(typeof atob>"u")throw function SW(n){return new vi(Lr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:iw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class GV{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw iw(_l.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function GW(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Wc{constructor(e,t){let r=0,i="";UV(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(UV(this.data_)){const i=function UW(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Wc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Wc(r,!0)}}static getBlob(...e){if(MP()){const t=e.map(r=>r instanceof Wc?r.data_:r);return new Wc(jW.apply(null,t))}{const t=e.map(l=>xD(l)?PP(_l.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[s++]=l[c]}),new Wc(i,!0)}}uploadData(){return this.data_}}function NP(n){let e;try{e=JSON.parse(n)}catch{return null}return function kW(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function zV(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function WW(n,e){return e}class Wo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||WW}}let DD=null;function ow(){if(DD)return DD;const n=[];n.push(new Wo("bucket")),n.push(new Wo("generation")),n.push(new Wo("metageneration")),n.push(new Wo("name","fullPath",!0));const t=new Wo("name");t.xform=function e(s,l){return function KW(n){return!xD(n)||n.length<2?n:zV(n)}(l)},n.push(t);const i=new Wo("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Wo("timeCreated")),n.push(new Wo("updated")),n.push(new Wo("md5Hash",null,!0)),n.push(new Wo("cacheControl",null,!0)),n.push(new Wo("contentDisposition",null,!0)),n.push(new Wo("contentEncoding",null,!0)),n.push(new Wo("contentLanguage",null,!0)),n.push(new Wo("contentType",null,!0)),n.push(new Wo("metadata","customMetadata",!0)),DD=n,DD}function qV(n,e,t){const r=NP(e);return null===r?null:function YW(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function ZW(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new yo(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function LP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const WV="prefixes",KV="items";class Kc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Zc(n){if(!n)throw kP()}function AD(n,e){return function t(r,i){const s=qV(n,i,e);return Zc(null!==s),s}}function n0(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function yW(){return new vi(Lr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function mW(){return new vi(Lr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function gW(n){return new vi(Lr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function vW(n){return new vi(Lr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function aw(n){const e=n0(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function pW(n){return new vi(Lr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function ZV(n,e,t){const i=jh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,c=new Kc(i,"GET",AD(n,t),l);return c.errorHandler=aw(e),c}function n7(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const c=jh(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,T=new Kc(c,"GET",function e7(n,e){return function t(r,i){const s=function JW(n,e,t){const r=NP(t);return null===r?null:function XW(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[WV])for(const i of t[WV]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new yo(e,s));r.prefixes.push(l)}if(t[KV])for(const i of t[KV]){const s=n._makeStorageReference(new yo(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Zc(null!==s),s}}(n,e.bucket),v);return T.urlParams=s,T.errorHandler=n0(e),T}function QV(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function o7(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class kD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function FP(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Zc(!1)}return Zc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const c7={STATE_CHANGED:"state_changed"},Ko={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function jP(n){switch(n){case"running":case"pausing":case"canceling":return Ko.RUNNING;case"paused":return Ko.PAUSED;case"success":return Ko.SUCCESS;case"canceled":return Ko.CANCELED;default:return Ko.ERROR}}class d7{constructor(e,t,r){if(function AW(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function r0(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let e3=null;class h7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Up.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Up.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Up.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw sw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class f7 extends h7{initXhr(){this.xhr_.responseType="text"}}function $u(){return e3?e3():new f7}class t3{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ow(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Lr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(VV(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=PV()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Lr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function a7(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=QV(e,r,i),c={name:l.fullPath},f=jh(s,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},A=LP(l,t),W=new Kc(f,"POST",function P(J){let se;FP(J);try{se=J.getResponseHeader("X-Goog-Upload-URL")}catch{Zc(!1)}return Zc(xD(se)),se},n.maxUploadRetryTime);return W.urlParams=c,W.headers=T,W.body=A,W.errorHandler=n0(e),W}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,$u,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function l7(n,e,t,r){const f=new Kc(t,"POST",function s(v){const T=FP(v,["active","final"]);let A=null;try{A=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Zc(!1)}A||Zc(!1);const j=Number(A);return Zc(!isNaN(j)),new kD(j,r.size(),"final"===T)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=n0(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,$u,t,r);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new kD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function u7(n,e,t,r,i,s,l,c){const f=new kD(0,0);if(l?(f.current=l.current,f.total=l.total):(f.current=0,f.total=r.size()),r.size()!==f.total)throw function EW(){return new vi(Lr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=f.total-f.current;let T=v;i>0&&(T=Math.min(T,i));const A=f.current;let P="";P=0===T?"finalize":v===T?"upload, finalize":"upload";const W={"X-Goog-Upload-Command":P,"X-Goog-Upload-Offset":`${f.current}`},J=r.slice(A,A+T);if(null===J)throw LV();const qe=new Kc(t,"POST",function se(Ie,pe){const at=FP(Ie,["active","final"]),Dt=f.current+T,un=r.size();let jn;return jn="final"===at?AD(e,s)(Ie,pe):null,new kD(Dt,un,"final"===at,jn)},e.maxUploadRetryTime);return qe.headers=W,qe.body=J.uploadData(),qe.progressCallback=c||null,qe.errorHandler=n0(n),qe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const c=this._ref.storage._makeRequest(l,$u,i,s,!1);this._request=c,c.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=ZV(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,$u,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function XV(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},f=function c(){let qe="";for(let Ie=0;Ie<2;Ie++)qe+=Math.random().toString().slice(2);return qe}();l["Content-Type"]="multipart/related; boundary="+f;const v=QV(e,r,i),T=LP(v,t),P=Wc.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+f+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+f+"--");if(null===P)throw LV();const W={name:v.fullPath},J=jh(s,n.host,n._protocol),Ne=n.maxUploadRetryTime,Qe=new Kc(J,"POST",AD(n,t),Ne);return Qe.urlParams=W,Qe.headers=l,Qe.body=P.uploadData(),Qe.errorHandler=n0(e),Qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,$u,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=NV(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=jP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new d7(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(jP(this._state)){case Ko.SUCCESS:r0(this._resolve.bind(null,this.snapshot))();break;case Ko.CANCELED:case Ko.ERROR:r0(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(jP(this._state)){case Ko.RUNNING:case Ko.PAUSED:e.next&&r0(e.next.bind(e,this.snapshot))();break;case Ko.SUCCESS:e.complete&&r0(e.complete.bind(e))();break;default:e.error&&r0(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class oy{constructor(e,t){this._service=e,this._location=t instanceof yo?t:yo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new oy(e,t)}get root(){const e=new yo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zV(this._location.path)}get storage(){return this._service}get parent(){const e=function zW(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new yo(this._location.bucket,e);return new oy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw jV(e)}}function r3(n,e,t){return UP.apply(this,arguments)}function UP(){return UP=(0,tt.Z)(function*(n,e,t){const i=yield i3(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield r3(n,e,i.nextPageToken))}),UP.apply(this,arguments)}function i3(n,e){null!=e&&"number"==typeof e.maxResults&&OP("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=n7(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,$u)}function C7(n){n._throwIfRoot("getDownloadURL");const e=function r7(n,e,t){const i=jh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,c=new Kc(i,"GET",function t7(n,e){return function t(r,i){const s=qV(n,i,e);return Zc(null!==s),function QW(n,e,t,r){const i=NP(e);if(null===i||!xD(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(v=>{const A=n.fullPath;return jh("/b/"+l(n.bucket)+"/o/"+l(A),t,r)+BV({alt:"media",token:v})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return c.errorHandler=aw(e),c}(n.storage,n._location,ow());return n.storage.makeRequestWithTokens(e,$u).then(t=>{if(null===t)throw function wW(){return new vi(Lr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function s3(n,e){const t=function qW(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new yo(n._location.bucket,t);return new oy(n.storage,r)}function o3(n,e){if(n instanceof BP){const t=n;if(null==t._bucket)throw function TW(){return new vi(Lr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RV+"' property when initializing the app?")}();const r=new oy(t,t._bucket);return null!=e?o3(r,e):r}return void 0!==e?s3(n,e):n}function A7(n,e){if(e&&function I7(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof BP)return function D7(n,e){return new oy(n,e)}(n,e);throw t0("To use ref(service, url), the first argument must be a Storage instance.")}return o3(n,e)}function a3(n,e){const t=e?.[RV];return null==t?null:yo.makeFromBucketSpec(t,n)}class BP{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=OV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?yo.makeFromBucketSpec(i,this._host):a3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?yo.makeFromBucketSpec(this._url,e):a3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,tt.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,tt.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oy(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new CW(FV());{const l=function LW(n,e,t,r,i,s,l=!0){const c=BV(n.urlParams),f=n.url+c,v=Object.assign({},n.headers);return function PW(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function OW(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function RW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,s),function NW(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new MW(f,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,tt.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const l3="@firebase/storage";function d3(n,e){return A7(n=(0,Rn.m9)(n),e)}function U7(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new BP(t,r,i,e,Bu.SDK_VERSION)}!function B7(){(0,Bu._registerComponent)(new b_.wA("storage",U7,"PUBLIC").setMultipleInstances(!0)),(0,Bu.registerVersion)(l3,"0.11.2",""),(0,Bu.registerVersion)(l3,"0.11.2","esm2017")}();class MD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class f3{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new MD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new MD(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new MD(l,this,this._ref)):{next:t.next?l=>t.next(new MD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class p3{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Uh(e,this._service))}get items(){return this._delegate.items.map(e=>new Uh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Uh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function j7(n,e){return s3(n,e)}(this._delegate,e);return new Uh(t,this.storage)}get root(){return new Uh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Uh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new f3(function M7(n,e,t){return function b7(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new t3(n,new Wc(e),t)}(n=(0,Rn.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=_l.RAW,r){this._throwIfRoot("putString");const i=PP(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new f3(new t3(this._delegate,new Wc(i.data,!0),s),this)}listAll(){return function N7(n){return function E7(n){const e={prefixes:[],items:[]};return r3(n,e).then(()=>e)}(n=(0,Rn.m9)(n))}(this._delegate).then(e=>new p3(e,this.storage))}list(e){return function P7(n,e){return i3(n=(0,Rn.m9)(n),e)}(this._delegate,e||void 0).then(t=>new p3(t,this.storage))}getMetadata(){return function O7(n){return function w7(n){n._throwIfRoot("getMetadata");const e=ZV(n.storage,n._location,ow());return n.storage.makeRequestWithTokens(e,$u)}(n=(0,Rn.m9)(n))}(this._delegate)}updateMetadata(e){return function R7(n,e){return function S7(n,e){n._throwIfRoot("updateMetadata");const t=function i7(n,e,t,r){const s=jh(e.fullServerUrl(),n.host,n._protocol),c=LP(t,r),v=n.maxOperationRetryTime,T=new Kc(s,"PATCH",AD(n,r),v);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=c,T.errorHandler=aw(e),T}(n.storage,n._location,e,ow());return n.storage.makeRequestWithTokens(t,$u)}(n=(0,Rn.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function L7(n){return C7(n=(0,Rn.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function F7(n){return function x7(n){n._throwIfRoot("deleteObject");const e=function s7(n,e){const r=jh(e.fullServerUrl(),n.host,n._protocol),c=new Kc(r,"DELETE",function l(f,v){},n.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=aw(e),c}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,$u)}(n=(0,Rn.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw jV(e)}}class g3{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(m3(e))throw t0("ref() expected a child path but got a URL, use refFromURL instead.");return new Uh(d3(this._delegate,e),this)}refFromURL(e){if(!m3(e))throw t0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yo.makeFromUrl(e,this._delegate.host)}catch{throw t0("refFromUrl() expected a valid full URL but got an invalid one.")}return new Uh(d3(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function h3(n,e,t,r={}){!function k7(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Rn.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function m3(n){return/^[A-Za-z]+:\/\//.test(n)}function G7(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new g3(t,r)}function y3(n){const e=function q7(n){return new Ur.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(function cW(n,e=Wx.z){return(0,Zi.e)((t,r)=>{let i=null,s=null,l=null;const c=()=>{if(i){i.unsubscribe(),i=null;const v=s;s=null,r.next(v)}};function f(){const v=l+n,T=e.now();if(T<v)return i=this.schedule(void 0,v-T),void r.add(i);c()}t.subscribe((0,ht.x)(r,v=>{s=v,l=e.now(),i||(i=e.schedule(f,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,M.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function OD(n){return{getDownloadURL:()=>Vt(void 0).pipe(ri.fc,Cr(()=>n.getDownloadURL()),ri.iC),getMetadata:()=>Vt(void 0).pipe(ri.fc,Cr(()=>n.getMetadata()),ri.iC),delete:()=>(0,Wn.D)(n.delete()),child:e=>OD(n.child(e)),updateMetadata:e=>(0,Wn.D)(n.updateMetadata(e)),put:(e,t)=>y3(n.put(e,t)),putString:(e,t,r)=>y3(n.putString(e,t,r)),list:e=>(0,Wn.D)(n.list(e)),listAll:()=>(0,Wn.D)(n.listAll())}}!function z7(n){const e={TaskState:Ko,TaskEvent:c7,StringFormat:_l,Storage:g3,Reference:Uh};n.INTERNAL.registerComponent(new b_.wA("storage-compat",G7,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(aF.Z);const W7=new d.OlP("angularfire2.storageBucket"),K7=new d.OlP("angularfire2.storage.maxUploadRetryTime"),Z7=new d.OlP("angularfire2.storage.maxOperationRetryTime"),Y7=new d.OlP("angularfire2.storage.use-emulator");let VP=(()=>{class n{constructor(t,r,i,s,l,c,f,v,T,A){const j=(0,Bo.on)(t,l,r);this.storage=(0,Bo.cc)(`${j.name}.storage.${i}`,"AngularFireStorage",j.name,()=>{const P=l.runOutsideAngular(()=>j.storage(i||void 0)),W=T;return W&&P.useEmulator(...W),f&&P.setMaxUploadRetryTime(f),v&&P.setMaxOperationRetryTime(v),P},[f,v])}ref(t){return OD(this.storage.ref(t))}refFromURL(t){return OD(this.storage.refFromURL(t))}upload(t,r,i){return OD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Bo.Dh),d.LFG(Bo.xv,8),d.LFG(W7,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ri.HU),d.LFG(K7,8),d.LFG(Z7,8),d.LFG(Y7,8),d.LFG(SD,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Q7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),X7=(()=>{class n{constructor(){e0.Z.registerVersion("angularfire",ri.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[VP],imports:[Q7]}),n})(),lw=(()=>{class n{constructor(t,r,i,s){this.db=t,this.afAuth=r,this.storage=i,this.router=s,this.pageClips=[],this.pendingReq=!1,this.clipCollection=t.collection("clips")}createClip(t){return this.clipCollection.add(t)}getUserClips(t){return $t([this.afAuth.user,t]).pipe(Cr(r=>{const[i,s]=r;return i?this.clipCollection.ref.where("uid","==",i.uid).orderBy("timeStamp","1"==s?"desc":"asc").get():Vt([])}),(0,M.U)(r=>r.docs))}updateClip(t,r){return this.clipCollection.doc(t).update({title:r})}deleteClip(t){var r=this;return(0,tt.Z)(function*(){yield r.storage.ref(`clips/${t.fileName}`).delete(),yield r.clipCollection.doc(t.docID).delete()})()}getClips(){var t=this;return(0,tt.Z)(function*(){if(t.pendingReq)return;t.pendingReq=!0;let r=t.clipCollection.ref.orderBy("timeStamp","desc").limit(6);const{length:i}=t.pageClips;if(i){const l=t.pageClips[i-1].docID,c=yield t.clipCollection.doc(l).get().toPromise();r=r.startAfter(c)}(yield r.get()).forEach(l=>{t.pageClips.push({docID:l.id,...l.data()})}),t.pendingReq=!1})()}getClipByID(t){return t?this.clipCollection.doc(t).get().pipe((0,M.U)(r=>r.data()||(this.router.navigate(["/"]),null))):(this.router.navigate(["/"]),null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(DP),d.LFG(Fh),d.LFG(VP),d.LFG(us))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v3=(()=>{class n{constructor(t){this.datepipe=t}transform(t){if(!t)return"";const r=t.toDate();return this.datepipe.transform(r,"mediumDate")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(au,16))},n.\u0275pipe=d.Yjl({name:"fbTimestamp",type:n,pure:!0}),n})();const eK=function(n){return["/","clips",n]};function tK(n,e){if(1&n&&(d.TgZ(0,"a",2),d._UZ(1,"img",3),d.TgZ(2,"div",4)(3,"div",5)(4,"div",6),d.O4$(),d.TgZ(5,"svg",7),d._UZ(6,"path",8),d.qZA()()()(),d.kcU(),d.TgZ(7,"div",9)(8,"h2",10),d._uU(9),d.qZA(),d.TgZ(10,"p",11),d._uU(11),d.TgZ(12,"span",12),d._uU(13),d.ALo(14,"fbTimestamp"),d.qZA()()()()),2&n){const t=e.$implicit;d.Q6J("routerLink",d.VKq(7,eK,t.docID)),d.xp6(1),d.Q6J("src",t.screenshotUrl,d.LSH),d.xp6(8),d.hij(" ",t.title," "),d.xp6(2),d.hij(" ",t.displayName," \xb7 "),d.xp6(2),d.Oqu(d.lcZ(14,5,t.timeStamp))}}let _3=(()=>{class n{constructor(t){this.clipService=t,this.handleScrollEvnt=()=>{const{scrollTop:r,offsetHeight:i}=document.documentElement,{innerHeight:s}=window;Math.round(r)+s===i&&(console.log("bottom of win"),this.clipService.getClips())},t.getClips()}ngOnInit(){window.addEventListener("scroll",this.handleScrollEvnt)}ngOnDestroy(){window.removeEventListener("scroll",this.handleScrollEvnt)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(lw))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-clips-list"]],features:[d._Bn([au])],decls:2,vars:1,consts:[[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary transform hover:-translate-y-2 hover:shadow-2xl transition duration-300",3,"routerLink",4,"ngFor","ngForOf"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","transform","hover:-translate-y-2","hover:shadow-2xl","transition","duration-300",3,"routerLink"],["crossorigin","",1,"card-img-top","rounded-tl-2xl","w-full",3,"src"],[1,"relative"],[1,"absolute","pointer-events-none","bottom-full","w-full","bg-secondary","text-white"],[1,"absolute","bottom-full","w-full","pb-5","overflow-hidden"],["viewBox","0 0 100 50","preserveAspectRatio","none",1,"absolute","bottom-0","w-full","h-full","tranform",2,"transform-origin","top center","transform","scale(2)"],["d","M0 25h25L75 0h25v50H0z","fill","#283046"],[1,"p-8"],[1,"text-3xl","mb-2"],[1,"mb-0"],[1,"text-gray-400"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,tK,15,9,"a",1),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngForOf",r.clipService.pageClips))},dependencies:[gs,Hd,v3]}),n})();const nK=["videoPlayer"],rK=[{path:"",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:20,vars:0,consts:[[1,"relative","overflow-hidden","mb-2"],["autoplay","","muted","","loop","",1,"w-full","h-full","object-cover","absolute","z-0"],["src","assets/video/hero.webm","type","video/webm"],[1,"bg-gradient","absolute","w-full","h-full","z-40","opacity-60"],[1,"w-full","h-full","absolute","z-40"],[1,"cube"],[1,"container","mx-auto","relative","z-50"],[1,"text-center","px-20","py-60","w-full","md:w-8/12","mx-auto"],[1,"text-7xl","font-bold","uppercase","mb-2"],[1,"container","mx-auto"],[1,"uppercase","text-center","text-4xl","grid","mt-20","mb-12","items-center","gap-8","tracking-widest","latest"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"video",1),d._UZ(2,"source",2),d.qZA(),d._UZ(3,"div",3),d.TgZ(4,"div",4),d._UZ(5,"div",5)(6,"div",5)(7,"div",5)(8,"div",5)(9,"div",5),d.qZA(),d.TgZ(10,"div",6)(11,"div",7)(12,"h1",8),d._uU(13,"Clip it and ship it!"),d.qZA(),d.TgZ(14,"p"),d._uU(15," The #1 app to watch, clip, and share your awesome gaming moments with your friends and the world! With our world-class tools, we make it incredibly easy to share your videos. Get started today! "),d.qZA()()()(),d.TgZ(16,"section",9)(17,"h1",10),d._uU(18,"Latest"),d.qZA(),d._UZ(19,"app-clips-list"),d.qZA())},dependencies:[_3]}),n})()},{path:"about",component:ev},{path:"clips/:id",component:(()=>{class n{constructor(t){this.aRoute=t,this.id=""}ngOnInit(){this.aRoute.params.subscribe(t=>{this.id=t.id}),this.player=nt(this.target?.nativeElement),this.aRoute.data.subscribe(t=>{this.clip=t.clip,this.player?.src({src:this.clip.url,type:"video/mp4"})})}ngAfterViewInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Rt))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-clips"]],viewQuery:function(t,r){if(1&t&&d.Gf(nK,7),2&t){let i;d.iGM(i=d.CRH())&&(r.target=i.first)}},features:[d._Bn([au])],decls:16,vars:5,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-2","text-3xl"],[1,"text-gray-400","mb-6"],[1,"relative","aspect-video"],["controls","","crossorigin","",1,"video-js","vjs-theme-forest","mx-auto"],["videoPlayer",""],[1,"container","mx-auto","my-8"],[1,"mt-6","text-2xl"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),d._uU(3),d.qZA(),d.TgZ(4,"div",3),d._uU(5),d.TgZ(6,"span"),d._uU(7),d.ALo(8,"fbTimestamp"),d.qZA()(),d.TgZ(9,"div",4),d._UZ(10,"video",5,6),d.qZA()()(),d.TgZ(12,"div",7)(13,"h2",8),d._uU(14,"More Clips"),d.qZA(),d._UZ(15,"app-clips-list"),d.qZA()),2&t&&(d.xp6(3),d.hij(" ",null==r.clip?null:r.clip.title,""),d.xp6(2),d.hij(" Uploaded By ",null==r.clip?null:r.clip.displayName," "),d.xp6(2),d.hij(" ",d.lcZ(8,3,null==r.clip?null:r.clip.timeStamp),""))},dependencies:[_3,v3],styles:['.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:"\\f103"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:"\\f104"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:"\\f105"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:"\\f106"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:"\\f107"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f108"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:"\\f10c"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:"\\f10d"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:"\\f115"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:"\\f11d"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f121"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:"\\f122"}.video-js{display:inline-block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:50%;left:50%;padding:0;margin-top:-.81666em;margin-left:-1.5em;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;line-height:.35em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{line-height:.35em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.vjs-poster img{width:100%;height:100%;object-fit:contain}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.vjs-live .vjs-time-divider,.video-js .vjs-current-time,.video-js .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}.vjs-title-bar{background:rgba(0,0,0,.9);background:linear-gradient(180deg,rgba(0,0,0,.9) 0%,rgba(0,0,0,.7) 60%,rgba(0,0,0,0) 100%);font-size:1.2em;line-height:1.5;transition:opacity .1s;padding:.666em 1.333em 4em;pointer-events:none;position:absolute;top:0;width:100%}.vjs-title-bar-title,.vjs-title-bar-description{margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vjs-title-bar-title{font-weight:700;margin-bottom:.333em}.vjs-playing.vjs-user-inactive .vjs-title-bar{opacity:0;transition:opacity 1s}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}.vjs-theme-forest{--vjs-theme-forest--primary:#6fb04e;--vjs-theme-forest--secondary:#fff}.vjs-theme-forest.vjs-big-play-button:focus,.vjs-theme-forest:hover .vjs-big-play-button{background-color:transparent;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%236fb04e\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E")}.vjs-theme-forest .vjs-big-play-button{width:88px;height:88px;background:none;background-repeat:no-repeat;background-position:50%;background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'88\' height=\'88\' fill=\'%23fff\'%3E%3Cpath fill-rule=\'evenodd\' d=\'M44 88C19.738 88 0 68.262 0 44S19.738 0 44 0s44 19.738 44 44-19.738 44-44 44zm0-85C21.393 3 3 21.393 3 44c0 22.608 18.393 41 41 41s41-18.392 41-41C85 21.393 66.607 3 44 3zm16.063 43.898L39.629 60.741a3.496 3.496 0 01-3.604.194 3.492 3.492 0 01-1.859-3.092V30.158c0-1.299.712-2.483 1.859-3.092a3.487 3.487 0 013.604.194l20.433 13.843a3.497 3.497 0 01.001 5.795zm-1.683-3.311L37.946 29.744a.49.49 0 00-.276-.09.51.51 0 00-.239.062.483.483 0 00-.265.442v27.685c0 .262.166.389.265.442.1.053.299.118.515-.028L58.38 44.414A.489.489 0 0058.6 44a.49.49 0 00-.22-.413z\'/%3E%3C/svg%3E");border:none;top:50%;left:50%;margin-top:-44px;margin-left:-44px;color:purple}.vjs-theme-forest .vjs-big-play-button .vjs-icon-placeholder{display:none}.vjs-theme-forest .vjs-button>.vjs-icon-placeholder:before{line-height:1.55}.vjs-theme-forest .vjs-control:not(.vjs-disabled):not(.vjs-time-control):hover{color:var(--vjs-theme-forest--primary);text-shadow:var(--vjs-theme-forest--secondary) 1px 0 10px}.vjs-theme-forest .vjs-control-bar{background:none;margin-bottom:1em;padding-left:1em;padding-right:1em}.vjs-theme-forest .vjs-play-control{font-size:.8em}.vjs-theme-forest .vjs-play-control .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--secondary);height:1.5em;width:1.5em;margin-top:.2em;border-radius:1em;color:var(--vjs-theme-forest--primary)}.vjs-theme-forest .vjs-play-control:hover .vjs-icon-placeholder:before{background-color:var(--vjs-theme-forest--primary);color:var(--vjs-theme-forest--secondary)}.vjs-theme-forest .vjs-mute-control{display:none}.vjs-theme-forest .vjs-volume-panel{margin-left:.5em;margin-right:.5em;padding-top:.3em}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal,.vjs-theme-forest .vjs-volume-panel,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.vjs-theme-forest .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.vjs-theme-forest .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.vjs-theme-forest .vjs-volume-panel:hover,.vjs-theme-forest .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal{width:3em}.vjs-theme-forest .vjs-volume-level:before{font-size:1em}.vjs-theme-forest .vjs-volume-panel .vjs-volume-control{opacity:1;width:100%;height:100%}.vjs-theme-forest .vjs-volume-bar{background-color:transparent;margin:0}.vjs-theme-forest .vjs-slider-horizontal .vjs-volume-level{height:100%}.vjs-theme-forest .vjs-volume-bar.vjs-slider-horizontal{margin-top:0;margin-bottom:0;height:100%}.vjs-theme-forest .vjs-volume-bar:before{content:"";z-index:0;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--primary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-volume-level{overflow:hidden;background-color:transparent}.vjs-theme-forest .vjs-volume-level:before{content:"";z-index:1;width:0;height:0;position:absolute;top:0;left:0;border-left:3em solid transparent;border-bottom:2em solid var(--vjs-theme-forest--secondary);border-right:0 solid transparent;border-top:0 solid transparent}.vjs-theme-forest .vjs-progress-control:hover .vjs-progress-holder{font-size:1em}.vjs-theme-forest .vjs-play-progress:before{display:none}.vjs-theme-forest .vjs-progress-holder{border-radius:.2em;height:.5em;margin:0}.vjs-theme-forest .vjs-load-progress,.vjs-theme-forest .vjs-load-progress div,.vjs-theme-forest .vjs-play-progress{border-radius:.2em}\n'],encapsulation:2}),n})(),resolve:{clip:(n,e)=>(0,d.f3M)(lw).getClipByID(n.paramMap.get("id"))}},{path:"**",component:(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-not-found"]],decls:15,vars:0,consts:[[1,"relative","m-auto","left-0","right-0","z-10","w-36","h-52","border-indigo-400","border-4","top-32","ghost"],[1,"absolute","left-0","right-0","bottom-10","m-auto","text-center","text-4xl","font-bold"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","translate-x-6"],[1,"rounded-full","absolute","left-0","right-0","w-3","h-3","bg-indigo-400","mx-auto","mt-10","transform","-translate-x-6"],[1,"w-10","h-2","rounded-lg","absolute","left-0","right-0","mx-auto","mt-20","bg-indigo-400"],[1,"corner","border-indigo-400","border-4"],[1,"corner","two","border-indigo-400","border-4"],[1,"corner","three","border-indigo-400","border-4"],[1,"corner","four","border-indigo-400","border-4"],[1,"over"],[1,"over","two"],[1,"over","three"],[1,"over","four"],[1,"ghost-shadow","w-32","h-10","mx-auto","mt-56","rounded","bg-indigo-400","left-0","right-0","absolute"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"span",1),d._uU(2,"404"),d.qZA(),d._UZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13),d.qZA())}}),n})()}];let iK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Qy.forRoot(rK),Qy]}),n})();var sK=B(5032);function b3(n,e){return e?t=>Br(e.pipe(Fl(1),function oK(){return(0,Zi.e)((n,e)=>{n.subscribe((0,ht.x)(e,sK.Z))})}()),t.pipe(b3(n))):(0,Ti.z)((t,r)=>(0,Mo.Xf)(n(t,r)).pipe(Fl(1),Ro(t)))}var aK=B(3532);let $P=(()=>{class n{constructor(t,r,i,s){this.auth=t,this.db=r,this.router=i,this.aRoute=s,this.reDirect=!1,this.userCollection=r.collection("users"),this.isAuthenticate$=t.user.pipe((0,M.U)(l=>!!l)),this.isAuthenticateWithDelay$=this.isAuthenticate$.pipe(function cK(n,e=Wx.z){const t=function uK(n=0,e,t=Wx.P){let r=-1;return null!=e&&((0,aK.K)(e)?t=e:r=e),new Ur.y(i=>{let s=function lK(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(n,e);return b3(()=>t)}(1e3)),this.router.events.pipe(Oo(l=>l instanceof Ei),(0,M.U)(l=>this.aRoute.firstChild),Cr(l=>l?.data??Vt({}))).subscribe(l=>{this.reDirect=l.authOnly??!1})}createUser(t){var r=this;return(0,tt.Z)(function*(){if(!t.password)throw new Error("password my be provide");const i=yield r.auth.createUserWithEmailAndPassword(t.email,t.password);yield r.userCollection.doc(i.user?.uid).set({name:t.name,email:t.email,age:t.age,phoneNumber:t.phoneNumber}),yield i.user?.updateProfile({displayName:t.name})})()}logout(t){var r=this;return(0,tt.Z)(function*(){t.preventDefault(),yield r.auth.signOut(),r.reDirect&&(yield r.router.navigateByUrl("/"))})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fh),d.LFG(DP),d.LFG(us),d.LFG(Rt))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uw=(()=>{class n{constructor(){this.models=[]}register(t){this.models.push({id:t,visible:!1})}unregister(t){this.models.splice(this.models.findIndex(r=>r.id==t),1)}isModelOpen(t){return!!this.models.find(r=>r.id==t)?.visible}toggleModel(t){const r=this.models.find(i=>i.id==t);r&&(r.visible=!r.visible)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dK=[[["","heading",""]],"*"],hK=function(n){return{hidden:n}},fK=["[heading]","*"];let T3=(()=>{class n{constructor(t,r){this.model=t,this.el=r,this.modelID=""}ngOnInit(){document.body.appendChild(this.el.nativeElement)}closeModel(){this.model.toggleModel(this.modelID)}ngOnDestroy(){document.body.removeChild(this.el.nativeElement)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uw),d.Y36(d.SBq))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-model"]],inputs:{modelID:"modelID"},ngContentSelectors:fK,decls:13,vars:3,consts:[["id","modal",1,"fixed","z-50","inset-0","overflow-y-auto",3,"ngClass"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","transition-opacity",3,"click"],[1,"absolute","inset-0","bg-gray-800","opacity-75"],[1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-secondary","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"py-4","text-left","px-6"],[1,"flex","justify-between","items-center","pb-4"],[1,"modal-close","cursor-pointer","z-50",3,"click"]],template:function(t,r){1&t&&(d.F$t(dK),d.TgZ(0,"div",0)(1,"div",1)(2,"div",2),d.NdJ("click",function(){return r.closeModel()}),d._UZ(3,"div",3),d.qZA(),d.TgZ(4,"span",4),d._uU(5,"\u200b"),d.qZA(),d.TgZ(6,"div",5)(7,"div",6)(8,"div",7),d.Hsn(9),d.TgZ(10,"div",8),d.NdJ("click",function(){return r.closeModel()}),d._uU(11," \u2715 "),d.qZA()(),d.Hsn(12,1),d.qZA()()()()),2&t&&d.Q6J("ngClass",d.VKq(1,hK,!r.model.isModelOpen(r.modelID)))},dependencies:[fi]}),n})();const pK=["*"];let E3=(()=>{class n{constructor(){this.tabTitle="",this.active=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tab"]],inputs:{tabTitle:"tabTitle",active:"active"},ngContentSelectors:pK,decls:2,vars:2,template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div"),d.Hsn(1),d.qZA()),2&t&&d.ekj("hidden",!r.active)}}),n})();const gK=function(n,e){return{"hover:text-indigo-400":n,"hover:text-white bg-indigo-400":e}};function mK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li",2)(1,"a",3),d.NdJ("click",function(){const s=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.selectTab(s))}),d._uU(2),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(1),d.Q6J("ngClass",d.WLB(2,gK,!t.active,t.active)),d.xp6(1),d.hij(" ",t.tabTitle,"")}}const yK=["*"];let vK=(()=>{class n{ngAfterContentInit(){console.log(this.tabs);const t=this.tabs?.filter(r=>r.active);(!t||0===t.length)&&this.selectTab(this.tabs.first)}selectTab(t){return this.tabs?.forEach(r=>{r.active=!1}),t.active=!0,!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-tabs-container"]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,E3,4),2&t){let s;d.iGM(s=d.CRH())&&(r.tabs=s)}},ngContentSelectors:yK,decls:3,vars:1,consts:[[1,"flex","flex-wrap","mb-4"],["class","flex-auto text-center",4,"ngFor","ngForOf"],[1,"flex-auto","text-center"],["href","#",1,"block","rounded","py-3","px-4","transition","hover:text-white","text-white","bg-indigo-400",3,"ngClass","click"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"ul",0),d.YNc(1,mK,3,5,"li",1),d.qZA(),d.Hsn(2)),2&t&&(d.xp6(1),d.Q6J("ngForOf",r.tabs))},dependencies:[fi,gs]}),n})();const _K=["*"];let RD=(()=>{class n{constructor(){this.color="blue"}get bgColor(){return`bg-${this.color}-400`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-alert"]],inputs:{color:"color"},ngContentSelectors:_K,decls:2,vars:1,consts:[[1,"text-white","text-center","font-bold","p-4","mb-4","rounded-md",3,"ngClass"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0),d.Hsn(1),d.qZA()),2&t&&d.Q6J("ngClass",r.bgColor)},dependencies:[fi]}),n})();function HP(...n){const e=(0,bs.jO)(n),{args:t,keys:r}=Td(n),i=new Ur.y(s=>{const{length:l}=t;if(!l)return void s.complete();const c=new Array(l);let f=l,v=l;for(let T=0;T<l;T++){let A=!1;(0,Mo.Xf)(t[T]).subscribe((0,ht.x)(s,j=>{A||(A=!0,v--),c[T]=j},()=>f--,void 0,()=>{(!f||!A)&&(v||s.next(r?Xe(r,c):c),s.complete())}))}});return e?i.pipe(Re(e)):i}let w3=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),ay=(()=>{class n extends w3{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Hu=new d.OlP("NgValueAccessor"),TK={provide:Hu,useExisting:(0,d.Gpc)(()=>cw),multi:!0},wK=new d.OlP("CompositionEventMode");let cw=(()=>{class n extends w3{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function EK(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(wK,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[d._Bn([TK]),d.qOj]}),n})();const SK=!1;function Bp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function C3(n){return null!=n&&"number"==typeof n.length}const Qs=new d.OlP("NgValidators"),Vp=new d.OlP("NgAsyncValidators"),CK=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rs{static min(e){return function x3(n){return e=>{if(Bp(e.value)||Bp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function I3(n){return e=>{if(Bp(e.value)||Bp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return D3(e)}static requiredTrue(e){return function A3(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function k3(n){return Bp(n.value)||CK.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function M3(n){return e=>Bp(e.value)||!C3(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function O3(n){return e=>C3(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return R3(e)}static nullValidator(e){return null}static compose(e){return U3(e)}static composeAsync(e){return B3(e)}}function D3(n){return Bp(n.value)?{required:!0}:null}function R3(n){if(!n)return PD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Bp(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function PD(n){return null}function P3(n){return null!=n}function N3(n){const e=(0,d.QGY)(n)?(0,Wn.D)(n):n;if(SK&&!(0,d.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new d.vHH(-1101,t)}return e}function L3(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function F3(n,e){return e.map(t=>t(n))}function j3(n){return n.map(e=>function xK(n){return!n.validate}(e)?e:t=>e.validate(t))}function U3(n){if(!n)return null;const e=n.filter(P3);return 0==e.length?null:function(t){return L3(F3(t,e))}}function GP(n){return null!=n?U3(j3(n)):null}function B3(n){if(!n)return null;const e=n.filter(P3);return 0==e.length?null:function(t){return HP(F3(t,e).map(N3)).pipe((0,M.U)(L3))}}function zP(n){return null!=n?B3(j3(n)):null}function V3(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $3(n){return n._rawValidators}function H3(n){return n._rawAsyncValidators}function qP(n){return n?Array.isArray(n)?n:[n]:[]}function ND(n,e){return Array.isArray(n)?n.includes(e):n===e}function G3(n,e){const t=qP(e);return qP(n).forEach(i=>{ND(t,i)||t.push(i)}),t}function z3(n,e){return qP(e).filter(t=>!ND(n,t))}class q3{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=GP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Zo extends q3{get formDirective(){return null}get path(){return null}}class $p extends q3{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class W3{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let WP=(()=>{class n extends W3{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($p,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),dw=(()=>{class n extends W3{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Zo,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();function K3(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const YP=!1,hw="VALID",FD="INVALID",s0="PENDING",fw="DISABLED";function QP(n){return(jD(n)?n.validators:n)||null}function XP(n,e){return(jD(e)?e.asyncValidators:n)||null}function jD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Q3{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hw}get invalid(){return this.status===FD}get pending(){return this.status==s0}get disabled(){return this.status===fw}get enabled(){return this.status!==fw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(G3(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(G3(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(z3(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(z3(e,this._rawAsyncValidators))}hasValidator(e){return ND(this._rawValidators,e)}hasAsyncValidator(e){return ND(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=s0,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=fw,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hw,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hw||this.status===s0)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fw:hw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=s0,this._hasOwnPendingAsyncValidator=!0;const t=N3(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?fw:this.errors?FD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(s0)?s0:this._anyControlsHaveStatus(FD)?FD:hw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function RK(n){return Array.isArray(n)?GP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function PK(n){return Array.isArray(n)?zP(n):n||null}(this._rawAsyncValidators)}}class o0 extends Q3{constructor(e,t,r){super(QP(t),XP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Y3(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,YP?function OK(n,e){return`Must supply a value for form control ${K3(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function Z3(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,YP?function kK(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new d.vHH(1001,YP?function MK(n,e){return`Cannot find form control ${K3(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const ly=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>pw}),pw="always";function gw(n,e,t=pw){JP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function FK(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&X3(n,e)})}(n,e),function UK(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function jK(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&X3(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function LK(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function BD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),$D(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function VD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function JP(n,e){const t=$3(n);null!==e.validator?n.setValidators(V3(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=H3(n);null!==e.asyncValidator?n.setAsyncValidators(V3(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();VD(e._rawValidators,i),VD(e._rawAsyncValidators,i)}function $D(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=$3(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=H3(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(l=>l!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return VD(e._rawValidators,r),VD(e._rawAsyncValidators,r),t}function X3(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function J3(n,e){JP(n,e)}function tN(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function e$(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nN(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===cw?t=s:function $K(n){return Object.getPrototypeOf(n.constructor)===ay}(s)?r=s:i=s}),i||r||t||null}const GK={provide:Zo,useExisting:(0,d.Gpc)(()=>HD)},mw=(()=>Promise.resolve())();let HD=(()=>{class n extends Zo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new o0({},GP(t),zP(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){mw.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),gw(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){mw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){mw.then(()=>{const r=this._findContainer(t.path),i=new o0({});J3(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){mw.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){mw.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e$(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Qs,10),d.Y36(Vp,10),d.Y36(ly,8))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([GK]),d.qOj]}),n})();function t$(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function n$(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nu=class extends Q3{constructor(e=null,t,r){super(QP(t),XP(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=n$(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){t$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){t$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){n$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},WK={provide:$p,useExisting:(0,d.Gpc)(()=>rN)},s$=(()=>Promise.resolve())();let rN=(()=>{class n extends $p{constructor(t,r,i,s,l,c){super(),this._changeDetectorRef=l,this.callSetDisabledState=c,this.control=new nu,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nN(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),tN(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){s$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);s$.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function UD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Zo,9),d.Y36(Qs,10),d.Y36(Vp,10),d.Y36(Hu,10),d.Y36(d.sBO,8),d.Y36(ly,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([WK]),d.qOj,d.TTD]}),n})(),yw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),a$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const iN=new d.OlP("NgModelWithFormControlWarning"),XK={provide:$p,useExisting:(0,d.Gpc)(()=>sN)};let sN=(()=>{class n extends $p{set isDisabled(t){}constructor(t,r,i,s,l){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=l,this.update=new d.vpe,this._ngModelWarningSent=!1,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=nN(0,i)}ngOnChanges(t){if(this._isControlChanged(t)){const r=t.form.previousValue;r&&BD(r,this,!1),gw(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}tN(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&BD(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Qs,10),d.Y36(Vp,10),d.Y36(Hu,10),d.Y36(iN,8),d.Y36(ly,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[d._Bn([XK]),d.qOj,d.TTD]}),n})();const JK={provide:Zo,useExisting:(0,d.Gpc)(()=>a0)};let a0=(()=>{class n extends Zo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($D(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return gw(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){BD(t.control||null,t,!1),function HK(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,e$(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(BD(r||null,t),(n=>n instanceof nu)(i)&&(gw(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);J3(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function BK(n,e){return $D(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){JP(this.form,this),this._oldForm&&$D(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Qs,10),d.Y36(Vp,10),d.Y36(ly,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([JK]),d.qOj,d.TTD]}),n})();const rZ={provide:Hu,useExisting:(0,d.Gpc)(()=>lN),multi:!0};function h$(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let lN=(()=>{class n extends ay{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=h$(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function iZ(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([rZ]),d.qOj]}),n})(),f$=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(h$(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(lN,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const sZ={provide:Hu,useExisting:(0,d.Gpc)(()=>uN),multi:!0};function p$(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let uN=(()=>{class n extends ay{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,l)=>{s._setSelected(i.indexOf(l.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const l=s;for(let c=0;c<l.length;c++){const v=this._getOptionValue(l[c].value);i.push(v)}}else{const l=r.options;for(let c=0;c<l.length;c++){const f=l[c];if(f.selected){const v=this._getOptionValue(f.value);i.push(v)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function oZ(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([sZ]),d.qOj]}),n})(),g$=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(p$(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(p$(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(uN,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),uy=(()=>{class n{constructor(){this._validator=PD}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):PD,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const uZ={provide:Qs,useExisting:(0,d.Gpc)(()=>GD),multi:!0};let GD=(()=>{class n extends uy{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>D3}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([uZ]),d.qOj]}),n})();const pZ={provide:Qs,useExisting:(0,d.Gpc)(()=>cN),multi:!0};let cN=(()=>{class n extends uy{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>R3(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("pattern",r._enabled?r.pattern:null)},inputs:{pattern:"pattern"},features:[d._Bn([pZ]),d.qOj]}),n})(),S$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[a$]}),n})(),C$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ly,useValue:t.callSetDisabledState??pw}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[S$]}),n})(),zD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iN,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ly,useValue:t.callSetDisabledState??pw}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[S$]}),n})();function mZ(n,e){if(1&n&&(d.TgZ(0,"app-alert",11),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Q6J("color",t.alertColor),d.xp6(1),d.hij(" ",t.alertMsg,"\n")}}function yZ(n,e){1&n&&(d.TgZ(0,"p",12),d._uU(1," Email is invalid "),d.qZA())}function vZ(n,e){1&n&&(d.TgZ(0,"p",12),d._uU(1," Password is invalid "),d.qZA())}let _Z=(()=>{class n{constructor(t){this.auth=t,this.showAlert=!1,this.alertMsg="Please wait! We are logging in",this.alertColor="blue",this.inSubmission=!1,this.credentials={email:"",password:""}}login(){var t=this;return(0,tt.Z)(function*(){t.showAlert=!0,t.alertMsg="Please wait! We are logging in",t.alertColor="blue",t.inSubmission=!0;try{yield t.auth.signInWithEmailAndPassword(t.credentials.email,t.credentials.password)}catch{return t.alertMsg="Error occured",t.alertColor="red",void(t.inSubmission=!1)}t.alertMsg="Success",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Fh))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:17,vars:6,consts:[[3,"color",4,"ngIf"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"mb-3"],[1,"inline-block","mb-2"],["type","email","name","email","placeholder","Enter Email","required","","pattern","[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["email","ngModel"],["class","text-red-400",4,"ngIf"],["type","password","name","password","required","","placeholder","Password",1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50",3,"disabled"],[3,"color"],[1,"text-red-400"]],template:function(t,r){if(1&t&&(d.YNc(0,mZ,2,2,"app-alert",0),d.TgZ(1,"form",1,2),d.NdJ("ngSubmit",function(){return r.login()}),d.TgZ(3,"div",3)(4,"label",4),d._uU(5,"Email"),d.qZA(),d.TgZ(6,"input",5,6),d.NdJ("ngModelChange",function(s){return r.credentials.email=s}),d.qZA(),d.YNc(8,yZ,2,0,"p",7),d.qZA(),d.TgZ(9,"div",3)(10,"label",4),d._uU(11,"Password"),d.qZA(),d.TgZ(12,"input",8,9),d.NdJ("ngModelChange",function(s){return r.credentials.password=s}),d.qZA(),d.YNc(14,vZ,2,0,"p",7),d.qZA(),d.TgZ(15,"button",10),d._uU(16," Submit "),d.qZA()()),2&t){const i=d.MAs(2),s=d.MAs(7),l=d.MAs(13);d.Q6J("ngIf",r.showAlert),d.xp6(6),d.Q6J("ngModel",r.credentials.email),d.xp6(2),d.Q6J("ngIf",s.errors&&s.dirty&&s.touched),d.xp6(4),d.Q6J("ngModel",r.credentials.password),d.xp6(2),d.Q6J("ngIf",l.errors&&l.dirty&&l.touched),d.xp6(1),d.Q6J("disabled",i.invalid)}},dependencies:[ms,RD,yw,cw,WP,dw,GD,cN,rN,HD]}),n})();class bZ{static match(e,t){return r=>{const i=r.get(e),s=r.get(t);if(!i||!s)return{CtrlValueNotFound:!0};const l=i.value===s.value?null:{noMatch:!0};return s.setErrors(l),l}}}let TZ=(()=>{class n{constructor(t){this.afAuth=t,this.validate=r=>this.afAuth.fetchSignInMethodsForEmail(r.value).then(i=>i.length?{emailTaken:!0}:null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fh))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const qD=new d.OlP("ngx-mask config"),x$=new d.OlP("new ngx-mask config"),I$=new d.OlP("initial ngx-mask config"),EZ={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,triggerOnMaskChange:!1,maskFilled:new d.vpe,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},wZ=["Hh:m0:s0","Hh:m0","m0:s0"],SZ=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"];let CZ=(()=>{class n{constructor(){this._config=(0,d.f3M)(qD),this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.hiddenInput=this._config.hiddenInput,this.clearIfNotMatch=this._config.clearIfNotMatch,this.specialCharacters=this._config.specialCharacters,this.patterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime,this._shift=new Set,this.maskExpression="",this.actualValue="",this.shownMaskExpression="",this._formatWithSeparators=(t,r,i,s)=>{let l=[],c="";if(Array.isArray(i)){const j=new RegExp(i.map(P=>"[\\^$.|?*+()".indexOf(P)>=0?`\\${P}`:P).join("|"));l=t.split(j),c=t.match(j)?.[0]??""}else l=t.split(i),c=i;const f=l.length>1?`${c}${l[1]}`:"";let v=l[0]??"";const T=this.separatorLimit.replace(/\s/g,"");T&&+T&&(v="-"===v[0]?`-${v.slice(1,v.length).slice(0,T.length)}`:v.slice(0,T.length));const A=/(\d+)(\d{3})/;for(;r&&A.test(v);)v=v.replace(A,"$1"+r+"$2");return void 0===s?v+f:0===s?v:v+f.substring(0,s+1)},this.percentage=t=>Number(t)>=0&&Number(t)<=100,this.getPrecision=t=>{const r=t.split(".");return r.length>1?Number(r[r.length-1]):1/0},this.checkAndRemoveSuffix=t=>{for(let r=this.suffix?.length-1;r>=0;r--){const i=this.suffix.substring(r,this.suffix?.length);if(t.includes(i)&&r!==this.suffix?.length-1&&(r-1<0||!t.includes(this.suffix.substring(r-1,this.suffix?.length))))return t.replace(i,"")}return t},this.checkInputPrecision=(t,r,i)=>{if(r<1/0){if(Array.isArray(i)){const f=i.find(v=>v!==this.thousandSeparator);i=f||i[0]}const s=new RegExp(this._charToRegExpExpression(i)+`\\d{${r}}.*$`),l=t.match(s),c=(l&&l[0]?.length)??0;c-1>r&&(t=t.substring(0,t.length-(c-1-r))),0===r&&this._compareOrIncludes(t[t.length-1],i,this.thousandSeparator)&&(t=t.substring(0,t.length-1))}return t}}applyMaskWithPattern(t,r){const[i,s]=r;return this.customPattern=s,this.applyMask(t,i)}applyMask(t,r,i=0,s=!1,l=!1,c=(()=>{})){if(!r||"string"!=typeof t)return"";let f=0,v="",T=!1,A=!1,j=1,P=!1;t.slice(0,this.prefix.length)===this.prefix&&(t=t.slice(this.prefix.length,t.length)),this.suffix&&t?.length>0&&(t=this.checkAndRemoveSuffix(t));const W=t.toString().split("");if("IP"===r){const Ie=t.split(".");this.ipError=this._validIP(Ie),r="099.099.099.099"}const J=[];for(let Ie=0;Ie<t.length;Ie++)t[Ie]?.match("\\d")&&J.push(t[Ie]??"");if("CPF_CNPJ"===r&&(this.cpfCnpjError=11!==J.length&&14!==J.length,r=J.length>11?"00.000.000/0000-00":"000.000.000-00"),r.startsWith("percent")){if(t.match("[a-z]|[A-Z]")||t.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)){t=this._stripToDecimal(t);const Ie=this.getPrecision(r);t=this.checkInputPrecision(t,Ie,this.decimalMarker)}t.indexOf(".")>0&&!this.percentage(t.substring(0,t.indexOf(".")))&&(t=`${t.substring(0,t.indexOf(".")-1)}${t.substring(t.indexOf("."),t.length)}`),v=this.percentage(t)?t:t.substring(0,t.length-1)}else if(r.startsWith("separator")){(t.match("[w\u0430-\u044f\u0410-\u042f]")||t.match("[\u0401\u0451\u0410-\u044f]")||t.match("[a-z]|[A-Z]")||t.match(/[-@#!$%\\^&*()_\xa3\xac'+|~=`{}\]:";<>.?/]/)||t.match("[^A-Za-z0-9,]"))&&(t=this._stripToDecimal(t)),t=t.length>1&&"0"===t[0]&&t[1]!==this.thousandSeparator&&!this._compareOrIncludes(t[1],this.decimalMarker,this.thousandSeparator)&&!l?t.slice(0,t.length-1):t,l&&(t=this._compareOrIncludes(t[t.length-1],this.decimalMarker,this.thousandSeparator)?t.slice(0,t.length-1):t);const Ie=this._charToRegExpExpression(this.thousandSeparator);let pe='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(Ie,"");if(Array.isArray(this.decimalMarker))for(const ai of this.decimalMarker)pe=pe.replace(this._charToRegExpExpression(ai),"");else pe=pe.replace(this._charToRegExpExpression(this.decimalMarker),"");const at=new RegExp("["+pe+"]");(t.match(at)||1===t.length&&this._compareOrIncludes(t,this.decimalMarker,this.thousandSeparator))&&(t=t.substring(0,t.length-1));const Dt=this.getPrecision(r),un=(t=this.checkInputPrecision(t,Dt,this.decimalMarker)).replace(new RegExp(Ie,"g"),"");v=this._formatWithSeparators(un,this.thousandSeparator,this.decimalMarker,Dt);const jn=v.indexOf(",")-t.indexOf(","),dr=v.length-t.length;if(dr>0&&","!==v[i]){A=!0;let ai=0;do{this._shift.add(i+ai),ai++}while(ai<dr)}else 0!==jn&&i>0&&!(v.indexOf(",")>=i&&i>3)||!(v.indexOf(".")>=i&&i>3)&&dr<=0?(this._shift.clear(),A=!0,j=dr,this._shift.add(i+=dr)):this._shift.clear()}else for(let Ie=0,pe=W[0];Ie<W.length&&f!==r.length;Ie++,pe=W[Ie]??"")if(this._checkSymbolMask(pe,r[f]??"")&&"?"===r[f+1])v+=pe,f+=2;else if("*"===r[f+1]&&T&&this._checkSymbolMask(pe,r[f+2]??""))v+=pe,f+=3,T=!1;else if(this._checkSymbolMask(pe,r[f]??"")&&"*"===r[f+1])v+=pe,T=!0;else if("?"===r[f+1]&&this._checkSymbolMask(pe,r[f+2]??""))v+=pe,f+=3;else if(this._checkSymbolMask(pe,r[f]??"")){if("H"===r[f]&&Number(pe)>2){f+=1,this._shiftStep(r,f,W.length),Ie--,this.leadZeroDateTime&&(v+="0");continue}if("h"===r[f]&&"2"===v&&Number(pe)>3){f+=1,Ie--;continue}if("m"===r[f]&&Number(pe)>5){f+=1,this._shiftStep(r,f,W.length),Ie--,this.leadZeroDateTime&&(v+="0");continue}if("s"===r[f]&&Number(pe)>5){f+=1,this._shiftStep(r,f,W.length),Ie--,this.leadZeroDateTime&&(v+="0");continue}const at=31;if("d"===r[f]&&(Number(pe)>3&&this.leadZeroDateTime||Number(t.slice(f,f+2))>at||"/"===t[f+1])){f+=1,this._shiftStep(r,f,W.length),Ie--,this.leadZeroDateTime&&(v+="0");continue}if("M"===r[f]){const un=0===f&&(Number(pe)>2||Number(t.slice(f,f+2))>12||"/"===t[f+1]),jn=t.slice(f-3,f-1).includes("/")&&("/"===t[f-2]&&Number(t.slice(f-1,f+1))>12&&"/"!==t[f]||"/"===t[f]||"/"===t[f-3]&&Number(t.slice(f-2,f))>12&&"/"!==t[f-1]||"/"===t[f-1]),dr=Number(t.slice(f-3,f-1))<=at&&!t.slice(f-3,f-1).includes("/")&&"/"===t[f-1]&&(Number(t.slice(f,f+2))>12||"/"===t[f+1]),ai=Number(t.slice(f-3,f-1))>at&&!t.slice(f-3,f-1).includes("/")&&!t.slice(f-2,f).includes("/")&&Number(t.slice(f-2,f))>12,li=Number(t.slice(f-3,f-1))<=at&&!t.slice(f-3,f-1).includes("/")&&"/"!==t[f-1]&&Number(t.slice(f-1,f+1))>12;if(Number(pe)>1&&this.leadZeroDateTime||un||jn||dr||ai||li){f+=1,this._shiftStep(r,f,W.length),Ie--,this.leadZeroDateTime&&(v+="0");continue}}v+=pe,f++}else" "===pe&&" "===r[f]?(v+=pe,f++):-1!==this.specialCharacters.indexOf(r[f]??"")?(v+=r[f],f++,this._shiftStep(r,f,W.length),Ie--):this.specialCharacters.indexOf(pe)>-1&&this.patterns[r[f]??""]&&this.patterns[r[f]??""]?.optional?(W[f]&&"099.099.099.099"!==r&&"000.000.000-00"!==r&&"00.000.000/0000-00"!==r&&!r.match(/^9+\.0+$/)&&(v+=W[f]),f++,Ie--):"*"===this.maskExpression[f+1]&&this._findSpecialChar(this.maskExpression[f+2]??"")&&this._findSpecialChar(pe)===this.maskExpression[f+2]&&T||"?"===this.maskExpression[f+1]&&this._findSpecialChar(this.maskExpression[f+2]??"")&&this._findSpecialChar(pe)===this.maskExpression[f+2]&&T?(f+=3,v+=pe):this.showMaskTyped&&this.specialCharacters.indexOf(pe)<0&&pe!==this.placeHolderCharacter&&(P=!0);v.length+1===r.length&&-1!==this.specialCharacters.indexOf(r[r.length-1]??"")&&(v+=r[r.length-1]);let se=i+1;for(;this._shift.has(se);)j++,se++;let Ne=s&&!r.startsWith("separator")?f:this._shift.has(i)?j:0;P&&Ne--,c(Ne,A),j<0&&this._shift.clear();let Qe=!1;l&&(Qe=W.every(Ie=>this.specialCharacters.includes(Ie)));let qe=`${this.prefix}${Qe?"":v}${this.suffix}`;return 0===v.length&&(qe=`${this.prefix}${v}`),qe}_findSpecialChar(t){return this.specialCharacters.find(r=>r===t)}_checkSymbolMask(t,r){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[r]?.pattern&&this.patterns[r]?.pattern.test(t))??!1}_stripToDecimal(t){return t.split("").filter((r,i)=>{const s="string"==typeof this.decimalMarker?r===this.decimalMarker:this.decimalMarker.includes(r);return r.match("^-?\\d")||r===this.thousandSeparator||s||"-"===r&&0===i&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(t){return t&&(" "===t?"\\s":"[\\^$.|?*+()".indexOf(t)>=0?`\\${t}`:t)}_shiftStep(t,r,i){const s=/[*?]/g.test(t.slice(0,r))?i:r;this._shift.add(s+this.prefix.length||0)}_compareOrIncludes(t,r,i){return Array.isArray(r)?r.filter(s=>s!==i).includes(t):t===r}_validIP(t){return!(4===t.length&&!t.some((r,i)=>t.length!==i+1?""===r||Number(r)>255:""===r||Number(r.substring(0,3))>255))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),dN=(()=>{class n extends CZ{constructor(){super(...arguments),this.isNumberValue=!1,this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this.triggerOnMaskChange=!1,this.onChange=t=>{},this.document=(0,d.f3M)(oe),this._config=(0,d.f3M)(qD),this._elementRef=(0,d.f3M)(d.SBq,{optional:!0}),this._renderer=(0,d.f3M)(d.Qsj,{optional:!0})}applyMask(t,r,i=0,s=!1,l=!1,c=(()=>{})){if(!r)return t!==this.actualValue?this.actualValue:t;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"","IP"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),"CPF_CNPJ"===this.maskExpression&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(t||"#")),!t&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown;const f=t&&"number"==typeof this.selStart?t[this.selStart]??"":"";let v="";if(void 0!==this.hiddenInput&&!this.writingValue){let P=this.actualValue.split("");""!==t&&P.length?"number"==typeof this.selStart&&"number"==typeof this.selEnd&&(t.length>P.length?P.splice(this.selStart,0,f):t.length<P.length&&(P.length-t.length==1?P.splice(this.selStart-1,1):P.splice(this.selStart,this.selEnd-this.selStart))):P=[],this.showMaskTyped&&(t=this.removeMask(t)),v=this.actualValue.length&&P.length<=t.length?this.shiftTypedSymbols(P.join("")):t}this.showMaskTyped&&(t=this.removeMask(t)),v=Boolean(v)&&v.length?v:t;const T=super.applyMask(v,r,i,s,l,c);if(this.actualValue=this.getActualValue(T),"."===this.thousandSeparator&&"."===this.decimalMarker&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&!0===this.dropSpecialCharacters&&(this.specialCharacters=this.specialCharacters.filter(P=>!this._compareOrIncludes(P,this.decimalMarker,this.thousandSeparator))),this.formControlResult(T),!this.showMaskTyped)return this.hiddenInput&&T&&T.length?this.hideInput(T,this.maskExpression):T;const A=T.length,j=this.prefix+this.maskIsShown;if(this.maskExpression.includes("H")){const P=this._numberSkipedSymbols(T);return T+j.slice(A+P)}return"IP"===this.maskExpression||"CPF_CNPJ"===this.maskExpression?T+j:T+j.slice(A)}_numberSkipedSymbols(t){const r=/(^|\D)(\d\D)/g;let i=r.exec(t),s=0;for(;null!=i;)s+=1,i=r.exec(t);return s}applyValueChanges(t,r,i,s=(()=>{})){const l=this._elementRef?.nativeElement;l&&(l.value=this.applyMask(l.value,this.maskExpression,t,r,i,s),l!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(t,r){return t.split("").map((i,s)=>this.patterns&&this.patterns[r[s]??""]&&this.patterns[r[s]??""]?.symbol?this.patterns[r[s]??""]?.symbol:i).join("")}getActualValue(t){const r=t.split("").filter((i,s)=>{const l=this.maskExpression[s]??"";return this._checkSymbolMask(i,l)||this.specialCharacters.includes(l)&&i===l});return r.join("")===t?r.join(""):t}shiftTypedSymbols(t){let r="";return(t&&t.split("").map((s,l)=>{if(this.specialCharacters.includes(t[l+1]??"")&&t[l+1]!==this.maskExpression[l+1])return r=s,t[l+1];if(r.length){const c=r;return r="",c}return s})||[]).join("")}numberToString(t){return t||0===t?Number(t).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}):String(t)}showMaskInInput(t){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}if(this.showMaskTyped){if(t){if("IP"===this.maskExpression)return this._checkForIp(t);if("CPF_CNPJ"===this.maskExpression)return this._checkForCpfCnpj(t)}return this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){const t=this._elementRef?.nativeElement;t&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==t.value.replace(/_/g,"").length&&(this.formElementProperty=["value",""],this.applyMask(t.value,this.maskExpression))}set formElementProperty([t,r]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,t,r))}checkSpecialCharAmount(t){return t.split("").filter(i=>this._findSpecialChar(i)).length}removeMask(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(t){if("#"===t)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;const r=[];for(let i=0;i<t.length;i++){const s=t[i]??"";s&&s.match("\\d")&&r.push(s)}return r.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:r.length>3&&r.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:r.length>6&&r.length<=9?this.placeHolderCharacter:""}_checkForCpfCnpj(t){const r=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,i=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if("#"===t)return r;const s=[];for(let l=0;l<t.length;l++){const c=t[l]??"";c&&c.match("\\d")&&s.push(c)}return s.length<=3?r.slice(s.length,r.length):s.length>3&&s.length<=6?r.slice(s.length+1,r.length):s.length>6&&s.length<=9?r.slice(s.length+2,r.length):s.length>9&&s.length<11?r.slice(s.length+3,r.length):11===s.length?"":12===s.length?i.slice(17===t.length?16:15,i.length):s.length>12&&s.length<=14?i.slice(s.length+4,i.length):""}_getActiveElement(t=this.document){const r=t?.activeElement?.shadowRoot;return r?.activeElement?this._getActiveElement(r):t.activeElement}formControlResult(t){this.writingValue||!this.triggerOnMaskChange&&this.maskChanged?this.maskChanged=!1:Array.isArray(this.dropSpecialCharacters)?this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(t)),this.dropSpecialCharacters))):this.onChange(this.dropSpecialCharacters?this._toNumber(this._checkSymbols(t)):this._removeSuffix(t))}_toNumber(t){if(!this.isNumberValue||""===t)return t;const r=Number(t);return Number.isNaN(r)?t:r}_removeMask(t,r){return t&&t.replace(this._regExpForRemove(r),"")}_removePrefix(t){return this.prefix?t&&t.replace(this.prefix,""):t}_removeSuffix(t){return this.suffix?t&&t.replace(this.suffix,""):t}_retrieveSeparatorValue(t){return this._removeMask(this._removeSuffix(this._removePrefix(t)),this.specialCharacters)}_regExpForRemove(t){return new RegExp(t.map(r=>`\\${r}`).join("|"),"gi")}_replaceDecimalMarkerToDot(t){const r=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return t.replace(this._regExpForRemove(r),".")}_checkSymbols(t){if(""===t)return t;const r=this._retrieveSeparatorPrecision(this.maskExpression),i=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(t));return this.isNumberValue?r?t===this.decimalMarker?null:this._checkPrecision(this.maskExpression,i):Number(i):i}_retrieveSeparatorPrecision(t){const r=t.match(new RegExp("^separator\\.([^d]*)"));return r?Number(r[1]):null}_checkPrecision(t,r){return t.indexOf("2")>0?Number(r).toFixed(2):Number(r)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function xZ(){const n=(0,d.f3M)(I$),e=(0,d.f3M)(x$);return e instanceof Function?{...n,...e()}:{...n,...e}}function D$(n){return[{provide:x$,useValue:n},{provide:I$,useValue:EZ},{provide:qD,useFactory:xZ},dN]}let IZ=(()=>{class n{constructor(){this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.triggerOnMaskChange=null,this.maskFilled=new d.vpe,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this.document=(0,d.f3M)(oe),this._maskService=(0,d.f3M)(dN,{self:!0}),this._config=(0,d.f3M)(qD),this.onChange=t=>{},this.onTouch=()=>{}}ngOnChanges(t){const{maskExpression:r,specialCharacters:i,patterns:s,prefix:l,suffix:c,thousandSeparator:f,decimalMarker:v,dropSpecialCharacters:T,hiddenInput:A,showMaskTyped:j,placeHolderCharacter:P,shownMaskExpression:W,showTemplate:J,clearIfNotMatch:se,validation:Ne,separatorLimit:Qe,allowNegativeNumbers:qe,leadZeroDateTime:Ie,triggerOnMaskChange:pe}=t;if(r&&(r.currentValue!==r.previousValue&&!r.firstChange&&(this._maskService.maskChanged=!0),r.currentValue&&r.currentValue.split("||").length>1?(this._maskExpressionArray=r.currentValue.split("||").sort((at,Dt)=>at.length-Dt.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=r.currentValue||"",this._maskService.maskExpression=this._maskValue)),i){if(!i.currentValue||!Array.isArray(i.currentValue))return;this._maskService.specialCharacters=i.currentValue||[]}s&&s.currentValue&&(this._maskService.patterns=s.currentValue),l&&(this._maskService.prefix=l.currentValue),c&&(this._maskService.suffix=c.currentValue),f&&(this._maskService.thousandSeparator=f.currentValue),v&&(this._maskService.decimalMarker=v.currentValue),T&&(this._maskService.dropSpecialCharacters=T.currentValue),A&&(this._maskService.hiddenInput=A.currentValue),j&&(this._maskService.showMaskTyped=j.currentValue),P&&(this._maskService.placeHolderCharacter=P.currentValue),W&&(this._maskService.shownMaskExpression=W.currentValue),J&&(this._maskService.showTemplate=J.currentValue),se&&(this._maskService.clearIfNotMatch=se.currentValue),Ne&&(this._maskService.validation=Ne.currentValue),Qe&&(this._maskService.separatorLimit=Qe.currentValue),qe&&(this._maskService.allowNegativeNumbers=qe.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(at=>"-"!==at))),Ie&&(this._maskService.leadZeroDateTime=Ie.currentValue),pe&&(this._maskService.triggerOnMaskChange=pe.currentValue),this._applyMask()}validate({value:t}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(t);if(this._maskService.cpfCnpjError)return this._createValidationError(t);if(this._maskValue.startsWith("separator")||SZ.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(wZ.includes(this._maskValue))return this._validateTime(t);if(t&&t.toString().length>=1){let r=0;for(const i in this._maskService.patterns)if(this._maskService.patterns[i]?.optional&&(this._maskValue.indexOf(i)!==this._maskValue.lastIndexOf(i)?r+=this._maskValue.split("").filter(l=>l===i).join("").length:-1!==this._maskValue.indexOf(i)&&r++,-1!==this._maskValue.indexOf(i)&&t.toString().length>=this._maskValue.indexOf(i)||r===this._maskValue.length))return null;if(1===this._maskValue.indexOf("{")&&t.toString().length===this._maskValue.length+Number((this._maskValue.split("{")[1]??"").split("}")[0])-4||1===this._maskValue.indexOf("*")||1===this._maskValue.indexOf("?"))return null;if(this._maskValue.indexOf("*")>1&&t.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&t.toString().length<this._maskValue.indexOf("?")||1===this._maskValue.indexOf("{"))return this._createValidationError(t);if(-1===this._maskValue.indexOf("*")||-1===this._maskValue.indexOf("?")){const i=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkSpecialCharAmount(this._maskValue)-r:this._maskValue.length-r;if(t.toString().length<i)return this._createValidationError(t)}}return t&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onModelChange(t){(""===t||null==t)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(t){const r=t.target;if(this._inputValue=r.value,this._setMask(),!this._maskValue)return void this.onChange(r.value);let i=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart,s=0,l=!1;if(this._maskService.applyValueChanges(i,this._justPasted,"Backspace"===this._code||"Delete"===this._code,(f,v)=>{this._justPasted=!1,s=f,l=v}),this._getActiveElement()!==r)return;this._maskExpressionArray.length&&(i=1===r.selectionStart?r.selectionStart+this._maskService.prefix.length:r.selectionStart),this._position=1===this._position&&1===this._inputValue.length?null:this._position;let c=this._position?this._inputValue.length+i+s:i+("Backspace"!==this._code||l?s:0);c>this._getActualInputLength()&&(c=this._getActualInputLength()),c<0&&(c=0),r.setSelectionRange(c,c),this._position=null}onBlur(){this._maskValue&&this._maskService.clearIfNotMatchFn(),this.onTouch()}onClick(t){if(!this._maskValue)return;const r=t.target;null!==r&&null!==r.selectionStart&&r.selectionStart===r.selectionEnd&&r.selectionStart>this._maskService.prefix.length&&38!==t.keyCode&&this._maskService.showMaskTyped&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),r.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===r.value?(r.focus(),r.setSelectionRange(0,0)):r.selectionStart>this._maskService.actualValue.length&&r.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));const l=r&&(r.value&&r.value!==this._maskService.prefix?r.value:this._maskService.prefix+this._maskService.maskIsShown);r&&r.value!==l&&(r.value=l),r&&(r.selectionStart||r.selectionEnd)<=this._maskService.prefix.length?r.selectionStart=this._maskService.prefix.length:r&&r.selectionEnd>this._getActualInputLength()&&(r.selectionEnd=this._getActualInputLength())}onKeyDown(t){if(!this._maskValue)return;this._code=t.code?t.code:t.key;const r=t.target;if(this._inputValue=r.value,this._setMask(),38===t.keyCode&&t.preventDefault(),37===t.keyCode||8===t.keyCode||46===t.keyCode){if(8===t.keyCode&&0===r.value.length&&(r.selectionStart=r.selectionEnd),8===t.keyCode&&0!==r.selectionStart)if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&r.selectionStart<=this.prefix.length)r.setSelectionRange(this.prefix.length,r.selectionEnd);else if(this._inputValue.length!==r.selectionStart&&1!==r.selectionStart)for(;this.specialCharacters.includes((this._inputValue[r.selectionStart-1]??"").toString())&&(this.prefix.length>=1&&r.selectionStart>this.prefix.length||0===this.prefix.length);)r.setSelectionRange(r.selectionStart-1,r.selectionEnd);this.checkSelectionOnDeletion(r),this._maskService.prefix.length&&r.selectionStart<=this._maskService.prefix.length&&r.selectionEnd<=this._maskService.prefix.length&&t.preventDefault(),8===t.keyCode&&!r.readOnly&&0===r.selectionStart&&r.selectionEnd===r.value.length&&0!==r.value.length&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<r.selectionStart?r.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(65===t.keyCode&&t.ctrlKey||65===t.keyCode&&t.metaKey)&&(r.setSelectionRange(0,this._getActualInputLength()),t.preventDefault()),this._maskService.selStart=r.selectionStart,this._maskService.selEnd=r.selectionEnd}writeValue(t){var r=this;return(0,tt.Z)(function*(){"object"==typeof t&&null!==t&&"value"in t&&("disable"in t&&r.setDisabledState(Boolean(t.disable)),t=t.value),("number"==typeof t||r._maskValue.startsWith("separator"))&&(t=r._maskService.numberToString(t),Array.isArray(r.decimalMarker)||(t="."!==r.decimalMarker?t.replace(".",r.decimalMarker):t),r._maskService.isNumberValue=!0),"string"!=typeof t&&(t=""),r._inputValue=t,r._setMask(),t&&r._maskService.maskExpression||r._maskService.maskExpression&&(r._maskService.prefix||r._maskService.showMaskTyped)?(r._maskService.writingValue=!0,r._maskService.formElementProperty=["value",r._maskService.applyMask(t,r._maskService.maskExpression)],r._maskService.writingValue=!1):r._maskService.formElementProperty=["value",t],r._inputValue=t})()}registerOnChange(t){this._maskService.onChange=this.onChange=t}registerOnTouched(t){this.onTouch=t}_getActiveElement(t=this.document){const r=t?.activeElement?.shadowRoot;return r?.activeElement?this._getActiveElement(r):t.activeElement}checkSelectionOnDeletion(t){t.selectionStart=Math.min(Math.max(this.prefix.length,t.selectionStart),this._inputValue.length-this.suffix.length),t.selectionEnd=Math.min(Math.max(this.prefix.length,t.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(t){this._maskService.formElementProperty=["disabled",t]}_repeatPatternSymbols(t){return t.match(/{[0-9]+}/)&&t.split("").reduce((r,i,s)=>{if(this._start="{"===i?s:this._start,"}"!==i)return this._maskService._findSpecialChar(i)?r+i:r;this._end=s;const l=Number(t.slice(this._start+1,this._end));return r+new Array(l+1).join(t[this._start-1])},"")||t}_applyMask(){this._maskService.maskExpression=this._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(t){const r=this._maskValue.split("").filter(i=>":"!==i).length;return t&&(0==+(t[t.length-1]??-1)&&t.length<r||t.length<=r-2)?this._createValidationError(t):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(t){return{mask:{requiredMask:this._maskValue,actualValue:t}}}_setMask(){this._maskExpressionArray.length>0&&this._maskExpressionArray.some(t=>{const r=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(t)?.length;if(this._inputValue&&r)return this._maskValue=t,this.maskExpression=t,this._maskService.maskExpression=t,r;this._maskValue=this.maskExpression=this._maskService.maskExpression=this._maskExpressionArray[this._maskExpressionArray.length-1]??""})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,r){1&t&&d.NdJ("paste",function(){return r.onPaste()})("ngModelChange",function(s){return r.onModelChange(s)})("input",function(s){return r.onInput(s)})("blur",function(){return r.onBlur()})("click",function(s){return r.onClick(s)})("keydown",function(s){return r.onKeyDown(s)})},inputs:{maskExpression:["mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",triggerOnMaskChange:"triggerOnMaskChange"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],standalone:!0,features:[d._Bn([{provide:Hu,useExisting:n,multi:!0},{provide:Qs,useExisting:n,multi:!0},dN]),d.TTD]}),n})();const A$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DZ(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Field is required "),d.qZA())}function AZ(n,e){if(1&n&&(d.TgZ(0,"p",3),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.AsE(" The value you inputted is ",null==t.control.errors?null:t.control.errors.minlength.actualLength," characters long. It must be atlreast ",null==t.control.errors?null:t.control.errors.minlength.requiredLength," ")}}function kZ(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Enter the valid email "),d.qZA())}function MZ(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Value is too low "),d.qZA())}function OZ(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Value is too high "),d.qZA())}function RZ(n,e){if(1&n&&(d.TgZ(0,"p",3),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.hij(" Pattern mismatch - at least 8 characters - must contain at least 1 uppercase letter, 1 lowercase letter, and 1 number - Can contain special characters ",t.control.value," ")}}function PZ(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Password do not match "),d.qZA())}function NZ(n,e){1&n&&(d.TgZ(0,"p",3),d._uU(1," Email taken. Pls try another email "),d.qZA())}function LZ(n,e){if(1&n&&(d.ynx(0),d.YNc(1,DZ,2,0,"p",2),d.YNc(2,AZ,2,2,"p",2),d.YNc(3,kZ,2,0,"p",2),d.YNc(4,MZ,2,0,"p",2),d.YNc(5,OZ,2,0,"p",2),d.YNc(6,RZ,2,1,"p",2),d.YNc(7,PZ,2,0,"p",2),d.YNc(8,NZ,2,0,"p",2),d.BQk()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.required),d.xp6(1),d.Q6J("ngIf",t.control.touched&&t.control.dirty&&(null==t.control.errors?null:t.control.errors.minlength)),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.email),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.min),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.max),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.pattern),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.noMatch),d.xp6(1),d.Q6J("ngIf",null==t.control.errors?null:t.control.errors.emailTaken)}}A$.KeyboardEvent||(A$.KeyboardEvent=function(n,e){});let hN=(()=>{class n{constructor(){this.control=new nu(""),this.type="text",this.placeHolder="",this.format=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-input"]],inputs:{control:"control",type:"type",placeHolder:"placeHolder",format:"format"},decls:2,vars:6,consts:[[1,"block","w-full","py-1.5","px-3","text-gray-200","border","border-gray-400","transition","duration-500","focus:outline-none","rounded","bg-transparent","focus:border-indigo-400",3,"type","formControl","placeholder","mask","dropSpecialCharacters"],[4,"ngIf"],["class","text-red-400",4,"ngIf"],[1,"text-red-400"]],template:function(t,r){1&t&&(d._UZ(0,"input",0),d.YNc(1,LZ,9,8,"ng-container",1)),2&t&&(d.Q6J("type",r.type)("formControl",r.control)("placeholder",r.placeHolder)("mask",r.format)("dropSpecialCharacters",!1),d.xp6(1),d.Q6J("ngIf",r.control.touched&&r.control.dirty))},dependencies:[ms,cw,WP,sN,IZ]}),n})();function FZ(n,e){if(1&n&&(d.TgZ(0,"app-alert",11),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.Q6J("color",t.alertColor),d.xp6(1),d.hij(" ",t.alertMsg,"\n")}}let jZ=(()=>{class n{constructor(t,r){this.auth=t,this.emailTaken=r,this.showAlert=!1,this.alertMsg="Please wait! your account is beiing created",this.alertColor="blue",this.inSubmission=!1,this.name=new nu("",[Rs.required,Rs.minLength(3)]),this.email=new nu("",[Rs.required,Rs.email],[this.emailTaken.validate]),this.age=new nu(null,[Rs.required,Rs.min(18),Rs.max(120)]),this.password=new nu("",[Rs.required,Rs.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.confirm_password=new nu("",[Rs.required,Rs.pattern(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm)]),this.phoneNumber=new nu("",[Rs.required,Rs.minLength(13),Rs.maxLength(13)]),this.registerForm=new o0({name:this.name,email:this.email,age:this.age,password:this.password,confirm_password:this.confirm_password,phoneNumber:this.phoneNumber},[bZ.match("password","confirm_password")])}register(){var t=this;return(0,tt.Z)(function*(){t.showAlert=!0,t.alertMsg="Please wait! your account is beiing created",t.alertColor="blue",t.inSubmission=!0;try{t.auth.createUser(t.registerForm.value)}catch(r){return console.error(r),t.alertMsg="Something went wrong",t.alertColor="red",void(t.inSubmission=!1)}t.alertMsg="Success!Account created",t.alertColor="green"})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($P),d.Y36(TZ))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-register"]],decls:30,vars:12,consts:[[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"inline-block","mb-2"],["placeHolder","Enter name",3,"control"],["type","email","placeHolder","Enter Email",3,"control"],["type","number","placeHolder","Enter Age",3,"control"],["type","password","placeHolder","Enter Password",3,"control"],["type","password","placeHolder","Enter Confirm Password",3,"control"],["placeHolder","Enter Phone Number","format","(000)000-0000",3,"control"],["type","submit",1,"block","w-full","bg-indigo-400","text-white","py-1.5","px-3","rounded","transition","hover:bg-indigo-500","disabled:opacity-50",3,"disabled"],[3,"color"]],template:function(t,r){1&t&&(d.YNc(0,FZ,2,2,"app-alert",0),d.TgZ(1,"form",1),d.NdJ("ngSubmit",function(){return r.register()}),d.TgZ(2,"div",2)(3,"label",3),d._uU(4,"Name"),d.qZA(),d._UZ(5,"app-input",4),d.qZA(),d.TgZ(6,"div",2)(7,"label",3),d._uU(8,"Email"),d.qZA(),d._UZ(9,"app-input",5),d.qZA(),d.TgZ(10,"div",2)(11,"label",3),d._uU(12,"Age"),d.qZA(),d._UZ(13,"app-input",6),d.qZA(),d.TgZ(14,"div",2)(15,"label",3),d._uU(16,"Password"),d.qZA(),d._UZ(17,"app-input",7),d.qZA(),d.TgZ(18,"div",2)(19,"label",3),d._uU(20,"Confirm Password"),d.qZA(),d._UZ(21,"app-input",8),d.qZA(),d.TgZ(22,"div",2)(23,"label",3),d._uU(24,"Phone Number"),d.qZA(),d._UZ(25,"app-input",9),d.qZA(),d.TgZ(26,"button",10),d._uU(27," Submit "),d.qZA(),d._uU(28),d.ALo(29,"json"),d.qZA()),2&t&&(d.Q6J("ngIf",r.showAlert),d.xp6(1),d.Q6J("formGroup",r.registerForm),d.xp6(4),d.Q6J("control",r.name),d.xp6(4),d.Q6J("control",r.email),d.xp6(4),d.Q6J("control",r.age),d.xp6(4),d.Q6J("control",r.password),d.xp6(4),d.Q6J("control",r.confirm_password),d.xp6(4),d.Q6J("control",r.phoneNumber),d.xp6(1),d.Q6J("disabled",r.registerForm.invalid),d.xp6(2),d.hij(" ",d.lcZ(29,10,r.registerForm.errors)," "))},dependencies:[ms,hN,RD,yw,dw,a0,Eo]}),n})(),UZ=(()=>{class n{constructor(t){this.model=t}ngOnInit(){this.model.register("auth")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uw))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-auth-model"]],decls:8,vars:0,consts:[["modelID","auth"],["heading","",1,"text-2xl","font-bold"],["tabTitle","login"],["tabTitle","register"]],template:function(t,r){1&t&&(d.TgZ(0,"app-model",0)(1,"p",1),d._uU(2,"Your Account"),d.qZA(),d.TgZ(3,"app-tabs-container")(4,"app-tab",2),d._UZ(5,"app-login"),d.qZA(),d.TgZ(6,"app-tab",3),d._UZ(7,"app-register"),d.qZA()()())},dependencies:[T3,vK,E3,_Z,jZ]}),n})();function BZ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li")(1,"a",15),d.NdJ("click",function(i){d.CHM(t);const s=d.oxw();return d.KtG(s.modelOpen(i))}),d._uU(2,"Login / Register"),d.qZA()()}}const k$=function(){return{exact:!0}};function VZ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li")(1,"a",16),d._uU(2,"Manage"),d.qZA()(),d.TgZ(3,"li")(4,"a",17),d._uU(5,"Upload"),d.qZA()(),d.TgZ(6,"li")(7,"a",18),d.NdJ("click",function(i){d.CHM(t);const s=d.oxw();return d.KtG(s.auth.logout(i))}),d._uU(8,"Logout"),d.qZA()()}2&n&&(d.xp6(1),d.Q6J("routerLinkActiveOptions",d.DdM(2,k$)),d.xp6(3),d.Q6J("routerLinkActiveOptions",d.DdM(3,k$)))}let $Z=(()=>{class n{constructor(t,r){this.model=t,this.auth=r,this.isAuthenticate=!1,r.isAuthenticate$.subscribe(i=>{this.isAuthenticate=i})}modelOpen(t){t.preventDefault(),this.model.toggleModel("auth")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uw),d.Y36($P))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-nav"]],decls:24,vars:4,consts:[["id","header",1,"bg-secondary"],[1,"container","mx-auto","flex","justify-start","items-center","py-8","px-4"],["routerLink","/",1,"text-3xl","text-indigo-400","font-bold","uppercase","mr-4"],[1,"flex","flex-grow","items-center"],[1,"flex","flex-row","mt-1"],[4,"ngIf","ngIfElse"],["authLinks",""],["routerLinkActive","text-indigo-400"],["routerLink","/about","routerLinkActive","text-indigo-400",1,"px-2"],[1,"flex","flex-row","ml-auto"],["href","#"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAA1CAMAAACA7r40AAAA/FBMVEWyIjNPN2Y8O27///8/PnBOTXxycpY9PG9RUX5HR3dIR3dLSnlPTny4uMpWVYFFRHVwb5VlZIx7e52DgqOIh6aIiKc+PXBJSHhTUn9hYYqyIjReXohgX4lYV4Lr6/C2tcjPdYB0c5haWYRYV4Nra5GJiac+PW/FxdTHYG1RUH3eoajltbtOTXvty89BQHHg3+hSUX6GYoC6usyVlbFycZa7u8yUk6+sq8FCQXO0tMe1tMhiYYpMS3pDQnNvbpTExNN8fJ7GxdTGxtWCgqLHx9WXlrLXi5SYl7Kiobrg4Oiiorrn5u3n5+2jo7ukpLvw8PTx8fX09Pf19firqsC5sMNxAAAAAnRSTlPQ9qN1Xw4AAAGlSURBVHhe7ZXFiiRBFEVjznvp5W7t7j3u7m7//y8D1dAMGbnI4jW5KOpsgjibCxFcrrtVEmcBGAGQJHB98d3EgEM/ygsg/nwRAy15rxQ4Ywh3JQX49hVgKA/Ad1hDkkGTMSQJjGkOEmo133FmwAEQyl8FfSj3gFgkzjsQAw6AZ796AP2fGcDBS8/ZQ7ZQlJ2d+bEFqp6zhuh9Cf9/pDtKkTs04KBTD4jgx3eICOodoshz1p7M6UUAUQ+Ap2Pf2UMI5UBBX18/Ut7ZQ84Jui10QKsbcA7dt77jxIBDt+sxMNzrD4HL+rZS4Iw9iTZkCjRFmsBUHkcUOGMI7dkpKezuQsrprM3zR76zN572ekdBX623gaONJ0d5B5sGHAA1+QTwRQJgX2Q/7+w9GZGlDZKERpoxgkbDc8s0WscGSo+WGMiNVlgwWuFNjdafPsDe7wzg3RvP2UNCFGVtbX6EoOo7PhgoO1rGnswHiquB4mqgfIcxpBTGkNslMf2JVMAShRxXgJtUwBKFbFbAqicL4U4qYNWThXCHFbDqyUK4swpY9WQhXBX8A2rVjaQ6HWXmAAAAAElFTkSuQmCC","alt","en","width","22","height","14",1,"inline-block"],[1,"ml-1"],[2,"display","none"],["src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABDBAMAAACYZb3pAAAAHlBMVEUpQqK2q8384OL3qa/tKTkAI5Wrt9z////5t7ztKTlzpJCAAAAABXRSTlP++vjs1BQWlgsAAAAxSURBVHgBYmRAA4yKaAJCAugqQgHtyzENAAAAAiD7pzaDr4MfRVEURVGU36IoipK5FLWNJ6UFusbWAAAAAElFTkSuQmCC","alt","fr","width","22","height","14",1,"inline-block"],["href","#",1,"px-2",3,"click"],["routerLink","/manage","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],["routerLink","/upload","routerLinkActive","text-indigo-400",1,"px-2",3,"routerLinkActiveOptions"],[1,"px-2",3,"click"]],template:function(t,r){if(1&t&&(d.TgZ(0,"header",0)(1,"nav",1)(2,"a",2),d._uU(3,"Clipz"),d.qZA(),d.TgZ(4,"div",3)(5,"ul",4),d.YNc(6,BZ,3,0,"li",5),d.ALo(7,"async"),d.YNc(8,VZ,9,4,"ng-template",null,6,d.W1O),d.TgZ(10,"li",7)(11,"a",8),d._uU(12,"About"),d.qZA()()(),d.TgZ(13,"ul",9)(14,"li")(15,"a",10),d._UZ(16,"img",11),d.TgZ(17,"span",12),d._uU(18,"English"),d.qZA()()(),d.TgZ(19,"li",13)(20,"a",10),d._UZ(21,"img",14),d.TgZ(22,"span",12),d._uU(23,"French"),d.qZA()()()()()()()),2&t){const i=d.MAs(9);d.xp6(6),d.Q6J("ngIf",!d.lcZ(7,2,r.auth.isAuthenticate$))("ngIfElse",i)}},dependencies:[ms,Hd,Cc,eo]}),n})();function HZ(n,e){1&n&&d._UZ(0,"app-auth-model")}let GZ=(()=>{class n{constructor(t){this.auth=t,this.title="ztm-clips"}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($P))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:3,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(d._UZ(0,"app-nav")(1,"router-outlet"),d.YNc(2,HZ,1,0,"app-auth-model",0),d.ALo(3,"async")),2&t&&(d.xp6(2),d.Q6J("ngIf",!d.lcZ(3,1,r.auth.isAuthenticateWithDelay$)))},dependencies:[ms,UZ,D0,$Z,eo]}),n})(),M$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[D$()],imports:[Jo,zD]}),n})(),zZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Jo,M$,zD,C$]}),n})();const O$_firebase={apiKey:"AIzaSyDddcwy2qWSYwhHnAQtrLkxFlwL3vuQ5gE",authDomain:"clips-lgd.firebaseapp.com",projectId:"clips-lgd",storageBucket:"clips-lgd.appspot.com",appId:"1:912665688832:web:b890bdbdc7765ed23591e5"};function qZ(n,e){if(1&n&&(d.TgZ(0,"app-alert",9)(1,"p"),d._uU(2),d.qZA()()),2&n){const t=d.oxw();d.Q6J("color",t.alertColor),d.xp6(2),d.Oqu(t.alertMsg)}}const WZ=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700:":e}};let KZ=(()=>{class n{constructor(t,r){this.modelService=t,this.clipService=r,this.activeClip=null,this.update=new d.vpe,this.clipID=new nu(""),this.title=new nu("",[Rs.required,Rs.minLength(3)]),this.editForm=new o0({title:this.title,id:this.clipID}),this.showAlert=!1,this.alertMsg="Please wait! Updating clip",this.alertColor="blue",this.inSubmission=!1}ngOnInit(){this.modelService.register("editClip")}ngOnChanges(){this.activeClip&&(this.inSubmission=!1,this.showAlert=!1,this.clipID.setValue(this.activeClip.docID),this.title.setValue(this.activeClip.title))}submit(){var t=this;return(0,tt.Z)(function*(){if(t.activeClip){t.showAlert=!0,t.alertMsg="Please wait! Updating clip",t.alertColor="blue",t.inSubmission=!0;try{yield t.clipService.updateClip(t.clipID.value,t.title.value)}catch{return t.alertColor="red",t.alertMsg="Something went wrong! Please try again later",void(t.inSubmission=!1)}t.activeClip.title=t.title.value,t.update.emit(t.activeClip),t.inSubmission=!0,t.alertColor="green",t.alertMsg="Success"}})()}ngOnDestroy(){this.modelService.unregister("editClip")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(uw),d.Y36(lw))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-edit"]],inputs:{activeClip:"activeClip"},outputs:{update:"update"},features:[d.TTD],decls:12,vars:8,consts:[["modelID","editClip"],[1,"text-2xl","font-bold"],[3,"formGroup","ngSubmit"],[3,"color",4,"ngIf"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeHolder","Enter title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"]],template:function(t,r){1&t&&(d.TgZ(0,"app-model",0)(1,"p",1),d._uU(2,"Edit Video"),d.qZA(),d.TgZ(3,"form",2),d.NdJ("ngSubmit",function(){return r.submit()}),d.YNc(4,qZ,3,2,"app-alert",3),d.TgZ(5,"div",4)(6,"label",5),d._uU(7,"Title"),d.qZA(),d._UZ(8,"app-input",6),d.qZA(),d.TgZ(9,"div",7)(10,"button",8),d._uU(11," UPdate "),d.qZA()()()()),2&t&&(d.xp6(3),d.Q6J("formGroup",r.editForm),d.xp6(1),d.Q6J("ngIf",r.showAlert),d.xp6(4),d.Q6J("control",r.title),d.xp6(2),d.Q6J("disabled",r.inSubmission)("ngClass",d.WLB(5,WZ,r.inSubmission,!r.inSubmission)))},dependencies:[fi,ms,T3,hN,RD,yw,dw,a0]}),n})();const ZZ=function(n){return["/","clips",n]};function YZ(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",10)(1,"a",11),d._UZ(2,"img",12),d.qZA(),d.TgZ(3,"div",13)(4,"a",14),d._uU(5),d.qZA(),d.TgZ(6,"a",15),d.NdJ("click",function(i){const l=d.CHM(t).$implicit,c=d.oxw();return d.KtG(c.copyToClipboard(i,l.docID))}),d._uU(7," Copy Link "),d.qZA()(),d.TgZ(8,"div",16)(9,"a",17),d.NdJ("click",function(i){const l=d.CHM(t).$implicit,c=d.oxw();return d.KtG(c.openModel(i,l))}),d.TgZ(10,"span",18),d._uU(11,"build"),d.qZA()(),d.TgZ(12,"a",19),d.NdJ("click",function(i){const l=d.CHM(t).$implicit,c=d.oxw();return d.KtG(c.deleteClip(i,l))}),d.TgZ(13,"span",18),d._uU(14,"delete"),d.qZA()()()()}if(2&n){const t=e.$implicit;d.xp6(4),d.Q6J("routerLink",d.VKq(2,ZZ,t.docID)),d.xp6(1),d.hij(" ",t.title," ")}}let QZ=(()=>{class n{constructor(t,r,i,s){this.aRoute=t,this.router=r,this.clipService=i,this.modelService=s,this.videoOrder="1",this.clips=[],this.activeClip=null,this.sort$=new Ts(this.videoOrder)}ngOnInit(){this.aRoute.queryParamMap.subscribe(t=>{this.videoOrder="2"===t.sort?t.sort:"1",this.sort$.next(this.videoOrder)}),this.clipService.getUserClips(this.sort$).subscribe(t=>{this.clips=[],t.forEach(r=>{this.clips.push({docID:r.id,...r.data()})})})}sort(t){const{value:r}=t.target;this.router.navigate([],{relativeTo:this.aRoute,queryParams:{sort:r}})}openModel(t,r){t.preventDefault(),this.activeClip=r,this.modelService.toggleModel("editClip")}update(t){this.clips.forEach((r,i)=>{r.docID===t.docID&&(this.clips[i].title=t.title)})}deleteClip(t,r){t.preventDefault(),this.clipService.deleteClip(r),this.clips.forEach((i,s)=>{i.docID===r.docID&&this.clips.splice(s,1)})}copyToClipboard(t,r){return(0,tt.Z)(function*(){if(t.preventDefault(),!r)return;const i=`${location.origin}/clips/${r}`;yield navigator.clipboard.writeText(i),alert("Link copied")})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Rt),d.Y36(us),d.Y36(lw),d.Y36(uw))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-manage"]],decls:13,vars:4,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","justify-between"],["routerLink","/upload",1,"bg-indigo-400","text-white","py-4","px-10","text-xl"],[1,"text-black","px-8","text-xl","outline-none","appearance-none",3,"change"],["value","1",3,"selected"],["value","2",3,"selected"],[1,"container","mx-auto","my-8"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","mt-6 rounded-tl-2xl rounded-br-2xl shadow-xl bg-secondary flex flex-col justify-start",4,"ngFor","ngForOf"],[3,"activeClip","update"],[1,"mt-6","rounded-tl-2xl","rounded-br-2xl","shadow-xl","bg-secondary","flex","flex-col","justify-start"],["href","#"],["src","assets/img/1.jpg",1,"card-img-top","rounded-tl-2xl","w-full"],[1,"p-6","text-2xl"],[1,"font-bold","mb-2",3,"routerLink"],["href","#",1,"bg-gray-400","text-white","px-2","py-1","ml-2","text-sm","rounded",3,"click"],[1,"flex","text-center","text-2xl","bg-gray-800","p-2","mt-auto"],["href","#",1,"flex-1","p-2","border-right","border-r-2","border-gray-700","transition","hover:text-indigo-400",3,"click"],[1,"material-icons","text-base"],["href","#",1,"flex-1","p-2","rounded-br-2xl","transition","hover:text-indigo-400",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"section",0)(1,"div",1)(2,"a",2),d._uU(3,"Upload Videos"),d.qZA(),d.TgZ(4,"select",3),d.NdJ("change",function(s){return r.sort(s)}),d.TgZ(5,"option",4),d._uU(6,"Recent Uploads"),d.qZA(),d.TgZ(7,"option",5),d._uU(8,"Oldest Uploads"),d.qZA()()()(),d.TgZ(9,"div",6)(10,"div",7),d.YNc(11,YZ,15,4,"div",8),d.qZA()(),d.TgZ(12,"app-edit",9),d.NdJ("update",function(s){return r.update(s)}),d.qZA()),2&t&&(d.xp6(5),d.Q6J("selected","1"===r.videoOrder),d.xp6(2),d.Q6J("selected","1"===r.videoOrder),d.xp6(4),d.Q6J("ngForOf",r.clips),d.xp6(1),d.Q6J("activeClip",r.activeClip))},dependencies:[gs,Hd,f$,g$,KZ]}),n})();const R$={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let WD;const XZ=new Uint8Array(16);function JZ(){if(!WD&&(WD=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!WD))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return WD(XZ)}const Xs=[];for(let n=0;n<256;++n)Xs.push((n+256).toString(16).slice(1));const t9=function e9(n,e,t){if(R$.randomUUID&&!e&&!n)return R$.randomUUID();const r=(n=n||{}).random||(n.rng||JZ)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function P$(n,e=0){return(Xs[n[e+0]]+Xs[n[e+1]]+Xs[n[e+2]]+Xs[n[e+3]]+"-"+Xs[n[e+4]]+Xs[n[e+5]]+"-"+Xs[n[e+6]]+Xs[n[e+7]]+"-"+Xs[n[e+8]]+Xs[n[e+9]]+"-"+Xs[n[e+10]]+Xs[n[e+11]]+Xs[n[e+12]]+Xs[n[e+13]]+Xs[n[e+14]]+Xs[n[e+15]]).toLowerCase()}(r)};var N$=B(260);let n9=(()=>{class n{constructor(){this.isReady=!1,this.isRunning=!1,this.ffmpeg=(0,N$.createFFmpeg)({log:!0})}init(){var t=this;return(0,tt.Z)(function*(){t.isReady||(yield t.ffmpeg.load(),t.isReady=!0)})()}generateScreenShots(t){var r=this;return(0,tt.Z)(function*(){r.isRunning=!0;let i=yield(0,N$.fetchFile)(t);r.ffmpeg.FS("writeFile",t.name,i);const s=[1,2,3],l=[];s.forEach(f=>{l.push("-i",t.name,"-ss",`00:00:0${f}`,"-frames:v","1","-filter:v","scale=500:-1",`output_0${f}.png`)}),yield r.ffmpeg.run(...l);const c=[];return s.forEach(f=>{const v=r.ffmpeg.FS("readFile",`output_0${f}.png`),T=new Blob([v.buffer],{type:"image/png"}),A=URL.createObjectURL(T);c.push(A)}),r.isRunning=!1,c})()}blobFromUrl(t){return(0,tt.Z)(function*(){return yield(yield fetch(t)).blob()})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),r9=(()=>{class n{handleEvent(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","app-event-blocker",""]],hostBindings:function(t,r){1&t&&d.NdJ("drop",function(s){return r.handleEvent(s)})("dragover",function(s){return r.handleEvent(s)})}}),n})(),i9=(()=>{class n{constructor(t){this.sanitizer=t}transform(t){return this.sanitizer.bypassSecurityTrustUrl(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Iy,16))},n.\u0275pipe=d.Yjl({name:"safeURL",type:n,pure:!0}),n})();function s9(n,e){1&n&&(d.TgZ(0,"span",5),d._uU(1," settings "),d.qZA())}function o9(n,e){1&n&&(d.TgZ(0,"span",5),d._uU(1," autorenew "),d.qZA())}const a9=function(n){return{"bg-indigo-400 border-indigo-400 border-solid":n}};function l9(n,e){if(1&n){const t=d.EpF();d.ynx(0),d.TgZ(1,"div",8),d.NdJ("dragend",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.isDragOver=!1)})("dragover",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.isDragOver=!0)})("dragenter",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.isDragOver=!0)})("dragleave",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.isDragOver=!1)})("mouseleave",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.isDragOver=!1)})("drop",function(i){d.CHM(t);const s=d.oxw(2);return d.KtG(s.storeFile(i))}),d.TgZ(2,"h5"),d._uU(3,"Drop your file here (mp4 only!)"),d.qZA(),d.YNc(4,o9,2,0,"span",9),d.qZA(),d.TgZ(5,"input",10),d.NdJ("change",function(i){d.CHM(t);const s=d.oxw(2);return d.KtG(s.storeFile(i))}),d.qZA(),d.BQk()}if(2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngClass",d.VKq(2,a9,t.isDragOver)),d.xp6(3),d.Q6J("ngIf",t.ffmpegService.isRunning)}}function u9(n,e){if(1&n&&(d.TgZ(0,"app-alert",21)(1,"p"),d._uU(2),d.qZA(),d.TgZ(3,"p"),d._uU(4),d.ALo(5,"percent"),d.qZA()()),2&n){const t=d.oxw(3);d.Q6J("color",t.alertColor),d.xp6(2),d.Oqu(t.alertMsg),d.xp6(2),d.hij(" ",d.lcZ(5,3,t.percentageCompleted),"")}}const c9=function(n,e){return{"border-green-400":n,"border-transparent":e}};function d9(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",22),d.NdJ("click",function(){const s=d.CHM(t).$implicit,l=d.oxw(3);return d.KtG(l.selectedScreenShot=s)}),d._UZ(1,"img",23),d.ALo(2,"safeURL"),d.qZA()}if(2&n){const t=e.$implicit,r=d.oxw(3);d.Q6J("ngClass",d.WLB(4,c9,t===r.selectedScreenShot,t!==r.selectedScreenShot)),d.xp6(1),d.Q6J("src",d.lcZ(2,2,t),d.LSH)}}const h9=function(n,e){return{"opacity-50":n,"hover:bg-indigo-700:":e}};function f9(n,e){if(1&n){const t=d.EpF();d.YNc(0,u9,6,5,"app-alert",11),d.TgZ(1,"form",12),d.NdJ("ngSubmit",function(){d.CHM(t);const i=d.oxw(2);return d.KtG(i.uploadFile())}),d.TgZ(2,"h2",13),d._uU(3,"Select a Thumbnail"),d.qZA(),d.TgZ(4,"div",14),d.YNc(5,d9,3,7,"div",15),d.qZA(),d.TgZ(6,"div",16)(7,"label",17),d._uU(8,"Title"),d.qZA(),d._UZ(9,"app-input",18),d.qZA(),d.TgZ(10,"div",19)(11,"button",20),d._uU(12," Publish "),d.qZA()()()}if(2&n){const t=d.oxw(2);d.Q6J("ngIf",t.showAlert),d.xp6(1),d.Q6J("formGroup",t.uploadForm),d.xp6(4),d.Q6J("ngForOf",t.screenshots),d.xp6(4),d.Q6J("control",t.title),d.xp6(2),d.Q6J("disabled",t.inSubmission)("ngClass",d.WLB(6,h9,t.inSubmission,!t.inSubmission))}}function p9(n,e){if(1&n&&(d.YNc(0,l9,6,4,"ng-container",6),d.YNc(1,f9,13,9,"ng-template",null,7,d.W1O)),2&n){const t=d.MAs(2),r=d.oxw();d.Q6J("ngIf",!r.nextStep)("ngIfElse",t)}}let g9=(()=>{class n{constructor(t,r,i,s,l){this.storage=t,this.afAuth=r,this.clipService=i,this.router=s,this.ffmpegService=l,this.isDragOver=!1,this.file=null,this.nextStep=!1,this.showAlert=!1,this.alertMsg="Please wait! your clip is being uploded",this.alertColor="blue",this.inSubmission=!1,this.percentageCompleted=0,this.user=null,this.screenshots=[],this.selectedScreenShot="",this.title=new nu("",[Rs.required,Rs.minLength(3)]),this.uploadForm=new o0({title:this.title}),r.user.subscribe(c=>this.user=c),l.init()}storeFile(t){var r=this;return(0,tt.Z)(function*(){r.ffmpegService.isRunning||(r.isDragOver=!1,r.file=t.dataTransfer?t.dataTransfer?.files.item(0)??null:t.target.files?.item(0)??null,r.file&&"video/mp4"===r.file.type&&(r.screenshots=yield r.ffmpegService.generateScreenShots(r.file),r.selectedScreenShot=r.screenshots[0],r.title.setValue(r.file.name.replace(/\.[^/.]+$/,"")),r.nextStep=!0,console.log(r.file)))})()}uploadFile(){var t=this;return(0,tt.Z)(function*(){t.uploadForm.disable(),t.showAlert=!0,t.alertMsg="Please wait! your clip is being uploded",t.alertColor="blue",t.inSubmission=!0;const r=t9(),i=`clips-lg/${r}.mp4`,s=yield t.ffmpegService.blobFromUrl(t.selectedScreenShot),l=`screenshots/${r}.png`;t.task=t.storage.upload(i,t.file);const c=t.storage.ref(i);t.screenshotTask=t.storage.upload(l,s);const f=t.storage.ref(l);var v;$t([t.task.percentageChanges(),t.screenshotTask.percentageChanges()]).subscribe(v=>{const[T,A]=v;T&&A&&(t.percentageCompleted=(T+A)/200)}),HP([t.task.snapshotChanges(),t.screenshotTask.snapshotChanges()]).pipe(Cr(()=>HP([c.getDownloadURL(),f.getDownloadURL()]))).subscribe({next:(v=(0,tt.Z)(function*(T){t.alertMsg="Success! Your clip is ready to share",t.alertColor="green";const[A,j]=T,P={uid:t.user?.uid,displayName:t.user?.displayName,title:t.title.value,fileName:`${r}.mp4`,url:A,screenshotUrl:j,timeStamp:e0.Z.firestore.FieldValue.serverTimestamp()},W=yield t.clipService.createClip(P);setTimeout(()=>{t.router.navigate(["clips",W.id])},1e3)}),function(A){return v.apply(this,arguments)}),error:v=>{t.uploadForm.enable(),t.alertColor="red",t.alertMsg="Upload failed! Please try again later",t.inSubmission=!0}})})()}ngOnDestroy(){this.task?.cancel()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(VP),d.Y36(Fh),d.Y36(lw),d.Y36(us),d.Y36(n9))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-upload"]],decls:8,vars:2,consts:[[1,"container","mx-auto","my-8","bg-secondary","p-6"],[1,"rounded","relative","flex","flex-col"],[1,"font-bold","mb-6"],["class","material-icons text-center text-6xl p-8 animate-spin",4,"ngIf","ngIfElse"],["uploadEditorCont",""],[1,"material-icons","text-center","text-6xl","p-8","animate-spin"],[4,"ngIf","ngIfElse"],["uploadFormContainer",""],["app-event-blocker","",1,"w-full","px-10","py-40","rounded","text-center","cursor-pointer","border","border-dashed","border-gray-400","transition","duration-500","hover:text-white","hover:bg-indigo-400","hover:border-indigo-400","hover:border-solid","text-xl",3,"ngClass","dragend","dragover","dragenter","dragleave","mouseleave","drop"],["class","material-icons text-center text-6xl p-8 animate-spin",4,"ngIf"],["type","file",1,"mt-4",3,"change"],[3,"color",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-4","text-xl"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-4"],["class","border-8 cursor-pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"block","text-xl","mb-4"],["placeHolder","Enter title",3,"control"],[1,"mt-4","text-right"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","rounded-md","text-white","bg-indigo-600","focus:outline-none",3,"disabled","ngClass"],[3,"color"],[1,"border-8","cursor-pointer",3,"ngClass","click"],[2,"height","200px",3,"src"]],template:function(t,r){if(1&t&&(d.TgZ(0,"section",0)(1,"div",1)(2,"div",2),d._uU(3,"Upload Video"),d.qZA(),d.ynx(4),d.YNc(5,s9,2,0,"span",3),d.BQk(),d.YNc(6,p9,3,2,"ng-template",null,4,d.W1O),d.qZA()()),2&t){const i=d.MAs(7);d.xp6(5),d.Q6J("ngIf",!r.ffmpegService.isReady)("ngIfElse",i)}},dependencies:[fi,gs,ms,hN,RD,r9,yw,dw,a0,qh,i9]}),n})();const fN=(0,M.U)(n=>!!n);let pN=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(i,s)=>{const l=i.data.authGuardPipe||(()=>fN);return this.auth.user.pipe(Fl(1),l(i,s),(0,M.U)(c=>"boolean"==typeof c?c:Array.isArray(c)?this.router.createUrlTree(c):this.router.parseUrl(c)))}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(us),d.LFG(Fh))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const L$=()=>(0,Wa.z)(fN,(0,M.U)(e=>e||"/")),v9=[{path:"manage",component:QZ,data:{authOnly:!0,authGuardPipe:L$},canActivate:[pN]},{path:"upload",component:g9,data:{authOnly:!0,authGuardPipe:L$},canActivate:[pN]},{path:"manage-clips",redirectTo:"manage"}];let _9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Qy.forChild(v9),Qy]}),n})(),b9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Jo,_9,M$,zD]}),n})(),T9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[GZ]}),n.\u0275inj=d.cJS({imports:[og,zZ,zD,C$,Bo.hO.initializeApp(O$_firebase),tW,uW,b9,iK,X7]}),n})(),F$=!1;e0.Z.initializeApp(O$_firebase),e0.Z.auth().onAuthStateChanged(()=>{F$||hc().bootstrapModule(T9).catch(n=>console.error(n)),F$=!0})},3992:(lt,ke,B)=>{"use strict";var d=B(9226);lt.exports=function(te,oe){return void 0===oe&&(oe=!1),function(we,Ee,be){if(we)te(we);else if(Ee.statusCode>=400&&Ee.statusCode<=599){var K=be;if(oe)if(d.TextDecoder){var ne=function U(de){return void 0===de&&(de=""),de.toLowerCase().split(";").reduce(function(te,oe){var we=oe.split("="),be=we[1];return"charset"===we[0].trim()?be.trim():te},"utf-8")}(Ee.headers&&Ee.headers["content-type"]);try{K=new TextDecoder(ne).decode(be)}catch{}}else K=String.fromCharCode.apply(null,new Uint8Array(be));te({cause:K})}else te(null,be)}}},745:(lt,ke,B)=>{"use strict";var d=B(9226),ae=B(434),U=B(2703);Ee.httpHandler=B(3992);var de=function(Ke){var Oe={};return Ke&&Ke.trim().split("\n").forEach(function(ct){var yt=ct.indexOf(":"),Ue=ct.slice(0,yt).trim().toLowerCase(),Se=ct.slice(yt+1).trim();typeof Oe[Ue]>"u"?Oe[Ue]=Se:Array.isArray(Oe[Ue])?Oe[Ue].push(Se):Oe[Ue]=[Oe[Ue],Se]}),Oe};function we(Y,Ke,Oe){var ct=Y;return U(Ke)?(Oe=Ke,"string"==typeof Y&&(ct={uri:Y})):ct=ae({},Ke,{uri:Y}),ct.callback=Oe,ct}function Ee(Y,Ke,Oe){return be(Ke=we(Y,Ke,Oe))}function be(Y){if(typeof Y.callback>"u")throw new Error("callback argument missing");var Ke=!1,Oe=function(We,ge,X){Ke||(Ke=!0,Y.callback(We,ge,X))};function yt(){var He=void 0;if(He=De.response?De.response:De.responseText||function K(Y){try{if("document"===Y.responseType)return Y.responseXML;if(""===Y.responseType&&(!Y.responseXML||"parsererror"!==Y.responseXML.documentElement.nodeName))return Y.responseXML}catch{}return null}(De),V)try{He=JSON.parse(He)}catch{}return He}function Ue(He){return clearTimeout(he),He instanceof Error||(He=new Error(""+(He||"Unknown XMLHttpRequest Error"))),He.statusCode=0,Oe(He,Le)}function Se(){if(!je){var He;clearTimeout(he);var We=Le,ge=null;return 0!==(He=Y.useXDR&&void 0===De.status?200:1223===De.status?204:De.status)?(We={body:yt(),statusCode:He,method:Ye,headers:{},url:Ce,rawRequest:De},De.getAllResponseHeaders&&(We.headers=de(De.getAllResponseHeaders()))):ge=new Error("Internal XMLHttpRequest Error"),Oe(ge,We,We.body)}}var De=Y.xhr||null;De||(De=Y.cors||Y.useXDR?new Ee.XDomainRequest:new Ee.XMLHttpRequest);var $e,je,he,Ce=De.url=Y.uri||Y.url,Ye=De.method=Y.method||"GET",st=Y.body||Y.data,Ze=De.headers=Y.headers||{},R=!!Y.sync,V=!1,Le={body:void 0,headers:{},statusCode:0,method:Ye,url:Ce,rawRequest:De};if("json"in Y&&!1!==Y.json&&(V=!0,Ze.accept||Ze.Accept||(Ze.Accept="application/json"),"GET"!==Ye&&"HEAD"!==Ye&&(Ze["content-type"]||Ze["Content-Type"]||(Ze["Content-Type"]="application/json"),st=JSON.stringify(!0===Y.json?st:Y.json))),De.onreadystatechange=function ct(){4===De.readyState&&setTimeout(Se,0)},De.onload=Se,De.onerror=Ue,De.onprogress=function(){},De.onabort=function(){je=!0},De.ontimeout=Ue,De.open(Ye,Ce,!R,Y.username,Y.password),R||(De.withCredentials=!!Y.withCredentials),!R&&Y.timeout>0&&(he=setTimeout(function(){if(!je){je=!0,De.abort("timeout");var He=new Error("XMLHttpRequest timeout");He.code="ETIMEDOUT",Ue(He)}},Y.timeout)),De.setRequestHeader)for($e in Ze)Ze.hasOwnProperty($e)&&De.setRequestHeader($e,Ze[$e]);else if(Y.headers&&!function oe(Y){for(var Ke in Y)if(Y.hasOwnProperty(Ke))return!1;return!0}(Y.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in Y&&(De.responseType=Y.responseType),"beforeSend"in Y&&"function"==typeof Y.beforeSend&&Y.beforeSend(De),De.send(st||null),De}lt.exports=Ee,lt.exports.default=Ee,Ee.XMLHttpRequest=d.XMLHttpRequest||function ne(){},Ee.XDomainRequest="withCredentials"in new Ee.XMLHttpRequest?Ee.XMLHttpRequest:d.XDomainRequest,function te(Y,Ke){for(var Oe=0;Oe<Y.length;Oe++)Ke(Y[Oe])}(["get","put","post","patch","head","delete"],function(Y){Ee["delete"===Y?"del":Y]=function(Ke,Oe,ct){return(Oe=we(Ke,Oe,ct)).method=Y.toUpperCase(),be(Oe)}})},9401:(lt,ke)=>{"use strict";function d(te,oe){return void 0===oe&&(oe=Object),oe&&"function"==typeof oe.freeze?oe.freeze(te):te}var U=d({HTML:"text/html",isHTML:function(te){return te===U.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),de=d({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(te){return te===de.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ke.assign=function ae(te,oe){if(null===te||"object"!=typeof te)throw new TypeError("target is not an object");for(var we in oe)Object.prototype.hasOwnProperty.call(oe,we)&&(te[we]=oe[we]);return te},ke.find=function B(te,oe,we){if(void 0===we&&(we=Array.prototype),te&&"function"==typeof we.find)return we.find.call(te,oe);for(var Ee=0;Ee<te.length;Ee++)if(Object.prototype.hasOwnProperty.call(te,Ee)){var be=te[Ee];if(oe.call(void 0,be,Ee,te))return be}},ke.freeze=d,ke.MIME_TYPE=U,ke.NAMESPACE=de},1991:(lt,ke,B)=>{var ae=B(9401),U=B(6853),de=B(4436),te=B(8702),oe=U.DOMImplementation,we=ae.NAMESPACE,Ee=te.ParseError,be=te.XMLReader;function K(Se){return Se.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function ne(Se){this.options=Se||{locator:{}}}function Ke(){this.cdata=!1}function Oe(Se,De){De.lineNumber=Se.lineNumber,De.columnNumber=Se.columnNumber}function ct(Se){if(Se)return"\n@"+(Se.systemId||"")+"#[line:"+Se.lineNumber+",col:"+Se.columnNumber+"]"}function yt(Se,De,$e){return"string"==typeof Se?Se.substr(De,$e):Se.length>=De+$e||De?new java.lang.String(Se,De,$e)+"":Se}function Ue(Se,De){Se.currentElement?Se.currentElement.appendChild(De):Se.doc.appendChild(De)}ne.prototype.parseFromString=function(Se,De){var $e=this.options,je=new be,Ce=$e.domBuilder||new Ke,Ye=$e.errorHandler,st=$e.locator,Ze=$e.xmlns||{},R=/\/x?html?$/.test(De),V=R?de.HTML_ENTITIES:de.XML_ENTITIES;return st&&Ce.setDocumentLocator(st),je.errorHandler=function Y(Se,De,$e){if(!Se){if(De instanceof Ke)return De;Se=De}var je={},Ce=Se instanceof Function;function Ye(st){var Ze=Se[st];!Ze&&Ce&&(Ze=2==Se.length?function(R){Se(st,R)}:Se),je[st]=Ze&&function(R){Ze("[xmldom "+st+"]\t"+R+ct($e))}||function(){}}return $e=$e||{},Ye("warning"),Ye("error"),Ye("fatalError"),je}(Ye,Ce,st),je.domBuilder=$e.domBuilder||Ce,R&&(Ze[""]=we.HTML),Ze.xml=Ze.xml||we.XML,Se&&"string"==typeof Se?je.parse(($e.normalizeLineEndings||K)(Se),Ze,V):je.errorHandler.error("invalid doc source"),Ce.doc},Ke.prototype={startDocument:function(){this.doc=(new oe).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(Se,De,$e,je){var Ce=this.doc,Ye=Ce.createElementNS(Se,$e||De),st=je.length;Ue(this,Ye),this.currentElement=Ye,this.locator&&Oe(this.locator,Ye);for(var Ze=0;Ze<st;Ze++){Se=je.getURI(Ze);var R=je.getValue(Ze),V=($e=je.getQName(Ze),Ce.createAttributeNS(Se,$e));this.locator&&Oe(je.getLocator(Ze),V),V.value=V.nodeValue=R,Ye.setAttributeNode(V)}},endElement:function(Se,De,$e){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(Se,De){},endPrefixMapping:function(Se){},processingInstruction:function(Se,De){var $e=this.doc.createProcessingInstruction(Se,De);this.locator&&Oe(this.locator,$e),Ue(this,$e)},ignorableWhitespace:function(Se,De,$e){},characters:function(Se,De,$e){if(Se=yt.apply(this,arguments)){if(this.cdata)var je=this.doc.createCDATASection(Se);else je=this.doc.createTextNode(Se);this.currentElement?this.currentElement.appendChild(je):/^\s*$/.test(Se)&&this.doc.appendChild(je),this.locator&&Oe(this.locator,je)}},skippedEntity:function(Se){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(Se){(this.locator=Se)&&(Se.lineNumber=0)},comment:function(Se,De,$e){Se=yt.apply(this,arguments);var je=this.doc.createComment(Se);this.locator&&Oe(this.locator,je),Ue(this,je)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(Se,De,$e){var je=this.doc.implementation;if(je&&je.createDocumentType){var Ce=je.createDocumentType(Se,De,$e);this.locator&&Oe(this.locator,Ce),Ue(this,Ce),this.doc.doctype=Ce}},warning:function(Se){console.warn("[xmldom warning]\t"+Se,ct(this.locator))},error:function(Se){console.error("[xmldom error]\t"+Se,ct(this.locator))},fatalError:function(Se){throw new Ee(Se,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(Se){Ke.prototype[Se]=function(){return null}}),ke.DOMParser=ne},6853:(lt,ke,B)=>{var d=B(9401),ae=d.find,U=d.NAMESPACE;function de($){return""!==$}function oe($,q){return $.hasOwnProperty(q)||($[q]=!0),$}function we($){if(!$)return[];var q=function te($){return $?$.split(/[\t\n\f\r ]+/).filter(de):[]}($);return Object.keys(q.reduce(oe,{}))}function be($,q){for(var fe in $)Object.prototype.hasOwnProperty.call($,fe)&&(q[fe]=$[fe])}function K($,q){var fe=$.prototype;if(!(fe instanceof q)){let Et=function(){};Et.prototype=q.prototype,Et=new Et,be(fe,Et),$.prototype=fe=Et}fe.constructor!=$&&("function"!=typeof $&&console.error("unknown Class:"+$),fe.constructor=$)}var ne={},Y=ne.ELEMENT_NODE=1,Ke=ne.ATTRIBUTE_NODE=2,Oe=ne.TEXT_NODE=3,ct=ne.CDATA_SECTION_NODE=4,yt=ne.ENTITY_REFERENCE_NODE=5,Ue=ne.ENTITY_NODE=6,Se=ne.PROCESSING_INSTRUCTION_NODE=7,De=ne.COMMENT_NODE=8,$e=ne.DOCUMENT_NODE=9,je=ne.DOCUMENT_TYPE_NODE=10,Ce=ne.DOCUMENT_FRAGMENT_NODE=11,Ye=ne.NOTATION_NODE=12,st={},Ze={},he=(st.INDEX_SIZE_ERR=(Ze[1]="Index size error",1),st.DOMSTRING_SIZE_ERR=(Ze[2]="DOMString size error",2),st.HIERARCHY_REQUEST_ERR=(Ze[3]="Hierarchy request error",3)),X=(st.WRONG_DOCUMENT_ERR=(Ze[4]="Wrong document",4),st.INVALID_CHARACTER_ERR=(Ze[5]="Invalid character",5),st.NO_DATA_ALLOWED_ERR=(Ze[6]="No data allowed",6),st.NO_MODIFICATION_ALLOWED_ERR=(Ze[7]="No modification allowed",7),st.NOT_FOUND_ERR=(Ze[8]="Not found",8)),re=(st.NOT_SUPPORTED_ERR=(Ze[9]="Not supported",9),st.INUSE_ATTRIBUTE_ERR=(Ze[10]="Attribute in use",10));function et($,q){if(q instanceof Error)var fe=q;else fe=this,Error.call(this,Ze[$]),this.message=Ze[$],Error.captureStackTrace&&Error.captureStackTrace(this,et);return fe.code=$,q&&(this.message=this.message+": "+q),fe}function ft(){}function wt($,q){this._node=$,this._refresh=q,Ot(this)}function Ot($){var q=$._node._inc||$._node.ownerDocument._inc;if($._inc!=q){var fe=$._refresh($._node);Mt($,"length",fe.length),be(fe,$),$._inc=q}}function on(){}function yn($,q){for(var fe=$.length;fe--;)if($[fe]===q)return fe}function Un($,q,fe,Pe){if(Pe?q[yn(q,Pe)]=fe:q[q.length++]=fe,$){fe.ownerElement=$;var Et=$.ownerDocument;Et&&(Pe&&Wr(Et,$,Pe),function Xn($,q,fe){$&&$._inc++,fe.namespaceURI===U.XMLNS&&(q._nsMap[fe.prefix?fe.localName:""]=fe.value)}(Et,$,fe))}}function Gn($,q,fe){var Pe=yn(q,fe);if(!(Pe>=0))throw new et(X,new Error($.tagName+"@"+fe));for(var Et=q.length-1;Pe<Et;)q[Pe]=q[++Pe];if(q.length=Et,$){var Kt=$.ownerDocument;Kt&&(Wr(Kt,$,fe),fe.ownerElement=null)}}function ci(){}function Sn(){}function Yn($){return("<"==$?"&lt;":">"==$&&"&gt;")||"&"==$&&"&amp;"||'"'==$&&"&quot;"||"&#"+$.charCodeAt()+";"}function hr($,q){if(q($))return!0;if($=$.firstChild)do{if(hr($,q))return!0}while($=$.nextSibling)}function qn(){this.ownerDocument=this}function Wr($,q,fe,Pe){$&&$._inc++,fe.namespaceURI===U.XMLNS&&delete q._nsMap[fe.prefix?fe.localName:""]}function Ht($,q,fe){if($&&$._inc){$._inc++;var Pe=q.childNodes;if(fe)Pe[Pe.length++]=fe;else{for(var Et=q.firstChild,Kt=0;Et;)Pe[Kt++]=Et,Et=Et.nextSibling;Pe.length=Kt,delete Pe[Pe.length]}}}function Bi($,q){var fe=q.previousSibling,Pe=q.nextSibling;return fe?fe.nextSibling=Pe:$.firstChild=Pe,Pe?Pe.previousSibling=fe:$.lastChild=fe,q.parentNode=null,q.previousSibling=null,q.nextSibling=null,Ht($.ownerDocument,$),q}function nr($){return $&&$.nodeType===Sn.DOCUMENT_TYPE_NODE}function Kr($){return $&&$.nodeType===Sn.ELEMENT_NODE}function dn($){return $&&$.nodeType===Sn.TEXT_NODE}function Wt($,q){var fe=$.childNodes||[];if(ae(fe,Kr)||nr(q))return!1;var Pe=ae(fe,nr);return!(q&&Pe&&fe.indexOf(Pe)>fe.indexOf(q))}function nn($,q){var fe=$.childNodes||[];if(ae(fe,function Pe(Kt){return Kr(Kt)&&Kt!==q}))return!1;var Et=ae(fe,nr);return!(q&&Et&&fe.indexOf(Et)>fe.indexOf(q))}function sr($,q,fe){var Pe=$.childNodes||[],Et=q.childNodes||[];if(q.nodeType===Sn.DOCUMENT_FRAGMENT_NODE){var Kt=Et.filter(Kr);if(Kt.length>1||ae(Et,dn))throw new et(he,"More than one element or text in fragment");if(1===Kt.length&&!Wt($,fe))throw new et(he,"Element in fragment can not be inserted before doctype")}if(Kr(q)&&!Wt($,fe))throw new et(he,"Only one element can be added and only after doctype");if(nr(q)){if(ae(Pe,nr))throw new et(he,"Only one doctype is allowed");var zn=ae(Pe,Kr);if(fe&&Pe.indexOf(zn)<Pe.indexOf(fe))throw new et(he,"Doctype can only be inserted before an element");if(!fe&&zn)throw new et(he,"Doctype can not be appended since element is present")}}function yr($,q,fe){var Pe=$.childNodes||[],Et=q.childNodes||[];if(q.nodeType===Sn.DOCUMENT_FRAGMENT_NODE){var Kt=Et.filter(Kr);if(Kt.length>1||ae(Et,dn))throw new et(he,"More than one element or text in fragment");if(1===Kt.length&&!nn($,fe))throw new et(he,"Element in fragment can not be inserted before doctype")}if(Kr(q)&&!nn($,fe))throw new et(he,"Only one element can be added and only after doctype");if(nr(q)){if(ae(Pe,function(hi){return nr(hi)&&hi!==fe}))throw new et(he,"Only one doctype is allowed");var zn=ae(Pe,Kr);if(fe&&Pe.indexOf(zn)<Pe.indexOf(fe))throw new et(he,"Doctype can only be inserted before an element")}}function Fr($,q,fe,Pe){(function vo($,q,fe){if(!function Bn($){return $&&($.nodeType===Sn.DOCUMENT_NODE||$.nodeType===Sn.DOCUMENT_FRAGMENT_NODE||$.nodeType===Sn.ELEMENT_NODE)}($))throw new et(he,"Unexpected parent node type "+$.nodeType);if(fe&&fe.parentNode!==$)throw new et(X,"child not in parent");if(!function Mn($){return $&&(Kr($)||dn($)||nr($)||$.nodeType===Sn.DOCUMENT_FRAGMENT_NODE||$.nodeType===Sn.COMMENT_NODE||$.nodeType===Sn.PROCESSING_INSTRUCTION_NODE)}(q)||nr(q)&&$.nodeType!==Sn.DOCUMENT_NODE)throw new et(he,"Unexpected node type "+q.nodeType+" for parent node type "+$.nodeType)})($,q,fe),$.nodeType===Sn.DOCUMENT_NODE&&(Pe||sr)($,q,fe);var Et=q.parentNode;if(Et&&Et.removeChild(q),q.nodeType===Ce){var Kt=q.firstChild;if(null==Kt)return q;var zn=q.lastChild}else Kt=zn=q;var Ai=fe?fe.previousSibling:$.lastChild;Kt.previousSibling=Ai,zn.nextSibling=fe,Ai?Ai.nextSibling=Kt:$.firstChild=Kt,null==fe?$.lastChild=zn:fe.previousSibling=zn;do{Kt.parentNode=$}while(Kt!==zn&&(Kt=Kt.nextSibling));return Ht($.ownerDocument||$,$),q.nodeType==Ce&&(q.firstChild=q.lastChild=null),q}function es(){this._nsMap={}}function $n(){}function Di(){}function On(){}function Zr(){}function Vi(){}function xt(){}function gt(){}function jt(){}function Jt(){}function an(){}function pn(){}function Yr(){}function me($,q){var fe=[],Pe=9==this.nodeType&&this.documentElement||this,Et=Pe.prefix,Kt=Pe.namespaceURI;if(Kt&&null==Et&&null==(Et=Pe.lookupPrefix(Kt)))var zn=[{namespace:Kt,prefix:null}];return ot(this,fe,$,q,zn),fe.join("")}function ce($,q,fe){var Pe=$.prefix||"",Et=$.namespaceURI;if(!Et||"xml"===Pe&&Et===U.XML||Et===U.XMLNS)return!1;for(var Kt=fe.length;Kt--;){var zn=fe[Kt];if(zn.prefix===Pe)return zn.namespace!==Et}return!0}function Ae($,q,fe){$.push(" ",q,'="',fe.replace(/[<>&"\t\n\r]/g,Yn),'"')}function ot($,q,fe,Pe,Et){if(Et||(Et=[]),Pe){if(!($=Pe($)))return;if("string"==typeof $)return void q.push($)}switch($.nodeType){case Y:var Kt=$.attributes,zn=Kt.length,Vn=$.firstChild,Ai=$.tagName,$i=Ai;if(!(fe=U.isHTML($.namespaceURI)||fe)&&!$.prefix&&$.namespaceURI){for(var hi,Hi=0;Hi<Kt.length;Hi++)if("xmlns"===Kt.item(Hi).name){hi=Kt.item(Hi).value;break}if(!hi)for(var _o=Et.length-1;_o>=0;_o--)if(""===(Qn=Et[_o]).prefix&&Qn.namespace===$.namespaceURI){hi=Qn.namespace;break}if(hi!==$.namespaceURI)for(_o=Et.length-1;_o>=0;_o--){var Qn;if((Qn=Et[_o]).namespace===$.namespaceURI){Qn.prefix&&($i=Qn.prefix+":"+Ai);break}}}q.push("<",$i);for(var Ps=0;Ps<zn;Ps++)"xmlns"==(Gi=Kt.item(Ps)).prefix?Et.push({prefix:Gi.localName,namespace:Gi.value}):"xmlns"==Gi.nodeName&&Et.push({prefix:"",namespace:Gi.value});for(Ps=0;Ps<zn;Ps++){var Gi,En,or;ce(Gi=Kt.item(Ps),0,Et)&&(Ae(q,(En=Gi.prefix||"")?"xmlns:"+En:"xmlns",or=Gi.namespaceURI),Et.push({prefix:En,namespace:or})),ot(Gi,q,fe,Pe,Et)}if(Ai===$i&&ce($,0,Et)&&(Ae(q,(En=$.prefix||"")?"xmlns:"+En:"xmlns",or=$.namespaceURI),Et.push({prefix:En,namespace:or})),Vn||fe&&!/^(?:meta|link|img|br|hr|input)$/i.test(Ai)){if(q.push(">"),fe&&/^script$/i.test(Ai))for(;Vn;)Vn.data?q.push(Vn.data):ot(Vn,q,fe,Pe,Et.slice()),Vn=Vn.nextSibling;else for(;Vn;)ot(Vn,q,fe,Pe,Et.slice()),Vn=Vn.nextSibling;q.push("</",$i,">")}else q.push("/>");return;case $e:case Ce:for(Vn=$.firstChild;Vn;)ot(Vn,q,fe,Pe,Et.slice()),Vn=Vn.nextSibling;return;case Ke:return Ae(q,$.name,$.value);case Oe:return q.push($.data.replace(/[<&>]/g,Yn));case ct:return q.push("<![CDATA[",$.data,"]]>");case De:return q.push("\x3c!--",$.data,"--\x3e");case je:var Ns=$.publicId,ar=$.systemId;if(q.push("<!DOCTYPE ",$.name),Ns)q.push(" PUBLIC ",Ns),ar&&"."!=ar&&q.push(" ",ar),q.push(">");else if(ar&&"."!=ar)q.push(" SYSTEM ",ar,">");else{var lr=$.internalSubset;lr&&q.push(" [",lr,"]"),q.push(">")}return;case Se:return q.push("<?",$.target," ",$.data,"?>");case yt:return q.push("&",$.nodeName,";");default:q.push("??",$.nodeName)}}function ze($,q,fe){var Pe;switch(q.nodeType){case Y:(Pe=q.cloneNode(!1)).ownerDocument=$;case Ce:break;case Ke:fe=!0}if(Pe||(Pe=q.cloneNode(!1)),Pe.ownerDocument=$,Pe.parentNode=null,fe)for(var Et=q.firstChild;Et;)Pe.appendChild(ze($,Et,fe)),Et=Et.nextSibling;return Pe}function Pt($,q,fe){var Pe=new q.constructor;for(var Et in q)if(Object.prototype.hasOwnProperty.call(q,Et)){var Kt=q[Et];"object"!=typeof Kt&&Kt!=Pe[Et]&&(Pe[Et]=Kt)}switch(q.childNodes&&(Pe.childNodes=new ft),Pe.ownerDocument=$,Pe.nodeType){case Y:var zn=q.attributes,Ai=Pe.attributes=new on,$i=zn.length;Ai._ownerElement=Pe;for(var hi=0;hi<$i;hi++)Pe.setAttributeNode(Pt($,zn.item(hi),!0));break;case Ke:fe=!0}if(fe)for(var Hi=q.firstChild;Hi;)Pe.appendChild(Pt($,Hi,fe)),Hi=Hi.nextSibling;return Pe}function Mt($,q,fe){$[q]=fe}st.INVALID_STATE_ERR=(Ze[11]="Invalid state",11),st.SYNTAX_ERR=(Ze[12]="Syntax error",12),st.INVALID_MODIFICATION_ERR=(Ze[13]="Invalid modification",13),st.NAMESPACE_ERR=(Ze[14]="Invalid namespace",14),st.INVALID_ACCESS_ERR=(Ze[15]="Invalid access",15),et.prototype=Error.prototype,be(st,et),ft.prototype={length:0,item:function($){return this[$]||null},toString:function($,q){for(var fe=[],Pe=0;Pe<this.length;Pe++)ot(this[Pe],fe,$,q);return fe.join("")},filter:function($){return Array.prototype.filter.call(this,$)},indexOf:function($){return Array.prototype.indexOf.call(this,$)}},wt.prototype.item=function($){return Ot(this),this[$]},K(wt,ft),on.prototype={length:0,item:ft.prototype.item,getNamedItem:function($){for(var q=this.length;q--;){var fe=this[q];if(fe.nodeName==$)return fe}},setNamedItem:function($){var q=$.ownerElement;if(q&&q!=this._ownerElement)throw new et(re);var fe=this.getNamedItem($.nodeName);return Un(this._ownerElement,this,$,fe),fe},setNamedItemNS:function($){var fe,q=$.ownerElement;if(q&&q!=this._ownerElement)throw new et(re);return fe=this.getNamedItemNS($.namespaceURI,$.localName),Un(this._ownerElement,this,$,fe),fe},removeNamedItem:function($){var q=this.getNamedItem($);return Gn(this._ownerElement,this,q),q},removeNamedItemNS:function($,q){var fe=this.getNamedItemNS($,q);return Gn(this._ownerElement,this,fe),fe},getNamedItemNS:function($,q){for(var fe=this.length;fe--;){var Pe=this[fe];if(Pe.localName==q&&Pe.namespaceURI==$)return Pe}return null}},ci.prototype={hasFeature:function($,q){return!0},createDocument:function($,q,fe){var Pe=new qn;if(Pe.implementation=this,Pe.childNodes=new ft,Pe.doctype=fe||null,fe&&Pe.appendChild(fe),q){var Et=Pe.createElementNS($,q);Pe.appendChild(Et)}return Pe},createDocumentType:function($,q,fe){var Pe=new xt;return Pe.name=$,Pe.nodeName=$,Pe.publicId=q||"",Pe.systemId=fe||"",Pe}},Sn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function($,q){return Fr(this,$,q)},replaceChild:function($,q){Fr(this,$,q,yr),q&&this.removeChild(q)},removeChild:function($){return Bi(this,$)},appendChild:function($){return this.insertBefore($,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function($){return Pt(this.ownerDocument||this,this,$)},normalize:function(){for(var $=this.firstChild;$;){var q=$.nextSibling;q&&q.nodeType==Oe&&$.nodeType==Oe?(this.removeChild(q),$.appendData(q.data)):($.normalize(),$=q)}},isSupported:function($,q){return this.ownerDocument.implementation.hasFeature($,q)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function($){for(var q=this;q;){var fe=q._nsMap;if(fe)for(var Pe in fe)if(Object.prototype.hasOwnProperty.call(fe,Pe)&&fe[Pe]===$)return Pe;q=q.nodeType==Ke?q.ownerDocument:q.parentNode}return null},lookupNamespaceURI:function($){for(var q=this;q;){var fe=q._nsMap;if(fe&&Object.prototype.hasOwnProperty.call(fe,$))return fe[$];q=q.nodeType==Ke?q.ownerDocument:q.parentNode}return null},isDefaultNamespace:function($){return null==this.lookupPrefix($)}},be(ne,Sn),be(ne,Sn.prototype),qn.prototype={nodeName:"#document",nodeType:$e,doctype:null,documentElement:null,_inc:1,insertBefore:function($,q){if($.nodeType==Ce){for(var fe=$.firstChild;fe;){var Pe=fe.nextSibling;this.insertBefore(fe,q),fe=Pe}return $}return Fr(this,$,q),$.ownerDocument=this,null===this.documentElement&&$.nodeType===Y&&(this.documentElement=$),$},removeChild:function($){return this.documentElement==$&&(this.documentElement=null),Bi(this,$)},replaceChild:function($,q){Fr(this,$,q,yr),$.ownerDocument=this,q&&this.removeChild(q),Kr($)&&(this.documentElement=$)},importNode:function($,q){return ze(this,$,q)},getElementById:function($){var q=null;return hr(this.documentElement,function(fe){if(fe.nodeType==Y&&fe.getAttribute("id")==$)return q=fe,!0}),q},getElementsByClassName:function($){var q=we($);return new wt(this,function(fe){var Pe=[];return q.length>0&&hr(fe.documentElement,function(Et){if(Et!==fe&&Et.nodeType===Y){var Kt=Et.getAttribute("class");if(Kt){var zn=$===Kt;if(!zn){var Ai=we(Kt);zn=q.every(function Ee($){return function(q){return $&&-1!==$.indexOf(q)}}(Ai))}zn&&Pe.push(Et)}}}),Pe})},createElement:function($){var q=new es;return q.ownerDocument=this,q.nodeName=$,q.tagName=$,q.localName=$,q.childNodes=new ft,(q.attributes=new on)._ownerElement=q,q},createDocumentFragment:function(){var $=new an;return $.ownerDocument=this,$.childNodes=new ft,$},createTextNode:function($){var q=new On;return q.ownerDocument=this,q.appendData($),q},createComment:function($){var q=new Zr;return q.ownerDocument=this,q.appendData($),q},createCDATASection:function($){var q=new Vi;return q.ownerDocument=this,q.appendData($),q},createProcessingInstruction:function($,q){var fe=new pn;return fe.ownerDocument=this,fe.tagName=fe.target=$,fe.nodeValue=fe.data=q,fe},createAttribute:function($){var q=new $n;return q.ownerDocument=this,q.name=$,q.nodeName=$,q.localName=$,q.specified=!0,q},createEntityReference:function($){var q=new Jt;return q.ownerDocument=this,q.nodeName=$,q},createElementNS:function($,q){var fe=new es,Pe=q.split(":"),Et=fe.attributes=new on;return fe.childNodes=new ft,fe.ownerDocument=this,fe.nodeName=q,fe.tagName=q,fe.namespaceURI=$,2==Pe.length?(fe.prefix=Pe[0],fe.localName=Pe[1]):fe.localName=q,Et._ownerElement=fe,fe},createAttributeNS:function($,q){var fe=new $n,Pe=q.split(":");return fe.ownerDocument=this,fe.nodeName=q,fe.name=q,fe.namespaceURI=$,fe.specified=!0,2==Pe.length?(fe.prefix=Pe[0],fe.localName=Pe[1]):fe.localName=q,fe}},K(qn,Sn),qn.prototype.getElementsByTagName=(es.prototype={nodeType:Y,hasAttribute:function($){return null!=this.getAttributeNode($)},getAttribute:function($){var q=this.getAttributeNode($);return q&&q.value||""},getAttributeNode:function($){return this.attributes.getNamedItem($)},setAttribute:function($,q){var fe=this.ownerDocument.createAttribute($);fe.value=fe.nodeValue=""+q,this.setAttributeNode(fe)},removeAttribute:function($){var q=this.getAttributeNode($);q&&this.removeAttributeNode(q)},appendChild:function($){return $.nodeType===Ce?this.insertBefore($,null):function di($,q){return q.parentNode&&q.parentNode.removeChild(q),q.parentNode=$,q.previousSibling=$.lastChild,q.nextSibling=null,q.previousSibling?q.previousSibling.nextSibling=q:$.firstChild=q,$.lastChild=q,Ht($.ownerDocument,$,q),q}(this,$)},setAttributeNode:function($){return this.attributes.setNamedItem($)},setAttributeNodeNS:function($){return this.attributes.setNamedItemNS($)},removeAttributeNode:function($){return this.attributes.removeNamedItem($.nodeName)},removeAttributeNS:function($,q){var fe=this.getAttributeNodeNS($,q);fe&&this.removeAttributeNode(fe)},hasAttributeNS:function($,q){return null!=this.getAttributeNodeNS($,q)},getAttributeNS:function($,q){var fe=this.getAttributeNodeNS($,q);return fe&&fe.value||""},setAttributeNS:function($,q,fe){var Pe=this.ownerDocument.createAttributeNS($,q);Pe.value=Pe.nodeValue=""+fe,this.setAttributeNode(Pe)},getAttributeNodeNS:function($,q){return this.attributes.getNamedItemNS($,q)},getElementsByTagName:function($){return new wt(this,function(q){var fe=[];return hr(q,function(Pe){Pe!==q&&Pe.nodeType==Y&&("*"===$||Pe.tagName==$)&&fe.push(Pe)}),fe})},getElementsByTagNameNS:function($,q){return new wt(this,function(fe){var Pe=[];return hr(fe,function(Et){Et!==fe&&Et.nodeType===Y&&("*"===$||Et.namespaceURI===$)&&("*"===q||Et.localName==q)&&Pe.push(Et)}),Pe})}}).getElementsByTagName,qn.prototype.getElementsByTagNameNS=es.prototype.getElementsByTagNameNS,K(es,Sn),$n.prototype.nodeType=Ke,K($n,Sn),Di.prototype={data:"",substringData:function($,q){return this.data.substring($,$+q)},appendData:function($){this.nodeValue=this.data=$=this.data+$,this.length=$.length},insertData:function($,q){this.replaceData($,0,q)},appendChild:function($){throw new Error(Ze[he])},deleteData:function($,q){this.replaceData($,q,"")},replaceData:function($,q,fe){var Pe=this.data.substring(0,$),Et=this.data.substring($+q);this.nodeValue=this.data=fe=Pe+fe+Et,this.length=fe.length}},K(Di,Sn),On.prototype={nodeName:"#text",nodeType:Oe,splitText:function($){var q=this.data,fe=q.substring($);q=q.substring(0,$),this.data=this.nodeValue=q,this.length=q.length;var Pe=this.ownerDocument.createTextNode(fe);return this.parentNode&&this.parentNode.insertBefore(Pe,this.nextSibling),Pe}},K(On,Di),Zr.prototype={nodeName:"#comment",nodeType:De},K(Zr,Di),Vi.prototype={nodeName:"#cdata-section",nodeType:ct},K(Vi,Di),xt.prototype.nodeType=je,K(xt,Sn),gt.prototype.nodeType=Ye,K(gt,Sn),jt.prototype.nodeType=Ue,K(jt,Sn),Jt.prototype.nodeType=yt,K(Jt,Sn),an.prototype.nodeName="#document-fragment",an.prototype.nodeType=Ce,K(an,Sn),pn.prototype.nodeType=Se,K(pn,Sn),Yr.prototype.serializeToString=function($,q,fe){return me.call($,q,fe)},Sn.prototype.toString=me;try{if(Object.defineProperty){let $=function(q){switch(q.nodeType){case Y:case Ce:var fe=[];for(q=q.firstChild;q;)7!==q.nodeType&&8!==q.nodeType&&fe.push($(q)),q=q.nextSibling;return fe.join("");default:return q.nodeValue}};Object.defineProperty(wt.prototype,"length",{get:function(){return Ot(this),this.$$length}}),Object.defineProperty(Sn.prototype,"textContent",{get:function(){return $(this)},set:function(q){switch(this.nodeType){case Y:case Ce:for(;this.firstChild;)this.removeChild(this.firstChild);(q||String(q))&&this.appendChild(this.ownerDocument.createTextNode(q));break;default:this.data=q,this.value=q,this.nodeValue=q}}}),Mt=function(q,fe,Pe){q["$$"+fe]=Pe}}}catch{}ke.DocumentType=xt,ke.DOMException=et,ke.DOMImplementation=ci,ke.Element=es,ke.Node=Sn,ke.NodeList=ft,ke.XMLSerializer=Yr},4436:(lt,ke,B)=>{var d=B(9401).freeze;ke.XML_ENTITIES=d({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),ke.HTML_ENTITIES=d({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),ke.entityMap=ke.HTML_ENTITIES},978:(lt,ke,B)=>{B(6853);ke.DOMParser=B(1991).DOMParser},8702:(lt,ke,B)=>{var d=B(9401).NAMESPACE,ae=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,U=new RegExp("[\\-\\.0-9"+ae.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),de=new RegExp("^"+ae.source+U.source+"*(?::"+ae.source+U.source+"*)?$"),te=0,oe=1,we=2,Ee=3,be=4,K=5,ne=6,Y=7;function Ke(R,V){this.message=R,this.locator=V,Error.captureStackTrace&&Error.captureStackTrace(this,Ke)}function Oe(){}function yt(R,V){return V.lineNumber=R.lineNumber,V.columnNumber=R.columnNumber,V}function Ue(R,V,he,Le,He,We){function ge(Be,_t,et){he.attributeNames.hasOwnProperty(Be)&&We.fatalError("Attribute "+Be+" redefined"),he.addValue(Be,_t.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,He),et)}for(var X,re=++V,ve=te;;){var _e=R.charAt(re);switch(_e){case"=":if(ve===oe)X=R.slice(V,re),ve=Ee;else{if(ve!==we)throw new Error("attribute equal must after attrName");ve=Ee}break;case"'":case'"':if(ve===Ee||ve===oe){if(ve===oe&&(We.warning('attribute value must after "="'),X=R.slice(V,re)),!((re=R.indexOf(_e,V=re+1))>0))throw new Error("attribute value no end '"+_e+"' match");ge(X,Z=R.slice(V,re),V-1),ve=K}else{if(ve!=be)throw new Error('attribute value must after "="');ge(X,Z=R.slice(V,re),V),We.warning('attribute "'+X+'" missed start quot('+_e+")!!"),V=re+1,ve=K}break;case"/":switch(ve){case te:he.setTagName(R.slice(V,re));case K:case ne:case Y:ve=Y,he.closed=!0;case be:case oe:break;case we:he.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return We.error("unexpected end of input"),ve==te&&he.setTagName(R.slice(V,re)),re;case">":switch(ve){case te:he.setTagName(R.slice(V,re));case K:case ne:case Y:break;case be:case oe:"/"===(Z=R.slice(V,re)).slice(-1)&&(he.closed=!0,Z=Z.slice(0,-1));case we:ve===we&&(Z=X),ve==be?(We.warning('attribute "'+Z+'" missed quot(")!'),ge(X,Z,V)):((!d.isHTML(Le[""])||!Z.match(/^(?:disabled|checked|selected)$/i))&&We.warning('attribute "'+Z+'" missed value!! "'+Z+'" instead!!'),ge(Z,Z,V));break;case Ee:throw new Error("attribute value missed!!")}return re;case"\x80":_e=" ";default:if(_e<=" ")switch(ve){case te:he.setTagName(R.slice(V,re)),ve=ne;break;case oe:X=R.slice(V,re),ve=we;break;case be:var Z=R.slice(V,re);We.warning('attribute "'+Z+'" missed quot(")!!'),ge(X,Z,V);case K:ve=ne}else switch(ve){case we:(!d.isHTML(Le[""])||!X.match(/^(?:disabled|checked|selected)$/i))&&We.warning('attribute "'+X+'" missed value!! "'+X+'" instead2!!'),ge(X,X,V),V=re,ve=oe;break;case K:We.warning('attribute space is required"'+X+'"!!');case ne:ve=oe,V=re;break;case Ee:ve=be,V=re;break;case Y:throw new Error("elements closed character '/' and '>' must be connected to")}}re++}}function Se(R,V,he){for(var Le=R.tagName,He=null,_e=R.length;_e--;){var We=R[_e],ge=We.qName,X=We.value;if((Ge=ge.indexOf(":"))>0)var Z=We.prefix=ge.slice(0,Ge),re=ge.slice(Ge+1),ve="xmlns"===Z&&re;else re=ge,Z=null,ve="xmlns"===ge&&"";We.localName=re,!1!==ve&&(null==He&&(He={},je(he,he={})),he[ve]=He[ve]=X,We.uri=d.XMLNS,V.startPrefixMapping(ve,X))}for(_e=R.length;_e--;)(Z=(We=R[_e]).prefix)&&("xml"===Z&&(We.uri=d.XML),"xmlns"!==Z&&(We.uri=he[Z||""]));var Ge;(Ge=Le.indexOf(":"))>0?(Z=R.prefix=Le.slice(0,Ge),re=R.localName=Le.slice(Ge+1)):(Z=null,re=R.localName=Le);var Be=R.uri=he[Z||""];if(V.startElement(Be,re,Le,R),!R.closed)return R.currentNSMap=he,R.localNSMap=He,!0;if(V.endElement(Be,re,Le),He)for(Z in He)Object.prototype.hasOwnProperty.call(He,Z)&&V.endPrefixMapping(Z)}function De(R,V,he,Le,He){if(/^(?:script|textarea)$/i.test(he)){var We=R.indexOf("</"+he+">",V),ge=R.substring(V+1,We);if(/[&<]/.test(ge))return/^script$/i.test(he)?(He.characters(ge,0,ge.length),We):(ge=ge.replace(/&#?\w+;/g,Le),He.characters(ge,0,ge.length),We)}return V+1}function $e(R,V,he,Le){var He=Le[he];return null==He&&((He=R.lastIndexOf("</"+he+">"))<V&&(He=R.lastIndexOf("</"+he)),Le[he]=He),He<V}function je(R,V){for(var he in R)Object.prototype.hasOwnProperty.call(R,he)&&(V[he]=R[he])}function Ce(R,V,he,Le){if("-"===R.charAt(V+2))return"-"===R.charAt(V+3)?(We=R.indexOf("--\x3e",V+4))>V?(he.comment(R,V+4,We-V-4),We+3):(Le.error("Unclosed comment"),-1):-1;if("CDATA["==R.substr(V+3,6)){var We=R.indexOf("]]>",V+9);return he.startCDATA(),he.characters(R,V+9,We-V-9),he.endCDATA(),We+3}var ge=function Ze(R,V){var he,Le=[],He=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(He.lastIndex=V,He.exec(R);he=He.exec(R);)if(Le.push(he),he[1])return Le}(R,V),X=ge.length;if(X>1&&/!doctype/i.test(ge[0][0])){var Z=ge[1][0],re=!1,ve=!1;X>3&&(/^public$/i.test(ge[2][0])?(re=ge[3][0],ve=X>4&&ge[4][0]):/^system$/i.test(ge[2][0])&&(ve=ge[3][0]));var _e=ge[X-1];return he.startDTD(Z,re,ve),he.endDTD(),_e.index+_e[0].length}return-1}function Ye(R,V,he){var Le=R.indexOf("?>",V);if(Le){var He=R.substring(V,Le).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return He?(he.processingInstruction(He[1],He[2]),Le+2):-1}return-1}function st(){this.attributeNames={}}(Ke.prototype=new Error).name=Ke.name,Oe.prototype={parse:function(R,V,he){var Le=this.domBuilder;Le.startDocument(),je(V,V={}),function ct(R,V,he,Le,He){function ge(Bn){var Mn=Bn.slice(1,-1);return Object.hasOwnProperty.call(he,Mn)?he[Mn]:"#"===Mn.charAt(0)?function We(Bn){return Bn>65535?(Bn-=65536,String.fromCharCode(55296+(Bn>>10),56320+(1023&Bn))):String.fromCharCode(Bn)}(parseInt(Mn.substr(1).replace("x","0x"))):(He.error("entity not found:"+Bn),Bn)}function X(Bn){if(Bn>et){var Mn=R.substring(et,Bn).replace(/&#?\w+;/g,ge);Ge&&Z(et),Le.characters(Mn,0,Bn-et),et=Bn}}function Z(Bn,Mn){for(;Bn>=ve&&(Mn=_e.exec(R));)ve=(re=Mn.index)+Mn[0].length,Ge.lineNumber++;Ge.columnNumber=Bn-re+1}for(var re=0,ve=0,_e=/.*(?:\r\n?|\n)|.*$/g,Ge=Le.locator,Be=[{currentNSMap:V}],_t={},et=0;;){try{var ft=R.indexOf("<",et);if(ft<0){if(!R.substr(et).match(/^\s*$/)){var wt=Le.doc,Ot=wt.createTextNode(R.substr(et));wt.appendChild(Ot),Le.currentElement=Ot}return}switch(ft>et&&X(ft),R.charAt(ft+1)){case"/":var qn=R.indexOf(">",ft+3),on=R.substring(ft+2,qn).replace(/[ \t\n\r]+$/g,""),yn=Be.pop();qn<0?(on=R.substring(ft+2).replace(/[\s<].*/,""),He.error("end tag name: "+on+" is not complete:"+yn.tagName),qn=ft+1+on.length):on.match(/\s</)&&(on=on.replace(/[\s<].*/,""),He.error("end tag name: "+on+" maybe not complete"),qn=ft+1+on.length);var Un=yn.localNSMap,Gn=yn.tagName==on;if(Gn||yn.tagName&&yn.tagName.toLowerCase()==on.toLowerCase()){if(Le.endElement(yn.uri,yn.localName,on),Un)for(var Sn in Un)Object.prototype.hasOwnProperty.call(Un,Sn)&&Le.endPrefixMapping(Sn);Gn||He.fatalError("end tag name: "+on+" is not match the current start tagName:"+yn.tagName)}else Be.push(yn);qn++;break;case"?":Ge&&Z(ft),qn=Ye(R,ft,Le);break;case"!":Ge&&Z(ft),qn=Ce(R,ft,Le,He);break;default:Ge&&Z(ft);var Yn=new st,hr=Be[Be.length-1].currentNSMap,Xn=(qn=Ue(R,ft,Yn,hr,ge,He),Yn.length);if(!Yn.closed&&$e(R,qn,Yn.tagName,_t)&&(Yn.closed=!0,he.nbsp||He.warning("unclosed xml attribute")),Ge&&Xn){for(var Wr=yt(Ge,{}),Ht=0;Ht<Xn;Ht++){var Bi=Yn[Ht];Z(Bi.offset),Bi.locator=yt(Ge,{})}Le.locator=Wr,Se(Yn,Le,hr)&&Be.push(Yn),Le.locator=Ge}else Se(Yn,Le,hr)&&Be.push(Yn);d.isHTML(Yn.uri)&&!Yn.closed?qn=De(R,qn,Yn.tagName,ge,Le):qn++}}catch(Bn){if(Bn instanceof Ke)throw Bn;He.error("element parse error: "+Bn),qn=-1}qn>et?et=qn:X(Math.max(ft,et)+1)}}(R,V,he,Le,this.errorHandler),Le.endDocument()}},st.prototype={setTagName:function(R){if(!de.test(R))throw new Error("invalid tagName:"+R);this.tagName=R},addValue:function(R,V,he){if(!de.test(R))throw new Error("invalid attribute:"+R);this.attributeNames[R]=this.length,this[this.length++]={qName:R,value:V,offset:he}},length:0,getLocalName:function(R){return this[R].localName},getLocator:function(R){return this[R].locator},getQName:function(R){return this[R].qName},getURI:function(R){return this[R].uri},getValue:function(R){return this[R].value}},ke.XMLReader=Oe,ke.ParseError=Ke},1421:(lt,ke,B)=>{var U,d=typeof global<"u"?global:typeof window<"u"?window:{},ae=B(5893);typeof document<"u"?U=document:(U=d["__GLOBAL_DOCUMENT_CACHE@4"])||(U=d["__GLOBAL_DOCUMENT_CACHE@4"]=ae),lt.exports=U},9226:lt=>{var ke;ke=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lt.exports=ke},2703:lt=>{lt.exports=function B(d){if(!d)return!1;var ae=ke.call(d);return"[object Function]"===ae||"function"==typeof d&&"[object RegExp]"!==ae||typeof window<"u"&&(d===window.setTimeout||d===window.alert||d===window.confirm||d===window.prompt)};var ke=Object.prototype.toString},1234:(lt,ke)=>{function B(oe){if(oe&&"object"==typeof oe){var we=oe.which||oe.keyCode||oe.charCode;we&&(oe=we)}if("number"==typeof oe)return de[oe];var be,Ee=String(oe);return(be=d[Ee.toLowerCase()])?be:(be=ae[Ee.toLowerCase()])||(1===Ee.length?Ee.charCodeAt(0):void 0)}B.isEventKey=function(we,Ee){if(we&&"object"==typeof we){var be=we.which||we.keyCode||we.charCode;if(null==be)return!1;if("string"==typeof Ee){var K;if(K=d[Ee.toLowerCase()])return K===be;if(K=ae[Ee.toLowerCase()])return K===be}else if("number"==typeof Ee)return Ee===be;return!1}};var d=(ke=lt.exports=B).code=ke.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},ae=ke.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(U=97;U<123;U++)d[String.fromCharCode(U)]=U-32;for(var U=48;U<58;U++)d[U-48]=U;for(U=1;U<13;U++)d["f"+U]=U+111;for(U=0;U<10;U++)d["numpad "+U]=U+96;var de=ke.names=ke.title={};for(U in d)de[d[U]]=U;for(var te in ae)d[te]=ae[te]},7459:(lt,ke,B)=>{var d=B(3357).getUint64;lt.exports=function(U){var de=new DataView(U.buffer,U.byteOffset,U.byteLength),te={version:U[0],flags:new Uint8Array(U.subarray(1,4)),references:[],referenceId:de.getUint32(4),timescale:de.getUint32(8)},oe=12;0===te.version?(te.earliestPresentationTime=de.getUint32(oe),te.firstOffset=de.getUint32(oe+4),oe+=8):(te.earliestPresentationTime=d(U.subarray(oe)),te.firstOffset=d(U.subarray(oe+8)),oe+=16);var we=de.getUint16(oe+=2);for(oe+=2;we>0;oe+=12,we--)te.references.push({referenceType:(128&U[oe])>>>7,referencedSize:2147483647&de.getUint32(oe),subsegmentDuration:de.getUint32(oe+4),startsWithSap:!!(128&U[oe+8]),sapType:(112&U[oe+8])>>>4,sapDeltaTime:268435455&de.getUint32(oe+8)});return te}},6277:lt=>{var B,d,ae,U,de,te,oe;de=function(we,Ee){return B(U(we,Ee))},te=function(we,Ee){return d(ae(we),Ee)},oe=function(we,Ee,be){return ae(be?we:we-Ee)},lt.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:B=function(we){return 9e4*we},secondsToAudioTs:d=function(we,Ee){return we*Ee},videoTsToSeconds:ae=function(we){return we/9e4},audioTsToSeconds:U=function(we,Ee){return we/Ee},audioTsToVideoTs:de,videoTsToAudioTs:te,metadataTsToSeconds:oe}},3357:lt=>{var ke=Math.pow(2,32);lt.exports={getUint64:function(d){var U,ae=new DataView(d.buffer,d.byteOffset,d.byteLength);return ae.getBigUint64?(U=ae.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(U):U:ae.getUint32(0)*ke+ae.getUint32(4)},MAX_UINT32:ke}},7854:lt=>{var ke=function(B){"use strict";var de,d=Object.prototype,ae=d.hasOwnProperty,U=Object.defineProperty||function(X,Z,re){X[Z]=re.value},te="function"==typeof Symbol?Symbol:{},oe=te.iterator||"@@iterator",we=te.asyncIterator||"@@asyncIterator",Ee=te.toStringTag||"@@toStringTag";function be(X,Z,re){return Object.defineProperty(X,Z,{value:re,enumerable:!0,configurable:!0,writable:!0}),X[Z]}try{be({},"")}catch{be=function(Z,re,ve){return Z[re]=ve}}function K(X,Z,re,ve){var Ge=Object.create((Z&&Z.prototype instanceof Ue?Z:Ue).prototype),Be=new He(ve||[]);return U(Ge,"_invoke",{value:R(X,re,Be)}),Ge}function ne(X,Z,re){try{return{type:"normal",arg:X.call(Z,re)}}catch(ve){return{type:"throw",arg:ve}}}B.wrap=K;var Y="suspendedStart",Ke="suspendedYield",Oe="executing",ct="completed",yt={};function Ue(){}function Se(){}function De(){}var $e={};be($e,oe,function(){return this});var je=Object.getPrototypeOf,Ce=je&&je(je(We([])));Ce&&Ce!==d&&ae.call(Ce,oe)&&($e=Ce);var Ye=De.prototype=Ue.prototype=Object.create($e);function st(X){["next","throw","return"].forEach(function(Z){be(X,Z,function(re){return this._invoke(Z,re)})})}function Ze(X,Z){function re(Ge,Be,_t,et){var ft=ne(X[Ge],X,Be);if("throw"!==ft.type){var wt=ft.arg,Ot=wt.value;return Ot&&"object"==typeof Ot&&ae.call(Ot,"__await")?Z.resolve(Ot.__await).then(function(on){re("next",on,_t,et)},function(on){re("throw",on,_t,et)}):Z.resolve(Ot).then(function(on){wt.value=on,_t(wt)},function(on){return re("throw",on,_t,et)})}et(ft.arg)}var ve;U(this,"_invoke",{value:function _e(Ge,Be){function _t(){return new Z(function(et,ft){re(Ge,Be,et,ft)})}return ve=ve?ve.then(_t,_t):_t()}})}function R(X,Z,re){var ve=Y;return function(Ge,Be){if(ve===Oe)throw new Error("Generator is already running");if(ve===ct){if("throw"===Ge)throw Be;return ge()}for(re.method=Ge,re.arg=Be;;){var _t=re.delegate;if(_t){var et=V(_t,re);if(et){if(et===yt)continue;return et}}if("next"===re.method)re.sent=re._sent=re.arg;else if("throw"===re.method){if(ve===Y)throw ve=ct,re.arg;re.dispatchException(re.arg)}else"return"===re.method&&re.abrupt("return",re.arg);ve=Oe;var ft=ne(X,Z,re);if("normal"===ft.type){if(ve=re.done?ct:Ke,ft.arg===yt)continue;return{value:ft.arg,done:re.done}}"throw"===ft.type&&(ve=ct,re.method="throw",re.arg=ft.arg)}}}function V(X,Z){var re=Z.method,ve=X.iterator[re];if(ve===de)return Z.delegate=null,"throw"===re&&X.iterator.return&&(Z.method="return",Z.arg=de,V(X,Z),"throw"===Z.method)||"return"!==re&&(Z.method="throw",Z.arg=new TypeError("The iterator does not provide a '"+re+"' method")),yt;var _e=ne(ve,X.iterator,Z.arg);if("throw"===_e.type)return Z.method="throw",Z.arg=_e.arg,Z.delegate=null,yt;var Ge=_e.arg;return Ge?Ge.done?(Z[X.resultName]=Ge.value,Z.next=X.nextLoc,"return"!==Z.method&&(Z.method="next",Z.arg=de),Z.delegate=null,yt):Ge:(Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,yt)}function he(X){var Z={tryLoc:X[0]};1 in X&&(Z.catchLoc=X[1]),2 in X&&(Z.finallyLoc=X[2],Z.afterLoc=X[3]),this.tryEntries.push(Z)}function Le(X){var Z=X.completion||{};Z.type="normal",delete Z.arg,X.completion=Z}function He(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(he,this),this.reset(!0)}function We(X){if(X){var Z=X[oe];if(Z)return Z.call(X);if("function"==typeof X.next)return X;if(!isNaN(X.length)){var re=-1,ve=function _e(){for(;++re<X.length;)if(ae.call(X,re))return _e.value=X[re],_e.done=!1,_e;return _e.value=de,_e.done=!0,_e};return ve.next=ve}}return{next:ge}}function ge(){return{value:de,done:!0}}return Se.prototype=De,U(Ye,"constructor",{value:De,configurable:!0}),U(De,"constructor",{value:Se,configurable:!0}),Se.displayName=be(De,Ee,"GeneratorFunction"),B.isGeneratorFunction=function(X){var Z="function"==typeof X&&X.constructor;return!!Z&&(Z===Se||"GeneratorFunction"===(Z.displayName||Z.name))},B.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,De):(X.__proto__=De,be(X,Ee,"GeneratorFunction")),X.prototype=Object.create(Ye),X},B.awrap=function(X){return{__await:X}},st(Ze.prototype),be(Ze.prototype,we,function(){return this}),B.AsyncIterator=Ze,B.async=function(X,Z,re,ve,_e){void 0===_e&&(_e=Promise);var Ge=new Ze(K(X,Z,re,ve),_e);return B.isGeneratorFunction(Z)?Ge:Ge.next().then(function(Be){return Be.done?Be.value:Ge.next()})},st(Ye),be(Ye,Ee,"Generator"),be(Ye,oe,function(){return this}),be(Ye,"toString",function(){return"[object Generator]"}),B.keys=function(X){var Z=Object(X),re=[];for(var ve in Z)re.push(ve);return re.reverse(),function _e(){for(;re.length;){var Ge=re.pop();if(Ge in Z)return _e.value=Ge,_e.done=!1,_e}return _e.done=!0,_e}},B.values=We,He.prototype={constructor:He,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=de,this.done=!1,this.delegate=null,this.method="next",this.arg=de,this.tryEntries.forEach(Le),!X)for(var Z in this)"t"===Z.charAt(0)&&ae.call(this,Z)&&!isNaN(+Z.slice(1))&&(this[Z]=de)},stop:function(){this.done=!0;var Z=this.tryEntries[0].completion;if("throw"===Z.type)throw Z.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var Z=this;function re(et,ft){return Ge.type="throw",Ge.arg=X,Z.next=et,ft&&(Z.method="next",Z.arg=de),!!ft}for(var ve=this.tryEntries.length-1;ve>=0;--ve){var _e=this.tryEntries[ve],Ge=_e.completion;if("root"===_e.tryLoc)return re("end");if(_e.tryLoc<=this.prev){var Be=ae.call(_e,"catchLoc"),_t=ae.call(_e,"finallyLoc");if(Be&&_t){if(this.prev<_e.catchLoc)return re(_e.catchLoc,!0);if(this.prev<_e.finallyLoc)return re(_e.finallyLoc)}else if(Be){if(this.prev<_e.catchLoc)return re(_e.catchLoc,!0)}else{if(!_t)throw new Error("try statement without catch or finally");if(this.prev<_e.finallyLoc)return re(_e.finallyLoc)}}}},abrupt:function(X,Z){for(var re=this.tryEntries.length-1;re>=0;--re){var ve=this.tryEntries[re];if(ve.tryLoc<=this.prev&&ae.call(ve,"finallyLoc")&&this.prev<ve.finallyLoc){var _e=ve;break}}_e&&("break"===X||"continue"===X)&&_e.tryLoc<=Z&&Z<=_e.finallyLoc&&(_e=null);var Ge=_e?_e.completion:{};return Ge.type=X,Ge.arg=Z,_e?(this.method="next",this.next=_e.finallyLoc,yt):this.complete(Ge)},complete:function(X,Z){if("throw"===X.type)throw X.arg;return"break"===X.type||"continue"===X.type?this.next=X.arg:"return"===X.type?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):"normal"===X.type&&Z&&(this.next=Z),yt},finish:function(X){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var re=this.tryEntries[Z];if(re.finallyLoc===X)return this.complete(re.completion,re.afterLoc),Le(re),yt}},catch:function(X){for(var Z=this.tryEntries.length-1;Z>=0;--Z){var re=this.tryEntries[Z];if(re.tryLoc===X){var ve=re.completion;if("throw"===ve.type){var _e=ve.arg;Le(re)}return _e}}throw new Error("illegal catch attempt")},delegateYield:function(X,Z,re){return this.delegate={iterator:We(X),resultName:Z,nextLoc:re},"next"===this.method&&(this.arg=de),yt}},B}(lt.exports);try{regeneratorRuntime=ke}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=ke:Function("r","regeneratorRuntime = r")(ke)}},9751:(lt,ke,B)=>{"use strict";B.d(ke,{y:()=>Ee});var d=B(930),ae=B(727),U=B(8822),de=B(9635),te=B(2416),oe=B(576),we=B(2806);let Ee=(()=>{class Y{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const ct=new Y;return ct.source=this,ct.operator=Oe,ct}subscribe(Oe,ct,yt){const Ue=function ne(Y){return Y&&Y instanceof d.Lv||function K(Y){return Y&&(0,oe.m)(Y.next)&&(0,oe.m)(Y.error)&&(0,oe.m)(Y.complete)}(Y)&&(0,ae.Nn)(Y)}(Oe)?Oe:new d.Hp(Oe,ct,yt);return(0,we.x)(()=>{const{operator:Se,source:De}=this;Ue.add(Se?Se.call(Ue,De):De?this._subscribe(Ue):this._trySubscribe(Ue))}),Ue}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(ct){Oe.error(ct)}}forEach(Oe,ct){return new(ct=be(ct))((yt,Ue)=>{const Se=new d.Hp({next:De=>{try{Oe(De)}catch($e){Ue($e),Se.unsubscribe()}},error:Ue,complete:yt});this.subscribe(Se)})}_subscribe(Oe){var ct;return null===(ct=this.source)||void 0===ct?void 0:ct.subscribe(Oe)}[U.L](){return this}pipe(...Oe){return(0,de.U)(Oe)(this)}toPromise(Oe){return new(Oe=be(Oe))((ct,yt)=>{let Ue;this.subscribe(Se=>Ue=Se,Se=>yt(Se),()=>ct(Ue))})}}return Y.create=Ke=>new Y(Ke),Y})();function be(Y){var Ke;return null!==(Ke=Y??te.v.Promise)&&void 0!==Ke?Ke:Promise}},7579:(lt,ke,B)=>{"use strict";B.d(ke,{x:()=>we});var d=B(9751),ae=B(727);const de=(0,B(3888).d)(be=>function(){be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=B(8737),oe=B(2806);let we=(()=>{class be extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ne){const Y=new Ee(this,this);return Y.operator=ne,Y}_throwIfClosed(){if(this.closed)throw new de}next(ne){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(ne)}})}error(ne){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ne;const{observers:Y}=this;for(;Y.length;)Y.shift().error(ne)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ne}=this;for(;ne.length;)ne.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ne;return(null===(ne=this.observers)||void 0===ne?void 0:ne.length)>0}_trySubscribe(ne){return this._throwIfClosed(),super._trySubscribe(ne)}_subscribe(ne){return this._throwIfClosed(),this._checkFinalizedStatuses(ne),this._innerSubscribe(ne)}_innerSubscribe(ne){const{hasError:Y,isStopped:Ke,observers:Oe}=this;return Y||Ke?ae.Lc:(this.currentObservers=null,Oe.push(ne),new ae.w0(()=>{this.currentObservers=null,(0,te.P)(Oe,ne)}))}_checkFinalizedStatuses(ne){const{hasError:Y,thrownError:Ke,isStopped:Oe}=this;Y?ne.error(Ke):Oe&&ne.complete()}asObservable(){const ne=new d.y;return ne.source=this,ne}}return be.create=(K,ne)=>new Ee(K,ne),be})();class Ee extends we{constructor(K,ne){super(),this.destination=K,this.source=ne}next(K){var ne,Y;null===(Y=null===(ne=this.destination)||void 0===ne?void 0:ne.next)||void 0===Y||Y.call(ne,K)}error(K){var ne,Y;null===(Y=null===(ne=this.destination)||void 0===ne?void 0:ne.error)||void 0===Y||Y.call(ne,K)}complete(){var K,ne;null===(ne=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===ne||ne.call(K)}_subscribe(K){var ne,Y;return null!==(Y=null===(ne=this.source)||void 0===ne?void 0:ne.subscribe(K))&&void 0!==Y?Y:ae.Lc}}},930:(lt,ke,B)=>{"use strict";B.d(ke,{Hp:()=>yt,Lv:()=>Y});var d=B(576),ae=B(727),U=B(2416),de=B(7849),te=B(5032);const oe=be("C",void 0,void 0);function be(je,Ce,Ye){return{kind:je,value:Ce,error:Ye}}var K=B(3410),ne=B(2806);class Y extends ae.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,ae.Nn)(Ce)&&Ce.add(this)):this.destination=$e}static create(Ce,Ye,st){return new yt(Ce,Ye,st)}next(Ce){this.isStopped?De(function Ee(je){return be("N",je,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?De(function we(je){return be("E",void 0,je)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?De(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Oe(je,Ce){return Ke.call(je,Ce)}class ct{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Ye}=this;if(Ye.next)try{Ye.next(Ce)}catch(st){Ue(st)}}error(Ce){const{partialObserver:Ye}=this;if(Ye.error)try{Ye.error(Ce)}catch(st){Ue(st)}else Ue(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Ye){Ue(Ye)}}}class yt extends Y{constructor(Ce,Ye,st){let Ze;if(super(),(0,d.m)(Ce)||!Ce)Ze={next:Ce??void 0,error:Ye??void 0,complete:st??void 0};else{let R;this&&U.v.useDeprecatedNextContext?(R=Object.create(Ce),R.unsubscribe=()=>this.unsubscribe(),Ze={next:Ce.next&&Oe(Ce.next,R),error:Ce.error&&Oe(Ce.error,R),complete:Ce.complete&&Oe(Ce.complete,R)}):Ze=Ce}this.destination=new ct(Ze)}}function Ue(je){U.v.useDeprecatedSynchronousErrorHandling?(0,ne.O)(je):(0,de.h)(je)}function De(je,Ce){const{onStoppedNotification:Ye}=U.v;Ye&&K.z.setTimeout(()=>Ye(je,Ce))}const $e={closed:!0,next:te.Z,error:function Se(je){throw je},complete:te.Z}},727:(lt,ke,B)=>{"use strict";B.d(ke,{Lc:()=>oe,w0:()=>te,Nn:()=>we});var d=B(576);const U=(0,B(3888).d)(be=>function(ne){be(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((Y,Ke)=>`${Ke+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne});var de=B(8737);class te{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:ne}=this;if(ne)if(this._parentage=null,Array.isArray(ne))for(const Oe of ne)Oe.remove(this);else ne.remove(this);const{initialTeardown:Y}=this;if((0,d.m)(Y))try{Y()}catch(Oe){K=Oe instanceof U?Oe.errors:[Oe]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Oe of Ke)try{Ee(Oe)}catch(ct){K=K??[],ct instanceof U?K=[...K,...ct.errors]:K.push(ct)}}if(K)throw new U(K)}}add(K){var ne;if(K&&K!==this)if(this.closed)Ee(K);else{if(K instanceof te){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(ne=this._finalizers)&&void 0!==ne?ne:[]).push(K)}}_hasParent(K){const{_parentage:ne}=this;return ne===K||Array.isArray(ne)&&ne.includes(K)}_addParent(K){const{_parentage:ne}=this;this._parentage=Array.isArray(ne)?(ne.push(K),ne):ne?[ne,K]:K}_removeParent(K){const{_parentage:ne}=this;ne===K?this._parentage=null:Array.isArray(ne)&&(0,de.P)(ne,K)}remove(K){const{_finalizers:ne}=this;ne&&(0,de.P)(ne,K),K instanceof te&&K._removeParent(this)}}te.EMPTY=(()=>{const be=new te;return be.closed=!0,be})();const oe=te.EMPTY;function we(be){return be instanceof te||be&&"closed"in be&&(0,d.m)(be.remove)&&(0,d.m)(be.add)&&(0,d.m)(be.unsubscribe)}function Ee(be){(0,d.m)(be)?be():be.unsubscribe()}},2416:(lt,ke,B)=>{"use strict";B.d(ke,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,ke,B)=>{"use strict";B.d(ke,{E:()=>ae});const ae=new(B(9751).y)(te=>te.complete())},8996:(lt,ke,B)=>{"use strict";B.d(ke,{D:()=>Ce});var d=B(8421),ae=B(5363),U=B(9468),oe=B(9751),Ee=B(2202),be=B(576),K=B(9672);function Y(Ye,st){if(!Ye)throw new Error("Iterable cannot be null");return new oe.y(Ze=>{(0,K.f)(Ze,st,()=>{const R=Ye[Symbol.asyncIterator]();(0,K.f)(Ze,st,()=>{R.next().then(V=>{V.done?Ze.complete():Ze.next(V.value)})},0,!0)})})}var Ke=B(3670),Oe=B(8239),ct=B(1144),yt=B(6495),Ue=B(2206),Se=B(4532),De=B(3260);function Ce(Ye,st){return st?function je(Ye,st){if(null!=Ye){if((0,Ke.c)(Ye))return function de(Ye,st){return(0,d.Xf)(Ye).pipe((0,U.R)(st),(0,ae.Q)(st))}(Ye,st);if((0,ct.z)(Ye))return function we(Ye,st){return new oe.y(Ze=>{let R=0;return st.schedule(function(){R===Ye.length?Ze.complete():(Ze.next(Ye[R++]),Ze.closed||this.schedule())})})}(Ye,st);if((0,Oe.t)(Ye))return function te(Ye,st){return(0,d.Xf)(Ye).pipe((0,U.R)(st),(0,ae.Q)(st))}(Ye,st);if((0,Ue.D)(Ye))return Y(Ye,st);if((0,yt.T)(Ye))return function ne(Ye,st){return new oe.y(Ze=>{let R;return(0,K.f)(Ze,st,()=>{R=Ye[Ee.h](),(0,K.f)(Ze,st,()=>{let V,he;try{({value:V,done:he}=R.next())}catch(Le){return void Ze.error(Le)}he?Ze.complete():Ze.next(V)},0,!0)}),()=>(0,be.m)(R?.return)&&R.return()})}(Ye,st);if((0,De.L)(Ye))return function $e(Ye,st){return Y((0,De.Q)(Ye),st)}(Ye,st)}throw(0,Se.z)(Ye)}(Ye,st):(0,d.Xf)(Ye)}},8421:(lt,ke,B)=>{"use strict";B.d(ke,{Xf:()=>Ke});var d=B(655),ae=B(1144),U=B(8239),de=B(9751),te=B(3670),oe=B(2206),we=B(4532),Ee=B(6495),be=B(3260),K=B(576),ne=B(7849),Y=B(8822);function Ke(je){if(je instanceof de.y)return je;if(null!=je){if((0,te.c)(je))return function Oe(je){return new de.y(Ce=>{const Ye=je[Y.L]();if((0,K.m)(Ye.subscribe))return Ye.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(je);if((0,ae.z)(je))return function ct(je){return new de.y(Ce=>{for(let Ye=0;Ye<je.length&&!Ce.closed;Ye++)Ce.next(je[Ye]);Ce.complete()})}(je);if((0,U.t)(je))return function yt(je){return new de.y(Ce=>{je.then(Ye=>{Ce.closed||(Ce.next(Ye),Ce.complete())},Ye=>Ce.error(Ye)).then(null,ne.h)})}(je);if((0,oe.D)(je))return Se(je);if((0,Ee.T)(je))return function Ue(je){return new de.y(Ce=>{for(const Ye of je)if(Ce.next(Ye),Ce.closed)return;Ce.complete()})}(je);if((0,be.L)(je))return function De(je){return Se((0,be.Q)(je))}(je)}throw(0,we.z)(je)}function Se(je){return new de.y(Ce=>{(function $e(je,Ce){var Ye,st,Ze,R;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ye=(0,d.KL)(je);!(st=yield Ye.next()).done;)if(Ce.next(st.value),Ce.closed)return}catch(V){Ze={error:V}}finally{try{st&&!st.done&&(R=Ye.return)&&(yield R.call(Ye))}finally{if(Ze)throw Ze.error}}Ce.complete()})})(je,Ce).catch(Ye=>Ce.error(Ye))})}},6451:(lt,ke,B)=>{"use strict";B.d(ke,{T:()=>oe});var d=B(8189),ae=B(8421),U=B(515),de=B(3269),te=B(8996);function oe(...we){const Ee=(0,de.yG)(we),be=(0,de._6)(we,1/0),K=we;return K.length?1===K.length?(0,ae.Xf)(K[0]):(0,d.J)(be)((0,te.D)(K,Ee)):U.E}},5403:(lt,ke,B)=>{"use strict";B.d(ke,{x:()=>ae});var d=B(930);function ae(de,te,oe,we,Ee){return new U(de,te,oe,we,Ee)}class U extends d.Lv{constructor(te,oe,we,Ee,be,K){super(te),this.onFinalize=be,this.shouldUnsubscribe=K,this._next=oe?function(ne){try{oe(ne)}catch(Y){te.error(Y)}}:super._next,this._error=Ee?function(ne){try{Ee(ne)}catch(Y){te.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=we?function(){try{we()}catch(ne){te.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(lt,ke,B)=>{"use strict";B.d(ke,{U:()=>U});var d=B(4482),ae=B(5403);function U(de,te){return(0,d.e)((oe,we)=>{let Ee=0;oe.subscribe((0,ae.x)(we,be=>{we.next(de.call(te,be,Ee++))}))})}},8189:(lt,ke,B)=>{"use strict";B.d(ke,{J:()=>U});var d=B(5577),ae=B(4671);function U(de=1/0){return(0,d.z)(ae.y,de)}},5577:(lt,ke,B)=>{"use strict";B.d(ke,{z:()=>Ee});var d=B(4004),ae=B(8421),U=B(4482),de=B(9672),te=B(5403),we=B(576);function Ee(be,K,ne=1/0){return(0,we.m)(K)?Ee((Y,Ke)=>(0,d.U)((Oe,ct)=>K(Y,Oe,Ke,ct))((0,ae.Xf)(be(Y,Ke))),ne):("number"==typeof K&&(ne=K),(0,U.e)((Y,Ke)=>function oe(be,K,ne,Y,Ke,Oe,ct,yt){const Ue=[];let Se=0,De=0,$e=!1;const je=()=>{$e&&!Ue.length&&!Se&&K.complete()},Ce=st=>Se<Y?Ye(st):Ue.push(st),Ye=st=>{Oe&&K.next(st),Se++;let Ze=!1;(0,ae.Xf)(ne(st,De++)).subscribe((0,te.x)(K,R=>{Ke?.(R),Oe?Ce(R):K.next(R)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(Se--;Ue.length&&Se<Y;){const R=Ue.shift();ct?(0,de.f)(K,ct,()=>Ye(R)):Ye(R)}je()}catch(R){K.error(R)}}))};return be.subscribe((0,te.x)(K,Ce,()=>{$e=!0,je()})),()=>{yt?.()}}(Y,Ke,be,ne)))}},5363:(lt,ke,B)=>{"use strict";B.d(ke,{Q:()=>de});var d=B(9672),ae=B(4482),U=B(5403);function de(te,oe=0){return(0,ae.e)((we,Ee)=>{we.subscribe((0,U.x)(Ee,be=>(0,d.f)(Ee,te,()=>Ee.next(be),oe),()=>(0,d.f)(Ee,te,()=>Ee.complete(),oe),be=>(0,d.f)(Ee,te,()=>Ee.error(be),oe)))})}},3099:(lt,ke,B)=>{"use strict";B.d(ke,{B:()=>te});var d=B(8421),ae=B(7579),U=B(930),de=B(4482);function te(we={}){const{connector:Ee=(()=>new ae.x),resetOnError:be=!0,resetOnComplete:K=!0,resetOnRefCountZero:ne=!0}=we;return Y=>{let Ke,Oe,ct,yt=0,Ue=!1,Se=!1;const De=()=>{Oe?.unsubscribe(),Oe=void 0},$e=()=>{De(),Ke=ct=void 0,Ue=Se=!1},je=()=>{const Ce=Ke;$e(),Ce?.unsubscribe()};return(0,de.e)((Ce,Ye)=>{yt++,!Se&&!Ue&&De();const st=ct=ct??Ee();Ye.add(()=>{yt--,0===yt&&!Se&&!Ue&&(Oe=oe(je,ne))}),st.subscribe(Ye),!Ke&&yt>0&&(Ke=new U.Hp({next:Ze=>st.next(Ze),error:Ze=>{Se=!0,De(),Oe=oe($e,be,Ze),st.error(Ze)},complete:()=>{Ue=!0,De(),Oe=oe($e,K),st.complete()}}),(0,d.Xf)(Ce).subscribe(Ke))})(Y)}}function oe(we,Ee,...be){if(!0===Ee)return void we();if(!1===Ee)return;const K=new U.Hp({next:()=>{K.unsubscribe(),we()}});return(0,d.Xf)(Ee(...be)).subscribe(K)}},9468:(lt,ke,B)=>{"use strict";B.d(ke,{R:()=>ae});var d=B(4482);function ae(U,de=0){return(0,d.e)((te,oe)=>{oe.add(U.schedule(()=>te.subscribe(oe),de))})}},8505:(lt,ke,B)=>{"use strict";B.d(ke,{b:()=>te});var d=B(576),ae=B(4482),U=B(5403),de=B(4671);function te(oe,we,Ee){const be=(0,d.m)(oe)||we||Ee?{next:oe,error:we,complete:Ee}:oe;return be?(0,ae.e)((K,ne)=>{var Y;null===(Y=be.subscribe)||void 0===Y||Y.call(be);let Ke=!0;K.subscribe((0,U.x)(ne,Oe=>{var ct;null===(ct=be.next)||void 0===ct||ct.call(be,Oe),ne.next(Oe)},()=>{var Oe;Ke=!1,null===(Oe=be.complete)||void 0===Oe||Oe.call(be),ne.complete()},Oe=>{var ct;Ke=!1,null===(ct=be.error)||void 0===ct||ct.call(be,Oe),ne.error(Oe)},()=>{var Oe,ct;Ke&&(null===(Oe=be.unsubscribe)||void 0===Oe||Oe.call(be)),null===(ct=be.finalize)||void 0===ct||ct.call(be)}))}):de.y}},4408:(lt,ke,B)=>{"use strict";B.d(ke,{o:()=>te});var d=B(727);class ae extends d.w0{constructor(we,Ee){super()}schedule(we,Ee=0){return this}}const U={setInterval(oe,we,...Ee){const{delegate:be}=U;return be?.setInterval?be.setInterval(oe,we,...Ee):setInterval(oe,we,...Ee)},clearInterval(oe){const{delegate:we}=U;return(we?.clearInterval||clearInterval)(oe)},delegate:void 0};var de=B(8737);class te extends ae{constructor(we,Ee){super(we,Ee),this.scheduler=we,this.work=Ee,this.pending=!1}schedule(we,Ee=0){var be;if(this.closed)return this;this.state=we;const K=this.id,ne=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(ne,K,Ee)),this.pending=!0,this.delay=Ee,this.id=null!==(be=this.id)&&void 0!==be?be:this.requestAsyncId(ne,this.id,Ee),this}requestAsyncId(we,Ee,be=0){return U.setInterval(we.flush.bind(we,this),be)}recycleAsyncId(we,Ee,be=0){if(null!=be&&this.delay===be&&!1===this.pending)return Ee;null!=Ee&&U.clearInterval(Ee)}execute(we,Ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(we,Ee);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(we,Ee){let K,be=!1;try{this.work(we)}catch(ne){be=!0,K=ne||new Error("Scheduled action threw falsy error")}if(be)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:we,scheduler:Ee}=this,{actions:be}=Ee;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(be,this),null!=we&&(this.id=this.recycleAsyncId(Ee,we,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,ke,B)=>{"use strict";B.d(ke,{v:()=>U});var d=B(6063);class ae{constructor(te,oe=ae.now){this.schedulerActionCtor=te,this.now=oe}schedule(te,oe=0,we){return new this.schedulerActionCtor(this,te).schedule(we,oe)}}ae.now=d.l.now;class U extends ae{constructor(te,oe=ae.now){super(te,oe),this.actions=[],this._active=!1}flush(te){const{actions:oe}=this;if(this._active)return void oe.push(te);let we;this._active=!0;do{if(we=te.execute(te.state,te.delay))break}while(te=oe.shift());if(this._active=!1,we){for(;te=oe.shift();)te.unsubscribe();throw we}}}},4986:(lt,ke,B)=>{"use strict";B.d(ke,{P:()=>de,z:()=>U});var d=B(4408);const U=new(B(7565).v)(d.o),de=U},6063:(lt,ke,B)=>{"use strict";B.d(ke,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(lt,ke,B)=>{"use strict";B.d(ke,{z:()=>d});const d={setTimeout(ae,U,...de){const{delegate:te}=d;return te?.setTimeout?te.setTimeout(ae,U,...de):setTimeout(ae,U,...de)},clearTimeout(ae){const{delegate:U}=d;return(U?.clearTimeout||clearTimeout)(ae)},delegate:void 0}},2202:(lt,ke,B)=>{"use strict";B.d(ke,{h:()=>ae});const ae=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,ke,B)=>{"use strict";B.d(ke,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(lt,ke,B)=>{"use strict";B.d(ke,{_6:()=>oe,jO:()=>de,yG:()=>te});var d=B(576),ae=B(3532);function U(we){return we[we.length-1]}function de(we){return(0,d.m)(U(we))?we.pop():void 0}function te(we){return(0,ae.K)(U(we))?we.pop():void 0}function oe(we,Ee){return"number"==typeof U(we)?we.pop():Ee}},8737:(lt,ke,B)=>{"use strict";function d(ae,U){if(ae){const de=ae.indexOf(U);0<=de&&ae.splice(de,1)}}B.d(ke,{P:()=>d})},3888:(lt,ke,B)=>{"use strict";function d(ae){const de=ae(te=>{Error.call(te),te.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}B.d(ke,{d:()=>d})},2806:(lt,ke,B)=>{"use strict";B.d(ke,{O:()=>de,x:()=>U});var d=B(2416);let ae=null;function U(te){if(d.v.useDeprecatedSynchronousErrorHandling){const oe=!ae;if(oe&&(ae={errorThrown:!1,error:null}),te(),oe){const{errorThrown:we,error:Ee}=ae;if(ae=null,we)throw Ee}}else te()}function de(te){d.v.useDeprecatedSynchronousErrorHandling&&ae&&(ae.errorThrown=!0,ae.error=te)}},9672:(lt,ke,B)=>{"use strict";function d(ae,U,de,te=0,oe=!1){const we=U.schedule(function(){de(),oe?ae.add(this.schedule(null,te)):this.unsubscribe()},te);if(ae.add(we),!oe)return we}B.d(ke,{f:()=>d})},4671:(lt,ke,B)=>{"use strict";function d(ae){return ae}B.d(ke,{y:()=>d})},1144:(lt,ke,B)=>{"use strict";B.d(ke,{z:()=>d});const d=ae=>ae&&"number"==typeof ae.length&&"function"!=typeof ae},2206:(lt,ke,B)=>{"use strict";B.d(ke,{D:()=>ae});var d=B(576);function ae(U){return Symbol.asyncIterator&&(0,d.m)(U?.[Symbol.asyncIterator])}},576:(lt,ke,B)=>{"use strict";function d(ae){return"function"==typeof ae}B.d(ke,{m:()=>d})},3670:(lt,ke,B)=>{"use strict";B.d(ke,{c:()=>U});var d=B(8822),ae=B(576);function U(de){return(0,ae.m)(de[d.L])}},6495:(lt,ke,B)=>{"use strict";B.d(ke,{T:()=>U});var d=B(2202),ae=B(576);function U(de){return(0,ae.m)(de?.[d.h])}},8239:(lt,ke,B)=>{"use strict";B.d(ke,{t:()=>ae});var d=B(576);function ae(U){return(0,d.m)(U?.then)}},3260:(lt,ke,B)=>{"use strict";B.d(ke,{L:()=>de,Q:()=>U});var d=B(655),ae=B(576);function U(te){return(0,d.FC)(this,arguments,function*(){const we=te.getReader();try{for(;;){const{value:Ee,done:be}=yield(0,d.qq)(we.read());if(be)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(Ee)}}finally{we.releaseLock()}})}function de(te){return(0,ae.m)(te?.getReader)}},3532:(lt,ke,B)=>{"use strict";B.d(ke,{K:()=>ae});var d=B(576);function ae(U){return U&&(0,d.m)(U.schedule)}},4482:(lt,ke,B)=>{"use strict";B.d(ke,{A:()=>ae,e:()=>U});var d=B(576);function ae(de){return(0,d.m)(de?.lift)}function U(de){return te=>{if(ae(te))return te.lift(function(oe){try{return de(oe,this)}catch(we){this.error(we)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,ke,B)=>{"use strict";function d(){}B.d(ke,{Z:()=>d})},9635:(lt,ke,B)=>{"use strict";B.d(ke,{U:()=>U,z:()=>ae});var d=B(4671);function ae(...de){return U(de)}function U(de){return 0===de.length?d.y:1===de.length?de[0]:function(oe){return de.reduce((we,Ee)=>Ee(we),oe)}}},7849:(lt,ke,B)=>{"use strict";B.d(ke,{h:()=>U});var d=B(2416),ae=B(3410);function U(de){ae.z.setTimeout(()=>{const{onUnhandledError:te}=d.v;if(!te)throw de;te(de)})}},4532:(lt,ke,B)=>{"use strict";function d(ae){return new TypeError(`You provided ${null!==ae&&"object"==typeof ae?"an invalid object":`'${ae}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(ke,{z:()=>d})},8099:lt=>{lt.exports=function ke(B,d){var ae,U=null;try{ae=JSON.parse(B,d)}catch(de){U=de}return[U,ae]}},3871:function(lt){var B,d,ae,U,de;B=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,d=/^(?=([^\/?#]*))\1([^]*)$/,ae=/(?:\/|^)\.(?=\/)/g,U=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,lt.exports=de={buildAbsoluteURL:function(te,oe,we){if(we=we||{},te=te.trim(),!(oe=oe.trim())){if(!we.alwaysNormalize)return te;var Ee=de.parseURL(te);if(!Ee)throw new Error("Error trying to parse base URL.");return Ee.path=de.normalizePath(Ee.path),de.buildURLFromParts(Ee)}var be=de.parseURL(oe);if(!be)throw new Error("Error trying to parse relative URL.");if(be.scheme)return we.alwaysNormalize?(be.path=de.normalizePath(be.path),de.buildURLFromParts(be)):oe;var K=de.parseURL(te);if(!K)throw new Error("Error trying to parse base URL.");if(!K.netLoc&&K.path&&"/"!==K.path[0]){var ne=d.exec(K.path);K.netLoc=ne[1],K.path=ne[2]}K.netLoc&&!K.path&&(K.path="/");var Y={scheme:K.scheme,netLoc:be.netLoc,path:null,params:be.params,query:be.query,fragment:be.fragment};if(!be.netLoc&&(Y.netLoc=K.netLoc,"/"!==be.path[0]))if(be.path){var Ke=K.path,Oe=Ke.substring(0,Ke.lastIndexOf("/")+1)+be.path;Y.path=de.normalizePath(Oe)}else Y.path=K.path,be.params||(Y.params=K.params,be.query||(Y.query=K.query));return null===Y.path&&(Y.path=we.alwaysNormalize?de.normalizePath(be.path):be.path),de.buildURLFromParts(Y)},parseURL:function(te){var oe=B.exec(te);return oe?{scheme:oe[1]||"",netLoc:oe[2]||"",path:oe[3]||"",params:oe[4]||"",query:oe[5]||"",fragment:oe[6]||""}:null},normalizePath:function(te){for(te=te.split("").reverse().join("").replace(ae,"");te.length!==(te=te.replace(U,"")).length;);return te.split("").reverse().join("")},buildURLFromParts:function(te){return te.scheme+te.netLoc+te.path+te.params+te.query+te.fragment}}},3629:(lt,ke,B)=>{var d=B(9226),ae=lt.exports={WebVTT:B(8318),VTTCue:B(5713),VTTRegion:B(3872)};d.vttjs=ae,d.WebVTT=ae.WebVTT;var U=ae.VTTCue,de=ae.VTTRegion,te=d.VTTCue,oe=d.VTTRegion;ae.shim=function(){d.VTTCue=U,d.VTTRegion=de},ae.restore=function(){d.VTTCue=te,d.VTTRegion=oe},d.VTTCue||ae.shim()},8318:(lt,ke,B)=>{var d=B(1421),ae=Object.create||function(){function R(){}return function(V){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return R.prototype=V,new R}}();function U(R,V){this.name="ParsingError",this.code=R.code,this.message=V||R.message}function de(R){function V(Le,He,We,ge){return 3600*(0|Le)+60*(0|He)+(0|We)+(0|ge)/1e3}var he=R.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return he?he[3]?V(he[1],he[2],he[3].replace(":",""),he[4]):he[1]>59?V(he[1],he[2],0,he[4]):V(0,he[1],he[2],he[4]):null}function te(){this.values=ae(null)}function oe(R,V,he,Le){var He=Le?R.split(Le):[R];for(var We in He)if("string"==typeof He[We]){var ge=He[We].split(he);2===ge.length&&V(ge[0].trim(),ge[1].trim())}}function we(R,V,he){var Le=R;function He(){var X=de(R);if(null===X)throw new U(U.Errors.BadTimeStamp,"Malformed timestamp: "+Le);return R=R.replace(/^[^\sa-zA-Z-]+/,""),X}function ge(){R=R.replace(/^\s+/,"")}if(ge(),V.startTime=He(),ge(),"--\x3e"!==R.substr(0,3))throw new U(U.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+Le);R=R.substr(3),ge(),V.endTime=He(),ge(),function We(X,Z){var re=new te;oe(X,function(ve,_e){switch(ve){case"region":for(var Ge=he.length-1;Ge>=0;Ge--)if(he[Ge].id===_e){re.set(ve,he[Ge].region);break}break;case"vertical":re.alt(ve,_e,["rl","lr"]);break;case"line":var Be=_e.split(","),_t=Be[0];re.integer(ve,_t),re.percent(ve,_t)&&re.set("snapToLines",!1),re.alt(ve,_t,["auto"]),2===Be.length&&re.alt("lineAlign",Be[1],["start","center","end"]);break;case"position":Be=_e.split(","),re.percent(ve,Be[0]),2===Be.length&&re.alt("positionAlign",Be[1],["start","center","end"]);break;case"size":re.percent(ve,_e);break;case"align":re.alt(ve,_e,["start","center","end","left","right"])}},/:/,/\s/),Z.region=re.get("region",null),Z.vertical=re.get("vertical","");try{Z.line=re.get("line","auto")}catch{}Z.lineAlign=re.get("lineAlign","start"),Z.snapToLines=re.get("snapToLines",!0),Z.size=re.get("size",100);try{Z.align=re.get("align","center")}catch{Z.align=re.get("align","middle")}try{Z.position=re.get("position","auto")}catch{Z.position=re.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},Z.align)}Z.positionAlign=re.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},Z.align)}(R,V)}(U.prototype=ae(Error.prototype)).constructor=U,U.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},te.prototype={set:function(R,V){!this.get(R)&&""!==V&&(this.values[R]=V)},get:function(R,V,he){return he?this.has(R)?this.values[R]:V[he]:this.has(R)?this.values[R]:V},has:function(R){return R in this.values},alt:function(R,V,he){for(var Le=0;Le<he.length;++Le)if(V===he[Le]){this.set(R,V);break}},integer:function(R,V){/^-?\d+$/.test(V)&&this.set(R,parseInt(V,10))},percent:function(R,V){return!!(V.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(V=parseFloat(V),V>=0&&V<=100))&&(this.set(R,V),!0)}};var Ee=d.createElement&&d.createElement("textarea"),be={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},K={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},ne={v:"title",lang:"lang"},Y={rt:"ruby"};function Ke(R,V){function he(){if(!V)return null;var et=V.match(/^([^<]*)(<[^>]*>?)?/);return function _t(ft){return V=V.substr(ft.length),ft}(et[1]?et[1]:et[2])}function Le(_t){return Ee.innerHTML=_t,_t=Ee.textContent,Ee.textContent="",_t}function We(_t,et){var ft=be[_t];if(!ft)return null;var wt=R.document.createElement(ft),Ot=ne[_t];return Ot&&et&&(wt[Ot]=et.trim()),wt}for(var Z,ge=R.document.createElement("div"),X=ge,re=[];null!==(Z=he());)if("<"!==Z[0])X.appendChild(R.document.createTextNode(Le(Z)));else{if("/"===Z[1]){re.length&&re[re.length-1]===Z.substr(2).replace(">","")&&(re.pop(),X=X.parentNode);continue}var _e,ve=de(Z.substr(1,Z.length-2));if(ve){_e=R.document.createProcessingInstruction("timestamp",ve),X.appendChild(_e);continue}var Ge=Z.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Ge||!(_e=We(Ge[1],Ge[3]))||Y[(et=_e).localName]&&Y[et.localName]!==X.localName)continue;if(Ge[2]){var Be=Ge[2].split(".");Be.forEach(function(_t){var et=/^bg_/.test(_t),ft=et?_t.slice(3):_t;K.hasOwnProperty(ft)&&(_e.style[et?"background-color":"color"]=K[ft])}),_e.className=Be.join(" ")}re.push(Ge[1]),X.appendChild(_e),X=_e}var et;return ge}var Oe=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function ct(R){for(var V=0;V<Oe.length;V++){var he=Oe[V];if(R>=he[0]&&R<=he[1])return!0}return!1}function yt(R){var V=[],he="";if(!R||!R.childNodes)return"ltr";function He(X,Z){for(var re=Z.childNodes.length-1;re>=0;re--)X.push(Z.childNodes[re])}function We(X){if(!X||!X.length)return null;var Z=X.pop(),re=Z.textContent||Z.innerText;if(re){var ve=re.match(/^.*(\n|\r)/);return ve?(X.length=0,ve[0]):re}return"ruby"===Z.tagName?We(X):Z.childNodes?(He(X,Z),We(X)):void 0}for(He(V,R);he=We(V);)for(var ge=0;ge<he.length;ge++)if(ct(he.charCodeAt(ge)))return"rtl";return"ltr"}function Se(){}function De(R,V,he){Se.call(this),this.cue=V,this.cueDiv=Ke(R,V.text);var Le={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===V.vertical?"horizontal-tb":"lr"===V.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(Le,this.cueDiv),this.div=R.document.createElement("div"),Le={direction:yt(this.cueDiv),writingMode:""===V.vertical?"horizontal-tb":"lr"===V.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===V.align?"center":V.align,font:he.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(Le),this.div.appendChild(this.cueDiv);var He=0;switch(V.positionAlign){case"start":He=V.position;break;case"center":He=V.position-V.size/2;break;case"end":He=V.position-V.size}this.applyStyles(""===V.vertical?{left:this.formatStyle(He,"%"),width:this.formatStyle(V.size,"%")}:{top:this.formatStyle(He,"%"),height:this.formatStyle(V.size,"%")}),this.move=function(We){this.applyStyles({top:this.formatStyle(We.top,"px"),bottom:this.formatStyle(We.bottom,"px"),left:this.formatStyle(We.left,"px"),right:this.formatStyle(We.right,"px"),height:this.formatStyle(We.height,"px"),width:this.formatStyle(We.width,"px")})}}function $e(R){var V,he,Le,He;if(R.div){he=R.div.offsetHeight,Le=R.div.offsetWidth,He=R.div.offsetTop;var We=(We=R.div.childNodes)&&(We=We[0])&&We.getClientRects&&We.getClientRects();R=R.div.getBoundingClientRect(),V=We?Math.max(We[0]&&We[0].height||0,R.height/We.length):0}this.left=R.left,this.right=R.right,this.top=R.top||He,this.height=R.height||he,this.bottom=R.bottom||He+(R.height||he),this.width=R.width||Le,this.lineHeight=void 0!==V?V:R.lineHeight}function je(R,V,he,Le){var We=new $e(V),ge=V.cue,X=function Ue(R){if("number"==typeof R.line&&(R.snapToLines||R.line>=0&&R.line<=100))return R.line;if(!R.track||!R.track.textTrackList||!R.track.textTrackList.mediaElement)return-1;for(var V=R.track,he=V.textTrackList,Le=0,He=0;He<he.length&&he[He]!==V;He++)"showing"===he[He].mode&&Le++;return-1*++Le}(ge),Z=[];if(ge.snapToLines){var re;switch(ge.vertical){case"":Z=["+y","-y"],re="height";break;case"rl":Z=["+x","-x"],re="width";break;case"lr":Z=["-x","+x"],re="width"}var ve=We.lineHeight,_e=ve*Math.round(X),Ge=he[re]+ve,Be=Z[0];Math.abs(_e)>Ge&&(_e=_e<0?-1:1,_e*=Math.ceil(Ge/ve)*ve),X<0&&(_e+=""===ge.vertical?he.height:he.width,Z=Z.reverse()),We.move(Be,_e)}else{var _t=We.lineHeight/he.height*100;switch(ge.lineAlign){case"center":X-=_t/2;break;case"end":X-=_t}switch(ge.vertical){case"":V.applyStyles({top:V.formatStyle(X,"%")});break;case"rl":V.applyStyles({left:V.formatStyle(X,"%")});break;case"lr":V.applyStyles({right:V.formatStyle(X,"%")})}Z=["+y","-x","+x","-y"],We=new $e(V)}var et=function He(ft,wt){for(var Ot,on=new $e(ft),yn=1,Un=0;Un<wt.length;Un++){for(;ft.overlapsOppositeAxis(he,wt[Un])||ft.within(he)&&ft.overlapsAny(Le);)ft.move(wt[Un]);if(ft.within(he))return ft;var Gn=ft.intersectPercentage(he);yn>Gn&&(Ot=new $e(ft),yn=Gn),ft=new $e(on)}return Ot||on}(We,Z);V.move(et.toCSSCompatValues(he))}function Ce(){}Se.prototype.applyStyles=function(R,V){for(var he in V=V||this.div,R)R.hasOwnProperty(he)&&(V.style[he]=R[he])},Se.prototype.formatStyle=function(R,V){return 0===R?0:R+V},(De.prototype=ae(Se.prototype)).constructor=De,$e.prototype.move=function(R,V){switch(V=void 0!==V?V:this.lineHeight,R){case"+x":this.left+=V,this.right+=V;break;case"-x":this.left-=V,this.right-=V;break;case"+y":this.top+=V,this.bottom+=V;break;case"-y":this.top-=V,this.bottom-=V}},$e.prototype.overlaps=function(R){return this.left<R.right&&this.right>R.left&&this.top<R.bottom&&this.bottom>R.top},$e.prototype.overlapsAny=function(R){for(var V=0;V<R.length;V++)if(this.overlaps(R[V]))return!0;return!1},$e.prototype.within=function(R){return this.top>=R.top&&this.bottom<=R.bottom&&this.left>=R.left&&this.right<=R.right},$e.prototype.overlapsOppositeAxis=function(R,V){switch(V){case"+x":return this.left<R.left;case"-x":return this.right>R.right;case"+y":return this.top<R.top;case"-y":return this.bottom>R.bottom}},$e.prototype.intersectPercentage=function(R){return Math.max(0,Math.min(this.right,R.right)-Math.max(this.left,R.left))*Math.max(0,Math.min(this.bottom,R.bottom)-Math.max(this.top,R.top))/(this.height*this.width)},$e.prototype.toCSSCompatValues=function(R){return{top:this.top-R.top,bottom:R.bottom-this.bottom,left:this.left-R.left,right:R.right-this.right,height:this.height,width:this.width}},$e.getSimpleBoxPosition=function(R){var V=R.div?R.div.offsetHeight:R.tagName?R.offsetHeight:0,he=R.div?R.div.offsetWidth:R.tagName?R.offsetWidth:0,Le=R.div?R.div.offsetTop:R.tagName?R.offsetTop:0;return{left:(R=R.div?R.div.getBoundingClientRect():R.tagName?R.getBoundingClientRect():R).left,right:R.right,top:R.top||Le,height:R.height||V,bottom:R.bottom||Le+(R.height||V),width:R.width||he}},Ce.StringDecoder=function(){return{decode:function(R){if(!R)return"";if("string"!=typeof R)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(R))}}},Ce.convertCueToDOMTree=function(R,V){return R&&V?Ke(R,V):null},Ce.processCues=function(R,V,he){if(!R||!V||!he)return null;for(;he.firstChild;)he.removeChild(he.firstChild);var Le=R.document.createElement("div");if(Le.style.position="absolute",Le.style.left="0",Le.style.right="0",Le.style.top="0",Le.style.bottom="0",Le.style.margin="1.5%",he.appendChild(Le),function He(ve){for(var _e=0;_e<ve.length;_e++)if(ve[_e].hasBeenReset||!ve[_e].displayState)return!0;return!1}(V)){var ge=[],X=$e.getSimpleBoxPosition(Le),re={font:Math.round(.05*X.height*100)/100+"px sans-serif"};!function(){for(var ve,_e,Ge=0;Ge<V.length;Ge++)ve=new De(R,_e=V[Ge],re),Le.appendChild(ve.div),je(0,ve,X,ge),_e.displayState=ve.div,ge.push($e.getSimpleBoxPosition(ve))}()}else for(var We=0;We<V.length;We++)Le.appendChild(V[We].displayState)},(Ce.Parser=function(R,V,he){he||(he=V,V={}),V||(V={}),this.window=R,this.vttjs=V,this.state="INITIAL",this.buffer="",this.decoder=he||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(R){if(!(R instanceof U))throw R;this.onparsingerror&&this.onparsingerror(R)},parse:function(R){var ve,V=this;function he(){for(var ve=V.buffer,_e=0;_e<ve.length&&"\r"!==ve[_e]&&"\n"!==ve[_e];)++_e;var Ge=ve.substr(0,_e);return"\r"===ve[_e]&&++_e,"\n"===ve[_e]&&++_e,V.buffer=ve.substr(_e),Ge}R&&(V.buffer+=V.decoder.decode(R,{stream:!0}));try{var ge;if("INITIAL"===V.state){if(!/\r\n|\n/.test(V.buffer))return this;var X=(ge=he()).match(/^WEBVTT([ \t].*)?$/);if(!X||!X[0])throw new U(U.Errors.BadSignature);V.state="HEADER"}for(var Z=!1;V.buffer;){if(!/\r\n|\n/.test(V.buffer))return this;switch(Z?Z=!1:ge=he(),V.state){case"HEADER":/:/.test(ge)?(ve=ge).match(/X-TIMESTAMP-MAP/)?oe(ve,function(_e,Ge){"X-TIMESTAMP-MAP"===_e&&function He(ve){var _e=new te;oe(ve,function(Ge,Be){switch(Ge){case"MPEGT":_e.integer(Ge+"S",Be);break;case"LOCA":_e.set(Ge+"L",de(Be))}},/[^\d]:/,/,/),V.ontimestampmap&&V.ontimestampmap({MPEGTS:_e.get("MPEGTS"),LOCAL:_e.get("LOCAL")})}(Ge)},/=/):oe(ve,function(_e,Ge){"Region"===_e&&function Le(ve){var _e=new te;if(oe(ve,function(Be,_t){switch(Be){case"id":_e.set(Be,_t);break;case"width":_e.percent(Be,_t);break;case"lines":_e.integer(Be,_t);break;case"regionanchor":case"viewportanchor":var et=_t.split(",");if(2!==et.length)break;var ft=new te;if(ft.percent("x",et[0]),ft.percent("y",et[1]),!ft.has("x")||!ft.has("y"))break;_e.set(Be+"X",ft.get("x")),_e.set(Be+"Y",ft.get("y"));break;case"scroll":_e.alt(Be,_t,["up"])}},/=/,/\s/),_e.has("id")){var Ge=new(V.vttjs.VTTRegion||V.window.VTTRegion);Ge.width=_e.get("width",100),Ge.lines=_e.get("lines",3),Ge.regionAnchorX=_e.get("regionanchorX",0),Ge.regionAnchorY=_e.get("regionanchorY",100),Ge.viewportAnchorX=_e.get("viewportanchorX",0),Ge.viewportAnchorY=_e.get("viewportanchorY",100),Ge.scroll=_e.get("scroll",""),V.onregion&&V.onregion(Ge),V.regionList.push({id:_e.get("id"),region:Ge})}}(Ge)},/:/):ge||(V.state="ID");continue;case"NOTE":ge||(V.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(ge)){V.state="NOTE";break}if(!ge)continue;V.cue=new(V.vttjs.VTTCue||V.window.VTTCue)(0,0,"");try{V.cue.align="center"}catch{V.cue.align="middle"}if(V.state="CUE",-1===ge.indexOf("--\x3e")){V.cue.id=ge;continue}case"CUE":try{we(ge,V.cue,V.regionList)}catch(ve){V.reportOrThrowError(ve),V.cue=null,V.state="BADCUE";continue}V.state="CUETEXT";continue;case"CUETEXT":var re=-1!==ge.indexOf("--\x3e");if(!ge||re&&(Z=!0)){V.oncue&&V.oncue(V.cue),V.cue=null,V.state="ID";continue}V.cue.text&&(V.cue.text+="\n"),V.cue.text+=ge.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":ge||(V.state="ID");continue}}}catch(ve){V.reportOrThrowError(ve),"CUETEXT"===V.state&&V.cue&&V.oncue&&V.oncue(V.cue),V.cue=null,V.state="INITIAL"===V.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var R=this;try{if(R.buffer+=R.decoder.decode(),(R.cue||"HEADER"===R.state)&&(R.buffer+="\n\n",R.parse()),"INITIAL"===R.state)throw new U(U.Errors.BadSignature)}catch(V){R.reportOrThrowError(V)}return R.onflush&&R.onflush(),this}},lt.exports=Ce},5713:lt=>{var ke="auto",B={"":1,lr:1,rl:1},d={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function U(te){return"string"==typeof te&&!!d[te.toLowerCase()]&&te.toLowerCase()}function de(te,oe,we){this.hasBeenReset=!1;var Ee="",be=!1,K=te,ne=oe,Y=we,Ke=null,Oe="",ct=!0,yt="auto",Ue="start",Se="auto",De="auto",$e=100,je="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return Ee},set:function(Ce){Ee=""+Ce}},pauseOnExit:{enumerable:!0,get:function(){return be},set:function(Ce){be=!!Ce}},startTime:{enumerable:!0,get:function(){return K},set:function(Ce){if("number"!=typeof Ce)throw new TypeError("Start time must be set to a number.");K=Ce,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return ne},set:function(Ce){if("number"!=typeof Ce)throw new TypeError("End time must be set to a number.");ne=Ce,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return Y},set:function(Ce){Y=""+Ce,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return Ke},set:function(Ce){Ke=Ce,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return Oe},set:function(Ce){var Ye=function ae(te){return"string"==typeof te&&!!B[te.toLowerCase()]&&te.toLowerCase()}(Ce);if(!1===Ye)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");Oe=Ye,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return ct},set:function(Ce){ct=!!Ce,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return yt},set:function(Ce){if("number"!=typeof Ce&&Ce!==ke)throw new SyntaxError("Line: an invalid number or illegal string was specified.");yt=Ce,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Ue},set:function(Ce){var Ye=U(Ce);Ye?(Ue=Ye,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return Se},set:function(Ce){if(Ce<0||Ce>100)throw new Error("Position must be between 0 and 100.");Se=Ce,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return De},set:function(Ce){var Ye=U(Ce);Ye?(De=Ye,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return $e},set:function(Ce){if(Ce<0||Ce>100)throw new Error("Size must be between 0 and 100.");$e=Ce,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return je},set:function(Ce){var Ye=U(Ce);if(!Ye)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");je=Ye,this.hasBeenReset=!0}}}),this.displayState=void 0}de.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},lt.exports=de},3872:lt=>{var ke={"":!0,up:!0};function d(U){return"number"==typeof U&&U>=0&&U<=100}lt.exports=function ae(){var U=100,de=3,te=0,oe=100,we=0,Ee=100,be="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return U},set:function(K){if(!d(K))throw new Error("Width must be between 0 and 100.");U=K}},lines:{enumerable:!0,get:function(){return de},set:function(K){if("number"!=typeof K)throw new TypeError("Lines must be set to a number.");de=K}},regionAnchorY:{enumerable:!0,get:function(){return oe},set:function(K){if(!d(K))throw new Error("RegionAnchorX must be between 0 and 100.");oe=K}},regionAnchorX:{enumerable:!0,get:function(){return te},set:function(K){if(!d(K))throw new Error("RegionAnchorY must be between 0 and 100.");te=K}},viewportAnchorY:{enumerable:!0,get:function(){return Ee},set:function(K){if(!d(K))throw new Error("ViewportAnchorY must be between 0 and 100.");Ee=K}},viewportAnchorX:{enumerable:!0,get:function(){return we},set:function(K){if(!d(K))throw new Error("ViewportAnchorX must be between 0 and 100.");we=K}},scroll:{enumerable:!0,get:function(){return be},set:function(K){var ne=function B(U){return"string"==typeof U&&!!ke[U.toLowerCase()]&&U.toLowerCase()}(K);!1===ne?console.warn("Scroll: an invalid or illegal string was specified."):be=ne}}})}},655:(lt,ke,B)=>{"use strict";function de(ge,X){var Z={};for(var re in ge)Object.prototype.hasOwnProperty.call(ge,re)&&X.indexOf(re)<0&&(Z[re]=ge[re]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var ve=0;for(re=Object.getOwnPropertySymbols(ge);ve<re.length;ve++)X.indexOf(re[ve])<0&&Object.prototype.propertyIsEnumerable.call(ge,re[ve])&&(Z[re[ve]]=ge[re[ve]])}return Z}function Y(ge,X,Z,re){return new(Z||(Z=Promise))(function(_e,Ge){function Be(ft){try{et(re.next(ft))}catch(wt){Ge(wt)}}function _t(ft){try{et(re.throw(ft))}catch(wt){Ge(wt)}}function et(ft){ft.done?_e(ft.value):function ve(_e){return _e instanceof Z?_e:new Z(function(Ge){Ge(_e)})}(ft.value).then(Be,_t)}et((re=re.apply(ge,X||[])).next())})}function je(ge){return this instanceof je?(this.v=ge,this):new je(ge)}function Ce(ge,X,Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,re=Z.apply(ge,X||[]),_e=[];return ve={},Ge("next"),Ge("throw"),Ge("return"),ve[Symbol.asyncIterator]=function(){return this},ve;function Ge(Ot){re[Ot]&&(ve[Ot]=function(on){return new Promise(function(yn,Un){_e.push([Ot,on,yn,Un])>1||Be(Ot,on)})})}function Be(Ot,on){try{!function _t(Ot){Ot.value instanceof je?Promise.resolve(Ot.value.v).then(et,ft):wt(_e[0][2],Ot)}(re[Ot](on))}catch(yn){wt(_e[0][3],yn)}}function et(Ot){Be("next",Ot)}function ft(Ot){Be("throw",Ot)}function wt(Ot,on){Ot(on),_e.shift(),_e.length&&Be(_e[0][0],_e[0][1])}}function st(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z,X=ge[Symbol.asyncIterator];return X?X.call(ge):(ge=function yt(ge){var X="function"==typeof Symbol&&Symbol.iterator,Z=X&&ge[X],re=0;if(Z)return Z.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&re>=ge.length&&(ge=void 0),{value:ge&&ge[re++],done:!ge}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),Z={},re("next"),re("throw"),re("return"),Z[Symbol.asyncIterator]=function(){return this},Z);function re(_e){Z[_e]=ge[_e]&&function(Ge){return new Promise(function(Be,_t){!function ve(_e,Ge,Be,_t){Promise.resolve(_t).then(function(et){_e({value:et,done:Be})},Ge)}(Be,_t,(Ge=ge[_e](Ge)).done,Ge.value)})}}}B.d(ke,{FC:()=>Ce,KL:()=>st,_T:()=>de,mG:()=>Y,qq:()=>je})},5893:()=>{},7156:lt=>{function ke(d,ae,U,de,te,oe,we){try{var Ee=d[oe](we),be=Ee.value}catch(K){return void U(K)}Ee.done?ae(be):Promise.resolve(be).then(de,te)}lt.exports=function B(d){return function(){var ae=this,U=arguments;return new Promise(function(de,te){var oe=d.apply(ae,U);function we(be){ke(oe,de,te,we,Ee,"next",be)}function Ee(be){ke(oe,de,te,we,Ee,"throw",be)}we(void 0)})}},lt.exports.__esModule=!0,lt.exports.default=lt.exports},434:lt=>{function ke(){return lt.exports=ke=Object.assign?Object.assign.bind():function(B){for(var d=1;d<arguments.length;d++){var ae=arguments[d];for(var U in ae)Object.prototype.hasOwnProperty.call(ae,U)&&(B[U]=ae[U])}return B},lt.exports.__esModule=!0,lt.exports.default=lt.exports,ke.apply(this,arguments)}lt.exports=ke,lt.exports.__esModule=!0,lt.exports.default=lt.exports},4650:(lt,ke,B)=>{"use strict";B.d(ke,{$8M:()=>hc,$WT:()=>Ns,$Z:()=>yS,AFp:()=>ST,ALo:()=>Sa,AaK:()=>Ee,AsE:()=>Hn,BQk:()=>Jd,CHM:()=>vr,CRH:()=>aT,CZH:()=>wh,CqO:()=>Ri,D6c:()=>y_,DdM:()=>Fc,EJc:()=>Tx,EiD:()=>A0,EpF:()=>eh,F$t:()=>QS,F4k:()=>ub,FYo:()=>U0,FiY:()=>Ll,Gf:()=>lp,GfV:()=>Kw,Gpc:()=>ne,Hsn:()=>XS,JOm:()=>Ro,JVY:()=>L,JZr:()=>yt,KtG:()=>Wp,L6k:()=>z,LAX:()=>it,LFG:()=>xt,LSH:()=>M0,Lbi:()=>i_,Lck:()=>hm,MAs:()=>zS,MMx:()=>Nc,NdJ:()=>cb,O4$:()=>Jp,OlP:()=>ir,Oqu:()=>yb,P3R:()=>Df,PXZ:()=>kx,Q6J:()=>fv,QGY:()=>lb,Qsj:()=>qg,R0b:()=>xa,RDi:()=>jg,Rgc:()=>vh,SBq:()=>Sc,Sil:()=>Ex,Suo:()=>up,TTD:()=>td,TgZ:()=>pv,VKq:()=>WC,W1O:()=>Yv,WLB:()=>pm,X6Q:()=>LT,XFs:()=>Ht,Xpm:()=>zn,Xts:()=>kf,Y36:()=>Lf,YKP:()=>qb,YNc:()=>sb,Yjl:()=>Gi,Yz7:()=>wt,Z0I:()=>Un,ZZ4:()=>HT,_Bn:()=>$C,_UZ:()=>ab,_Vd:()=>wc,_c5:()=>RL,_uU:()=>$s,aQg:()=>m_,c2e:()=>xs,cJS:()=>on,cg1:()=>Jf,dDg:()=>Mk,dqk:()=>dn,eBb:()=>Me,eFA:()=>Ox,eJc:()=>Qv,ekj:()=>gb,eoX:()=>kT,f3M:()=>jt,g9A:()=>Ca,h0i:()=>mh,hGG:()=>zT,hij:()=>sm,iGM:()=>sx,ifc:()=>ze,ip1:()=>_x,jDz:()=>HC,kL8:()=>Ib,kcU:()=>La,lG2:()=>Ps,lcZ:()=>Qb,lqb:()=>Bd,lri:()=>Im,mCW:()=>il,n5z:()=>Ba,oAB:()=>Hi,oxw:()=>YS,pB0:()=>It,q3G:()=>wi,q4F:()=>Zw,qLn:()=>Wg,qOj:()=>tm,qZA:()=>gv,qzn:()=>m,rWj:()=>Ax,sBO:()=>h_,s_b:()=>_h,soG:()=>Fo,tb:()=>MT,tp0:()=>gc,uIk:()=>hv,vHH:()=>Ue,vpe:()=>fo,wAp:()=>tn,xp6:()=>iS,ynx:()=>br,z2F:()=>d_,z3N:()=>g,zSh:()=>Gg,zs3:()=>Cc});var d=B(7579),ae=B(727),U=B(9751),de=B(6451),te=B(3099);function oe(o){for(let a in o)if(o[a]===oe)return a;throw Error("Could not find renamed property on target object.")}function we(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function Ee(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(Ee).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function be(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const K=oe({__forward_ref__:oe});function ne(o){return o.__forward_ref__=ne,o.toString=function(){return Ee(this())},o}function Y(o){return Ke(o)?o():o}function Ke(o){return"function"==typeof o&&o.hasOwnProperty(K)&&o.__forward_ref__===ne}function Oe(o){return o&&!!o.\u0275providers}const yt="https://g.co/ng/security#xss";class Ue extends Error{constructor(a,u){super(Se(a,u)),this.code=a}}function Se(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}function De(o){return"string"==typeof o?o:null==o?"":String(o)}function st(o,a){throw new Ue(-201,!1)}function Ge(o,a){null==o&&function Be(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function wt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function on(o){return{providers:o.providers||[],imports:o.imports||[]}}function yn(o){return Gn(o,hr)||Gn(o,Xn)}function Un(o){return null!==yn(o)}function Gn(o,a){return o.hasOwnProperty(a)?o[a]:null}function Yn(o){return o&&(o.hasOwnProperty(qn)||o.hasOwnProperty(Wr))?o[qn]:null}const hr=oe({\u0275prov:oe}),qn=oe({\u0275inj:oe}),Xn=oe({ngInjectableDef:oe}),Wr=oe({ngInjectorDef:oe});var Ht=(()=>((Ht=Ht||{})[Ht.Default=0]="Default",Ht[Ht.Host=1]="Host",Ht[Ht.Self=2]="Self",Ht[Ht.SkipSelf=4]="SkipSelf",Ht[Ht.Optional=8]="Optional",Ht))();let Bi;function Mn(o){const a=Bi;return Bi=o,a}function nr(o,a,u){const h=yn(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&Ht.Optional?null:void 0!==a?a:void st(Ee(o))}const dn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),sr={},yr="__NG_DI_FLAG__",Fr="ngTempTokenPath",di="ngTokenPath",es=/\n/gm,$n="\u0275",Di="__source";let On;function Zr(o){const a=On;return On=o,a}function Vi(o,a=Ht.Default){if(void 0===On)throw new Ue(-203,!1);return null===On?nr(o,void 0,a):On.get(o,a&Ht.Optional?null:void 0,a)}function xt(o,a=Ht.Default){return(function Bn(){return Bi}()||Vi)(Y(o),a)}function jt(o,a=Ht.Default){return xt(o,Jt(a))}function Jt(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function an(o){const a=[];for(let u=0;u<o.length;u++){const h=Y(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Ue(900,!1);let p,y=Ht.Default;for(let E=0;E<h.length;E++){const C=h[E],D=Yr(C);"number"==typeof D?-1===D?p=C.token:y|=D:p=C}a.push(xt(p,y))}else a.push(xt(h))}return a}function pn(o,a){return o[yr]=a,o.prototype[yr]=a,o}function Yr(o){return o[yr]}function Ae(o){return{toString:o}.toString()}var ot=(()=>((ot=ot||{})[ot.OnPush=0]="OnPush",ot[ot.Default=1]="Default",ot))(),ze=(()=>{return(o=ze||(ze={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",ze;var o})();const Pt={},Mt=[],rr=oe({\u0275cmp:oe}),$=oe({\u0275dir:oe}),q=oe({\u0275pipe:oe}),fe=oe({\u0275mod:oe}),Pe=oe({\u0275fac:oe}),Et=oe({__NG_ELEMENT_ID__:oe});let Kt=0;function zn(o){return Ae(()=>{const u=!0===o.standalone,h={},p={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===ot.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Mt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||ze.Emulated,id:"c"+Kt++,styles:o.styles||Mt,_:null,setInput:null,schemas:o.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},y=o.dependencies,E=o.features;return p.inputs=Qn(o.inputs,h),p.outputs=Qn(o.outputs),E&&E.forEach(C=>C(p)),p.directiveDefs=y?()=>("function"==typeof y?y():y).map($i).filter(hi):null,p.pipeDefs=y?()=>("function"==typeof y?y():y).map(Vn).filter(hi):null,p})}function $i(o){return En(o)||or(o)}function hi(o){return null!==o}function Hi(o){return Ae(()=>({type:o.type,bootstrap:o.bootstrap||Mt,declarations:o.declarations||Mt,imports:o.imports||Mt,exports:o.exports||Mt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function Qn(o,a){if(null==o)return Pt;const u={};for(const h in o)if(o.hasOwnProperty(h)){let p=o[h],y=p;Array.isArray(p)&&(y=p[1],p=p[0]),u[p]=h,a&&(a[p]=y)}return u}const Ps=zn;function Gi(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function En(o){return o[rr]||null}function or(o){return o[$]||null}function Vn(o){return o[q]||null}function Ns(o){const a=En(o)||or(o)||Vn(o);return null!==a&&a.standalone}function ar(o,a){const u=o[fe]||null;if(!u&&!0===a)throw new Error(`Type ${Ee(o)} does not have '\u0275mod' property.`);return u}const lr=0,Ft=1,gn=2,ur=3,fi=4,bo=5,jr=6,Qo=7,cr=8,gs=9,iu=10,vn=11,ms=12,bl=13,Hh=14,To=15,pi=16,Js=17,su=18,Ls=19,Tl=20,Xc=21,Jn=22,qu=1,ys=2,ts=7,Wu=8,Xo=9,Qr=10;function ns(o){return Array.isArray(o)&&"object"==typeof o[qu]}function rs(o){return Array.isArray(o)&&!0===o[qu]}function Jc(o){return 0!=(4&o.flags)}function ou(o){return o.componentOffset>-1}function El(o){return 1==(1&o.flags)}function gi(o){return null!==o.template}function by(o){return 0!=(256&o[gn])}function ea(o,a){return o.hasOwnProperty(Pe)?o[Pe]:null}class du{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function td(){return ta}function ta(o){return o.type.prototype.ngOnChanges&&(o.setInput=hu),Kh}function Kh(){const o=Ra(this),a=o?.current;if(a){const u=o.previous;if(u===Pt)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function hu(o,a,u,h){const p=this.declaredInputs[u],y=Ra(o)||function Cl(o,a){return o[fu]=a}(o,{previous:Pt,current:null}),E=y.current||(y.current={}),C=y.previous,D=C[p];E[p]=new du(D&&D.currentValue,a,C===Pt),o[h]=a}td.ngInherit=!0;const fu="__ngSimpleChanges__";function Ra(o){return o[fu]||null}const ki=function(o,a,u){},Pa="svg";function Pn(o){for(;Array.isArray(o);)o=o[lr];return o}function Na(o,a){return Pn(a[o])}function Xr(o,a){return Pn(a[o.index])}function na(o,a){return o.data[a]}function ra(o,a){return o[a]}function mi(o,a){const u=a[o];return ns(u)?u:u[lr]}function ia(o){return 64==(64&o[gn])}function no(o,a){return null==a?null:o[a]}function gu(o){o[su]=0}function Zu(o,a){o[bo]+=a;let u=o,h=o[ur];for(;null!==h&&(1===a&&1===u[bo]||-1===a&&0===u[bo]);)h[bo]+=a,u=h,h=h[ur]}const hn={lFrame:cd(null),bindingsEnabled:!0};function Xu(){return hn.bindingsEnabled}function mt(){return hn.lFrame.lView}function Nn(){return hn.lFrame.tView}function vr(o){return hn.lFrame.contextLView=o,o[cr]}function Wp(o){return hn.lFrame.contextLView=null,o}function Jr(){let o=Xh();for(;null!==o&&64===o.type;)o=o.parent;return o}function Xh(){return hn.lFrame.currentTNode}function is(o,a){const u=hn.lFrame;u.currentTNode=o,u.isParent=a}function Jh(){return hn.lFrame.isParent}function Il(){hn.lFrame.isParent=!1}function ei(){const o=hn.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function ro(){return hn.lFrame.bindingIndex++}function Mi(o){const a=hn.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function nf(o,a){const u=hn.lFrame;u.bindingIndex=u.bindingRootIndex=o,tc(a)}function tc(o){hn.lFrame.currentDirectiveIndex=o}function rf(){return hn.lFrame.currentQueryIndex}function wo(o){hn.lFrame.currentQueryIndex=o}function Zp(o){const a=o[Ft];return 2===a.type?a.declTNode:1===a.type?o[jr]:null}function sf(o,a,u){if(u&Ht.SkipSelf){let p=a,y=o;for(;!(p=p.parent,null!==p||u&Ht.Host||(p=Zp(y),null===p||(y=y[To],10&p.type))););if(null===p)return!1;a=p,o=y}const h=hn.lFrame=Yp();return h.currentTNode=a,h.lView=o,!0}function nc(o){const a=Yp(),u=o[Ft];hn.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Yp(){const o=hn.lFrame,a=null===o?null:o.child;return null===a?cd(o):a}function cd(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Qp(){const o=hn.lFrame;return hn.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const h0=Qp;function Xp(){const o=Qp();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function ss(){return hn.lFrame.selectedIndex}function sa(o){hn.lFrame.selectedIndex=o}function _r(){const o=hn.lFrame;return na(o.tView,o.selectedIndex)}function Jp(){hn.lFrame.currentNamespace=Pa}function La(){!function dd(){hn.lFrame.currentNamespace=null}()}function hd(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const y=o.data[u].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:F,ngOnDestroy:G}=y;E&&(o.contentHooks||(o.contentHooks=[])).push(-u,E),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),D&&(o.viewHooks||(o.viewHooks=[])).push(-u,D),F&&((o.viewHooks||(o.viewHooks=[])).push(u,F),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,F)),null!=G&&(o.destroyHooks||(o.destroyHooks=[])).push(u,G)}}function fd(o,a,u){tg(o,a,3,u)}function vu(o,a,u,h){(3&o[gn])===u&&tg(o,a,u,h)}function Dl(o,a){let u=o[gn];(3&u)===a&&(u&=2047,u+=1,o[gn]=u)}function tg(o,a,u,h){const y=h??-1,E=a.length-1;let C=0;for(let D=void 0!==h?65535&o[su]:0;D<E;D++)if("number"==typeof a[D+1]){if(C=a[D],null!=h&&C>=h)break}else a[D]<0&&(o[su]+=65536),(C<y||-1==y)&&(Al(o,u,a,D),o[su]=(4294901760&o[su])+D+2),D++}function Al(o,a,u,h){const p=u[h]<0,y=u[h+1],C=o[p?-u[h]:u[h]];if(p){if(o[gn]>>11<o[su]>>16&&(3&o[gn])===a){o[gn]+=2048,ki(4,C,y);try{y.call(C)}finally{ki(5,C,y)}}}else{ki(4,C,y);try{y.call(C)}finally{ki(5,C,y)}}}const So=-1;class Co{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function io(o,a,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const y=u[h++],E=u[h++],C=u[h++];o.setAttribute(a,E,C,y)}else{const y=p,E=u[++h];Sr(y)?o.setProperty(a,y,E):o.setAttribute(a,y,E),h++}}return h}function Fa(o){return 3===o||4===o||6===o}function Sr(o){return 64===o.charCodeAt(0)}function aa(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const p=a[h];"number"==typeof p?u=p:0===u||xo(o,u,p,null,-1===u||2===u?a[++h]:null)}}return o}function xo(o,a,u,h,p){let y=0,E=o.length;if(-1===a)E=-1;else for(;y<o.length;){const C=o[y++];if("number"==typeof C){if(C===a){E=-1;break}if(C>a){E=y-1;break}}}for(;y<o.length;){const C=o[y];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==p&&(o[y+1]=p));if(h===o[y+1])return void(o[y+2]=p)}y++,null!==h&&y++,null!==p&&y++}-1!==E&&(o.splice(E,0,a),y=E+1),o.splice(y++,0,u),null!==h&&o.splice(y++,0,h),null!==p&&o.splice(y++,0,p)}function kl(o){return o!==So}function la(o){return 32767&o}function _u(o,a){let u=function uf(o){return o>>16}(o),h=a;for(;u>0;)h=h[To],u--;return h}let Ml=!0;function ic(o){const a=Ml;return Ml=o,a}const sc=255,ua=5;let oc=0;const os={};function Io(o,a){const u=lc(o,a);if(-1!==u)return u;const h=a[Ft];h.firstCreatePass&&(o.injectorIndex=a.length,ja(h.data,o),ja(a,null),ja(h.blueprint,null));const p=ca(o,a),y=o.injectorIndex;if(kl(p)){const E=la(p),C=_u(p,a),D=C[Ft].data;for(let F=0;F<8;F++)a[y+F]=C[E+F]|D[E+F]}return a[y+8]=p,y}function ja(o,a){o.push(0,0,0,0,0,0,0,0,a)}function lc(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ca(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,p=a;for(;null!==p;){if(h=md(p),null===h)return So;if(u++,p=p[To],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return So}function Ol(o,a,u){!function ac(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Et)&&(h=u[Et]),null==h&&(h=u[Et]=oc++);const p=h&sc;a.data[o+(p>>ua)]|=1<<p}(o,a,u)}function uc(o,a,u){if(u&Ht.Optional||void 0!==o)return o;st()}function cc(o,a,u,h){if(u&Ht.Optional&&void 0===h&&(h=null),!(u&(Ht.Self|Ht.Host))){const p=o[gs],y=Mn(void 0);try{return p?p.get(a,h,u&Ht.Optional):nr(a,h,u&Ht.Optional)}finally{Mn(y)}}return uc(h,0,u)}function Ua(o,a,u,h=Ht.Default,p){if(null!==o){if(1024&a[gn]){const E=function sg(o,a,u,h,p){let y=o,E=a;for(;null!==y&&null!==E&&1024&E[gn]&&!(256&E[gn]);){const C=Tu(y,E,u,h|Ht.Self,os);if(C!==os)return C;let D=y.parent;if(!D){const F=E[Xc];if(F){const G=F.get(u,os,h);if(G!==os)return G}D=md(E),E=E[To]}y=D}return p}(o,a,u,h,os);if(E!==os)return E}const y=Tu(o,a,u,h,os);if(y!==os)return y}return cc(a,u,h,p)}function Tu(o,a,u,h,p){const y=function dc(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Et)?o[Et]:void 0;return"number"==typeof a?a>=0?a&sc:ha:a}(u);if("function"==typeof y){if(!sf(a,o,h))return h&Ht.Host?uc(p,0,h):cc(a,u,h,p);try{const E=y(h);if(null!=E||h&Ht.Optional)return E;st()}finally{h0()}}else if("number"==typeof y){let E=null,C=lc(o,a),D=So,F=h&Ht.Host?a[pi][jr]:null;for((-1===C||h&Ht.SkipSelf)&&(D=-1===C?ca(o,a):a[C+8],D!==So&&gd(h,!1)?(E=a[Ft],C=la(D),a=_u(D,a)):C=-1);-1!==C;){const G=a[Ft];if(Eu(y,C,G.data)){const ee=ig(C,a,u,E,h,F);if(ee!==os)return ee}D=a[C+8],D!==So&&gd(h,a[Ft].data[C+8]===F)&&Eu(y,C,a)?(E=G,C=la(D),a=_u(D,a)):C=-1}}return p}function ig(o,a,u,h,p,y){const E=a[Ft],C=E.data[o+8],G=_s(C,E,u,null==h?ou(C)&&Ml:h!=E&&0!=(3&C.type),p&Ht.Host&&y===C);return null!==G?so(a,E,G,C):os}function _s(o,a,u,h,p){const y=o.providerIndexes,E=a.data,C=1048575&y,D=o.directiveStart,G=y>>20,xe=p?C+G:o.directiveEnd;for(let Ve=h?C:C+G;Ve<xe;Ve++){const dt=E[Ve];if(Ve<D&&u===dt||Ve>=D&&dt.type===u)return Ve}if(p){const Ve=E[D];if(Ve&&gi(Ve)&&Ve.type===u)return D}return null}function so(o,a,u,h){let p=o[u];const y=a.data;if(function ng(o){return o instanceof Co}(p)){const E=p;E.resolving&&function je(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${o}${u}`)}(function $e(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():De(o)}(y[u]));const C=ic(E.canSeeViewProviders);E.resolving=!0;const D=E.injectImpl?Mn(E.injectImpl):null;sf(o,h,Ht.Default);try{p=o[u]=E.factory(void 0,y,o,h),a.firstCreatePass&&u>=h.directiveStart&&function eg(o,a,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:y}=a.type.prototype;if(h){const E=ta(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,E),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,E)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,p),y&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,y))}(u,y[u],a)}finally{null!==D&&Mn(D),ic(C),E.resolving=!1,h0()}}return p}function Eu(o,a,u){return!!(u[a+(o>>ua)]&1<<o)}function gd(o,a){return!(o&Ht.Self||o&Ht.Host&&a)}class da{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return Ua(this._tNode,this._lView,a,Jt(h),u)}}function ha(){return new da(Jr(),mt())}function Ba(o){return Ae(()=>{const a=o.prototype.constructor,u=a[Pe]||df(a),h=Object.prototype;let p=Object.getPrototypeOf(o.prototype).constructor;for(;p&&p!==h;){const y=p[Pe]||df(p);if(y&&y!==u)return y;p=Object.getPrototypeOf(p)}return y=>new y})}function df(o){return Ke(o)?()=>{const a=df(Y(o));return a&&a()}:ea(o)}function md(o){const a=o[Ft],u=a.type;return 2===u?a.declTNode:1===u?o[jr]:null}function hc(o){return function cf(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const y=u[p];if(Fa(y))break;if(0===y)p+=2;else if("number"==typeof y)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(y===a)return u[p+1];p+=2}}}return null}(Jr(),o)}const $a="__parameters__";function Rl(o,a,u){return Ae(()=>{const h=function ag(o){return function(...u){if(o){const h=o(...u);for(const p in h)this[p]=h[p]}}}(a);function p(...y){if(this instanceof p)return h.apply(this,y),this;const E=new p(...y);return C.annotation=E,C;function C(D,F,G){const ee=D.hasOwnProperty($a)?D[$a]:Object.defineProperty(D,$a,{value:[]})[$a];for(;ee.length<=G;)ee.push(null);return(ee[G]=ee[G]||[]).push(E),D}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=o,p.annotationCls=p,p})}class ir{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=wt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ao(o,a){o.forEach(u=>Array.isArray(u)?Ao(u,a):a(u))}function vd(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Ga(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function za(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function qi(o,a,u){let h=qa(o,a);return h>=0?o[1|h]=u:(h=~h,function pc(o,a,u,h){let p=o.length;if(p==a)o.push(u,h);else if(1===p)o.push(h,o[0]),o[0]=u;else{for(p--,o.push(o[p-1],o[p]);p>a;)o[p]=o[p-2],p--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function _d(o,a){const u=qa(o,a);if(u>=0)return o[1|u]}function qa(o,a){return function bs(o,a,u){let h=0,p=o.length>>u;for(;p!==h;){const y=h+(p-h>>1),E=o[y<<u];if(a===E)return y<<u;E>a?p=y:h=y+1}return~(p<<u)}(o,a,1)}const Ll=pn(Rl("Optional"),8),gc=pn(Rl("SkipSelf"),4);var Ro=(()=>((Ro=Ro||{})[Ro.Important=1]="Important",Ro[Ro.DashCase=2]="DashCase",Ro))();const Bl=new Map;let g0=0;const Iu="__ngContext__";function Oi(o,a){ns(a)?(o[Iu]=a[Tl],function ga(o){Bl.set(o[Tl],o)}(a)):o[Iu]=a}let Cd;function Ya(o,a){return Cd(o,a)}function Qa(o){const a=o[ur];return rs(a)?a[ur]:a}function _c(o){return xd(o[bl])}function Du(o){return xd(o[fi])}function xd(o){for(;null!==o&&!rs(o);)o=o[fi];return o}function Xa(o,a,u,h,p){if(null!=h){let y,E=!1;rs(h)?y=h:ns(h)&&(E=!0,h=h[lr]);const C=Pn(h);0===o&&null!==u?null==p?v0(a,u,C):Ja(a,u,C,p||null,!0):1===o&&null!==u?Ja(a,u,C,p||null,!0):2===o?function Od(o,a,u){const h=el(o,a);h&&function Tc(o,a,u,h){o.removeChild(a,u,h)}(o,h,a,u)}(a,C,E):3===o&&a.destroyNode(C),null!=y&&function Ef(o,a,u,h,p){const y=u[ts];y!==Pn(u)&&Xa(a,o,h,y,p);for(let C=Qr;C<u.length;C++){const D=u[C];nl(D[Ft],D,o,a,h,y)}}(a,o,y,u,p)}}function _f(o,a,u){return o.createElement(a,u)}function Ny(o,a){const u=o[Xo],h=u.indexOf(a),p=a[ur];512&a[gn]&&(a[gn]&=-513,Zu(p,-1)),u.splice(h,1)}function Ag(o,a){if(o.length<=Qr)return;const u=Qr+a,h=o[u];if(h){const p=h[Js];null!==p&&p!==o&&Ny(p,h),a>0&&(o[u-1][fi]=h[fi]);const y=Ga(o,Qr+a);!function xg(o,a){nl(o,a,a[vn],2,null,null),a[lr]=null,a[jr]=null}(h[Ft],h);const E=y[Ls];null!==E&&E.detachView(y[Ft]),h[ur]=null,h[fi]=null,h[gn]&=-65}return h}function Id(o,a){if(!(128&a[gn])){const u=a[vn];u.destroyNode&&nl(o,a,u,3,null,null),function y0(o){let a=o[bl];if(!a)return kg(o[Ft],o);for(;a;){let u=null;if(ns(a))u=a[bl];else{const h=a[Qr];h&&(u=h)}if(!u){for(;a&&!a[fi]&&a!==o;)ns(a)&&kg(a[Ft],a),a=a[ur];null===a&&(a=o),ns(a)&&kg(a[Ft],a),u=a&&a[fi]}a=u}}(a)}}function kg(o,a){if(!(128&a[gn])){a[gn]&=-65,a[gn]|=128,function bf(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const p=a[u[h]];if(!(p instanceof Co)){const y=u[h+1];if(Array.isArray(y))for(let E=0;E<y.length;E+=2){const C=p[y[E]],D=y[E+1];ki(4,C,D);try{D.call(C)}finally{ki(5,C,D)}}else{ki(4,p,y);try{y.call(p)}finally{ki(5,p,y)}}}}}(o,a),function Mg(o,a){const u=o.cleanup,h=a[Qo];let p=-1;if(null!==u)for(let y=0;y<u.length-1;y+=2)if("string"==typeof u[y]){const E=u[y+3];E>=0?h[p=E]():h[p=-E].unsubscribe(),y+=2}else{const E=h[p=u[y+1]];u[y].call(E)}if(null!==h){for(let y=p+1;y<h.length;y++)(0,h[y])();a[Qo]=null}}(o,a),1===a[Ft].type&&a[vn].destroy();const u=a[Js];if(null!==u&&rs(a[ur])){u!==a[ur]&&Ny(u,a);const h=a[Ls];null!==h&&h.detachView(o)}!function My(o){Bl.delete(o[Tl])}(a)}}function Og(o,a,u){return function Vl(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[lr];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:y}=o.data[h.directiveStart+p];if(y===ze.None||y===ze.Emulated)return null}return Xr(h,u)}}(o,a.parent,u)}function Ja(o,a,u,h,p){o.insertBefore(a,u,h,p)}function v0(o,a,u){o.appendChild(a,u)}function Rg(o,a,u,h,p){null!==h?Ja(o,a,u,h,p):v0(o,a,u)}function el(o,a){return o.parentNode(a)}function Au(o,a,u){return Ng(o,a,u)}let Ad,Ei,Pd,ao,Ng=function Pg(o,a,u){return 40&o.type?Xr(o,u):null};function Ec(o,a,u,h){const p=Og(o,h,a),y=a[vn],C=Au(h.parent||a[jr],h,a);if(null!=p)if(Array.isArray(u))for(let D=0;D<u.length;D++)Rg(y,p,u[D],C,!1);else Rg(y,p,u,C,!1);void 0!==Ad&&Ad(y,h,a,u,p)}function kd(o,a){if(null!==a){const u=a.type;if(3&u)return Xr(a,o);if(4&u)return Md(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return kd(o,h);{const p=o[a.index];return rs(p)?Md(-1,p):Pn(p)}}if(32&u)return Ya(a,o)()||Pn(o[a.index]);{const h=Lg(o,a);return null!==h?Array.isArray(h)?h[0]:kd(Qa(o[pi]),h):kd(o,a.next)}}return null}function Lg(o,a){return null!==a?o[pi][jr].projection[a.projection]:null}function Md(o,a){const u=Qr+o+1;if(u<a.length){const h=a[u],p=h[Ft].firstChild;if(null!==p)return kd(h,p)}return a[ts]}function ti(o,a,u,h,p,y,E){for(;null!=u;){const C=h[u.index],D=u.type;if(E&&0===a&&(C&&Oi(Pn(C),h),u.flags|=2),32!=(32&u.flags))if(8&D)ti(o,a,u.child,h,p,y,!1),Xa(a,o,p,C,y);else if(32&D){const F=Ya(u,h);let G;for(;G=F();)Xa(a,o,p,G,y);Xa(a,o,p,C,y)}else 16&D?Ly(o,a,h,u,p,y):Xa(a,o,p,C,y);u=E?u.projectionNext:u.next}}function nl(o,a,u,h,p,y){ti(u,h,o.firstChild,a,p,y,!1)}function Ly(o,a,u,h,p,y){const E=u[pi],D=E[jr].projection[h.projection];if(Array.isArray(D))for(let F=0;F<D.length;F++)Xa(a,o,p,D[F],y);else ti(o,a,D,E[ur],p,y,!0)}function oo(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function Sf(o,a,u){const{mergedAttrs:h,classes:p,styles:y}=u;null!==h&&io(o,a,h),null!==p&&oo(o,a,p),null!==y&&function Rd(o,a,u){o.setAttribute(a,"style",u)}(o,a,y)}function rl(o){return function ku(){if(void 0===Ei&&(Ei=null,dn.trustedTypes))try{Ei=dn.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Ei}()?.createHTML(o)||o}function jg(o){Pd=o}function jy(o){return function Mu(){if(void 0===ao&&(ao=null,dn.trustedTypes))try{ao=dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return ao}()?.createScriptURL(o)||o}class ma{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yt})`}}class T0 extends ma{getTypeName(){return"HTML"}}class E0 extends ma{getTypeName(){return"Style"}}class w0 extends ma{getTypeName(){return"Script"}}class S0 extends ma{getTypeName(){return"URL"}}class b extends ma{getTypeName(){return"ResourceURL"}}function g(o){return o instanceof ma?o.changingThisBreaksApplicationSecurity:o}function m(o,a){const u=function w(o){return o instanceof ma&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see ${yt})`)}return u===a}function L(o){return new T0(o)}function z(o){return new E0(o)}function Me(o){return new w0(o)}function it(o){return new S0(o)}function It(o){return new b(o)}class ln{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(rl(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch{return null}}}class en{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const u=this.inertDocument.createElement("template");return u.innerHTML=rl(a),u}}const lo=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function il(o){return(o=String(o)).match(lo)?o:"unsafe:"+o}function Po(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function sl(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const Nd=Po("area,br,col,hr,img,wbr"),Vg=Po("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$l=Po("rp,rt"),Ld=sl(Nd,sl(Vg,Po("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),sl($l,Po("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sl($l,Vg)),xf=Po("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ow=sl(xf,Po("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Po("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hg=Po("script,style,template");class Uy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let u=a.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(a){const u=a.nodeName.toLowerCase();if(!Ld.hasOwnProperty(u))return this.sanitizedSomething=!0,!Hg.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=a.attributes;for(let p=0;p<h.length;p++){const y=h.item(p),E=y.name,C=E.toLowerCase();if(!Ow.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let D=y.value;xf[C]&&(D=il(D)),this.buf.push(" ",E,'="',Rw(D),'"')}return this.buf.push(">"),!0}endElement(a){const u=a.nodeName.toLowerCase();Ld.hasOwnProperty(u)&&!Nd.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(a){this.buf.push(Rw(a))}checkClobberedElement(a,u){if(u&&(a.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return u}}const D0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,TA=/([^\#-~ |!])/g;function Rw(o){return o.replace(/&/g,"&amp;").replace(D0,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(TA,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let If;function A0(o,a){let u=null;try{If=If||function Rt(o){const a=new en(o);return function Rr(){try{return!!(new window.DOMParser).parseFromString(rl(""),"text/html")}catch{return!1}}()?new ln(a):a}(o);let h=a?String(a):"";u=If.getInertBodyElement(h);let p=5,y=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=y,y=u.innerHTML,u=If.getInertBodyElement(h)}while(h!==y);return rl((new Uy).sanitizeChildren(Pw(u)||u))}finally{if(u){const h=Pw(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function Pw(o){return"content"in o&&function FN(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var wi=(()=>((wi=wi||{})[wi.NONE=0]="NONE",wi[wi.HTML=1]="HTML",wi[wi.STYLE=2]="STYLE",wi[wi.SCRIPT=3]="SCRIPT",wi[wi.URL=4]="URL",wi[wi.RESOURCE_URL=5]="RESOURCE_URL",wi))();function M0(o){const a=Af();return a?a.sanitize(wi.URL,o)||"":m(o,"URL")?g(o):il(De(o))}function Nw(o){const a=Af();if(a)return jy(a.sanitize(wi.RESOURCE_URL,o)||"");if(m(o,"ResourceURL"))return jy(g(o));throw new Ue(904,!1)}function Df(o,a,u){return function Lw(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?Nw:M0}(a,u)(o)}function Af(){const o=mt();return o&&o[ms]}const kf=new ir("ENVIRONMENT_INITIALIZER"),Fw=new ir("INJECTOR",-1),jw=new ir("INJECTOR_DEF_TYPES");class Fd{get(a,u=sr){if(u===sr){const h=new Error(`NullInjectorError: No provider for ${Ee(a)}!`);throw h.name="NullInjectorError",h}return u}}function wA(...o){return{\u0275providers:Uw(0,o),\u0275fromNgModule:!0}}function Uw(o,...a){const u=[],h=new Set;let p;return Ao(a,y=>{const E=y;jd(E,u,[],h)&&(p||(p=[]),p.push(E))}),void 0!==p&&Mf(p,u),u}function Mf(o,a){for(let u=0;u<o.length;u++){const{providers:p}=o[u];R0(p,y=>{a.push(y)})}}function jd(o,a,u,h){if(!(o=Y(o)))return!1;let p=null,y=Yn(o);const E=!y&&En(o);if(y||E){if(E&&!E.standalone)return!1;p=o}else{const D=o.ngModule;if(y=Yn(D),!y)return!1;p=D}const C=h.has(p);if(E){if(C)return!1;if(h.add(p),E.dependencies){const D="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const F of D)jd(F,a,u,h)}}else{if(!y)return!1;{if(null!=y.imports&&!C){let F;h.add(p);try{Ao(y.imports,G=>{jd(G,a,u,h)&&(F||(F=[]),F.push(G))})}finally{}void 0!==F&&Mf(F,a)}if(!C){const F=ea(p)||(()=>new p);a.push({provide:p,useFactory:F,deps:Mt},{provide:jw,useValue:p,multi:!0},{provide:kf,useValue:()=>xt(p),multi:!0})}const D=y.providers;null==D||C||R0(D,G=>{a.push(G)})}}return p!==o&&void 0!==o.providers}function R0(o,a){for(let u of o)Oe(u)&&(u=u.\u0275providers),Array.isArray(u)?R0(u,a):a(u)}const SA=oe({provide:String,useValue:oe});function P0(o){return null!==o&&"object"==typeof o&&SA in o}function Of(o){return"function"==typeof o}const Gg=new ir("Set Injector scope."),Ud={},Rf={};let N0;function Vy(){return void 0===N0&&(N0=new Fd),N0}class Bd{}class $w extends Bd{get destroyed(){return this._destroyed}constructor(a,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$y(a,E=>this.processProvider(E)),this.records.set(Fw,Pf(void 0,this)),p.has("environment")&&this.records.set(Bd,Pf(void 0,this));const y=this.records.get(Gg);null!=y&&"string"==typeof y.value&&this.scopes.add(y.value),this.injectorDefTypes=new Set(this.get(jw.multi,Mt,Ht.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Zr(this),h=Mn(void 0);try{return a()}finally{Zr(u),Mn(h)}}get(a,u=sr,h=Ht.Default){this.assertNotDestroyed(),h=Jt(h);const p=Zr(this),y=Mn(void 0);try{if(!(h&Ht.SkipSelf)){let C=this.records.get(a);if(void 0===C){const D=function F0(o){return"function"==typeof o||"object"==typeof o&&o instanceof ir}(a)&&yn(a);C=D&&this.injectableDefInScope(D)?Pf(L0(a),Ud):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&Ht.Self?Vy():this.parent).get(a,u=h&Ht.Optional&&u===sr?null:u)}catch(E){if("NullInjectorError"===E.name){if((E[Fr]=E[Fr]||[]).unshift(Ee(a)),p)throw E;return function me(o,a,u,h){const p=o[Fr];throw a[Di]&&p.unshift(a[Di]),o.message=function ce(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&o.charAt(1)==$n?o.slice(2):o;let p=Ee(a);if(Array.isArray(a))p=a.map(Ee).join(" -> ");else if("object"==typeof a){let y=[];for(let E in a)if(a.hasOwnProperty(E)){let C=a[E];y.push(E+":"+("string"==typeof C?JSON.stringify(C):Ee(C)))}p=`{${y.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${o.replace(es,"\n  ")}`}("\n"+o.message,p,u,h),o[di]=p,o[Fr]=null,o}(E,a,"R3InjectorError",this.source)}throw E}finally{Mn(y),Zr(p)}}resolveInjectorInitializers(){const a=Zr(this),u=Mn(void 0);try{const h=this.get(kf.multi,Mt,Ht.Self);for(const p of h)p()}finally{Zr(a),Mn(u)}}toString(){const a=[],u=this.records;for(const h of u.keys())a.push(Ee(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processProvider(a){let u=Of(a=Y(a))?a:Y(a&&a.provide);const h=function IA(o){return P0(o)?Pf(void 0,o.useValue):Pf(Hw(o),Ud)}(a);if(Of(a)||!0!==a.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=Pf(void 0,Ud,!0),p.factory=()=>an(p.multi),this.records.set(u,p)),u=a,p.multi.push(a)}this.records.set(u,h)}hydrate(a,u){return u.value===Ud&&(u.value=Rf,u.value=u.factory()),"object"==typeof u.value&&u.value&&function DA(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=Y(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function L0(o){const a=yn(o),u=null!==a?a.factory:ea(o);if(null!==u)return u;if(o instanceof ir)throw new Ue(204,!1);if(o instanceof Function)return function xA(o){const a=o.length;if(a>0)throw za(a,"?"),new Ue(204,!1);const u=function ci(o){const a=o&&(o[hr]||o[Xn]);return a?(function Sn(o){if(o.hasOwnProperty("name"))return o.name;(""+o).match(/^function\s*([^\s(]+)/)}(o),a):null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ue(204,!1)}function Hw(o,a,u){let h;if(Of(o)){const p=Y(o);return ea(p)||L0(p)}if(P0(o))h=()=>Y(o.useValue);else if(function Vw(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...an(o.deps||[]));else if(function Bw(o){return!(!o||!o.useExisting)}(o))h=()=>xt(Y(o.useExisting));else{const p=Y(o&&(o.useClass||o.provide));if(!function Gw(o){return!!o.deps}(o))return ea(p)||L0(p);h=()=>new p(...an(o.deps))}return h}function Pf(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function $y(o,a){for(const u of o)Array.isArray(u)?$y(u,a):u&&Oe(u)?$y(u.\u0275providers,a):a(u)}class j0{}class zg{}class kA{resolveComponentFactory(a){throw function AA(o){const a=Error(`No component factory found for ${Ee(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let wc=(()=>{class o{}return o.NULL=new kA,o})();function qw(){return Vd(Jr(),mt())}function Vd(o,a){return new Sc(Xr(o,a))}let Sc=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=qw,o})();function Hy(o){return o instanceof Sc?o.nativeElement:o}class U0{}let qg=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Ww(){const o=mt(),u=mi(Jr().index,o);return(ns(u)?u:o)[vn]}(),o})(),MA=(()=>{class o{}return o.\u0275prov=wt({token:o,providedIn:"root",factory:()=>null}),o})();class Kw{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Zw=new Kw("15.2.2"),B0={},V0="ngOriginalError";function $0(o){return o[V0]}class Wg{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&$0(a);for(;u&&$0(u);)u=$0(u);return u||null}}function Hl(o){return o instanceof Function?o():o}function eS(o,a,u){let h=o.length;for(;;){const p=o.indexOf(a,u);if(-1===p)return p;if(0===p||o.charCodeAt(p-1)<=32){const y=a.length;if(p+y===h||o.charCodeAt(p+y)<=32)return p}u=p+1}}const tS="ng-template";function UA(o,a,u){let h=0;for(;h<o.length;){let p=o[h++];if(u&&"class"===p){if(p=o[h],-1!==eS(p.toLowerCase(),a,0))return!0}else if(1===p){for(;h<o.length&&"string"==typeof(p=o[h++]);)if(p.toLowerCase()===a)return!0;return!1}}return!1}function H0(o){return 4===o.type&&o.value!==tS}function G0(o,a,u){return a===(4!==o.type||u?o.value:tS)}function BA(o,a,u){let h=4;const p=o.attrs||[],y=function nS(o){for(let a=0;a<o.length;a++)if(Fa(o[a]))return a;return o.length}(p);let E=!1;for(let C=0;C<a.length;C++){const D=a[C];if("number"!=typeof D){if(!E)if(4&h){if(h=2|1&h,""!==D&&!G0(o,D,u)||""===D&&1===a.length){if(va(h))return!1;E=!0}}else{const F=8&h?D:a[++C];if(8&h&&null!==o.attrs){if(!UA(o.attrs,F,u)){if(va(h))return!1;E=!0}continue}const ee=Nf(8&h?"class":D,p,H0(o),u);if(-1===ee){if(va(h))return!1;E=!0;continue}if(""!==F){let xe;xe=ee>y?"":p[ee+1].toLowerCase();const Ve=8&h?xe:null;if(Ve&&-1!==eS(Ve,F,0)||2&h&&F!==xe){if(va(h))return!1;E=!0}}}}else{if(!E&&!va(h)&&!va(D))return!1;if(E&&va(D))continue;E=!1,h=D|1&h}}return va(h)||E}function va(o){return 0==(1&o)}function Nf(o,a,u,h){if(null===a)return-1;let p=0;if(h||!u){let y=!1;for(;p<a.length;){const E=a[p];if(E===o)return p;if(3===E||6===E)y=!0;else{if(1===E||2===E){let C=a[++p];for(;"string"==typeof C;)C=a[++p];continue}if(4===E)break;if(0===E){p+=4;continue}}p+=y?1:2}return-1}return function zy(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function Gy(o,a,u=!1){for(let h=0;h<a.length;h++)if(BA(o,a[h],u))return!0;return!1}function qy(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let p=0;p<o.length;p++)if(o[p]!==h[p])continue e;return!0}}return!1}function z0(o,a){return o?":not("+a.trim()+")":a}function rS(o){let a=o[0],u=1,h=2,p="",y=!1;for(;u<o.length;){let E=o[u];if("string"==typeof E)if(2&h){const C=o[++u];p+="["+E+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?p+="."+E:4&h&&(p+=" "+E);else""!==p&&!va(E)&&(a+=z0(y,p),p=""),h=E,y=y||!va(h);u++}return""!==p&&(a+=z0(y,p)),a}const Cn={};function iS(o){sS(Nn(),mt(),ss()+o,!1)}function sS(o,a,u,h){if(!h)if(3==(3&a[gn])){const y=o.preOrderCheckHooks;null!==y&&fd(a,y,u)}else{const y=o.preOrderHooks;null!==y&&vu(a,y,0,u)}sa(u)}function aS(o,a=null,u=null,h){const p=Hd(o,a,u,h);return p.resolveInjectorInitializers(),p}function Hd(o,a=null,u=null,h,p=new Set){const y=[u||Mt,wA(o)];return h=h||("object"==typeof o?void 0:Ee(o)),new $w(y,a||Vy(),h||null,p)}let Cc=(()=>{class o{static create(u,h){if(Array.isArray(u))return aS({name:""},h,u,"");{const p=u.name??"";return aS({name:p},u.parent,u.providers,p)}}}return o.THROW_IF_NOT_FOUND=sr,o.NULL=new Fd,o.\u0275prov=wt({token:o,providedIn:"any",factory:()=>xt(Fw)}),o.__NG_ELEMENT_ID__=-1,o})();function Lf(o,a=Ht.Default){const u=mt();return null===u?xt(o,a):Ua(Jr(),u,Y(o),a)}function yS(){throw new Error("invalid")}function vS(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const y=u[h+1];if(-1!==y){const E=o.data[y];wo(u[h]),E.contentQueries(2,a[y],y)}}}function Xy(o,a,u,h,p,y,E,C,D,F,G){const ee=a.blueprint.slice();return ee[lr]=p,ee[gn]=76|h,(null!==G||o&&1024&o[gn])&&(ee[gn]|=1024),gu(ee),ee[ur]=ee[To]=o,ee[cr]=u,ee[iu]=E||o&&o[iu],ee[vn]=C||o&&o[vn],ee[ms]=D||o&&o[ms]||null,ee[gs]=F||o&&o[gs]||null,ee[jr]=y,ee[Tl]=function mg(){return g0++}(),ee[Xc]=G,ee[pi]=2==a.type?o[pi]:ee,ee}function Ff(o,a,u,h,p){let y=o.data[a];if(null===y)y=function Jy(o,a,u,h,p){const y=Xh(),E=Jh(),D=o.data[a]=function wS(o,a,u,h,p,y){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?y:y&&y.parent,u,a,h,p);return null===o.firstChild&&(o.firstChild=D),null!==y&&(E?null==y.child&&null!==D.parent&&(y.child=D):null===y.next&&(y.next=D,D.prev=y)),D}(o,a,u,h,p),function tf(){return hn.lFrame.inI18n}()&&(y.flags|=32);else if(64&y.type){y.type=u,y.value=h,y.attrs=p;const E=function Ju(){const o=hn.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();y.injectorIndex=null===E?-1:E.injectorIndex}return is(y,!0),y}function Yg(o,a,u,h){if(0===u)return-1;const p=a.length;for(let y=0;y<u;y++)a.push(h),o.blueprint.push(h),o.data.push(null);return p}function _S(o,a,u){nc(a);try{const h=o.viewQuery;null!==h&&X0(1,h,u);const p=o.template;null!==p&&bS(o,a,p,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&vS(o,a),o.staticViewQueries&&X0(2,o.viewQuery,u);const y=o.components;null!==y&&function r1(o,a){for(let u=0;u<a.length;u++)y1(o,a[u])}(a,y)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[gn]&=-5,Xp()}}function ev(o,a,u,h){const p=a[gn];if(128!=(128&p)){nc(a);try{gu(a),function mu(o){return hn.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&bS(o,a,u,2,h);const E=3==(3&p);if(E){const F=o.preOrderCheckHooks;null!==F&&fd(a,F,null)}else{const F=o.preOrderHooks;null!==F&&vu(a,F,0,null),Dl(a,0)}if(function m1(o){for(let a=_c(o);null!==a;a=Du(a)){if(!a[ys])continue;const u=a[Xo];for(let h=0;h<u.length;h++){const p=u[h];512&p[gn]||Zu(p[ur],1),p[gn]|=512}}}(a),function zl(o){for(let a=_c(o);null!==a;a=Du(a))for(let u=Qr;u<a.length;u++){const h=a[u],p=h[Ft];ia(h)&&ev(p,h,p.template,h[cr])}}(a),null!==o.contentQueries&&vS(o,a),E){const F=o.contentCheckHooks;null!==F&&fd(a,F)}else{const F=o.contentHooks;null!==F&&vu(a,F,1),Dl(a,1)}!function Qy(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)sa(~p);else{const y=p,E=u[++h],C=u[++h];nf(E,y),C(2,a[y])}}}finally{sa(-1)}}(o,a);const C=o.components;null!==C&&function n1(o,a){for(let u=0;u<a.length;u++)QN(o,a[u])}(a,C);const D=o.viewQuery;if(null!==D&&X0(2,D,h),E){const F=o.viewCheckHooks;null!==F&&fd(a,F)}else{const F=o.viewHooks;null!==F&&vu(a,F,2),Dl(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[gn]&=-41,512&a[gn]&&(a[gn]&=-513,Zu(a[ur],-1))}finally{Xp()}}}function bS(o,a,u,h,p){const y=ss(),E=2&h;try{sa(-1),E&&a.length>Jn&&sS(o,a,Jn,!1),ki(E?2:0,p),u(h,p)}finally{sa(y),ki(E?3:1,p)}}function ye(o,a,u){if(Jc(a)){const p=a.directiveEnd;for(let y=a.directiveStart;y<p;y++){const E=o.data[y];E.contentQueries&&E.contentQueries(1,u[y],y)}}}function W0(o,a,u){Xu()&&(function c1(o,a,u,h){const p=u.directiveStart,y=u.directiveEnd;ou(u)&&function Ic(o,a,u){const h=Xr(a,o),p=TS(u),y=o[iu],E=Wd(o,Xy(o,p,null,u.onPush?32:16,h,a,y,y.createRenderer(h,u),null,null,null));o[a.index]=E}(a,u,o.data[p+u.componentOffset]),o.firstCreatePass||Io(u,a),Oi(h,a);const E=u.initialInputs;for(let C=p;C<y;C++){const D=o.data[C],F=so(a,o,C,u);Oi(F,a),null!==E&&Q0(0,C-p,F,D,0,E),gi(D)&&(mi(u.index,a)[cr]=so(a,o,C,u))}}(o,a,u,Xr(u,a)),64==(64&u.flags)&&nv(o,a,u))}function At(o,a,u=Xr){const h=a.localNames;if(null!==h){let p=a.index+1;for(let y=0;y<h.length;y+=2){const E=h[y+1],C=-1===E?u(a,o):o[E];o[p++]=C}}}function TS(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=bn(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function bn(o,a,u,h,p,y,E,C,D,F){const G=Jn+h,ee=G+p,xe=function i1(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:Cn);return u}(G,ee),Ve="function"==typeof F?F():F;return xe[Ft]={type:o,blueprint:xe,template:u,queries:null,viewQuery:C,declTNode:a,data:xe.slice().fill(null,G),bindingStartIndex:G,expandoStartIndex:ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:D,consts:Ve,incompleteFirstPass:!1}}function ES(o,a,u,h){const p=J0(a);null===u?p.push(h):(p.push(u),o.firstCreatePass&&IS(o).push(h,p.length-1))}function SS(o,a,u,h){for(let p in o)if(o.hasOwnProperty(p)){u=null===u?{}:u;const y=o[p];null===h?K0(u,a,p,y):h.hasOwnProperty(p)&&K0(u,a,h[p],y)}return u}function K0(o,a,u,h){o.hasOwnProperty(u)?o[u].push(a,h):o[u]=[a,h]}function CS(o,a){const u=mi(a,o);16&u[gn]||(u[gn]|=32)}function Qg(o,a,u,h){if(Xu()){const p=null===h?null:{"":-1},y=function ol(o,a){const u=o.directiveRegistry;let h=null,p=null;if(u)for(let y=0;y<u.length;y++){const E=u[y];if(Gy(a,E.selectors,!1))if(h||(h=[]),gi(E))if(null!==E.findHostDirectiveDefs){const C=[];p=p||new Map,E.findHostDirectiveDefs(E,C,p),h.unshift(...C,E),Z0(o,a,C.length)}else h.unshift(E),Z0(o,a,0);else p=p||new Map,E.findHostDirectiveDefs?.(E,h,p),h.push(E)}return null===h?null:[h,p]}(o,u);let E,C;null===y?E=C=null:[E,C]=y,null!==E&&xS(o,a,u,E,p,C),p&&function h1(o,a,u){if(a){const h=o.localNames=[];for(let p=0;p<a.length;p+=2){const y=u[a[p+1]];if(null==y)throw new Ue(-301,!1);h.push(a[p],y)}}}(u,h,p)}u.mergedAttrs=aa(u.mergedAttrs,u.attrs)}function xS(o,a,u,h,p,y){for(let F=0;F<h.length;F++)Ol(Io(u,a),o,h[F].type);!function Y0(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}(u,o.data.length,h.length);for(let F=0;F<h.length;F++){const G=h[F];G.providersResolver&&G.providersResolver(G)}let E=!1,C=!1,D=Yg(o,a,h.length,null);for(let F=0;F<h.length;F++){const G=h[F];u.mergedAttrs=aa(u.mergedAttrs,G.hostAttrs),f1(o,u,a,D,G),jf(D,G,p),null!==G.contentQueries&&(u.flags|=4),(null!==G.hostBindings||null!==G.hostAttrs||0!==G.hostVars)&&(u.flags|=64);const ee=G.type.prototype;!E&&(ee.ngOnChanges||ee.ngOnInit||ee.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),E=!0),!C&&(ee.ngOnChanges||ee.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),C=!0),D++}!function o1(o,a,u){const p=a.directiveEnd,y=o.data,E=a.attrs,C=[];let D=null,F=null;for(let G=a.directiveStart;G<p;G++){const ee=y[G],xe=u?u.get(ee):null,dt=xe?xe.outputs:null;D=SS(ee.inputs,G,D,xe?xe.inputs:null),F=SS(ee.outputs,G,F,dt);const Ct=null===D||null===E||H0(a)?null:p1(D,G,E);C.push(Ct)}null!==D&&(D.hasOwnProperty("class")&&(a.flags|=8),D.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=D,a.outputs=F}(o,u,y)}function nv(o,a,u){const h=u.directiveStart,p=u.directiveEnd,y=u.index,E=function ec(){return hn.lFrame.currentDirectiveIndex}();try{sa(y);for(let C=h;C<p;C++){const D=o.data[C],F=a[C];tc(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&d1(D,F)}}finally{sa(-1),tc(E)}}function d1(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Z0(o,a,u){a.componentOffset=u,(o.components||(o.components=[])).push(a.index)}function jf(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;gi(a)&&(u[""]=o)}}function f1(o,a,u,h,p){o.data[h]=p;const y=p.factory||(p.factory=ea(p.type)),E=new Co(y,gi(p),Lf);o.blueprint[h]=E,u[h]=E,function l1(o,a,u,h,p){const y=p.hostBindings;if(y){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const C=~a.index;(function u1(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(E)!=C&&E.push(C),E.push(u,h,y)}}(o,a,h,Yg(o,u,p.hostVars,Cn),p)}function Gl(o,a,u,h,p,y){const E=Xr(o,a);!function rv(o,a,u,h,p,y,E){if(null==y)o.removeAttribute(a,p,u);else{const C=null==E?De(y):E(y,h||"",p);o.setAttribute(a,p,C,u)}}(a[vn],E,y,o.value,u,h,p)}function Q0(o,a,u,h,p,y){const E=y[a];if(null!==E){const C=h.setInput;for(let D=0;D<E.length;){const F=E[D++],G=E[D++],ee=E[D++];null!==C?h.setInput(u,ee,F,G):u[G]=ee}}}function p1(o,a,u){let h=null,p=0;for(;p<u.length;){const y=u[p];if(0!==y)if(5!==y){if("number"==typeof y)break;if(o.hasOwnProperty(y)){null===h&&(h=[]);const E=o[y];for(let C=0;C<E.length;C+=2)if(E[C]===a){h.push(y,E[C+1],u[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function g1(o,a,u,h){return[o,!0,!1,a,null,0,h,u,null,null]}function QN(o,a){const u=mi(a,o);if(ia(u)){const h=u[Ft];48&u[gn]?ev(h,u,h.template,u[cr]):u[bo]>0&&iv(u)}}function iv(o){for(let h=_c(o);null!==h;h=Du(h))for(let p=Qr;p<h.length;p++){const y=h[p];if(ia(y))if(512&y[gn]){const E=y[Ft];ev(E,y,E.template,y[cr])}else y[bo]>0&&iv(y)}const u=o[Ft].components;if(null!==u)for(let h=0;h<u.length;h++){const p=mi(u[h],o);ia(p)&&p[bo]>0&&iv(p)}}function y1(o,a){const u=mi(a,o),h=u[Ft];(function Xg(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),_S(h,u,u[cr])}function Wd(o,a){return o[bl]?o[Hh][fi]=a:o[bl]=a,o[Hh]=a,a}function Jg(o){for(;o;){o[gn]|=32;const a=Qa(o);if(by(o)&&!a)return o;o=a}return null}function em(o,a,u,h=!0){const p=a[iu];p.begin&&p.begin();try{ev(o,a,o.template,u)}catch(E){throw h&&AS(a,E),E}finally{p.end&&p.end()}}function X0(o,a,u){wo(0),a(o,u)}function J0(o){return o[Qo]||(o[Qo]=[])}function IS(o){return o.cleanup||(o.cleanup=[])}function AS(o,a){const u=o[gs],h=u?u.get(Wg,null):null;h&&h.handleError(a)}function sv(o,a,u,h,p){for(let y=0;y<u.length;){const E=u[y++],C=u[y++],D=a[E],F=o.data[E];null!==F.setInput?F.setInput(D,p,h,C):D[C]=p}}function ql(o,a,u){const h=Na(a,o);!function yf(o,a,u){o.setValue(a,u)}(o[vn],h,u)}function ov(o,a,u){let h=u?o.styles:null,p=u?o.classes:null,y=0;if(null!==a)for(let E=0;E<a.length;E++){const C=a[E];"number"==typeof C?y=C:1==y?p=be(p,C):2==y&&(h=be(h,C+": "+a[++E]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=p:o.classesWithoutHost=p}function Zt(o,a,u,h,p=!1){for(;null!==u;){const y=a[u.index];if(null!==y&&h.push(Pn(y)),rs(y))for(let C=Qr;C<y.length;C++){const D=y[C],F=D[Ft].firstChild;null!==F&&Zt(D[Ft],D,F,h)}const E=u.type;if(8&E)Zt(o,a,u.child,h);else if(32&E){const C=Ya(u,a);let D;for(;D=C();)h.push(D)}else if(16&E){const C=Lg(a,u);if(Array.isArray(C))h.push(...C);else{const D=Qa(a[pi]);Zt(D[Ft],D,C,h,!0)}}u=p?u.projectionNext:u.next}return h}class av{get rootNodes(){const a=this._lView,u=a[Ft];return Zt(u,a,u.firstChild,[])}constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[cr]}set context(a){this._lView[cr]=a}get destroyed(){return 128==(128&this._lView[gn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[ur];if(rs(a)){const u=a[Wu],h=u?u.indexOf(this):-1;h>-1&&(Ag(a,h),Ga(u,h))}this._attachedToViewContainer=!1}Id(this._lView[Ft],this._lView)}onDestroy(a){ES(this._lView[Ft],this._lView,null,a)}markForCheck(){Jg(this._cdRefInjectingView||this._lView)}detach(){this._lView[gn]&=-65}reattach(){this._lView[gn]|=64}detectChanges(){em(this._lView[Ft],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function m0(o,a){nl(o,a,a[vn],2,null,null)}(this._lView[Ft],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ue(902,!1);this._appRef=a}}class eL extends av{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;em(a[Ft],a,a[cr],!1)}checkNoChanges(){}get context(){return null}}class Yi extends wc{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=En(a);return new uv(u,this.ngModule)}}function lv(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class tL{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,h){h=Jt(h);const p=this.injector.get(a,B0,h);return p!==B0||u===B0?p:this.parentInjector.get(a,u,h)}}class uv extends zg{get inputs(){return lv(this.componentDef.inputs)}get outputs(){return lv(this.componentDef.outputs)}constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function $A(o){return o.map(rS).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}create(a,u,h,p){let y=(p=p||this.ngModule)instanceof Bd?p:p?.injector;y&&null!==this.componentDef.getStandaloneInjector&&(y=this.componentDef.getStandaloneInjector(y)||y);const E=y?new tL(a,y):a,C=E.get(U0,null);if(null===C)throw new Ue(407,!1);const D=E.get(MA,null),F=C.createRenderer(null,this.componentDef),G=this.componentDef.selectors[0][0]||"div",ee=h?function s1(o,a,u){return o.selectRootElement(a,u===ze.ShadowDom)}(F,h,this.componentDef.encapsulation):_f(F,G,function kS(o){const a=o.toLowerCase();return"svg"===a?Pa:"math"===a?"math":null}(G)),xe=this.componentDef.onPush?288:272,Ve=bn(0,null,null,1,0,null,null,null,null,null),dt=Xy(null,Ve,null,xe,null,null,C,F,D,E,null);let Ct,kt;nc(dt);try{const zt=this.componentDef;let fn,bt=null;zt.findHostDirectiveDefs?(fn=[],bt=new Map,zt.findHostDirectiveDefs(zt,fn,bt),fn.push(zt)):fn=[zt];const Tn=function _1(o,a){const u=o[Ft],h=Jn;return o[h]=a,Ff(u,h,2,"#host",null)}(dt,ee),Nr=function MS(o,a,u,h,p,y,E,C){const D=p[Ft];!function b1(o,a,u,h){for(const p of o)a.mergedAttrs=aa(a.mergedAttrs,p.hostAttrs);null!==a.mergedAttrs&&(ov(a,a.mergedAttrs,!0),null!==u&&Sf(h,u,a))}(h,o,a,E);const F=y.createRenderer(a,u),G=Xy(p,TS(u),null,u.onPush?32:16,p[o.index],o,y,F,C||null,null,null);return D.firstCreatePass&&Z0(D,o,h.length-1),Wd(p,G),p[o.index]=G}(Tn,ee,zt,fn,dt,C,F);kt=na(Ve,Jn),ee&&function rL(o,a,u,h){if(h)io(o,u,["ng-version",Zw.full]);else{const{attrs:p,classes:y}=function HA(o){const a=[],u=[];let h=1,p=2;for(;h<o.length;){let y=o[h];if("string"==typeof y)2===p?""!==y&&a.push(y,o[++h]):8===p&&u.push(y);else{if(!va(p))break;p=y}h++}return{attrs:a,classes:u}}(a.selectors[0]);p&&io(o,u,p),y&&y.length>0&&oo(o,u,y.join(" "))}}(F,zt,ee,h),void 0!==u&&function iL(o,a,u){const h=o.projection=[];for(let p=0;p<a.length;p++){const y=u[p];h.push(null!=y?Array.from(y):null)}}(kt,this.ngContentSelectors,u),Ct=function Pr(o,a,u,h,p,y){const E=Jr(),C=p[Ft],D=Xr(E,p);xS(C,p,E,u,null,h);for(let G=0;G<u.length;G++)Oi(so(p,C,E.directiveStart+G,E),p);nv(C,p,E),D&&Oi(D,p);const F=so(p,C,E.directiveStart+E.componentOffset,E);if(o[cr]=p[cr]=F,null!==y)for(const G of y)G(F,a);return ye(C,E,o),F}(Nr,zt,fn,bt,dt,[OS]),_S(Ve,dt,null)}finally{Xp()}return new v1(this.componentType,Ct,Vd(kt,dt),dt,kt)}}class v1 extends j0{constructor(a,u,h,p,y){super(),this.location=h,this._rootLView=p,this._tNode=y,this.instance=u,this.hostView=this.changeDetectorRef=new eL(p),this.componentType=a}setInput(a,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[a])){const y=this._rootLView;sv(y[Ft],y,p,a,u),CS(y,this._tNode.index)}}get injector(){return new da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function OS(){const o=Jr();hd(mt()[Ft],o)}function tm(o){let a=function RS(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let p;if(gi(o))p=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ue(903,!1);p=a.\u0275dir}if(p){if(u){h.push(p);const E=o;E.inputs=eb(o.inputs),E.declaredInputs=eb(o.declaredInputs),E.outputs=eb(o.outputs);const C=p.hostBindings;C&&sL(o,C);const D=p.viewQuery,F=p.contentQueries;if(D&&E1(o,D),F&&w1(o,F),we(o.inputs,p.inputs),we(o.declaredInputs,p.declaredInputs),we(o.outputs,p.outputs),gi(p)&&p.data.animation){const G=o.data;G.animation=(G.animation||[]).concat(p.data.animation)}}const y=p.features;if(y)for(let E=0;E<y.length;E++){const C=y[E];C&&C.ngInherit&&C(o),C===tm&&(u=!1)}}a=Object.getPrototypeOf(a)}!function T1(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const p=o[h];p.hostVars=a+=p.hostVars,p.hostAttrs=aa(p.hostAttrs,u=aa(u,p.hostAttrs))}}(h)}function eb(o){return o===Pt?{}:o===Mt?[]:o}function E1(o,a){const u=o.viewQuery;o.viewQuery=u?(h,p)=>{a(h,p),u(h,p)}:a}function w1(o,a){const u=o.contentQueries;o.contentQueries=u?(h,p,y)=>{a(h,p,y),u(h,p,y)}:a}function sL(o,a){const u=o.hostBindings;o.hostBindings=u?(h,p)=>{a(h,p),u(h,p)}:a}function dv(o){return!!nb(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function nb(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function al(o,a,u){return o[a]=u}function Ss(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function Qd(o,a,u,h){const p=Ss(o,a,u);return Ss(o,a+1,h)||p}function hv(o,a,u,h){const p=mt();return Ss(p,ro(),a)&&(Nn(),Gl(_r(),p,o,a,u,h)),hv}function Bf(o,a,u,h,p,y){const C=Qd(o,function Fs(){return hn.lFrame.bindingIndex}(),u,p);return Mi(2),C?a+De(u)+h+De(p)+y:Cn}function sb(o,a,u,h,p,y,E,C){const D=mt(),F=Nn(),G=o+Jn,ee=F.firstCreatePass?function D1(o,a,u,h,p,y,E,C,D){const F=a.consts,G=Ff(a,o,4,E||null,no(F,C));Qg(a,u,G,no(F,D)),hd(a,G);const ee=G.tView=bn(2,G,h,p,y,a.directiveRegistry,a.pipeRegistry,null,a.schemas,F);return null!==a.queries&&(a.queries.template(a,G),ee.queries=a.queries.embeddedTView(G)),G}(G,F,D,a,u,h,p,y,E):F.data[G];is(ee,!1);const xe=D[vn].createComment("");Ec(F,D,xe,ee),Oi(xe,D),Wd(D,D[G]=g1(xe,D,xe,ee)),El(ee)&&W0(F,D,ee),null!=E&&At(D,ee,C)}function zS(o){return ra(function ef(){return hn.lFrame.contextLView}(),Jn+o)}function fv(o,a,u){const h=mt();return Ss(h,ro(),a)&&function uo(o,a,u,h,p,y,E,C){const D=Xr(a,u);let G,F=a.inputs;!C&&null!=F&&(G=F[h])?(sv(o,u,G,h,p),ou(a)&&CS(u,a.index)):3&a.type&&(h=function tv(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),p=null!=E?E(p,a.value||"",h):p,y.setProperty(D,h,p))}(Nn(),_r(),h,o,a,h[vn],u,!1),fv}function ob(o,a,u,h,p){const E=p?"class":"style";sv(o,u,a.inputs[E],E,h)}function pv(o,a,u,h){const p=mt(),y=Nn(),E=Jn+o,C=p[vn],D=y.firstCreatePass?function k1(o,a,u,h,p,y){const E=a.consts,D=Ff(a,o,2,h,no(E,p));return Qg(a,u,D,no(E,y)),null!==D.attrs&&ov(D,D.attrs,!1),null!==D.mergedAttrs&&ov(D,D.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,D),D}(E,y,p,a,u,h):y.data[E],F=p[E]=_f(C,a,function _i(){return hn.lFrame.currentNamespace}()),G=El(D);return is(D,!0),Sf(C,F,D),32!=(32&D.flags)&&Ec(y,p,F,D),0===function id(){return hn.lFrame.elementDepthCount}()&&Oi(F,p),function sd(){hn.lFrame.elementDepthCount++}(),G&&(W0(y,p,D),ye(y,D,p)),null!==h&&At(p,D),pv}function gv(){let o=Jr();Jh()?Il():(o=o.parent,is(o,!1));const a=o;!function Qu(){hn.lFrame.elementDepthCount--}();const u=Nn();return u.firstCreatePass&&(hd(u,o),Jc(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function wy(o){return 0!=(8&o.flags)}(a)&&ob(u,a,mt(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function oa(o){return 0!=(16&o.flags)}(a)&&ob(u,a,mt(),a.stylesWithoutHost,!1),gv}function ab(o,a,u,h){return pv(o,a,u,h),gv(),ab}function br(o,a,u){const h=mt(),p=Nn(),y=o+Jn,E=p.firstCreatePass?function M1(o,a,u,h,p){const y=a.consts,E=no(y,h),C=Ff(a,o,8,"ng-container",E);return null!==E&&ov(C,E,!0),Qg(a,u,C,no(y,p)),null!==a.queries&&a.queries.elementStart(a,C),C}(y,p,h,a,u):p.data[y];is(E,!0);const C=h[y]=h[vn].createComment("");return Ec(p,h,C,E),Oi(C,h),El(E)&&(W0(p,h,E),ye(p,E,h)),null!=u&&At(h,E),br}function Jd(){let o=Jr();const a=Nn();return Jh()?Il():(o=o.parent,is(o,!1)),a.firstCreatePass&&(hd(a,o),Jc(o)&&a.queries.elementEnd(o)),Jd}function eh(){return mt()}function lb(o){return!!o&&"function"==typeof o.then}function ub(o){return!!o&&"function"==typeof o.subscribe}const Ri=ub;function cb(o,a,u,h){const p=mt(),y=Nn(),E=Jr();return function WS(o,a,u,h,p,y,E){const C=El(h),F=o.firstCreatePass&&IS(o),G=a[cr],ee=J0(a);let xe=!0;if(3&h.type||E){const Ct=Xr(h,a),kt=E?E(Ct):Ct,zt=ee.length,fn=E?Tn=>E(Pn(Tn[h.index])):h.index;let bt=null;if(!E&&C&&(bt=function db(o,a,u,h){const p=o.cleanup;if(null!=p)for(let y=0;y<p.length-1;y+=2){const E=p[y];if(E===u&&p[y+1]===h){const C=a[Qo],D=p[y+2];return C.length>D?C[D]:null}"string"==typeof E&&(y+=2)}return null}(o,a,p,h.index)),null!==bt)(bt.__ngLastListenerFn__||bt).__ngNextListenerFn__=y,bt.__ngLastListenerFn__=y,xe=!1;else{y=ZS(h,a,G,y,!1);const Tn=u.listen(kt,p,y);ee.push(y,Tn),F&&F.push(p,fn,zt,zt+1)}}else y=ZS(h,a,G,y,!1);const Ve=h.outputs;let dt;if(xe&&null!==Ve&&(dt=Ve[p])){const Ct=dt.length;if(Ct)for(let kt=0;kt<Ct;kt+=2){const Nr=a[dt[kt]][dt[kt+1]].subscribe(y),yi=ee.length;ee.push(y,Nr),F&&F.push(p,h.index,yi,-(yi+1))}}}(y,p,p[vn],E,o,a,h),cb}function KS(o,a,u,h){try{return ki(6,a,u),!1!==u(h)}catch(p){return AS(o,p),!1}finally{ki(7,a,u)}}function ZS(o,a,u,h,p){return function y(E){if(E===Function)return h;Jg(o.componentOffset>-1?mi(o.index,a):a);let D=KS(a,u,h,E),F=y.__ngNextListenerFn__;for(;F;)D=KS(a,u,F,E)&&D,F=F.__ngNextListenerFn__;return p&&!1===D&&(E.preventDefault(),E.returnValue=!1),D}}function YS(o=1){return function af(o){return(hn.lFrame.contextLView=function Dw(o,a){for(;o>0;)a=a[To],o--;return a}(o,hn.lFrame.contextLView))[cr]}(o)}function O1(o,a){let u=null;const h=function VA(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(!(1&u))return a[u+1]}return null}(o);for(let p=0;p<a.length;p++){const y=a[p];if("*"!==y){if(null===h?Gy(o,y,!0):qy(h,y))return p}else u=p}return u}function QS(o){const a=mt()[pi][jr];if(!a.projection){const h=a.projection=za(o?o.length:1,null),p=h.slice();let y=a.child;for(;null!==y;){const E=o?O1(y,o):0;null!==E&&(p[E]?p[E].projectionNext=y:h[E]=y,p[E]=y),y=y.next}}}function XS(o,a=0,u){const h=mt(),p=Nn(),y=Ff(p,Jn+o,16,null,u||null);null===y.projection&&(y.projection=a),Il(),32!=(32&y.flags)&&function Tf(o,a,u){Ly(a[vn],0,a,u,Og(o,u,a),Au(u.parent||a[jr],u,a))}(p,h,y)}function kc(o,a){return o<<17|a<<2}function th(o){return o>>17&32767}function aC(o){return 2|o}function Gf(o){return(131068&o)>>2}function lC(o,a){return-131069&o|a<<2}function fb(o){return 1|o}function qf(o,a,u,h,p){const y=o[u+1],E=null===a;let C=h?th(y):Gf(y),D=!1;for(;0!==C&&(!1===D||E);){const G=o[C+1];P1(o[C],a)&&(D=!0,o[C+1]=h?fb(G):aC(G)),C=h?th(G):Gf(G)}D&&(o[u+1]=h?aC(y):fb(y))}function P1(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&qa(o,a)>=0}function gb(o,a){return function ll(o,a,u,h){const p=mt(),y=Nn(),E=Mi(2);y.firstUpdatePass&&function vv(o,a,u,h){const p=o.data;if(null===p[u+1]){const y=p[ss()],E=function nh(o,a){return a>=o.expandoStartIndex}(o,u);(function Kf(o,a){return 0!=(o.flags&(a?8:16))})(y,h)&&null===a&&!E&&(a=!1),a=function B1(o,a,u,h){const p=function yu(o){const a=hn.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let y=h?a.residualClasses:a.residualStyles;if(null===p)0===(h?a.classBindings:a.styleBindings)&&(u=Lo(u=bv(null,o,a,u,h),a.attrs,h),y=null);else{const E=a.directiveStylingLast;if(-1===E||o[E]!==p)if(u=bv(p,o,a,u,h),null===y){let D=function mb(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==Gf(h))return o[th(h)]}(o,a,h);void 0!==D&&Array.isArray(D)&&(D=bv(null,o,a,D[1],h),D=Lo(D,a.attrs,h),function V1(o,a,u,h){o[th(u?a.classBindings:a.styleBindings)]=h}(o,a,h,D))}else y=function _v(o,a,u){let h;const p=a.directiveEnd;for(let y=1+a.directiveStylingLast;y<p;y++)h=Lo(h,o[y].hostAttrs,u);return Lo(h,a.attrs,u)}(o,a,h)}return void 0!==y&&(h?a.residualClasses=y:a.residualStyles=y),u}(p,y,a,h),function co(o,a,u,h,p,y){let E=y?a.classBindings:a.styleBindings,C=th(E),D=Gf(E);o[h]=u;let G,F=!1;if(Array.isArray(u)?(G=u[1],(null===G||qa(u,G)>0)&&(F=!0)):G=u,p)if(0!==D){const xe=th(o[C+1]);o[h+1]=kc(xe,C),0!==xe&&(o[xe+1]=lC(o[xe+1],h)),o[C+1]=function lL(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=kc(C,0),0!==C&&(o[C+1]=lC(o[C+1],h)),C=h;else o[h+1]=kc(D,0),0===C?C=h:o[D+1]=lC(o[D+1],h),D=h;F&&(o[h+1]=aC(o[h+1])),qf(o,G,h,!0),qf(o,G,h,!1),function zf(o,a,u,h,p){const y=p?o.residualClasses:o.residualStyles;null!=y&&"string"==typeof a&&qa(y,a)>=0&&(u[h+1]=fb(u[h+1]))}(a,G,o,h,y),E=kc(C,D),y?a.classBindings=E:a.styleBindings=E}(p,y,a,u,E,h)}}(y,o,E,h),a!==Cn&&Ss(p,E,a)&&function yC(o,a,u,h,p,y,E,C){if(!(3&a.type))return;const D=o.data,F=D[C+1],G=function hb(o){return 1==(1&o)}(F)?im(D,a,u,p,Gf(F),E):void 0;rh(G)||(rh(y)||function aL(o){return 2==(2&o)}(F)&&(y=im(D,null,u,p,C,E)),function wf(o,a,u,h,p){if(a)p?o.addClass(u,h):o.removeClass(u,h);else{let y=-1===h.indexOf("-")?void 0:Ro.DashCase;null==p?o.removeStyle(u,h,y):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),y|=Ro.Important),o.setStyle(u,h,p,y))}}(h,E,Na(ss(),u),p,y))}(y,y.data[ss()],p,p[vn],o,p[E+1]=function vC(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=Ee(g(o)))),o}(a,u),h,E)}(o,a,null,!0),gb}function bv(o,a,u,h,p){let y=null;const E=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<E&&(y=a[C],h=Lo(h,y.hostAttrs,p),y!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function Lo(o,a,u){const h=u?1:2;let p=-1;if(null!==a)for(let y=0;y<a.length;y++){const E=a[y];"number"==typeof E?p=E:p===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),qi(o,E,!!u||a[++y]))}return void 0===o?null:o}function im(o,a,u,h,p,y){const E=null===a;let C;for(;p>0;){const D=o[p],F=Array.isArray(D),G=F?D[1]:D,ee=null===G;let xe=u[p+1];xe===Cn&&(xe=ee?Mt:void 0);let Ve=ee?_d(xe,h):G===h?xe:void 0;if(F&&!rh(Ve)&&(Ve=_d(D,h)),rh(Ve)&&(C=Ve,E))return C;const dt=o[p+1];p=E?th(dt):Gf(dt)}if(null!==a){let D=y?a.residualClasses:a.residualStyles;null!=D&&(C=_d(D,h))}return C}function rh(o){return void 0!==o}function $s(o,a=""){const u=mt(),h=Nn(),p=o+Jn,y=h.firstCreatePass?Ff(h,p,1,a,null):h.data[p],E=u[p]=function Cg(o,a){return o.createText(a)}(u[vn],a);Ec(h,u,E,y),is(y,!1)}function yb(o){return sm("",o,""),yb}function sm(o,a,u){const h=mt(),p=function Uf(o,a,u,h){return Ss(o,ro(),u)?a+De(u)+h:Cn}(h,o,a,u);return p!==Cn&&ql(h,ss(),p),sm}function Hn(o,a,u,h,p){const y=mt(),E=Bf(y,o,a,u,h,p);return E!==Cn&&ql(y,ss(),E),Hn}const xn=void 0;var xb=["en",[["a","p"],["AM","PM"],xn],[["AM","PM"],xn,xn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xn,"{1} 'at' {0}",xn],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Rc(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Ql={};function Jf(o){const a=function Iv(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=Ru(a);if(u)return u;const h=a.split("-")[0];if(u=Ru(h),u)return u;if("en"===h)return xb;throw new Ue(701,!1)}function Ib(o){return Jf(o)[tn.PluralCase]}function Ru(o){return o in Ql||(Ql[o]=dn.ng&&dn.ng.common&&dn.ng.common.locales&&dn.ng.common.locales[o]),Ql[o]}var tn=(()=>((tn=tn||{})[tn.LocaleId=0]="LocaleId",tn[tn.DayPeriodsFormat=1]="DayPeriodsFormat",tn[tn.DayPeriodsStandalone=2]="DayPeriodsStandalone",tn[tn.DaysFormat=3]="DaysFormat",tn[tn.DaysStandalone=4]="DaysStandalone",tn[tn.MonthsFormat=5]="MonthsFormat",tn[tn.MonthsStandalone=6]="MonthsStandalone",tn[tn.Eras=7]="Eras",tn[tn.FirstDayOfWeek=8]="FirstDayOfWeek",tn[tn.WeekendRange=9]="WeekendRange",tn[tn.DateFormat=10]="DateFormat",tn[tn.TimeFormat=11]="TimeFormat",tn[tn.DateTimeFormat=12]="DateTimeFormat",tn[tn.NumberSymbols=13]="NumberSymbols",tn[tn.NumberFormats=14]="NumberFormats",tn[tn.CurrencyCode=15]="CurrencyCode",tn[tn.CurrencySymbol=16]="CurrencySymbol",tn[tn.CurrencyName=17]="CurrencyName",tn[tn.Currencies=18]="Currencies",tn[tn.Directionality=19]="Directionality",tn[tn.PluralCase=20]="PluralCase",tn[tn.ExtraData=21]="ExtraData",tn))();const cl="en-US";let Dv=cl;function $b(o,a,u,h,p){if(o=Y(o),Array.isArray(o))for(let y=0;y<o.length;y++)$b(o[y],a,u,h,p);else{const y=Nn(),E=mt();let C=Of(o)?o:Y(o.provide),D=Hw(o);const F=Jr(),G=1048575&F.providerIndexes,ee=F.directiveStart,xe=F.providerIndexes>>20;if(Of(o)||!o.multi){const Ve=new Co(D,p,Lf),dt=cm(C,a,p?G:G+xe,ee);-1===dt?(Ol(Io(F,E),y,C),Hb(y,o,a.length),a.push(C),F.directiveStart++,F.directiveEnd++,p&&(F.providerIndexes+=1048576),u.push(Ve),E.push(Ve)):(u[dt]=Ve,E[dt]=Ve)}else{const Ve=cm(C,a,G+xe,ee),dt=cm(C,a,G,G+xe),kt=dt>=0&&u[dt];if(p&&!kt||!p&&!(Ve>=0&&u[Ve])){Ol(Io(F,E),y,C);const zt=function Uv(o,a,u,h,p){const y=new Co(o,u,Lf);return y.multi=[],y.index=a,y.componentProviders=0,Gb(y,p,h&&!u),y}(p?VC:zb,u.length,p,h,D);!p&&kt&&(u[dt].providerFactory=zt),Hb(y,o,a.length,0),a.push(C),F.directiveStart++,F.directiveEnd++,p&&(F.providerIndexes+=1048576),u.push(zt),E.push(zt)}else Hb(y,o,Ve>-1?Ve:dt,Gb(u[p?dt:Ve],D,!p&&h));!p&&h&&kt&&u[dt].componentProviders++}}}function Hb(o,a,u,h){const p=Of(a),y=function CA(o){return!!o.useClass}(a);if(p||y){const D=(y?Y(a.useClass):a).prototype.ngOnDestroy;if(D){const F=o.destroyHooks||(o.destroyHooks=[]);if(!p&&a.multi){const G=F.indexOf(u);-1===G?F.push(u,[h,D]):F[G+1].push(h,D)}else F.push(u,D)}}}function Gb(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function cm(o,a,u,h){for(let p=u;p<h;p++)if(a[p]===o)return p;return-1}function zb(o,a,u,h){return dm(this.multi,[])}function VC(o,a,u,h){const p=this.multi;let y;if(this.providerFactory){const E=this.providerFactory.componentProviders,C=so(u,u[Ft],this.providerFactory.index,h);y=C.slice(0,E),dm(p,y);for(let D=E;D<C.length;D++)y.push(C[D])}else y=[],dm(p,y);return y}function dm(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function $C(o,a=[]){return u=>{u.providersResolver=(h,p)=>function sk(o,a,u){const h=Nn();if(h.firstCreatePass){const p=gi(o);$b(u,h.data,h.blueprint,p,!0),$b(a,h.data,h.blueprint,p,!1)}}(h,p?p(o):o,a)}}class mh{}class qb{}function hm(o,a){return new Wb(o,a??null)}class Wb extends mh{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Yi(this);const h=ar(a);this._bootstrapComponents=Hl(h.bootstrap),this._r3Injector=Hd(a,u,[{provide:mh,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],Ee(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class hl extends qb{constructor(a){super(),this.moduleType=a}create(a){return new Wb(this.moduleType,a)}}class Ea extends mh{constructor(a,u,h){super(),this.componentFactoryResolver=new Yi(this),this.instance=null;const p=new $w([...a,{provide:mh,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],u||Vy(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Nc(o,a,u=null){return new Ea(o,a,u).injector}let zs=(()=>{class o{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const h=Uw(0,u.type),p=h.length>0?Nc([h],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,p)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=wt({token:o,providedIn:"environment",factory:()=>new o(xt(Bd))}),o})();function HC(o){o.getStandaloneInjector=a=>a.get(zs).getOrCreateStandaloneInjector(o)}function Fc(o,a,u){const h=ei()+o,p=mt();return p[h]===Cn?al(p,h,u?a.call(u):a()):function Yd(o,a){return o[a]}(p,h)}function WC(o,a,u,h){return YC(mt(),ei(),o,a,u,h)}function pm(o,a,u,h,p){return function $v(o,a,u,h,p,y,E){const C=a+u;return Qd(o,C,p,y)?al(o,C+2,E?h.call(E,p,y):h(p,y)):sp(o,C+2)}(mt(),ei(),o,a,u,h,p)}function sp(o,a){const u=o[a];return u===Cn?void 0:u}function YC(o,a,u,h,p,y){const E=a+u;return Ss(o,E,p)?al(o,E+1,y?h.call(y,p):h(p)):sp(o,E+1)}function Sa(o,a){const u=Nn();let h;const p=o+Jn;u.firstCreatePass?(h=function JC(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const y=h.factory||(h.factory=ea(h.type)),E=Mn(Lf);try{const C=ic(!1),D=y();return ic(C),function A1(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,mt(),p,D),D}finally{Mn(E)}}function Qb(o,a,u){const h=o+Jn,p=mt(),y=ra(p,h);return function yh(o,a){return o[Ft].data[a].pure}(p,h)?YC(p,ei(),a,y.transform,u,y):y.transform(u)}function Gv(o){return a=>{setTimeout(o,void 0,a)}}const fo=class mk extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){let p=a,y=u||(()=>null),E=h;if(a&&"object"==typeof a){const D=a;p=D.next?.bind(D),y=D.error?.bind(D),E=D.complete?.bind(D)}this.__isAsync&&(y=Gv(y),p&&(p=Gv(p)),E&&(E=Gv(E)));const C=super.subscribe({next:p,error:y,complete:E});return a instanceof ae.w0&&a.add(C),C}};function yk(){return this._results[Symbol.iterator]()}class gm{get changes(){return this._changes||(this._changes=new fo)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=gm.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=yk)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const p=function Us(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function ff(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let p=o[h],y=a[h];if(u&&(p=u(p),y=u(y)),y!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let vh=(()=>{class o{}return o.__NG_ELEMENT_ID__=eT,o})();const vk=vh,_k=class extends vk{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a,u){const h=this._declarationTContainer.tView,p=Xy(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,u||null);p[Js]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[Ls];return null!==E&&(p[Ls]=E.createEmbeddedView(h)),_S(h,p,a),new av(p)}};function eT(){return mm(Jr(),mt())}function mm(o,a){return 4&o.type?new _k(a,o,Vd(o,a)):null}let _h=(()=>{class o{}return o.__NG_ELEMENT_ID__=ex,o})();function ex(){return tx(Jr(),mt())}const tT=_h,nT=class extends tT{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return Vd(this._hostTNode,this._hostLView)}get injector(){return new da(this._hostTNode,this._hostLView)}get parentInjector(){const a=ca(this._hostTNode,this._hostLView);if(kl(a)){const u=_u(a,this._hostLView),h=la(a);return new da(u[Ft].data[h+8],u)}return new da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=rT(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-Qr}createEmbeddedView(a,u,h){let p,y;"number"==typeof h?p=h:null!=h&&(p=h.index,y=h.injector);const E=a.createEmbeddedView(u||{},y);return this.insert(E,p),E}createComponent(a,u,h,p,y){const E=a&&!function js(o){return"function"==typeof o}(a);let C;if(E)C=u;else{const ee=u||{};C=ee.index,h=ee.injector,p=ee.projectableNodes,y=ee.environmentInjector||ee.ngModuleRef}const D=E?a:new uv(En(a)),F=h||this.parentInjector;if(!y&&null==D.ngModule){const xe=(E?F:this.parentInjector).get(Bd,null);xe&&(y=xe)}const G=D.create(F,p,void 0,y);return this.insert(G.hostView,C),G}insert(a,u){const h=a._lView,p=h[Ft];if(function pu(o){return rs(o[ur])}(h)){const G=this.indexOf(a);if(-1!==G)this.detach(G);else{const ee=h[ur],xe=new nT(ee,ee[jr],ee[ur]);xe.detach(xe.indexOf(a))}}const y=this._adjustIndex(u),E=this._lContainer;!function bc(o,a,u,h){const p=Qr+h,y=u.length;h>0&&(u[p-1][fi]=a),h<y-Qr?(a[fi]=u[p],vd(u,Qr+h,a)):(u.push(a),a[fi]=null),a[ur]=u;const E=a[Js];null!==E&&u!==E&&function Dg(o,a){const u=o[Xo];a[pi]!==a[ur][ur][pi]&&(o[ys]=!0),null===u?o[Xo]=[a]:u.push(a)}(E,a);const C=a[Ls];null!==C&&C.insertView(o),a[gn]|=64}(p,h,E,y);const C=Md(y,E),D=h[vn],F=el(D,E[ts]);return null!==F&&function Ig(o,a,u,h,p,y){h[lr]=p,h[jr]=a,nl(o,h,u,1,p,y)}(p,E[jr],D,h,F,C),a.attachToViewContainerRef(),vd(zv(E),y,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=rT(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=Ag(this._lContainer,u);h&&(Ga(zv(this._lContainer),u),Id(h[Ft],h))}detach(a){const u=this._adjustIndex(a,-1),h=Ag(this._lContainer,u);return h&&null!=Ga(zv(this._lContainer),u)?new av(h):null}_adjustIndex(a,u=0){return a??this.length+u}};function rT(o){return o[Wu]}function zv(o){return o[Wu]||(o[Wu]=[])}function tx(o,a){let u;const h=a[o.index];if(rs(h))u=h;else{let p;if(8&o.type)p=Pn(h);else{const y=a[vn];p=y.createComment("");const E=Xr(o,a);Ja(y,el(y,E),p,function Dd(o,a){return o.nextSibling(a)}(y,E),!1)}a[o.index]=u=g1(h,a,p,o),Wd(a,u)}return new nT(u,o,a)}class iT{constructor(a){this.queryList=a,this.matches=null}clone(){return new iT(this.queryList)}setDirty(){this.queryList.setDirty()}}class sT{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,p=[];for(let y=0;y<h;y++){const E=u.getByIndex(y);p.push(this.queries[E.indexInDeclarationView].clone())}return new sT(p)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==Zv(a,u).matches&&this.queries[u].setDirty()}}class oT{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class ap{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,y=this.getByIndex(h).embeddedTView(a,p);y&&(y.indexInDeclarationView=h,null!==u?u.push(y):u=[y])}return null!==u?new ap(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class qv{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new qv(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const y=h[p];this.matchTNodeWithReadOption(a,u,bk(u,y)),this.matchTNodeWithReadOption(a,u,_s(u,a,y,!1,!1))}else h===vh?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,_s(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===Sc||p===_h||p===vh&&4&u.type)this.addMatch(u.index,-2);else{const y=_s(u,a,p,!1,!1);null!==y&&this.addMatch(u.index,y)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function bk(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function rx(o,a,u,h){return-1===u?function nx(o,a){return 11&o.type?Vd(o,a):4&o.type?mm(o,a):null}(a,o):-2===u?function ix(o,a,u){return u===Sc?Vd(a,o):u===vh?mm(a,o):u===_h?tx(a,o):void 0}(o,a,h):so(o,o[Ft],u,a)}function Wv(o,a,u,h){const p=a[Ls].queries[h];if(null===p.matches){const y=o.data,E=u.matches,C=[];for(let D=0;D<E.length;D+=2){const F=E[D];C.push(F<0?null:rx(a,y[F],E[D+1],u.metadata.read))}p.matches=C}return p.matches}function ym(o,a,u,h){const p=o.queries.getByIndex(u),y=p.matches;if(null!==y){const E=Wv(o,a,p,u);for(let C=0;C<y.length;C+=2){const D=y[C];if(D>0)h.push(E[C/2]);else{const F=y[C+1],G=a[-D];for(let ee=Qr;ee<G.length;ee++){const xe=G[ee];xe[Js]===xe[ur]&&ym(xe[Ft],xe,F,h)}if(null!==G[Xo]){const ee=G[Xo];for(let xe=0;xe<ee.length;xe++){const Ve=ee[xe];ym(Ve[Ft],Ve,F,h)}}}}}return h}function sx(o){const a=mt(),u=Nn(),h=rf();wo(h+1);const p=Zv(u,h);if(o.dirty&&function Yh(o){return 4==(4&o[gn])}(a)===(2==(2&p.metadata.flags))){if(null===p.matches)o.reset([]);else{const y=p.crossesNgTemplate?ym(u,a,h,[]):Wv(u,a,p,h);o.reset(y,Hy),o.notifyOnChanges()}return!0}return!1}function lp(o,a,u){const h=Nn();h.firstCreatePass&&(Kv(h,new oT(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),lT(h,mt(),a)}function up(o,a,u,h){const p=Nn();if(p.firstCreatePass){const y=Jr();Kv(p,new oT(a,u,h),y.index),function uT(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(p,o),2==(2&u)&&(p.staticContentQueries=!0)}lT(p,mt(),u)}function aT(){return function cp(o,a){return o[Ls].queries[a].queryList}(mt(),rf())}function lT(o,a,u){const h=new gm(4==(4&u));ES(o,a,h,h.destroy),null===a[Ls]&&(a[Ls]=new sT),a[Ls].queries.push(new iT(h))}function Kv(o,a,u){null===o.queries&&(o.queries=new ap),o.queries.track(new qv(a,u))}function Zv(o,a){return o.queries.getByIndex(a)}function Yv(o,a){return mm(o,a)}function Qv(o){return!!ar(o)}function Sm(...o){}const _x=new ir("Application Initializer");let wh=(()=>{class o{constructor(u){this.appInits=u,this.resolve=Sm,this.reject=Sm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const y=this.appInits[p]();if(lb(y))u.push(y);else if(Ri(y)){const E=new Promise((C,D)=>{y.subscribe({complete:C,error:D})});u.push(E)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(xt(_x,8))},o.\u0275prov=wt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const ST=new ir("AppId",{providedIn:"root",factory:function bx(){return`${r_()}${r_()}${r_()}`}});function r_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ca=new ir("Platform Initializer"),i_=new ir("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let xs=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=wt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Fo=new ir("LocaleId",{providedIn:"root",factory:()=>jt(Fo,Ht.Optional|Ht.SkipSelf)||function jc(){return typeof $localize<"u"&&$localize.locale||cl}()}),Tx=new ir("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Dk{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let Ex=(()=>{class o{compileModuleSync(u){return new hl(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),y=Hl(ar(u).declarations).reduce((E,C)=>{const D=En(C);return D&&E.push(new uv(D)),E},[]);return new Dk(h,y)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=wt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Sx=(()=>Promise.resolve(0))();function o_(o){typeof Zone>"u"?Sx.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class xa{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fo(!1),this.onMicrotaskEmpty=new fo(!1),this.onStable=new fo(!1),this.onError=new fo(!1),typeof Zone>"u")throw new Ue(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function Cx(){let o=dn.requestAnimationFrame,a=dn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Ix(o){const a=()=>{!function xm(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(dn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,IT(o),o.isCheckStableRunning=!0,a_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),IT(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,y,E,C)=>{try{return Dx(o),u.invokeTask(p,y,E,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||o.shouldCoalesceRunChangeDetection)&&a(),DT(o)}},onInvoke:(u,h,p,y,E,C,D)=>{try{return Dx(o),u.invoke(p,y,E,C,D)}finally{o.shouldCoalesceRunChangeDetection&&a(),DT(o)}},onHasTask:(u,h,p,y)=>{u.hasTask(p,y),h===p&&("microTask"==y.change?(o._hasPendingMicrotasks=y.microTask,IT(o),a_(o)):"macroTask"==y.change&&(o.hasPendingMacrotasks=y.macroTask))},onHandleError:(u,h,p,y)=>(u.handleError(p,y),o.runOutsideAngular(()=>o.onError.emit(y)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xa.isInAngularZone())throw new Ue(909,!1)}static assertNotInAngularZone(){if(xa.isInAngularZone())throw new Ue(909,!1)}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,p){const y=this._inner,E=y.scheduleEventTask("NgZoneEvent: "+p,a,xx,Sm,Sm);try{return y.runTask(E,u,h)}finally{y.cancelTask(E)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const xx={};function a_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function IT(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Dx(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function DT(o){o._nesting--,a_(o)}class AT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fo,this.onMicrotaskEmpty=new fo,this.onStable=new fo,this.onError=new fo}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,p){return a.apply(u,h)}}const Im=new ir(""),Ax=new ir("");let Dm,Mk=(()=>{class o{constructor(u,h,p){this._ngZone=u,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Dm||(function Ok(o){Dm=o}(p),p.addToWindow(h)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xa.assertNotInAngularZone(),o_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())o_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let y=-1;h&&h>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==y),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:y,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,h,p){return[]}}return o.\u0275fac=function(u){return new(u||o)(xt(xa),xt(kT),xt(Ax))},o.\u0275prov=wt({token:o,factory:o.\u0275fac}),o})(),kT=(()=>{class o{constructor(){this._applications=new Map}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return Dm?.findTestabilityInTree(this,u,h)??null}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=wt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const fl=!1;let ju=null;const gp=new ir("AllowMultipleToken"),Is=new ir("PlatformDestroyListeners"),MT=new ir("appBootstrapListener");class kx{constructor(a,u){this.name=a,this.token=u}}function Ox(o,a,u=[]){const h=`Platform: ${a}`,p=new ir(h);return(y=[])=>{let E=l_();if(!E||E.injector.get(gp,!1)){const C=[...u,...y,{provide:p,useValue:!0}];o?o(C):function Rk(o){if(ju&&!ju.get(gp,!1))throw new Ue(400,!1);ju=o;const a=o.get(RT);(function Mx(o){const a=o.get(Ca,null);a&&a.forEach(u=>u())})(o)}(function Rx(o=[],a){return Cc.create({name:a,providers:[{provide:Gg,useValue:"platform"},{provide:Is,useValue:new Set([()=>ju=null])},...o]})}(C,h))}return function Lk(o){const a=l_();if(!a)throw new Ue(401,!1);return a}()}}function l_(){return ju?.get(RT)??null}let RT=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const p=function u_(o,a){let u;return u="noop"===o?new AT:("zone.js"===o?void 0:o)||new xa(a),u}(h?.ngZone,function PT(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(h)),y=[{provide:xa,useValue:p}];return p.run(()=>{const E=Cc.create({providers:y,parent:this.injector,name:u.moduleType.name}),C=u.create(E),D=C.injector.get(Wg,null);if(!D)throw new Ue(402,!1);return p.runOutsideAngular(()=>{const F=p.onError.subscribe({next:G=>{D.handleError(G)}});C.onDestroy(()=>{mp(this._modules,C),F.unsubscribe()})}),function c_(o,a,u){try{const h=u();return lb(h)?h.catch(p=>{throw a.runOutsideAngular(()=>o.handleError(p)),p}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(D,p,()=>{const F=C.injector.get(wh);return F.runInitializers(),F.donePromise.then(()=>(function Db(o){Ge(o,"Expected localeId to be defined"),"string"==typeof o&&(Dv=o.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Fo,cl)||cl),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,h=[]){const p=Sh({},h);return function OT(o,a,u){const h=new hl(u);return Promise.resolve(h)}(0,0,u).then(y=>this.bootstrapModuleFactory(y,p))}_moduleDoBootstrap(u){const h=u.injector.get(d_);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new Ue(-403,!1);u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(Is,null);u&&(u.forEach(h=>h()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(xt(Cc))},o.\u0275prov=wt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Sh(o,a){return Array.isArray(a)?a.reduce(Sh,o):{...o,...a}}let d_=(()=>{class o{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(u,h,p){this._zone=u,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new U.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),E=new U.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{xa.assertNotInAngularZone(),o_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{xa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),F.unsubscribe()}});this.isStable=(0,de.T)(y,E.pipe((0,te.B)()))}bootstrap(u,h){const p=u instanceof zg;if(!this._injector.get(wh).done){!p&&Ns(u);throw new Ue(405,fl)}let E;E=p?u:this._injector.get(wc).resolveComponentFactory(u),this.componentTypes.push(E.componentType);const C=function Am(o){return o.isBoundToModule}(E)?void 0:this._injector.get(mh),F=E.create(Cc.NULL,[],h||E.selector,C),G=F.location.nativeElement,ee=F.injector.get(Im,null);return ee?.registerApplication(G),F.onDestroy(()=>{this.detachView(F.hostView),mp(this.components,F),ee?.unregisterApplication(G)}),this._loadComponent(F),F}tick(){if(this._runningTick)throw new Ue(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;mp(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const h=this._injector.get(MT,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>mp(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Ue(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(u){return new(u||o)(xt(xa),xt(Bd),xt(Wg))},o.\u0275prov=wt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function mp(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}function LT(){return!1}let h_=(()=>{class o{}return o.__NG_ELEMENT_ID__=Px,o})();function Px(o){return function Nx(o,a,u){if(ou(o)&&!u){const h=mi(o.index,a);return new av(h,h)}return 47&o.type?new av(a[pi],a):null}(Jr(),mt(),16==(16&o))}class Ni{constructor(){}supports(a){return dv(a)}create(a){return new jx(a)}}const Gk=(o,a)=>a;class jx{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Gk}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,p=0,y=null;for(;u||h;){const E=!h||u&&u.currentIndex<$T(h,p,y)?u:h,C=$T(E,p,y),D=E.currentIndex;if(E===h)p--,h=h._nextRemoved;else if(u=u._next,null==E.previousIndex)p++;else{y||(y=[]);const F=C-p,G=D-p;if(F!=G){for(let xe=0;xe<F;xe++){const Ve=xe<y.length?y[xe]:y[xe]=0,dt=Ve+xe;G<=dt&&dt<F&&(y[xe]=Ve+1)}y[E.previousIndex]=G-F}}C!==D&&a(E,C,D)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!dv(a))throw new Ue(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let p,y,E,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)y=a[C],E=this._trackByFn(C,y),null!==u&&Object.is(u.trackById,E)?(h&&(u=this._verifyReinsertion(u,y,E,C)),Object.is(u.item,y)||this._addIdentityChange(u,y)):(u=this._mismatch(u,y,E,C),h=!0),u=u._next}else p=0,function x1(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Symbol.iterator]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{E=this._trackByFn(p,C),null!==u&&Object.is(u.trackById,E)?(h&&(u=this._verifyReinsertion(u,C,E,p)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,E,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,p){let y;return null===a?y=this._itTail:(y=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,y,p)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,y,p)):a=this._addAfter(new zk(u,h),y,p),a}_verifyReinsertion(a,u,h,p){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==y?a=this._reinsertAfter(y,a._prev,p):a.currentIndex!=p&&(a.currentIndex=p,this._addToMoves(a,p)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const p=a._prevRemoved,y=a._nextRemoved;return null===p?this._removalsHead=y:p._nextRemoved=y,null===y?this._removalsTail=p:y._prevRemoved=p,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const p=null===u?this._itHead:u._next;return a._next=p,a._prev=u,null===p?this._itTail=a:p._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new VT),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VT),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class zk{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ux{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class VT{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new Ux,this.map.set(u,h)),h.add(a)}get(a,u){const p=this.map.get(a);return p?p.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $T(o,a,u){const h=o.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+a+p}class Bx{constructor(){}supports(a){return a instanceof Map||nb(a)}create(){return new qk}}class qk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||nb(a)))throw new Ue(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const y=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,y)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const p=this._records.get(a);this._maybeAddToChanges(p,u);const y=p._prev,E=p._next;return y&&(y._next=E),E&&(E._prev=y),p._next=null,p._prev=null,p}const h=new Wk(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class Wk{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Vx(){return new HT([new Ni])}let HT=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||Vx()),deps:[[o,new gc,new Ll]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new Ue(901,!1)}}return o.\u0275prov=wt({token:o,providedIn:"root",factory:Vx}),o})();function GT(){return new m_([new Bx])}let m_=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||GT()),deps:[[o,new gc,new Ll]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(h)return h;throw new Ue(901,!1)}}return o.\u0275prov=wt({token:o,providedIn:"root",factory:GT}),o})();const RL=Ox(null,"core",[]);let zT=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(xt(d_))},o.\u0275mod=Hi({type:o}),o.\u0275inj=on({}),o})();function y_(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(lt,ke,B)=>{"use strict";B.d(ke,{Z:()=>ct});var d=B(2090),ae=B(4859),U=B(9681),de=B(1877);class te{constructor(Ue,Se){this._delegate=Ue,this.firebase=Se,(0,U._addComponent)(Ue,new ae.wA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(Ue,Se=U._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(Ue);return!$e.isInitialized()&&"EXPLICIT"===(null===(De=$e.getComponent())||void 0===De?void 0:De.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Se})}_removeServiceInstance(Ue,Se=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(Se)}_addComponent(Ue){(0,U._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,U._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const we=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function be(){const yt=function Ee(yt){const Ue={},Se={__esModule:!0,initializeApp:function je(Ze,R={}){const V=U.initializeApp(Ze,R);if((0,d.r3)(Ue,V.name))return Ue[V.name];const he=new yt(V,Se);return Ue[V.name]=he,he},app:$e,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function Ye(Ze){const R=Ze.name,V=R.replace("-compat","");if(U._registerComponent(Ze)&&"PUBLIC"===Ze.type){const he=(Le=$e())=>{if("function"!=typeof Le[V])throw we.create("invalid-app-argument",{appName:R});return Le[V]()};void 0!==Ze.serviceProps&&(0,d.ZB)(he,Ze.serviceProps),Se[V]=he,yt.prototype[V]=function(...Le){return this._getService.bind(this,R).apply(this,Ze.multipleInstances?Le:[])}}return"PUBLIC"===Ze.type?Se[V]:null},removeApp:function De(Ze){delete Ue[Ze]},useAsService:function st(Ze,R){return"serverAuth"===R?null:R},modularAPIs:U}};function $e(Ze){if(!(0,d.r3)(Ue,Ze=Ze||U._DEFAULT_ENTRY_NAME))throw we.create("no-app",{appName:Ze});return Ue[Ze]}return Se.default=Se,Object.defineProperty(Se,"apps",{get:function Ce(){return Object.keys(Ue).map(Ze=>Ue[Ze])}}),$e.App=yt,Se}(te);return yt.INTERNAL=Object.assign(Object.assign({},yt.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function Ue(Se){(0,d.ZB)(yt,Se)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),yt}(),ne=new de.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const yt=self.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ct=K;!function Oe(yt){(0,U.registerVersion)("@firebase/app-compat","0.2.5",yt)}()},9681:(lt,ke,B)=>{"use strict";B.r(ke),B.d(ke,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>ci,_DEFAULT_ENTRY_NAME:()=>ve,_addComponent:()=>_t,_addOrOverwriteComponent:()=>et,_apps:()=>Ge,_clearComponents:()=>on,_components:()=>Be,_getProvider:()=>wt,_registerComponent:()=>ft,_removeServiceInstance:()=>Ot,deleteApp:()=>qn,getApp:()=>Yn,getApps:()=>hr,initializeApp:()=>Sn,onLog:()=>Ht,registerVersion:()=>Wr,setLogLevel:()=>Bi});var d=B(5861),ae=B(4859),U=B(1877),de=B(2090),te=B(8766);class oe{constructor(gt){this.container=gt}getPlatformInfoString(){return this.container.getProviders().map(jt=>{if(function we(xt){return"VERSION"===xt.getComponent()?.type}(jt)){const Jt=jt.getImmediate();return`${Jt.library}/${Jt.version}`}return null}).filter(jt=>jt).join(" ")}}const Ee="@firebase/app",K=new U.Yd("@firebase/app"),ve="[DEFAULT]",_e={[Ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ge=new Map,Be=new Map;function _t(xt,gt){try{xt.container.addComponent(gt)}catch(jt){K.debug(`Component ${gt.name} failed to register with FirebaseApp ${xt.name}`,jt)}}function et(xt,gt){xt.container.addOrOverwriteComponent(gt)}function ft(xt){const gt=xt.name;if(Be.has(gt))return K.debug(`There were multiple attempts to register component ${gt}.`),!1;Be.set(gt,xt);for(const jt of Ge.values())_t(jt,xt);return!0}function wt(xt,gt){const jt=xt.container.getProvider("heartbeat").getImmediate({optional:!0});return jt&&jt.triggerHeartbeat(),xt.container.getProvider(gt)}function Ot(xt,gt,jt=ve){wt(xt,gt).clearInstance(jt)}function on(){Be.clear()}const Un=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gn{constructor(gt,jt,Jt){this._isDeleted=!1,this._options=Object.assign({},gt),this._config=Object.assign({},jt),this._name=jt.name,this._automaticDataCollectionEnabled=jt.automaticDataCollectionEnabled,this._container=Jt,this.container.addComponent(new ae.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(gt){this.checkDestroyed(),this._automaticDataCollectionEnabled=gt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(gt){this._isDeleted=gt}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}const ci="9.18.0";function Sn(xt,gt={}){let jt=xt;"object"!=typeof gt&&(gt={name:gt});const Jt=Object.assign({name:ve,automaticDataCollectionEnabled:!1},gt),an=Jt.name;if("string"!=typeof an||!an)throw Un.create("bad-app-name",{appName:String(an)});if(jt||(jt=(0,de.aH)()),!jt)throw Un.create("no-options");const pn=Ge.get(an);if(pn){if((0,de.vZ)(jt,pn.options)&&(0,de.vZ)(Jt,pn.config))return pn;throw Un.create("duplicate-app",{appName:an})}const Yr=new ae.H0(an);for(const ce of Be.values())Yr.addComponent(ce);const me=new Gn(jt,Jt,Yr);return Ge.set(an,me),me}function Yn(xt=ve){const gt=Ge.get(xt);if(!gt&&xt===ve)return Sn();if(!gt)throw Un.create("no-app",{appName:xt});return gt}function hr(){return Array.from(Ge.values())}function qn(xt){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,d.Z)(function*(xt){const gt=xt.name;Ge.has(gt)&&(Ge.delete(gt),yield Promise.all(xt.container.getProviders().map(jt=>jt.delete())),xt.isDeleted=!0)})).apply(this,arguments)}function Wr(xt,gt,jt){var Jt;let an=null!==(Jt=_e[xt])&&void 0!==Jt?Jt:xt;jt&&(an+=`-${jt}`);const pn=an.match(/\s|\//),Yr=gt.match(/\s|\//);if(pn||Yr){const me=[`Unable to register library "${an}" with version "${gt}":`];return pn&&me.push(`library name "${an}" contains illegal characters (whitespace or "/")`),pn&&Yr&&me.push("and"),Yr&&me.push(`version name "${gt}" contains illegal characters (whitespace or "/")`),void K.warn(me.join(" "))}ft(new ae.wA(`${an}-version`,()=>({library:an,version:gt}),"VERSION"))}function Ht(xt,gt){if(null!==xt&&"function"!=typeof xt)throw Un.create("invalid-log-argument");(0,U.Am)(xt,gt)}function Bi(xt){(0,U.Ub)(xt)}const Bn="firebase-heartbeat-database",Mn=1,nr="firebase-heartbeat-store";let Kr=null;function dn(){return Kr||(Kr=(0,te.X3)(Bn,Mn,{upgrade:(xt,gt)=>{0===gt&&xt.createObjectStore(nr)}}).catch(xt=>{throw Un.create("idb-open",{originalErrorMessage:xt.message})})),Kr}function nn(){return(nn=(0,d.Z)(function*(xt){try{return(yield dn()).transaction(nr).objectStore(nr).get(yr(xt))}catch(gt){if(gt instanceof de.ZR)K.warn(gt.message);else{const jt=Un.create("idb-get",{originalErrorMessage:gt?.message});K.warn(jt.message)}}})).apply(this,arguments)}function vo(xt,gt){return sr.apply(this,arguments)}function sr(){return(sr=(0,d.Z)(function*(xt,gt){try{const Jt=(yield dn()).transaction(nr,"readwrite");return yield Jt.objectStore(nr).put(gt,yr(xt)),Jt.done}catch(jt){if(jt instanceof de.ZR)K.warn(jt.message);else{const Jt=Un.create("idb-set",{originalErrorMessage:jt?.message});K.warn(Jt.message)}}})).apply(this,arguments)}function yr(xt){return`${xt.name}!${xt.options.appId}`}class es{constructor(gt){this.container=gt,this._heartbeatsCache=null;const jt=this.container.getProvider("app").getImmediate();this._storage=new On(jt),this._heartbeatsCachePromise=this._storage.read().then(Jt=>(this._heartbeatsCache=Jt,Jt))}triggerHeartbeat(){var gt=this;return(0,d.Z)(function*(){const Jt=gt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),an=$n();if(null===gt._heartbeatsCache&&(gt._heartbeatsCache=yield gt._heartbeatsCachePromise),gt._heartbeatsCache.lastSentHeartbeatDate!==an&&!gt._heartbeatsCache.heartbeats.some(pn=>pn.date===an))return gt._heartbeatsCache.heartbeats.push({date:an,agent:Jt}),gt._heartbeatsCache.heartbeats=gt._heartbeatsCache.heartbeats.filter(pn=>{const Yr=new Date(pn.date).valueOf();return Date.now()-Yr<=2592e6}),gt._storage.overwrite(gt._heartbeatsCache)})()}getHeartbeatsHeader(){var gt=this;return(0,d.Z)(function*(){if(null===gt._heartbeatsCache&&(yield gt._heartbeatsCachePromise),null===gt._heartbeatsCache||0===gt._heartbeatsCache.heartbeats.length)return"";const jt=$n(),{heartbeatsToSend:Jt,unsentEntries:an}=function Di(xt,gt=1024){const jt=[];let Jt=xt.slice();for(const an of xt){const pn=jt.find(Yr=>Yr.agent===an.agent);if(pn){if(pn.dates.push(an.date),Zr(jt)>gt){pn.dates.pop();break}}else if(jt.push({agent:an.agent,dates:[an.date]}),Zr(jt)>gt){jt.pop();break}Jt=Jt.slice(1)}return{heartbeatsToSend:jt,unsentEntries:Jt}}(gt._heartbeatsCache.heartbeats),pn=(0,de.L)(JSON.stringify({version:2,heartbeats:Jt}));return gt._heartbeatsCache.lastSentHeartbeatDate=jt,an.length>0?(gt._heartbeatsCache.heartbeats=an,yield gt._storage.overwrite(gt._heartbeatsCache)):(gt._heartbeatsCache.heartbeats=[],gt._storage.overwrite(gt._heartbeatsCache)),pn})()}}function $n(){return(new Date).toISOString().substring(0,10)}class On{constructor(gt){this.app=gt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var gt=this;return(0,d.Z)(function*(){return(yield gt._canUseIndexedDBPromise)&&(yield function Wt(xt){return nn.apply(this,arguments)}(gt.app))||{heartbeats:[]}})()}overwrite(gt){var jt=this;return(0,d.Z)(function*(){var Jt;if(yield jt._canUseIndexedDBPromise){const pn=yield jt.read();return vo(jt.app,{lastSentHeartbeatDate:null!==(Jt=gt.lastSentHeartbeatDate)&&void 0!==Jt?Jt:pn.lastSentHeartbeatDate,heartbeats:gt.heartbeats})}})()}add(gt){var jt=this;return(0,d.Z)(function*(){var Jt;if(yield jt._canUseIndexedDBPromise){const pn=yield jt.read();return vo(jt.app,{lastSentHeartbeatDate:null!==(Jt=gt.lastSentHeartbeatDate)&&void 0!==Jt?Jt:pn.lastSentHeartbeatDate,heartbeats:[...pn.heartbeats,...gt.heartbeats]})}})()}}function Zr(xt){return(0,de.L)(JSON.stringify({version:2,heartbeats:xt})).length}!function Vi(xt){ft(new ae.wA("platform-logger",gt=>new oe(gt),"PRIVATE")),ft(new ae.wA("heartbeat",gt=>new es(gt),"PRIVATE")),Wr(Ee,"0.9.5",xt),Wr(Ee,"0.9.5","esm2017"),Wr("fire-js","")}("")},4859:(lt,ke,B)=>{"use strict";B.d(ke,{H0:()=>Ee,wA:()=>U});var d=B(5861),ae=B(2090);class U{constructor(K,ne,Y){this.name=K,this.instanceFactory=ne,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const de="[DEFAULT]";class te{constructor(K,ne){this.name=K,this.container=ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const ne=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(ne)){const Y=new ae.BH;if(this.instancesDeferred.set(ne,Y),this.isInitialized(ne)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:ne});Ke&&Y.resolve(Ke)}catch{}}return this.instancesDeferred.get(ne).promise}getImmediate(K){var ne;const Y=this.normalizeInstanceIdentifier(K?.identifier),Ke=null!==(ne=K?.optional)&&void 0!==ne&&ne;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Oe){if(Ke)return null;throw Oe}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function we(be){return"EAGER"===be.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:de})}catch{}for(const[ne,Y]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(ne);try{const Oe=this.getOrInitializeService({instanceIdentifier:Ke});Y.resolve(Oe)}catch{}}}}clearInstance(K=de){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,d.Z)(function*(){const ne=Array.from(K.instances.values());yield Promise.all([...ne.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...ne.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=de){return this.instances.has(K)}getOptions(K=de){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:ne={}}=K,Y=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:Y,options:ne});for(const[Oe,ct]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Oe)&&ct.resolve(Ke);return Ke}onInit(K,ne){var Y;const Ke=this.normalizeInstanceIdentifier(ne),Oe=null!==(Y=this.onInitCallbacks.get(Ke))&&void 0!==Y?Y:new Set;Oe.add(K),this.onInitCallbacks.set(Ke,Oe);const ct=this.instances.get(Ke);return ct&&K(ct,Ke),()=>{Oe.delete(K)}}invokeOnInitCallbacks(K,ne){const Y=this.onInitCallbacks.get(ne);if(Y)for(const Ke of Y)try{Ke(K,ne)}catch{}}getOrInitializeService({instanceIdentifier:K,options:ne={}}){let Y=this.instances.get(K);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(be=K,be===de?void 0:be),options:ne}),this.instances.set(K,Y),this.instancesOptions.set(K,ne),this.invokeOnInitCallbacks(Y,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,Y)}catch{}var be;return Y||null}normalizeInstanceIdentifier(K=de){return this.component?this.component.multipleInstances?K:de:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ee{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const ne=this.getProvider(K.name);if(ne.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);ne.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const ne=new te(K,this);return this.providers.set(K,ne),ne}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,ke,B)=>{"use strict";B.d(ke,{Am:()=>be,Ub:()=>Ee,Yd:()=>we,in:()=>ae});const d=[];var ae=(()=>{return(K=ae||(ae={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",ae;var K})();const U={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},de=ae.INFO,te={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},oe=(K,ne,...Y)=>{if(ne<K.logLevel)return;const Ke=(new Date).toISOString(),Oe=te[ne];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ne})`);console[Oe](`[${Ke}]  ${K.name}:`,...Y)};class we{constructor(ne){this.name=ne,this._logLevel=de,this._logHandler=oe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(ne){if(!(ne in ae))throw new TypeError(`Invalid value "${ne}" assigned to \`logLevel\``);this._logLevel=ne}setLogLevel(ne){this._logLevel="string"==typeof ne?U[ne]:ne}get logHandler(){return this._logHandler}set logHandler(ne){if("function"!=typeof ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(ne){this._userLogHandler=ne}debug(...ne){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...ne),this._logHandler(this,ae.DEBUG,...ne)}log(...ne){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...ne),this._logHandler(this,ae.VERBOSE,...ne)}info(...ne){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...ne),this._logHandler(this,ae.INFO,...ne)}warn(...ne){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...ne),this._logHandler(this,ae.WARN,...ne)}error(...ne){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...ne),this._logHandler(this,ae.ERROR,...ne)}}function Ee(K){d.forEach(ne=>{ne.setLogLevel(K)})}function be(K,ne){for(const Y of d){let Ke=null;ne&&ne.level&&(Ke=U[ne.level]),Y.userLogHandler=null===K?null:(Oe,ct,...yt)=>{const Ue=yt.map(Se=>{if(null==Se)return null;if("string"==typeof Se)return Se;if("number"==typeof Se||"boolean"==typeof Se)return Se.toString();if(Se instanceof Error)return Se.message;try{return JSON.stringify(Se)}catch{return null}}).filter(Se=>Se).join(" ");ct>=(Ke??Oe.logLevel)&&K({level:ae[ct].toLowerCase(),message:Ue,args:yt,type:Oe.name})}}}},259:(lt,ke,B)=>{"use strict";B.d(ke,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=B(9681);(0,d.registerVersion)("firebase","9.18.0","app")},9260:(lt,ke,B)=>{"use strict";B.d(ke,{Z:()=>d.Z});var d=B(3942);d.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(lt,ke,B)=>{"use strict";B.r(ke);var d=B(5861),ae=B(3942),U=B(2090),de=B(9681),te=B(1877),oe=B(655),we=B(4859);const be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y_EMAIL_SIGNIN="EMAIL_SIGNIN",Y_PASSWORD_RESET="PASSWORD_RESET",Y_RECOVER_EMAIL="RECOVER_EMAIL",Y_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Y_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Y_VERIFY_EMAIL="VERIFY_EMAIL";const ct=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},yt=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new te.Yd("@firebase/auth");function $e(b,...g){De.logLevel<=te.in.ERROR&&De.error(`Auth (${de.SDK_VERSION}): ${b}`,...g)}function je(b,...g){throw Ze(b,...g)}function Ce(b,...g){return Ze(b,...g)}function Ye(b,g,m){const w=Object.assign(Object.assign({},yt()),{[g]:m});return new U.LL("auth","Firebase",w).create(g,{appName:b.name})}function st(b,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&je(b,"argument-error"),Ye(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(b,...g){if("string"!=typeof b){const m=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=b.name),b._errorFactory.create(m,...w)}return Ue.create(b,...g)}function R(b,g,...m){if(!b)throw Ze(g,...m)}function V(b){const g="INTERNAL ASSERTION FAILED: "+b;throw $e(g),new Error(g)}function he(b,g){b||V(g)}const Le=new Map;function He(b){he(b instanceof Function,"Expected a class definition");let g=Le.get(b);return g?(he(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,Le.set(b,g),g)}function X(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Z(){return"http:"===re()||"https:"===re()}function re(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ge{constructor(g,m){this.shortDelay=g,this.longDelay=m,he(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function ve(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Z()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Be(b,g){he(b.emulator,"Emulator should always be set here");const{url:m}=b.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class _t{static initialize(g,m,w){this.fetchImpl=g,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void V("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void V("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void V("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const et={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ft=new Ge(3e4,6e4);function wt(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function Ot(b,g,m,w){return on.apply(this,arguments)}function on(){return(on=(0,d.Z)(function*(b,g,m,w,L={}){return yn(b,L,(0,d.Z)(function*(){let z={},Me={};w&&("GET"===g?Me=w:z={body:JSON.stringify(w)});const it=(0,U.xO)(Object.assign({key:b.config.apiKey},Me)).slice(1),It=yield b._getAdditionalHeaders();return It["Content-Type"]="application/json",b.languageCode&&(It["X-Firebase-Locale"]=b.languageCode),_t.fetch()(Sn(b,b.config.apiHost,m,it),Object.assign({method:g,headers:It,referrerPolicy:"no-referrer"},z))}))})).apply(this,arguments)}function yn(b,g,m){return Un.apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*(b,g,m){b._canInitEmulator=!1;const w=Object.assign(Object.assign({},et),g);try{const L=new Yn(b),z=yield Promise.race([m(),L.promise]);L.clearNetworkTimeout();const Me=yield z.json();if("needConfirmation"in Me)throw hr(b,"account-exists-with-different-credential",Me);if(z.ok&&!("errorMessage"in Me))return Me;{const it=z.ok?Me.errorMessage:Me.error.message,[It,Rt]=it.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===It)throw hr(b,"credential-already-in-use",Me);if("EMAIL_EXISTS"===It)throw hr(b,"email-already-in-use",Me);if("USER_DISABLED"===It)throw hr(b,"user-disabled",Me);const ln=w[It]||It.toLowerCase().replace(/[_\s]+/g,"-");if(Rt)throw Ye(b,ln,Rt);je(b,ln)}}catch(L){if(L instanceof U.ZR)throw L;je(b,"internal-error",{message:String(L)})}})).apply(this,arguments)}function Gn(b,g,m,w){return ci.apply(this,arguments)}function ci(){return(ci=(0,d.Z)(function*(b,g,m,w,L={}){const z=yield Ot(b,g,m,w,L);return"mfaPendingCredential"in z&&je(b,"multi-factor-auth-required",{_serverResponse:z}),z})).apply(this,arguments)}function Sn(b,g,m,w){const L=`${g}${m}?${w}`;return b.config.emulator?Be(b.config,L):`${b.config.apiScheme}://${L}`}class Yn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Ce(this.auth,"network-request-failed")),ft.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hr(b,g,m){const w={appName:b.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const L=Ce(b,g,w);return L.customData._tokenResponse=m,L}function Xn(){return(Xn=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Ht(){return(Ht=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Mn(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function dn(){return(dn=(0,d.Z)(function*(b,g=!1){const m=(0,U.m9)(b),w=yield m.getIdToken(g),L=nn(w);R(L&&L.exp&&L.auth_time&&L.iat,m.auth,"internal-error");const z="object"==typeof L.firebase?L.firebase:void 0,Me=z?.sign_in_provider;return{claims:L,token:w,authTime:Mn(Wt(L.auth_time)),issuedAtTime:Mn(Wt(L.iat)),expirationTime:Mn(Wt(L.exp)),signInProvider:Me||null,signInSecondFactor:z?.sign_in_second_factor||null}})).apply(this,arguments)}function Wt(b){return 1e3*Number(b)}function nn(b){const[g,m,w]=b.split(".");if(void 0===g||void 0===m||void 0===w)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,U.tV)(m);return L?JSON.parse(L):($e("Failed to decode base64 JWT payload"),null)}catch(L){return $e("Caught error parsing JWT payload as JSON",L?.toString()),null}}function sr(b,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,d.Z)(function*(b,g,m=!1){if(m)return g;try{return yield g}catch(w){throw w instanceof U.ZR&&function Fr({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(w)&&b.auth.currentUser===b&&(yield b.auth.signOut()),w}})).apply(this,arguments)}class di{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const L=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,L)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),w)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&g.schedule(!0))}g.schedule()})()}}class es{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mn(this.lastLoginAt),this.creationTime=Mn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $n(b){return Di.apply(this,arguments)}function Di(){return Di=(0,d.Z)(function*(b){var g;const m=b.auth,w=yield b.getIdToken(),L=yield sr(b,function Bi(b,g){return Bn.apply(this,arguments)}(m,{idToken:w}));R(L?.users.length,m,"internal-error");const z=L.users[0];b._notifyReloadListener(z);const Me=null!==(g=z.providerUserInfo)&&void 0!==g&&g.length?function xt(b){return b.map(g=>{var{providerId:m}=g,w=(0,oe._T)(g,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(z.providerUserInfo):[],it=function Vi(b,g){return[...b.filter(w=>!g.some(L=>L.providerId===w.providerId)),...g]}(b.providerData,Me),ln=!!b.isAnonymous&&!(b.email&&z.passwordHash||it?.length),en={uid:z.localId,displayName:z.displayName||null,photoURL:z.photoUrl||null,email:z.email||null,emailVerified:z.emailVerified||!1,phoneNumber:z.phoneNumber||null,tenantId:z.tenantId||null,providerData:it,metadata:new es(z.createdAt,z.lastLoginAt),isAnonymous:ln};Object.assign(b,en)}),Di.apply(this,arguments)}function Zr(){return(Zr=(0,d.Z)(function*(b){const g=(0,U.m9)(b);yield $n(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function jt(){return(jt=(0,d.Z)(function*(b,g){const m=yield yn(b,{},(0,d.Z)(function*(){const w=(0,U.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:L,apiKey:z}=b.config,Me=Sn(b,L,"/v1/token",`key=${z}`),it=yield b._getAdditionalHeaders();return it["Content-Type"]="application/x-www-form-urlencoded",_t.fetch()(Me,{method:"POST",headers:it,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){R(g.idToken,"internal-error"),R(typeof g.idToken<"u","internal-error"),R(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function vo(b){const g=nn(b);return R(g,"internal-error"),R(typeof g.exp<"u","internal-error"),R(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var w=this;return(0,d.Z)(function*(){return R(!w.accessToken||w.refreshToken,g,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var w=this;return(0,d.Z)(function*(){const{accessToken:L,refreshToken:z,expiresIn:Me}=yield function gt(b,g){return jt.apply(this,arguments)}(g,m);w.updateTokensAndExpiration(L,z,Number(Me))})()}updateTokensAndExpiration(g,m,w){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,m){const{refreshToken:w,accessToken:L,expirationTime:z}=m,Me=new Jt;return w&&(R("string"==typeof w,"internal-error",{appName:g}),Me.refreshToken=w),L&&(R("string"==typeof L,"internal-error",{appName:g}),Me.accessToken=L),z&&(R("number"==typeof z,"internal-error",{appName:g}),Me.expirationTime=z),Me}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Jt,this.toJSON())}_performRefresh(){return V("not implemented")}}function an(b,g){R("string"==typeof b||typeof b>"u","internal-error",{appName:g})}class pn{constructor(g){var{uid:m,auth:w,stsTokenManager:L}=g,z=(0,oe._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new di(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=L,this.accessToken=L.accessToken,this.displayName=z.displayName||null,this.email=z.email||null,this.emailVerified=z.emailVerified||!1,this.phoneNumber=z.phoneNumber||null,this.photoURL=z.photoURL||null,this.isAnonymous=z.isAnonymous||!1,this.tenantId=z.tenantId||null,this.providerData=z.providerData?[...z.providerData]:[],this.metadata=new es(z.createdAt||void 0,z.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,d.Z)(function*(){const w=yield sr(m,m.stsTokenManager.getToken(m.auth,g));return R(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(g){return function Kr(b){return dn.apply(this,arguments)}(this,g)}reload(){return function On(b){return Zr.apply(this,arguments)}(this)}_assign(g){this!==g&&(R(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const m=new pn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(g){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var w=this;return(0,d.Z)(function*(){let L=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),L=!0),m&&(yield $n(w)),yield w.auth._persistUserIfCurrent(w),L&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,d.Z)(function*(){const m=yield g.getIdToken();return yield sr(g,function qn(b,g){return Xn.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var w,L,z,Me,it,It,Rt,ln;const en=null!==(w=m.displayName)&&void 0!==w?w:void 0,Rr=null!==(L=m.email)&&void 0!==L?L:void 0,lo=null!==(z=m.phoneNumber)&&void 0!==z?z:void 0,il=null!==(Me=m.photoURL)&&void 0!==Me?Me:void 0,Po=null!==(it=m.tenantId)&&void 0!==it?it:void 0,sl=null!==(It=m._redirectEventId)&&void 0!==It?It:void 0,Nd=null!==(Rt=m.createdAt)&&void 0!==Rt?Rt:void 0,Vg=null!==(ln=m.lastLoginAt)&&void 0!==ln?ln:void 0,{uid:$l,emailVerified:C0,isAnonymous:x0,providerData:Cf,stsTokenManager:Ld}=m;R($l&&Ld,g,"internal-error");const xf=Jt.fromJSON(this.name,Ld);R("string"==typeof $l,g,"internal-error"),an(en,g.name),an(Rr,g.name),R("boolean"==typeof C0,g,"internal-error"),R("boolean"==typeof x0,g,"internal-error"),an(lo,g.name),an(il,g.name),an(Po,g.name),an(sl,g.name),an(Nd,g.name),an(Vg,g.name);const $g=new pn({uid:$l,auth:g,email:Rr,emailVerified:C0,displayName:en,isAnonymous:x0,photoURL:il,phoneNumber:lo,tenantId:Po,stsTokenManager:xf,createdAt:Nd,lastLoginAt:Vg});return Cf&&Array.isArray(Cf)&&($g.providerData=Cf.map(I0=>Object.assign({},I0))),sl&&($g._redirectEventId=sl),$g}static _fromIdTokenResponse(g,m,w=!1){return(0,d.Z)(function*(){const L=new Jt;L.updateFromServerResponse(m);const z=new pn({uid:m.localId,auth:g,stsTokenManager:L,isAnonymous:w});return yield $n(z),z})()}}const me=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,w){var L=this;return(0,d.Z)(function*(){L.storage[m]=w})()}_get(m){var w=this;return(0,d.Z)(function*(){const L=w.storage[m];return void 0===L?null:L})()}_remove(m){var w=this;return(0,d.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return b.type="NONE",b})();function ce(b,g,m){return`firebase:${b}:${g}:${m}`}class Ae{constructor(g,m,w){this.persistence=g,this.auth=m,this.userKey=w;const{config:L,name:z}=this.auth;this.fullUserKey=ce(this.userKey,L.apiKey,z),this.fullPersistenceKey=ce("persistence",L.apiKey,z),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?pn._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,d.Z)(function*(){if(m.persistence===g)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,w="authUser"){return(0,d.Z)(function*(){if(!m.length)return new Ae(He(me),g,w);const L=(yield Promise.all(m.map(function(){var Rt=(0,d.Z)(function*(ln){if(yield ln._isAvailable())return ln});return function(ln){return Rt.apply(this,arguments)}}()))).filter(Rt=>Rt);let z=L[0]||He(me);const Me=ce(w,g.config.apiKey,g.name);let it=null;for(const Rt of m)try{const ln=yield Rt._get(Me);if(ln){const en=pn._fromJSON(g,ln);Rt!==z&&(it=en),z=Rt;break}}catch{}const It=L.filter(Rt=>Rt._shouldAllowMigration);return z._shouldAllowMigration&&It.length?(z=It[0],it&&(yield z._set(Me,it.toJSON())),yield Promise.all(m.map(function(){var Rt=(0,d.Z)(function*(ln){if(ln!==z)try{yield ln._remove(Me)}catch{}});return function(ln){return Rt.apply(this,arguments)}}())),new Ae(z,g,w)):new Ae(z,g,w)})()}}function ot(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(rr(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ze(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(q(g))return"Blackberry";if(fe(g))return"Webos";if(Pt(g))return"Safari";if((g.includes("chrome/")||Mt(g))&&!g.includes("edge/"))return"Chrome";if($(g))return"Android";{const w=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function ze(b=(0,U.z$)()){return/firefox\//i.test(b)}function Pt(b=(0,U.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Mt(b=(0,U.z$)()){return/crios\//i.test(b)}function rr(b=(0,U.z$)()){return/iemobile/i.test(b)}function $(b=(0,U.z$)()){return/android/i.test(b)}function q(b=(0,U.z$)()){return/blackberry/i.test(b)}function fe(b=(0,U.z$)()){return/webos/i.test(b)}function Pe(b=(0,U.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Ai(b=(0,U.z$)()){return Pe(b)||$(b)||fe(b)||q(b)||/windows phone/i.test(b)||rr(b)}function hi(b,g=[]){let m;switch(b){case"Browser":m=ot((0,U.z$)());break;case"Worker":m=`${ot((0,U.z$)())}-${b}`;break;default:m=b}const w=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${de.SDK_VERSION}/${w}`}class Hi{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const w=z=>new Promise((Me,it)=>{try{Me(g(z))}catch(It){it(It)}});w.onAbort=m,this.queue.push(w);const L=this.queue.length-1;return()=>{this.queue[L]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===g)return;const w=[];try{for(const L of m.queue)yield L(g),L.onAbort&&w.push(L.onAbort)}catch(L){w.reverse();for(const z of w)try{z()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:L?.message})}})()}}class _o{constructor(g,m,w){this.app=g,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ps(this),this.idTokenSubscription=new Ps(this),this.beforeStateQueue=new Hi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,m){var w=this;return m&&(this._popupRedirectResolver=He(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var L,z;if(!w._deleted&&(w.persistenceManager=yield Ae.create(w,g),!w._deleted)){if(null!==(L=w._popupRedirectResolver)&&void 0!==L&&L._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(z=w.currentUser)||void 0===z?void 0:z.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,d.Z)(function*(){var w;const L=yield m.assertedPersistence.getCurrentUser();let z=L,Me=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const it=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,It=z?._redirectEventId,Rt=yield m.tryRedirectSignIn(g);(!it||it===It)&&Rt?.user&&(z=Rt.user,Me=!0)}if(!z)return m.directlySetCurrentUser(null);if(!z._redirectEventId){if(Me)try{yield m.beforeStateQueue.runMiddleware(z)}catch(it){z=L,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(it))}return z?m.reloadAndSetCurrentUserOrClear(z):m.directlySetCurrentUser(null)}return R(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===z._redirectEventId?m.directlySetCurrentUser(z):m.reloadAndSetCurrentUserOrClear(z)})()}tryRedirectSignIn(g){var m=this;return(0,d.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,d.Z)(function*(){try{yield $n(g)}catch(w){if("auth/network-request-failed"!==w?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function _e(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,d.Z)(function*(){const w=g?(0,U.m9)(g):null;return w&&R(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(g,m=!1){var w=this;return(0,d.Z)(function*(){if(!w._deleted)return g&&R(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,d.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(He(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new U.LL("auth","Firebase",g())}onAuthStateChanged(g,m,w){return this.registerStateListener(this.authStateSubscription,g,m,w)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,w){return this.registerStateListener(this.idTokenSubscription,g,m,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var w=this;return(0,d.Z)(function*(){const L=yield w.getOrInitRedirectPersistenceManager(m);return null===g?L.removeCurrentUser():L.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const w=g&&He(g)||m._popupRedirectResolver;R(w,m,"argument-error"),m.redirectPersistenceManager=yield Ae.create(m,[He(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,d.Z)(function*(){var w,L;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===g?m._currentUser:(null===(L=m.redirectUser)||void 0===L?void 0:L._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,d.Z)(function*(){if(g===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,w,L){if(this._deleted)return()=>{};const z="function"==typeof m?m:m.next.bind(m),Me=this._isInitialized?Promise.resolve():this._initializationPromise;return R(Me,this,"internal-error"),Me.then(()=>z(this.currentUser)),"function"==typeof m?g.addObserver(m,w,L):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=hi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var m;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const L=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return L&&(w["X-Firebase-Client"]=L),w})()}}function Qn(b){return(0,U.m9)(b)}class Ps{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function En(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function Vn(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class ar{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return V("not implemented")}_getIdTokenResponse(g){return V("not implemented")}_linkToIdToken(g,m){return V("not implemented")}_getReauthenticationResolver(g){return V("not implemented")}}function lr(b,g){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:resetPassword",wt(b,g))})).apply(this,arguments)}function gn(b,g){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function bo(){return(bo=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:update",wt(b,g))})).apply(this,arguments)}function Qo(){return(Qo=(0,d.Z)(function*(b,g){return Gn(b,"POST","/v1/accounts:signInWithPassword",wt(b,g))})).apply(this,arguments)}function cr(b,g){return gs.apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:sendOobCode",wt(b,g))})).apply(this,arguments)}function vn(){return(vn=(0,d.Z)(function*(b,g){return cr(b,g)})).apply(this,arguments)}function bl(){return(bl=(0,d.Z)(function*(b,g){return cr(b,g)})).apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(b,g){return cr(b,g)})).apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(b,g){return cr(b,g)})).apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(b,g){return Gn(b,"POST","/v1/accounts:signInWithEmailLink",wt(b,g))})).apply(this,arguments)}function Xc(){return(Xc=(0,d.Z)(function*(b,g){return Gn(b,"POST","/v1/accounts:signInWithEmailLink",wt(b,g))})).apply(this,arguments)}class Jn extends ar{constructor(g,m,w,L=null){super("password",w),this._email=g,this._password=m,this._tenantId=L}static _fromEmailAndPassword(g,m){return new Jn(g,m,"password")}static _fromEmailAndCode(g,m,w=null){return new Jn(g,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function jr(b,g){return Qo.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function su(b,g){return Ls.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:je(g,"internal-error")}})()}_linkToIdToken(g,m){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return gn(g,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Tl(b,g){return Xc.apply(this,arguments)}(g,{idToken:m,email:w._email,oobCode:w._password});default:je(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ma(b,g){return qu.apply(this,arguments)}function qu(){return(qu=(0,d.Z)(function*(b,g){return Gn(b,"POST","/v1/accounts:signInWithIdp",wt(b,g))})).apply(this,arguments)}class ts extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new ts(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):je("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:L}=m,z=(0,oe._T)(m,["providerId","signInMethod"]);if(!w||!L)return null;const Me=new ts(w,L);return Me.idToken=z.idToken||void 0,Me.accessToken=z.accessToken||void 0,Me.secret=z.secret,Me.nonce=z.nonce,Me.pendingToken=z.pendingToken||null,Me}_getIdTokenResponse(g){return Ma(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Ma(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ma(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,U.xO)(m)}return g}}function Xo(){return(Xo=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:sendVerificationCode",wt(b,g))})).apply(this,arguments)}function eo(){return(eo=(0,d.Z)(function*(b,g){return Gn(b,"POST","/v1/accounts:signInWithPhoneNumber",wt(b,g))})).apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(b,g){const m=yield Gn(b,"POST","/v1/accounts:signInWithPhoneNumber",wt(b,g));if(m.temporaryProof)throw hr(b,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Jc={USER_NOT_FOUND:"user-not-found"};function El(){return(El=(0,d.Z)(function*(b,g){return Gn(b,"POST","/v1/accounts:signInWithPhoneNumber",wt(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Jc)})).apply(this,arguments)}class gi extends ar{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new gi({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new gi({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function Qr(b,g){return eo.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function ns(b,g){return rs.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function ou(b,g){return El.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:w,verificationCode:L}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:w,code:L}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:w,phoneNumber:L,temporaryProof:z}=g;return w||m||L||z?new gi({verificationId:m,verificationCode:w,phoneNumber:L,temporaryProof:z}):null}}class lu{constructor(g){var m,w,L,z,Me,it;const It=(0,U.zd)((0,U.pd)(g)),Rt=null!==(m=It.apiKey)&&void 0!==m?m:null,ln=null!==(w=It.oobCode)&&void 0!==w?w:null,en=function by(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(L=It.mode)&&void 0!==L?L:null);R(Rt&&ln&&en,"argument-error"),this.apiKey=Rt,this.operation=en,this.code=ln,this.continueUrl=null!==(z=It.continueUrl)&&void 0!==z?z:null,this.languageCode=null!==(Me=It.languageCode)&&void 0!==Me?Me:null,this.tenantId=null!==(it=It.tenantId)&&void 0!==it?it:null}static parseLink(g){const m=function au(b){const g=(0,U.zd)((0,U.pd)(b)).link,m=g?(0,U.zd)((0,U.pd)(g)).deep_link_id:null,w=(0,U.zd)((0,U.pd)(b)).deep_link_id;return(w?(0,U.zd)((0,U.pd)(w)).link:null)||w||m||g||b}(g);try{return new lu(m)}catch{return null}}}let zh=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(m,w){return Jn._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const L=lu.parseLink(w);return R(L,"argument-error"),Jn._fromEmailAndCode(m,L.code,L.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Eo{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class wl extends Eo{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class uu extends wl{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return R("providerId"in m&&"signInMethod"in m,"argument-error"),ts._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return R(g.idToken||g.accessToken,"argument-error"),ts._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return uu.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return uu.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:L,pendingToken:z,nonce:Me,providerId:it}=g;if(!w&&!L&&!m&&!z||!it)return null;try{return new uu(it)._credential({idToken:m,accessToken:w,nonce:Me,pendingToken:z})}catch{return null}}}let ed=(()=>{class b extends wl{constructor(){super("facebook.com")}static credential(m){return ts._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),zp=(()=>{class b extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return ts._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:L}=m;if(!w&&!L)return null;try{return b.credential(w,L)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),qh=(()=>{class b extends wl{constructor(){super("github.com")}static credential(m){return ts._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Sl extends ar{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Ma(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Ma(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ma(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:L,pendingToken:z}=m;return w&&L&&z&&w===L?new Sl(w,z):null}static _create(g,m){return new Sl(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class to extends Eo{constructor(g){R(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return to.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return to.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Sl.fromJSON(g);return R(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:w}=g;if(!m||!w)return null;try{return Sl._create(w,m)}catch{return null}}}let Ey=(()=>{class b extends wl{constructor(){super("twitter.com")}static credential(m,w){return ts._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:L}=m;if(!w||!L)return null;try{return b.credential(w,L)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Jo(b,g){return cu.apply(this,arguments)}function cu(){return(cu=(0,d.Z)(function*(b,g){return Gn(b,"POST","/v1/accounts:signUp",wt(b,g))})).apply(this,arguments)}class vs{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,w,L=!1){return(0,d.Z)(function*(){const z=yield pn._fromIdTokenResponse(g,w,L),Me=qp(w);return new vs({user:z,providerId:Me,_tokenResponse:w,operationType:m})})()}static _forOperation(g,m,w){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const L=qp(w);return new vs({user:g,providerId:L,_tokenResponse:w,operationType:m})})()}}function qp(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function ea(){return(ea=(0,d.Z)(function*(b){var g;const m=Qn(b);if(yield m._initializationPromise,null!==(g=m.currentUser)&&void 0!==g&&g.isAnonymous)return new vs({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Jo(m,{returnSecureToken:!0}),L=yield vs._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(L.user),L})).apply(this,arguments)}class du extends U.ZR{constructor(g,m,w,L){var z;super(m.code,m.message),this.operationType=w,this.user=L,Object.setPrototypeOf(this,du.prototype),this.customData={appName:g.name,tenantId:null!==(z=g.tenantId)&&void 0!==z?z:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,m,w,L){return new du(g,m,w,L)}}function td(b,g,m,w){return("reauthenticate"===g?m._getReauthenticationResolver(b):m._getIdTokenResponse(b)).catch(z=>{throw"auth/multi-factor-auth-required"===z.code?du._fromErrorAndOperation(b,z,g,w):z})}function ta(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function hu(){return hu=(0,d.Z)(function*(b,g){const m=(0,U.m9)(b);yield Cl(!0,m,g);const{providerUserInfo:w}=yield function Wr(b,g){return Ht.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),L=ta(w||[]);return m.providerData=m.providerData.filter(z=>L.has(z.providerId)),L.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),hu.apply(this,arguments)}function fu(b,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(b,g,m=!1){const w=yield sr(b,g._linkToIdToken(b.auth,yield b.getIdToken()),m);return vs._forOperation(b,"link",w)})).apply(this,arguments)}function Cl(b,g,m){return xl.apply(this,arguments)}function xl(){return(xl=(0,d.Z)(function*(b,g,m){yield $n(g);const L=!1===b?"provider-already-linked":"no-such-provider";R(ta(g.providerData).has(m)===b,g.auth,L)})).apply(this,arguments)}function Zh(b,g){return ki.apply(this,arguments)}function ki(){return(ki=(0,d.Z)(function*(b,g,m=!1){const{auth:w}=b,L="reauthenticate";try{const z=yield sr(b,td(w,L,g,b),m);R(z.idToken,w,"internal-error");const Me=nn(z.idToken);R(Me,w,"internal-error");const{sub:it}=Me;return R(b.uid===it,w,"user-mismatch"),vs._forOperation(b,L,z)}catch(z){throw"auth/user-not-found"===z?.code&&je(w,"user-mismatch"),z}})).apply(this,arguments)}function Pa(b,g){return nd.apply(this,arguments)}function nd(){return(nd=(0,d.Z)(function*(b,g,m=!1){const w="signIn",L=yield td(b,w,g),z=yield vs._fromIdTokenResponse(b,w,L);return m||(yield b._updateCurrentUser(z.user)),z})).apply(this,arguments)}function Pn(b,g){return rd.apply(this,arguments)}function rd(){return(rd=(0,d.Z)(function*(b,g){return Pa(Qn(b),g)})).apply(this,arguments)}function Na(b,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,d.Z)(function*(b,g){const m=(0,U.m9)(b);return yield Cl(!1,m,g.providerId),fu(m,g)})).apply(this,arguments)}function Ku(b,g){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(b,g){return Zh((0,U.m9)(b),g)})).apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(b,g){return Gn(b,"POST","/v1/accounts:signInWithCustomToken",wt(b,g))})).apply(this,arguments)}function ia(){return ia=(0,d.Z)(function*(b,g){const m=Qn(b),w=yield function ra(b,g){return mi.apply(this,arguments)}(m,{token:g,returnSecureToken:!0}),L=yield vs._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(L.user),L}),ia.apply(this,arguments)}class pu{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?no._fromServerResponse(g,m):je(g,"internal-error")}}class no extends pu{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new no(m)}}function gu(b,g,m){var w;R((null===(w=m.url)||void 0===w?void 0:w.length)>0,b,"invalid-continue-uri"),R(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(R(m.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(R(m.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function hn(){return hn=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b),L={requestType:"PASSWORD_RESET",email:g};m&&gu(w,L,m),yield function ms(b,g){return bl.apply(this,arguments)}(w,L)}),hn.apply(this,arguments)}function Qh(){return(Qh=(0,d.Z)(function*(b,g,m){yield lr((0,U.m9)(b),{oobCode:g,newPassword:m})})).apply(this,arguments)}function sd(){return sd=(0,d.Z)(function*(b,g){yield function fi(b,g){return bo.apply(this,arguments)}((0,U.m9)(b),{oobCode:g})}),sd.apply(this,arguments)}function Qu(b,g){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,d.Z)(function*(b,g){const m=(0,U.m9)(b),w=yield lr(m,{oobCode:g}),L=w.requestType;switch(R(L,m,"internal-error"),L){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":R(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":R(w.mfaInfo,m,"internal-error");default:R(w.email,m,"internal-error")}let z=null;return w.mfaInfo&&(z=pu._fromServerResponse(Qn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:z},operation:L}})).apply(this,arguments)}function ad(){return(ad=(0,d.Z)(function*(b,g){const{data:m}=yield Qu((0,U.m9)(b),g);return m.email})).apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(b,g,m){const w=Qn(b),L=yield Jo(w,{returnSecureToken:!0,email:g,password:m}),z=yield vs._fromIdTokenResponse(w,"signIn",L);return yield w._updateCurrentUser(z.user),z})).apply(this,arguments)}function Jr(){return Jr=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b),L={requestType:"EMAIL_SIGNIN",email:g};R(m.handleCodeInApp,w,"argument-error"),m&&gu(w,L,m),yield function Hh(b,g){return To.apply(this,arguments)}(w,L)}),Jr.apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b),L=zh.credentialWithLink(g,m||X());return R(L._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Pn(w,L)})).apply(this,arguments)}function Il(){return(Il=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:createAuthUri",wt(b,g))})).apply(this,arguments)}function Kp(){return Kp=(0,d.Z)(function*(b,g){const w={identifier:g,continueUri:Z()?X():"http://localhost"},{signinMethods:L}=yield function Jh(b,g){return Il.apply(this,arguments)}((0,U.m9)(b),w);return L||[]}),Kp.apply(this,arguments)}function ei(){return ei=(0,d.Z)(function*(b,g){const m=(0,U.m9)(b),L={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&gu(m.auth,L,g);const{email:z}=yield function iu(b,g){return vn.apply(this,arguments)}(m.auth,L);z!==b.email&&(yield b.reload())}),ei.apply(this,arguments)}function mu(){return mu=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b),z={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};m&&gu(w.auth,z,m);const{email:Me}=yield function pi(b,g){return Js.apply(this,arguments)}(w.auth,z);Me!==b.email&&(yield b.reload())}),mu.apply(this,arguments)}function Mi(){return(Mi=(0,d.Z)(function*(b,g){return Ot(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ud(){return ud=(0,d.Z)(function*(b,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const w=(0,U.m9)(b),z={idToken:yield w.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},Me=yield sr(w,function ro(b,g){return Mi.apply(this,arguments)}(w.auth,z));w.displayName=Me.displayName||null,w.photoURL=Me.photoUrl||null;const it=w.providerData.find(({providerId:It})=>"password"===It);it&&(it.displayName=w.displayName,it.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Me)}),ud.apply(this,arguments)}function tc(b,g,m){return yu.apply(this,arguments)}function yu(){return(yu=(0,d.Z)(function*(b,g,m){const{auth:w}=b,z={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(z.email=g),m&&(z.password=m);const Me=yield sr(b,gn(w,z));yield b._updateTokensIfNecessary(Me,!0)})).apply(this,arguments)}class wo{constructor(g,m,w={}){this.isNewUser=g,this.providerId=m,this.profile=w}}class Zp extends wo{constructor(g,m,w,L){super(g,m,w),this.username=L}}class sf extends wo{constructor(g,m){super(g,"facebook.com",m)}}class nc extends Zp{constructor(g,m){super(g,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Yp extends wo{constructor(g,m){super(g,"google.com",m)}}class cd extends Zp{constructor(g,m,w){super(g,"twitter.com",m,w)}}function Qp(b){const{user:g,_tokenResponse:m}=b;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function rf(b){var g,m;if(!b)return null;const{providerId:w}=b,L=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},z=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!w&&b?.idToken){const Me=null===(m=null===(g=nn(b.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(Me)return new wo(z,"anonymous"!==Me&&"custom"!==Me?Me:null)}if(!w)return null;switch(w){case"facebook.com":return new sf(z,L);case"github.com":return new nc(z,L);case"google.com":return new Yp(z,L);case"twitter.com":return new cd(z,L,b.screenName||null);case"custom":case"anonymous":return new wo(z,null);default:return new wo(z,w,L)}}(m)}class La{constructor(g,m,w){this.type=g,this.credential=m,this.auth=w}static _fromIdtoken(g,m){return new La("enroll",g,m)}static _fromMfaPendingCredential(g){return new La("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,w;if(g?.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return La._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(w=g.multiFactorSession)&&void 0!==w&&w.idToken)return La._fromIdtoken(g.multiFactorSession.idToken)}return null}}class dd{constructor(g,m,w){this.session=g,this.hints=m,this.signInResolver=w}static _fromError(g,m){const w=Qn(g),L=m.customData._serverResponse,z=(L.mfaInfo||[]).map(it=>pu._fromServerResponse(w,it));R(L.mfaPendingCredential,w,"internal-error");const Me=La._fromMfaPendingCredential(L.mfaPendingCredential);return new dd(Me,z,function(){var it=(0,d.Z)(function*(It){const Rt=yield It._process(w,Me);delete L.mfaInfo,delete L.mfaPendingCredential;const ln=Object.assign(Object.assign({},L),{idToken:Rt.idToken,refreshToken:Rt.refreshToken});switch(m.operationType){case"signIn":const en=yield vs._fromIdTokenResponse(w,m.operationType,ln);return yield w._updateCurrentUser(en.user),en;case"reauthenticate":return R(m.user,w,"internal-error"),vs._forOperation(m.user,m.operationType,ln);default:je(w,"internal-error")}});return function(It){return it.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,d.Z)(function*(){return m.signInResolver(g)})()}}class vu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>pu._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new vu(g)}getSession(){var g=this;return(0,d.Z)(function*(){return La._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var w=this;return(0,d.Z)(function*(){const L=g,z=yield w.getSession(),Me=yield sr(w.user,L._process(w.user.auth,z,m));return yield w.user._updateTokensIfNecessary(Me),w.user.reload()})()}unenroll(g){var m=this;return(0,d.Z)(function*(){const w="string"==typeof g?g:g.uid,L=yield m.user.getIdToken();try{const z=yield sr(m.user,function fd(b,g){return Ot(b,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(b,g))}(m.user.auth,{idToken:L,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Me})=>Me!==w),yield m.user._updateTokensIfNecessary(z),yield m.user.reload()}catch(z){throw z}})()}}const Dl=new WeakMap,Al="__sak";class So{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Al,"1"),this.storage.removeItem(Al),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const rc=(()=>{class b extends So{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Co(){const b=(0,U.z$)();return Pt(b)||Pe(b)}()&&function $i(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ai(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const L=this.storage.getItem(w),z=this.localCache[w];L!==z&&m(w,z,L)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((it,It,Rt)=>{this.notifyListeners(it,Rt)});const L=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const it=this.storage.getItem(L);if(m.newValue!==it)null!==m.newValue?this.storage.setItem(L,m.newValue):this.storage.removeItem(L);else if(this.localCache[L]===m.newValue&&!w)return}const z=()=>{const it=this.storage.getItem(L);!w&&this.localCache[L]===it||this.notifyListeners(L,it)},Me=this.storage.getItem(L);!function zn(){return(0,U.w1)()&&10===document.documentMode}()||Me===m.newValue||m.newValue===m.oldValue?z():setTimeout(z,10)}notifyListeners(m,w){this.localCache[m]=w;const L=this.listeners[m];if(L)for(const z of Array.from(L))z(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,L)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:L}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var L=()=>super._set,z=this;return(0,d.Z)(function*(){yield L().call(z,m,w),z.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,L=this;return(0,d.Z)(function*(){const z=yield w().call(L,m);return L.localCache[m]=JSON.stringify(z),z})()}_remove(m){var w=()=>super._remove,L=this;return(0,d.Z)(function*(){yield w().call(L,m),delete L.localCache[m]})()}}return b.type="LOCAL",b})(),oa=(()=>{class b extends So{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return b.type="SESSION",b})();let Sy=(()=>{class b{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(z=>z.isListeningto(m));if(w)return w;const L=new b(m);return this.receivers.push(L),L}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,d.Z)(function*(){const L=m,{eventId:z,eventType:Me,data:it}=L.data,It=w.handlersMap[Me];if(!It?.size)return;L.ports[0].postMessage({status:"ack",eventId:z,eventType:Me});const Rt=Array.from(It).map(function(){var en=(0,d.Z)(function*(Rr){return Rr(L.origin,it)});return function(Rr){return en.apply(this,arguments)}}()),ln=yield function rg(b){return Promise.all(b.map(function(){var g=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return g.apply(this,arguments)}}()))}(Rt);L.ports[0].postMessage({status:"done",eventId:z,eventType:Me,response:ln})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function io(b="",g=10){let m="";for(let w=0;w<g;w++)m+=Math.floor(10*Math.random());return b+m}class Fa{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,w=50){var L=this;return(0,d.Z)(function*(){const z=typeof MessageChannel<"u"?new MessageChannel:null;if(!z)throw new Error("connection_unavailable");let Me,it;return new Promise((It,Rt)=>{const ln=io("",20);z.port1.start();const en=setTimeout(()=>{Rt(new Error("unsupported_event"))},w);it={messageChannel:z,onMessage(Rr){const lo=Rr;if(lo.data.eventId===ln)switch(lo.data.status){case"ack":clearTimeout(en),Me=setTimeout(()=>{Rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Me),It(lo.data.response);break;default:clearTimeout(en),clearTimeout(Me),Rt(new Error("invalid_response"))}}},L.handlers.add(it),z.port1.addEventListener("message",it.onMessage),L.target.postMessage({eventType:g,eventId:ln,data:m},[z.port2])}).finally(()=>{it&&L.removeMessageHandler(it)})})()}}function Sr(){return window}function xo(){return typeof Sr().WorkerGlobalScope<"u"&&"function"==typeof Sr().importScripts}function la(){return(la=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ml="firebaseLocalStorageDb",ic=1,bu="firebaseLocalStorage",sc="fbase_key";class ua{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function oc(b,g){return b.transaction([bu],g?"readwrite":"readonly").objectStore(bu)}function ac(){const b=indexedDB.open(Ml,ic);return new Promise((g,m)=>{b.addEventListener("error",()=>{m(b.error)}),b.addEventListener("upgradeneeded",()=>{const w=b.result;try{w.createObjectStore(bu,{keyPath:sc})}catch(L){m(L)}}),b.addEventListener("success",(0,d.Z)(function*(){const w=b.result;w.objectStoreNames.contains(bu)?g(w):(w.close(),yield function os(){const b=indexedDB.deleteDatabase(Ml);return new ua(b).toPromise()}(),g(yield ac()))}))})}function Io(b,g,m){return ja.apply(this,arguments)}function ja(){return(ja=(0,d.Z)(function*(b,g,m){const w=oc(b,!0).put({[sc]:g,value:m});return new ua(w).toPromise()})).apply(this,arguments)}function ca(){return(ca=(0,d.Z)(function*(b,g){const m=oc(b,!1).get(g),w=yield new ua(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Ol(b,g){const m=oc(b,!0).delete(g);return new ua(m).toPromise()}const Ua=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield ac()),m.db})()}_withRetries(m){var w=this;return(0,d.Z)(function*(){let L=0;for(;;)try{const z=yield w._openDb();return yield m(z)}catch(z){if(L++>3)throw z;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return xo()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=Sy._getInstance(function _u(){return xo()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(L,z){return{keyProcessed:(yield m._poll()).includes(z.key)}});return function(L,z){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(L,z){return["keyChanged"]});return function(L,z){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var w,L;if(m.activeServiceWorker=yield function kl(){return la.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Fa(m.activeServiceWorker);const z=yield m.sender._send("ping",{},800);z&&null!==(w=z[0])&&void 0!==w&&w.fulfilled&&null!==(L=z[0])&&void 0!==L&&L.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function uf(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ac();return yield Io(m,Al,"1"),yield Ol(m,Al),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var L=this;return(0,d.Z)(function*(){return L._withPendingWrite((0,d.Z)(function*(){return yield L._withRetries(z=>Io(z,m,w)),L.localCache[m]=w,L.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,d.Z)(function*(){const L=yield w._withRetries(z=>function lc(b,g){return ca.apply(this,arguments)}(z,m));return w.localCache[m]=L,L})()}_remove(m){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(L=>Ol(L,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const w=yield m._withRetries(Me=>{const it=oc(Me,!1).getAll();return new ua(it).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const L=[],z=new Set;for(const{fbase_key:Me,value:it}of w)z.add(Me),JSON.stringify(m.localCache[Me])!==JSON.stringify(it)&&(m.notifyListeners(Me,it),L.push(Me));for(const Me of Object.keys(m.localCache))m.localCache[Me]&&!z.has(Me)&&(m.notifyListeners(Me,null),L.push(Me));return L})()}notifyListeners(m,w){this.localCache[m]=w;const L=this.listeners[m];if(L)for(const z of Array.from(L))z(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function so(){return(so=(0,d.Z)(function*(b){return(yield Ot(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Eu(b){return new Promise((g,m)=>{const w=document.createElement("script");w.setAttribute("src",b),w.onload=g,w.onerror=L=>{const z=Ce("internal-error");z.customData=L,m(z)},w.type="text/javascript",w.charset="UTF-8",function dc(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(w)})}function gd(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ba=1e12;class df{constructor(g){this.auth=g,this.counter=Ba,this._widgets=new Map}render(g,m){const w=this.counter;return this._widgets.set(w,new sg(g,this.auth.name,m||{})),this.counter++,w}reset(g){var m;const w=g||Ba;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Ba))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,d.Z)(function*(){var w;return null===(w=m._widgets.get(g||Ba))||void 0===w||w.execute(),""})()}}class sg{constructor(g,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const L="string"==typeof g?document.getElementById(g):g;R(L,"argument-error",{appName:m}),this.container=L,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function md(b){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<b;w++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hc=gd("rcb"),Va=new Ge(3e4,6e4);class Do{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Sr().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return R(function og(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Sr().grecaptcha):new Promise((w,L)=>{const z=Sr().setTimeout(()=>{L(Ce(g,"network-request-failed"))},Va.get());Sr()[hc]=()=>{Sr().clearTimeout(z),delete Sr()[hc];const it=Sr().grecaptcha;if(!it)return void L(Ce(g,"internal-error"));const It=it.render;it.render=(Rt,ln)=>{const en=It(Rt,ln);return this.counter++,en},this.hostLanguage=m,w(it)},Eu(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:hc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(z),L(Ce(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=Sr().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ag{load(g){return(0,d.Z)(function*(){return new df(g)})()}clearedOneInstance(){}}const Rl="recaptcha",Aw={theme:"light",type:"image"};class Cy{constructor(g,m=Object.assign({},Aw),w){this.parameters=m,this.type=Rl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Qn(w),this.isInvisible="invisible"===this.parameters.size,R(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const L="string"==typeof g?document.getElementById(g):g;R(L,this.auth,"argument-error"),this.container=L,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ag:new Do,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(m)||new Promise(z=>{const Me=it=>{it&&(g.tokenChangeListeners.delete(Me),z(it))};g.tokenChangeListeners.add(Me),g.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){R(!this.parameters.sitekey,this.auth,"argument-error"),R(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),R(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof g)g(m);else if("string"==typeof g){const w=Sr()[g];"function"==typeof w&&w(m)}}}assertNotDestroyed(){R(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){R(Z()&&!xo(),g.auth,"internal-error"),yield function ir(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function _s(b){return so.apply(this,arguments)}(g.auth);R(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return R(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hf{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=gi._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function yd(){return(yd=(0,d.Z)(function*(b,g,m){const w=Qn(b),L=yield Ha(w,g,(0,U.m9)(m));return new hf(L,z=>Pn(w,z))})).apply(this,arguments)}function fc(){return(fc=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b);yield Cl(!1,w,"phone");const L=yield Ha(w.auth,g,(0,U.m9)(m));return new hf(L,z=>Na(w,z))})).apply(this,arguments)}function ug(){return(ug=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b),L=yield Ha(w.auth,g,(0,U.m9)(m));return new hf(L,z=>Ku(w,z))})).apply(this,arguments)}function Ha(b,g,m){return cg.apply(this,arguments)}function cg(){return cg=(0,d.Z)(function*(b,g,m){var w;const L=yield m.verify();try{let z;if(R("string"==typeof L,b,"argument-error"),R(m.type===Rl,b,"argument-error"),z="string"==typeof g?{phoneNumber:g}:g,"session"in z){const Me=z.session;if("phoneNumber"in z)return R("enroll"===Me.type,b,"internal-error"),(yield function eg(b,g){return Ot(b,"POST","/v2/accounts/mfaEnrollment:start",wt(b,g))}(b,{idToken:Me.credential,phoneEnrollmentInfo:{phoneNumber:z.phoneNumber,recaptchaToken:L}})).phoneSessionInfo.sessionInfo;{R("signin"===Me.type,b,"internal-error");const it=(null===(w=z.multiFactorHint)||void 0===w?void 0:w.uid)||z.multiFactorUid;return R(it,b,"missing-multi-factor-info"),(yield function Tu(b,g){return Ot(b,"POST","/v2/accounts/mfaSignIn:start",wt(b,g))}(b,{mfaPendingCredential:Me.credential,mfaEnrollmentId:it,phoneSignInInfo:{recaptchaToken:L}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Me}=yield function Wu(b,g){return Xo.apply(this,arguments)}(b,{phoneNumber:z.phoneNumber,recaptchaToken:L});return Me}}finally{m._reset()}}),cg.apply(this,arguments)}function Or(){return(Or=(0,d.Z)(function*(b,g){yield fu((0,U.m9)(b),g)})).apply(this,arguments)}let Pl=(()=>{class b{constructor(m){this.providerId=b.PROVIDER_ID,this.auth=Qn(m)}verifyPhoneNumber(m,w){return Ha(this.auth,m,(0,U.m9)(w))}static credential(m,w){return gi._fromVerification(m,w)}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:L}=m;return w&&L?gi._fromTokenResponse(w,L):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function js(b,g){return g?He(g):(R(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class ff extends ar{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ma(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Ma(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Ma(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function Us(b){return Pa(b.auth,new ff(b),b.bypassAuthState)}function Ao(b){const{auth:g,user:m}=b;return R(m,g,"internal-error"),Zh(m,new ff(b),b.bypassAuthState)}function vd(b){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,d.Z)(function*(b){const{auth:g,user:m}=b;return R(m,g,"internal-error"),fu(m,new ff(b),b.bypassAuthState)})).apply(this,arguments)}class za{constructor(g,m,w,L,z=!1){this.auth=g,this.resolver=w,this.user=L,this.bypassAuthState=z,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,d.Z)(function*(w,L){g.pendingPromise={resolve:w,reject:L};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(z){g.reject(z)}});return function(w,L){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:L,postBody:z,tenantId:Me,error:it,type:It}=g;if(it)return void m.reject(it);const Rt={auth:m.auth,requestUri:w,sessionId:L,tenantId:Me||void 0,postBody:z||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(It)(Rt))}catch(ln){m.reject(ln)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Us;case"linkViaPopup":case"linkViaRedirect":return vd;case"reauthViaPopup":case"reauthViaRedirect":return Ao;default:je(this.auth,"internal-error")}}resolve(g){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pf=new Ge(2e3,1e4);function pc(){return(pc=(0,d.Z)(function*(b,g,m){const w=Qn(b);st(b,g,Eo);const L=js(w,m);return new Wn(w,"signInViaPopup",g,L).executeNotNull()})).apply(this,arguments)}function qi(){return(qi=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b);st(w.auth,g,Eo);const L=js(w.auth,m);return new Wn(w.auth,"reauthViaPopup",g,L,w).executeNotNull()})).apply(this,arguments)}function qa(){return(qa=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b);st(w.auth,g,Eo);const L=js(w.auth,m);return new Wn(w.auth,"linkViaPopup",g,L,w).executeNotNull()})).apply(this,arguments)}let Wn=(()=>{class b extends za{constructor(m,w,L,z,Me){super(m,w,z,Me),this.provider=L,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const w=yield m.execute();return R(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,d.Z)(function*(){he(1===m.filter.length,"Popup operations only handle one event");const w=io();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(L=>{m.reject(L)}),m.resolver._isIframeWebStorageSupported(m.auth,L=>{L||m.reject(Ce(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,L;this.pollId=null!==(L=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==L&&L.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,pf.get())};m()}}return b.currentPopupAction=null,b})();const bs="pendingRedirect",Vt=new Map;class pa extends za{constructor(g,m,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,d.Z)(function*(){let w=Vt.get(m.auth._key());if(!w){try{const z=(yield function Ts(b,g){return ko.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;w=()=>Promise.resolve(z)}catch(L){w=()=>Promise.reject(L)}Vt.set(m.auth._key(),w)}return m.bypassAuthState||Vt.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(w,g);if("unknown"!==g.type){if(g.eventId){const L=yield w.auth._redirectUserForId(g.eventId);if(L)return w.user=L,m().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ko(){return(ko=(0,d.Z)(function*(b,g){const m=Ll(g),w=Su(b);if(!(yield w._isAvailable()))return!1;const L="true"===(yield w._get(m));return yield w._remove(m),L})).apply(this,arguments)}function Nl(b,g){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,d.Z)(function*(b,g){return Su(b)._set(Ll(g),"true")})).apply(this,arguments)}function wu(b,g){Vt.set(b._key(),g)}function Su(b){return He(b._redirectPersistence)}function Ll(b){return ce(bs,b.config.apiKey,b.name)}function Td(b,g,m){return function gc(b,g,m){return k.apply(this,arguments)}(b,g,m)}function k(){return(k=(0,d.Z)(function*(b,g,m){const w=Qn(b);st(b,g,Eo),yield w._initializationPromise;const L=js(w,m);return yield Nl(L,w),L._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function M(b,g,m){return function H(b,g,m){return le.apply(this,arguments)}(b,g,m)}function le(){return(le=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b);st(w.auth,g,Eo),yield w.auth._initializationPromise;const L=js(w.auth,m);yield Nl(L,w.auth);const z=yield rn(w);return L._openRedirect(w.auth,g,"reauthViaRedirect",z)})).apply(this,arguments)}function Re(b,g,m){return function Xe(b,g,m){return ht.apply(this,arguments)}(b,g,m)}function ht(){return(ht=(0,d.Z)(function*(b,g,m){const w=(0,U.m9)(b);st(w.auth,g,Eo),yield w.auth._initializationPromise;const L=js(w.auth,m);yield Cl(!1,w,g.providerId),yield Nl(L,w.auth);const z=yield rn(w);return L._openRedirect(w.auth,g,"linkViaRedirect",z)})).apply(this,arguments)}function $t(){return($t=(0,d.Z)(function*(b,g){return yield Qn(b)._initializationPromise,Yt(b,g,!1)})).apply(this,arguments)}function Yt(b,g){return kn.apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(b,g,m=!1){const w=Qn(b),L=js(w,g),Me=yield new pa(w,L,m).execute();return Me&&!m&&(delete Me.user._redirectEventId,yield w._persistUserIfCurrent(Me.user),yield w._setRedirectUser(null,g)),Me})).apply(this,arguments)}function rn(b){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,d.Z)(function*(b){const g=io(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class Mo{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(m=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function bi(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wa(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var w;if(g.error&&!Wa(g)){const L=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Ce(this.auth,L))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const w=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cu(g))}saveEventToCache(g){this.cachedEventUids.add(Cu(g)),this.lastProcessedEventTime=Date.now()}}function Cu(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function Wa({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===g?.code}function Ki(b){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(b,g={}){return Ot(b,"GET","/v1/projects",g)})).apply(this,arguments)}const hg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zi=/^https?/;function fg(){return(fg=(0,d.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Ki(b);for(const m of g)try{if(Cr(m))return}catch{}je(b,"unauthorized-domain")})).apply(this,arguments)}function Cr(b){const g=X(),{protocol:m,hostname:w}=new URL(g);if(b.startsWith("chrome-extension://")){const Me=new URL(b);return""===Me.hostname&&""===w?"chrome-extension:"===m&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&Me.hostname===w}if(!Zi.test(m))return!1;if(hg.test(b))return w===b;const L=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+L+"|"+L+")$","i").test(w)}const Fl=new Ge(3e4,6e4);function xu(){const b=Sr().___jsl;if(b?.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let m=0;m<b.CP.length;m++)b.CP[m]=null}let Ti=null;const p0=new Ge(5e3,15e3),kw="__/auth/iframe",jl="emulator/auth/iframe",yc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},as=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ul(b){const g=b.config;R(g.authDomain,b,"auth-domain-config-required");const m=g.emulator?Be(g,jl):`https://${b.config.authDomain}/${kw}`,w={apiKey:g.apiKey,appName:b.name,v:de.SDK_VERSION},L=as.get(b.config.apiHost);L&&(w.eid=L);const z=b._getFrameworks();return z.length&&(w.fw=z.join(",")),`${m}?${(0,U.xO)(w).slice(1)}`}function Ka(){return Ka=(0,d.Z)(function*(b){const g=yield function mc(b){return Ti=Ti||function Oo(b){return new Promise((g,m)=>{var w,L,z;function Me(){xu(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{xu(),m(Ce(b,"network-request-failed"))},timeout:Fl.get()})}if(null!==(L=null===(w=Sr().gapi)||void 0===w?void 0:w.iframes)&&void 0!==L&&L.Iframe)g(gapi.iframes.getContext());else{if(null===(z=Sr().gapi)||void 0===z||!z.load){const it=gd("iframefcb");return Sr()[it]=()=>{gapi.load?Me():m(Ce(b,"network-request-failed"))},Eu(`https://apis.google.com/js/api.js?onload=${it}`).catch(It=>m(It))}Me()}}).catch(g=>{throw Ti=null,g})}(b),Ti}(b),m=Sr().gapi;return R(m,b,"internal-error"),g.open({where:document.body,url:Ul(b),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yc,dontclear:!0},w=>new Promise(function(){var L=(0,d.Z)(function*(z,Me){yield w.restyle({setHideOnLeave:!1});const it=Ce(b,"network-request-failed"),It=Sr().setTimeout(()=>{Me(it)},p0.get());function Rt(){Sr().clearTimeout(It),z(w)}w.ping(Rt).then(Rt,()=>{Me(it)})});return function(z,Me){return L.apply(this,arguments)}}()))}),Ka.apply(this,arguments)}const mf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pg=500,Ay=600,Ro="_blank",gg="http://localhost";class _n{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Bl="__/auth/handler",g0="emulator/auth/handler";function mg(b,g,m,w,L,z){R(b.config.authDomain,b,"auth-domain-config-required"),R(b.config.apiKey,b,"invalid-api-key");const Me={apiKey:b.config.apiKey,appName:b.name,authType:m,redirectUrl:w,v:de.SDK_VERSION,eventId:L};if(g instanceof Eo){g.setDefaultLanguage(b.languageCode),Me.providerId=g.providerId||"",(0,U.xb)(g.getCustomParameters())||(Me.customParameters=JSON.stringify(g.getCustomParameters()));for(const[It,Rt]of Object.entries(z||{}))Me[It]=Rt}if(g instanceof wl){const It=g.getScopes().filter(Rt=>""!==Rt);It.length>0&&(Me.scopes=It.join(","))}b.tenantId&&(Me.tid=b.tenantId);const it=Me;for(const It of Object.keys(it))void 0===it[It]&&delete it[It];return`${function ga({config:b}){return b.emulator?Be(b,g0):`https://${b.authDomain}/${Bl}`}(b)}?${(0,U.xO)(it).slice(1)}`}const wd="webStorageSupport",yg=class My{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oa,this._completeRedirectFn=Yt,this._overrideRedirectResult=wu}_openPopup(g,m,w,L){var z=this;return(0,d.Z)(function*(){var Me;he(null===(Me=z.eventManagers[g._key()])||void 0===Me?void 0:Me.manager,"_initialize() not called before _openPopup()");const it=mg(g,m,w,X(),L);return function Ed(b,g,m,w=pg,L=Ay){const z=Math.max((window.screen.availHeight-L)/2,0).toString(),Me=Math.max((window.screen.availWidth-w)/2,0).toString();let it="";const It=Object.assign(Object.assign({},mf),{width:w.toString(),height:L.toString(),top:z,left:Me}),Rt=(0,U.z$)().toLowerCase();m&&(it=Mt(Rt)?Ro:m),ze(Rt)&&(g=g||gg,It.scrollbars="yes");const ln=Object.entries(It).reduce((Rr,[lo,il])=>`${Rr}${lo}=${il},`,"");if(function Kt(b=(0,U.z$)()){var g;return Pe(b)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(Rt)&&"_self"!==it)return function ky(b,g){const m=document.createElement("a");m.href=b,m.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(g||"",it),new _n(null);const en=window.open(g||"",it,ln);R(en,b,"popup-blocked");try{en.focus()}catch{}return new _n(en)}(g,it,io())})()}_openRedirect(g,m,w,L){var z=this;return(0,d.Z)(function*(){return yield z._originValidation(g),function aa(b){Sr().location.href=b}(mg(g,m,w,X(),L)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:L,promise:z}=this.eventManagers[m];return L?Promise.resolve(L):(he(z,"If manager is not set, promise should be"),z)}const w=this.initAndGetManager(g);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(g){var m=this;return(0,d.Z)(function*(){const w=yield function Dy(b){return Ka.apply(this,arguments)}(g),L=new Mo(g);return w.register("authEvent",z=>(R(z?.authEvent,g,"invalid-auth-event"),{status:L.onEvent(z.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:L},m.iframes[g._key()]=w,L})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(wd,{type:wd},L=>{var z;const Me=null===(z=L?.[0])||void 0===z?void 0:z[wd];void 0!==Me&&m(!!Me),je(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function gf(b){return fg.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ai()||Pt()||Pe()}};class Vs{constructor(g){this.factorId=g}_process(g,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,w);case"signin":return this._finalizeSignIn(g,m.credential);default:return V("unexpected MultiFactorSessionType")}}}class Vr extends Vs{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Vr(g)}_finalizeEnroll(g,m,w){return function hd(b,g){return Ot(b,"POST","/v2/accounts/mfaEnrollment:finalize",wt(b,g))}(g,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function ig(b,g){return Ot(b,"POST","/v2/accounts/mfaSignIn:finalize",wt(b,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Za=(()=>{class b{constructor(){}static assertion(m){return Vr._fromCredential(m)}}return b.FACTOR_ID="phone",b})();var Iu="@firebase/auth";class vc{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(w=>{g(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);m&&(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ls(){return window}(0,U.Pz)("authIdTokenMaxAge"),function Oy(b){(0,de._registerComponent)(new we.wA("auth",(g,{options:m})=>{const w=g.getProvider("app").getImmediate(),L=g.getProvider("heartbeat"),{apiKey:z,authDomain:Me}=w.options;return((it,It)=>{R(z&&!z.includes(":"),"invalid-api-key",{appName:it.name}),R(!Me?.includes(":"),"argument-error",{appName:it.name});const Rt={apiKey:z,authDomain:Me,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hi(b)},ln=new _o(it,It,Rt);return function ge(b,g){const m=g?.persistence||[],w=(Array.isArray(m)?m:[m]).map(He);g?.errorMap&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(w,g?.popupRedirectResolver)}(ln,m),ln})(w,L)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,w)=>{g.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new we.wA("auth-internal",g=>{const m=Qn(g.getProvider("auth").getImmediate());return new vc(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(Iu,"0.21.5",function vg(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,de.registerVersion)(Iu,"0.21.5","esm2017")}("Browser");const Ln=2e3;function Cd(){return Cd=(0,d.Z)(function*(b,g,m){var w;const{BuildInfo:L}=ls();he(g.sessionId,"AuthEvent did not contain a session ID");const z=yield function Du(b){return xd.apply(this,arguments)}(g.sessionId),Me={};return Pe()?Me.ibi=L.packageName:$()?Me.apn=L.packageName:je(b,"operation-not-supported-in-this-environment"),L.displayName&&(Me.appDisplayName=L.displayName),Me.sessionId=z,mg(b,m,g.type,void 0,null!==(w=g.eventId)&&void 0!==w?w:void 0,Me)}),Cd.apply(this,arguments)}function Eg(){return(Eg=(0,d.Z)(function*(b){const{BuildInfo:g}=ls(),m={};Pe()?m.iosBundleId=g.packageName:$()?m.androidPackageName=g.packageName:je(b,"operation-not-supported-in-this-environment"),yield Ki(b,m)})).apply(this,arguments)}function Sg(){return(Sg=(0,d.Z)(function*(b,g,m){const{cordova:w}=ls();let L=()=>{};try{yield new Promise((z,Me)=>{let it=null;function It(){var en;z();const Rr=null===(en=w.plugins.browsertab)||void 0===en?void 0:en.close;"function"==typeof Rr&&Rr(),"function"==typeof m?.close&&m.close()}function Rt(){it||(it=window.setTimeout(()=>{Me(Ce(b,"redirect-cancelled-by-user"))},Ln))}function ln(){"visible"===document?.visibilityState&&Rt()}g.addPassiveListener(It),document.addEventListener("resume",Rt,!1),$()&&document.addEventListener("visibilitychange",ln,!1),L=()=>{g.removePassiveListener(It),document.removeEventListener("resume",Rt,!1),document.removeEventListener("visibilitychange",ln,!1),it&&window.clearTimeout(it)}})}finally{L()}})).apply(this,arguments)}function xd(){return(xd=(0,d.Z)(function*(b){const g=function Xa(b){if(he(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const g=new ArrayBuffer(b.length),m=new Uint8Array(g);for(let w=0;w<b.length;w++)m[w]=b.charCodeAt(w);return m}(b),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(L=>L.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Cg=20;class yf extends Mo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,d.Z)(function*(){yield g.initPromise})()}}function xg(b){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,d.Z)(function*(b){const g=yield bc()._get(Dg(b));return g&&(yield bc()._remove(Dg(b))),g})).apply(this,arguments)}function y0(){const b=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<Cg;m++){const w=Math.floor(Math.random()*g.length);b.push(g.charAt(w))}return b.join("")}function bc(){return He(rc)}function Dg(b){return ce("authEvent",b.config.apiKey,b.name)}function Id(b){if(!b?.includes("?"))return{};const[g,...m]=b.split("?");return(0,U.zd)(m.join("?"))}const bf=class Mg{constructor(){this._redirectPersistence=oa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yt,this._overrideRedirectResult=wu}_initialize(g){var m=this;return(0,d.Z)(function*(){const w=g._key();let L=m.eventManagers.get(w);return L||(L=new yf(g),m.eventManagers.set(w,L),m.attachCallbackListeners(g,L)),L})()}_openPopup(g){je(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,w,L){var z=this;return(0,d.Z)(function*(){!function _c(b){var g,m,w,L,z,Me,it,It,Rt,ln;const en=ls();R("function"==typeof(null===(g=en?.universalLinks)||void 0===g?void 0:g.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),R(typeof(null===(m=en?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),R("function"==typeof(null===(z=null===(L=null===(w=en?.cordova)||void 0===w?void 0:w.plugins)||void 0===L?void 0:L.browsertab)||void 0===z?void 0:z.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),R("function"==typeof(null===(It=null===(it=null===(Me=en?.cordova)||void 0===Me?void 0:Me.plugins)||void 0===it?void 0:it.browsertab)||void 0===It?void 0:It.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),R("function"==typeof(null===(ln=null===(Rt=en?.cordova)||void 0===Rt?void 0:Rt.InAppBrowser)||void 0===ln?void 0:ln.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Me=yield z._initialize(g);yield Me.initialized(),Me.resetRedirect(),function bd(){Vt.clear()}(),yield z._originValidation(g);const it=function vf(b,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:y0(),postBody:null,tenantId:b.tenantId,error:Ce(b,"no-auth-event")}}(g,w,L);yield function _f(b,g){return bc()._set(Dg(b),g)}(g,it);const It=yield function Sd(b,g,m){return Cd.apply(this,arguments)}(g,it,m),Rt=yield function Qa(b){const{cordova:g}=ls();return new Promise(m=>{g.plugins.browsertab.isAvailable(w=>{let L=null;w?g.plugins.browsertab.openUrl(b):L=g.InAppBrowser.open(b,function Et(b=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),m(L)})})}(It);return function wg(b,g,m){return Sg.apply(this,arguments)}(g,Me,Rt)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ya(b){return Eg.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:w,handleOpenURL:L,BuildInfo:z}=ls(),Me=setTimeout((0,d.Z)(function*(){yield xg(g),m.onEvent(Og())}),500),it=function(){var ln=(0,d.Z)(function*(en){clearTimeout(Me);const Rr=yield xg(g);let lo=null;Rr&&en?.url&&(lo=function m0(b,g){var m,w;const L=function Ag(b){const g=Id(b),m=g.link?decodeURIComponent(g.link):void 0,w=Id(m).link,L=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Id(L).link||L||w||m||b}(g);if(L.includes("/__/auth/callback")){const z=Id(L),Me=z.firebaseError?function Ny(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(z.firebaseError)):null,it=null===(w=null===(m=Me?.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],It=it?Ce(it):null;return It?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:It,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:L,postBody:null}}return null}(Rr,en.url)),m.onEvent(lo||Og())});return function(Rr){return ln.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,it);const It=L,Rt=`${z.packageName.toLowerCase()}://`;ls().handleOpenURL=function(){var ln=(0,d.Z)(function*(en){if(en.toLowerCase().startsWith(Rt)&&it({url:en}),"function"==typeof It)try{It(en)}catch(Rr){console.error(Rr)}});return function(en){return ln.apply(this,arguments)}}()}};function Og(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}const Rg=1e3;function Tc(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function el(b=(0,U.z$)()){return!("file:"!==Tc()&&"ionic:"!==Tc()&&"capacitor:"!==Tc()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ad(){try{const b=self.localStorage,g=io();if(b)return b.setItem(g,"1"),b.removeItem(g),!function Ng(b=(0,U.z$)()){return function Au(){return(0,U.w1)()&&11===document?.documentMode}()||function Pg(b=(0,U.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,U.hl)()}catch{return tl()&&(0,U.hl)()}return!1}function tl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ec(){return(function Mw(){return"http:"===Tc()||"https:"===Tc()}()||(0,U.ru)()||el())&&!function Dd(){return(0,U.b$)()||(0,U.UG)()}()&&Ad()&&!tl()}function kd(){return el()&&typeof document<"u"}function Md(){return(Md=(0,d.Z)(function*(){return!!kd()&&new Promise(b=>{const g=setTimeout(()=>{b(!1)},Rg);document.addEventListener("deviceready",()=>{clearTimeout(g),b(!0)})})})).apply(this,arguments)}const ti={LOCAL:"local",NONE:"none",SESSION:"session"},nl=R,Tf="persistence";function Ef(b){return wf.apply(this,arguments)}function wf(){return(wf=(0,d.Z)(function*(b){yield b._initializationPromise;const g=oo(),m=ce(Tf,b.config.apiKey,b.name);g&&g.setItem(m,b._getPersistence())})).apply(this,arguments)}function oo(){var b;try{return(null===(b=function Od(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const Sf=R;class Ei{constructor(){this.browserResolver=He(yg),this.cordovaResolver=He(bf),this.underlyingResolver=null,this._redirectPersistence=oa,this._completeRedirectFn=Yt,this._overrideRedirectResult=wu}_initialize(g){var m=this;return(0,d.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,w,L){var z=this;return(0,d.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._openPopup(g,m,w,L)})()}_openRedirect(g,m,w,L){var z=this;return(0,d.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._openRedirect(g,m,w,L)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return kd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,d.Z)(function*(){if(g.underlyingResolver)return;const m=yield function Lg(){return Md.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function ku(b){return b.unwrap()}function Fg(b){return b0(b)}function b0(b){const{_tokenResponse:g}=b instanceof U.ZR?b.customData:b;if(!g)return null;if(!(b instanceof U.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Pl.credentialFromResult(b);const m=g.providerId;if(!m||m===be.PASSWORD)return null;let w;switch(m){case be.GOOGLE:w=zp;break;case be.FACEBOOK:w=ed;break;case be.GITHUB:w=qh;break;case be.TWITTER:w=Ey;break;default:const{oauthIdToken:L,oauthAccessToken:z,oauthTokenSecret:Me,pendingToken:it,nonce:It}=g;return z||Me||L||it?it?m.startsWith("saml.")?Sl._create(m,it):ts._fromParams({providerId:m,signInMethod:m,pendingToken:it,idToken:L,accessToken:z}):new uu(m).credential({idToken:L,accessToken:z,rawNonce:It}):null}return b instanceof U.ZR?w.credentialFromError(b):w.credentialFromResult(b)}function Es(b,g){return g.catch(m=>{throw m instanceof U.ZR&&function _0(b,g){var m;const w=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Fy(b,function _i(b,g){var m;const w=(0,U.m9)(b),L=g;return R(g.customData.operationType,w,"argument-error"),R(null===(m=L.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),dd._fromError(w,L)}(b,g));else if(w){const L=b0(g),z=g;L&&(z.credential=L,z.tenantId=w.tenantId||void 0,z.email=w.email||void 0,z.phoneNumber=w.phoneNumber||void 0)}}(b,m),m}).then(m=>{const L=m.user;return{operationType:m.operationType,credential:Fg(m),additionalUserInfo:Qp(m),user:ao.getOrCreate(L)}})}function Pd(b,g){return jg.apply(this,arguments)}function jg(){return(jg=(0,d.Z)(function*(b,g){const m=yield g;return{verificationId:m.verificationId,confirm:w=>Es(b,m.confirm(w))}})).apply(this,arguments)}class Fy{constructor(g,m){this.resolver=m,this.auth=function rl(b){return b.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return Es(ku(this.auth),this.resolver.resolveSignIn(g))}}class ao{constructor(g){this._delegate=g,this.multiFactor=function tg(b){const g=(0,U.m9)(b);return Dl.has(g)||Dl.set(g,vu._fromUser(g)),Dl.get(g)}(g)}static getOrCreate(g){return ao.USER_MAP.has(g)||ao.USER_MAP.set(g,new ao(g)),ao.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,d.Z)(function*(){return Es(m.auth,Na(m._delegate,g))})()}linkWithPhoneNumber(g,m){var w=this;return(0,d.Z)(function*(){return Pd(w.auth,function xy(b,g,m){return fc.apply(this,arguments)}(w._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,d.Z)(function*(){return Es(m.auth,function _d(b,g,m){return qa.apply(this,arguments)}(m._delegate,g,Ei))})()}linkWithRedirect(g){var m=this;return(0,d.Z)(function*(){return yield Ef(Qn(m.auth)),Re(m._delegate,g,Ei)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,d.Z)(function*(){return Es(m.auth,Ku(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return Pd(this.auth,function lg(b,g,m){return ug.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return Es(this.auth,function Iy(b,g,m){return qi.apply(this,arguments)}(this._delegate,g,Ei))}reauthenticateWithRedirect(g){var m=this;return(0,d.Z)(function*(){return yield Ef(Qn(m.auth)),M(m._delegate,g,Ei)})()}sendEmailVerification(g){return function ld(b,g){return ei.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,d.Z)(function*(){return yield function Kh(b,g){return hu.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function nf(b,g){return tc((0,U.m9)(b),g,null)}(this._delegate,g)}updatePassword(g){return function ec(b,g){return tc((0,U.m9)(b),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function f0(b,g){return Or.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function tf(b,g){return ud.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function Fs(b,g,m){return mu.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ao.USER_MAP=new WeakMap;const Mu=R;let Ug=(()=>{class b{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:L}=m.options;Mu(L,"invalid-api-key",{appName:m.name}),Mu(L,"invalid-api-key",{appName:m.name});const z=typeof window<"u"?Ei:void 0;this._delegate=w.initialize({options:{persistence:jy(L,m.name),popupRedirectResolver:z}}),this._delegate._updateErrorMap(ct),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ao.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function Gi(b,g,m){const w=Qn(b);R(w._canInitEmulator,w,"emulator-config-failed"),R(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const L=!!m?.disableWarnings,z=En(g),{host:Me,port:it}=function or(b){const g=En(b),m=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",L=/^(\[[^\]]+\])(:|$)/.exec(w);if(L){const z=L[1];return{host:z,port:Vn(w.substr(z.length+1))}}{const[z,Me]=w.split(":");return{host:z,port:Vn(Me)}}}(g);w.config.emulator={url:`${z}//${Me}${null===it?"":`:${it}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Me,port:it,protocol:z.replace(":",""),options:Object.freeze({disableWarnings:L})}),L||function Ns(){function b(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,m,w)}applyActionCode(m){return function id(b,g){return sd.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Qu(this._delegate,m)}confirmPasswordReset(m,w){return function Yu(b,g,m){return Qh.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var L=this;return(0,d.Z)(function*(){return Es(L._delegate,function mt(b,g,m){return Nn.apply(this,arguments)}(L._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function ef(b,g){return Kp.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Xh(b,g){return"EMAIL_SIGNIN"===lu.parseLink(g)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,d.Z)(function*(){Mu(Ec(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function Ut(b,g){return $t.apply(this,arguments)}(m._delegate,Ei);return w?Es(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Vl(b,g){Qn(b)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,w,L){const{next:z,error:Me,complete:it}=Bg(m,w,L);return this._delegate.onAuthStateChanged(z,Me,it)}onIdTokenChanged(m,w,L){const{next:z,error:Me,complete:it}=Bg(m,w,L);return this._delegate.onIdTokenChanged(z,Me,it)}sendSignInLinkToEmail(m,w){return function Wp(b,g,m){return Jr.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function Zu(b,g,m){return hn.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,d.Z)(function*(){let L;switch(function Ly(b,g){nl(Object.values(ti).includes(g),b,"invalid-persistence-type"),(0,U.b$)()?nl(g!==ti.SESSION,b,"unsupported-persistence-type"):(0,U.UG)()?nl(g===ti.NONE,b,"unsupported-persistence-type"):tl()?nl(g===ti.NONE||g===ti.LOCAL&&(0,U.hl)(),b,"unsupported-persistence-type"):nl(g===ti.NONE||Ad(),b,"unsupported-persistence-type")}(w._delegate,m),m){case ti.SESSION:L=oa;break;case ti.LOCAL:L=(yield He(Ua)._isAvailable())?Ua:rc;break;case ti.NONE:L=me;break;default:return je("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(L)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Es(this._delegate,function Wh(b){return ea.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Es(this._delegate,Pn(this._delegate,m))}signInWithCustomToken(m){return Es(this._delegate,function Yh(b,g){return ia.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return Es(this._delegate,function vr(b,g,m){return Pn((0,U.m9)(b),zh.credential(g,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return Es(this._delegate,function Ju(b,g,m){return is.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return Pd(this._delegate,function fa(b,g,m){return yd.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,d.Z)(function*(){return Mu(Ec(),w._delegate,"operation-not-supported-in-this-environment"),Es(w._delegate,function dg(b,g,m){return pc.apply(this,arguments)}(w._delegate,m,Ei))})()}signInWithRedirect(m){var w=this;return(0,d.Z)(function*(){return Mu(Ec(),w._delegate,"operation-not-supported-in-this-environment"),yield Ef(w._delegate),Td(w._delegate,m,Ei)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function od(b,g){return ad.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=ti,b})();function Bg(b,g,m){let w=b;"function"!=typeof b&&({next:w,error:g,complete:m}=b);const L=w;return{next:Me=>L(Me&&ao.getOrCreate(Me)),error:g,complete:m}}function jy(b,g){const m=function Rd(b,g){const m=oo();if(!m)return[];const w=ce(Tf,b,g);switch(m.getItem(w)){case ti.NONE:return[me];case ti.LOCAL:return[Ua,oa];case ti.SESSION:return[oa];default:return[]}}(b,g);if(typeof self<"u"&&!m.includes(Ua)&&m.push(Ua),typeof window<"u")for(const w of[rc,oa])m.includes(w)||m.push(w);return m.includes(me)||m.push(me),m}class ma{constructor(){this.providerId="phone",this._delegate=new Pl(ku(ae.Z.auth()))}static credential(g,m){return Pl.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}ma.PHONE_SIGN_IN_METHOD=Pl.PHONE_SIGN_IN_METHOD,ma.PROVIDER_ID=Pl.PROVIDER_ID;const T0=R;class E0{constructor(g,m,w=ae.Z.app()){var L;T0(null===(L=w.options)||void 0===L?void 0:L.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Cy(g,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function S0(b){b.INTERNAL.registerComponent(new we.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),w=g.getProvider("auth");return new Ug(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y_EMAIL_SIGNIN,PASSWORD_RESET:Y_PASSWORD_RESET,RECOVER_EMAIL:Y_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Y_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Y_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Y_VERIFY_EMAIL}},EmailAuthProvider:zh,FacebookAuthProvider:ed,GithubAuthProvider:qh,GoogleAuthProvider:zp,OAuthProvider:uu,SAMLAuthProvider:to,PhoneAuthProvider:ma,PhoneMultiFactorGenerator:Za,RecaptchaVerifier:E0,TwitterAuthProvider:Ey,Auth:Ug,AuthCredential:ar,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.3.5")}(ae.Z)},8766:(lt,ke,B)=>{"use strict";B.d(ke,{Lj:()=>je,X3:()=>$e});var d=B(5861);const ae=(R,V)=>V.some(he=>R instanceof he);let U,de;const we=new WeakMap,Ee=new WeakMap,be=new WeakMap,K=new WeakMap,ne=new WeakMap;let Oe={get(R,V,he){if(R instanceof IDBTransaction){if("done"===V)return Ee.get(R);if("objectStoreNames"===V)return R.objectStoreNames||be.get(R);if("store"===V)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return Se(R[V])},set:(R,V,he)=>(R[V]=he,!0),has:(R,V)=>R instanceof IDBTransaction&&("done"===V||"store"===V)||V in R};function Ue(R){return"function"==typeof R?function yt(R){return R!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(R)?function(...V){return R.apply(De(this),V),Se(we.get(this))}:function(...V){return Se(R.apply(De(this),V))}:function(V,...he){const Le=R.call(De(this),V,...he);return be.set(Le,V.sort?V.sort():[V]),Se(Le)}}(R):(R instanceof IDBTransaction&&function Ke(R){if(Ee.has(R))return;const V=new Promise((he,Le)=>{const He=()=>{R.removeEventListener("complete",We),R.removeEventListener("error",ge),R.removeEventListener("abort",ge)},We=()=>{he(),He()},ge=()=>{Le(R.error||new DOMException("AbortError","AbortError")),He()};R.addEventListener("complete",We),R.addEventListener("error",ge),R.addEventListener("abort",ge)});Ee.set(R,V)}(R),ae(R,function te(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(R,Oe):R)}function Se(R){if(R instanceof IDBRequest)return function Y(R){const V=new Promise((he,Le)=>{const He=()=>{R.removeEventListener("success",We),R.removeEventListener("error",ge)},We=()=>{he(Se(R.result)),He()},ge=()=>{Le(R.error),He()};R.addEventListener("success",We),R.addEventListener("error",ge)});return V.then(he=>{he instanceof IDBCursor&&we.set(he,R)}).catch(()=>{}),ne.set(V,R),V}(R);if(K.has(R))return K.get(R);const V=Ue(R);return V!==R&&(K.set(R,V),ne.set(V,R)),V}const De=R=>ne.get(R);function $e(R,V,{blocked:he,upgrade:Le,blocking:He,terminated:We}={}){const ge=indexedDB.open(R,V),X=Se(ge);return Le&&ge.addEventListener("upgradeneeded",Z=>{Le(Se(ge.result),Z.oldVersion,Z.newVersion,Se(ge.transaction))}),he&&ge.addEventListener("blocked",()=>he()),X.then(Z=>{We&&Z.addEventListener("close",()=>We()),He&&Z.addEventListener("versionchange",()=>He())}).catch(()=>{}),X}function je(R,{blocked:V}={}){const he=indexedDB.deleteDatabase(R);return V&&he.addEventListener("blocked",()=>V()),Se(he).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],Ye=["put","add","delete","clear"],st=new Map;function Ze(R,V){if(!(R instanceof IDBDatabase)||V in R||"string"!=typeof V)return;if(st.get(V))return st.get(V);const he=V.replace(/FromIndex$/,""),Le=V!==he,He=Ye.includes(he);if(!(he in(Le?IDBIndex:IDBObjectStore).prototype)||!He&&!Ce.includes(he))return;const We=function(){var ge=(0,d.Z)(function*(X,...Z){const re=this.transaction(X,He?"readwrite":"readonly");let ve=re.store;return Le&&(ve=ve.index(Z.shift())),(yield Promise.all([ve[he](...Z),He&&re.done]))[0]});return function(Z){return ge.apply(this,arguments)}}();return st.set(V,We),We}!function ct(R){Oe=R(Oe)}(R=>({...R,get:(V,he,Le)=>Ze(V,he)||R.get(V,he,Le),has:(V,he)=>!!Ze(V,he)||R.has(V,he)}))},5861:(lt,ke,B)=>{"use strict";function d(U,de,te,oe,we,Ee,be){try{var K=U[Ee](be),ne=K.value}catch(Y){return void te(Y)}K.done?de(ne):Promise.resolve(ne).then(oe,we)}function ae(U){return function(){var de=this,te=arguments;return new Promise(function(oe,we){var Ee=U.apply(de,te);function be(ne){d(Ee,oe,we,be,K,"next",ne)}function K(ne){d(Ee,oe,we,be,K,"throw",ne)}be(void 0)})}}B.d(ke,{Z:()=>ae})},3681:lt=>{"use strict";lt.exports=JSON.parse('{"name":"@ffmpeg/ffmpeg","version":"0.11.6","description":"FFmpeg WebAssembly version","main":"src/index.js","types":"src/index.d.ts","directories":{"example":"examples"},"scripts":{"start":"node scripts/server.js","start:worker":"node scripts/worker-server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","build:worker":"rimraf dist && webpack --config scripts/webpack.config.worker.prod.js","prepublishOnly":"npm run build","lint":"eslint src","wait":"rimraf dist && wait-on http://localhost:3000/dist/ffmpeg.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:ffmpeg test:node:all","test:node":"node node_modules/mocha/bin/_mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser":"mocha-headless-chrome -a allow-file-access-from-files -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:ffmpeg":"npm run test:browser -- -f ./tests/ffmpeg.test.html"},"browser":{"./src/node/index.js":"./src/browser/index.js"},"repository":{"type":"git","url":"git+https://github.com/ffmpegwasm/ffmpeg.wasm.git"},"keywords":["ffmpeg","WebAssembly","video"],"author":"Jerome Wu <jeromewus@gmail.com>","license":"MIT","bugs":{"url":"https://github.com/ffmpegwasm/ffmpeg.wasm/issues"},"engines":{"node":">=12.16.1"},"homepage":"https://github.com/ffmpegwasm/ffmpeg.wasm#readme","dependencies":{"is-url":"^1.2.4","node-fetch":"^2.6.1","regenerator-runtime":"^0.13.7","resolve-url":"^0.2.1"},"devDependencies":{"@babel/core":"^7.12.3","@babel/preset-env":"^7.12.1","@ffmpeg/core":"^0.11.0","@types/emscripten":"^1.39.4","babel-eslint":"^10.1.0","babel-loader":"^8.1.0","chai":"^4.2.0","cors":"^2.8.5","eslint":"^7.12.1","eslint-config-airbnb-base":"^14.1.0","eslint-plugin-import":"^2.22.1","express":"^4.17.1","mocha":"^8.2.1","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","wait-on":"^5.3.0","webpack":"^5.3.2","webpack-cli":"^4.1.0","webpack-dev-middleware":"^4.0.0"}}')}},lt=>{lt(lt.s=4146)}]);